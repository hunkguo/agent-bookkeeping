self["webpackHotUpdate_N_E"]("pages/agent_bookkeeping",{

/***/ "./pages/agent_bookkeeping.js":
/*!************************************!*\
  !*** ./pages/agent_bookkeeping.js ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ AgentBookkeeping; }
/* harmony export */ });
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ "./node_modules/react/jsx-dev-runtime.js");
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_hearder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/hearder */ "./pages/components/hearder.js");
/* harmony import */ var _components_footer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/footer */ "./pages/components/footer.js");
/* harmony import */ var particles_bg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! particles-bg */ "./node_modules/particles-bg/dist/index.es.js");
/* module decorator */ module = __webpack_require__.hmd(module);


var _jsxFileName = "D:\\GitHub\\agent-bookkeeping\\pages\\agent_bookkeeping.js";




function AgentBookkeeping() {
  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
    children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_hearder__WEBPACK_IMPORTED_MODULE_1__.default, {}, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 10,
      columnNumber: 9
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("section", {
      "class": "text-gray-600 body-font",
      children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(particles_bg__WEBPACK_IMPORTED_MODULE_3__.default, {
        type: "color",
        bg: {
          width: "100%",
          position: "absolute",
          zIndex: "0"
        }
      }, void 0, false, {
        fileName: _jsxFileName,
        lineNumber: 15,
        columnNumber: 9
      }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
        "class": "container mx-auto flex px-5 py-24 md:flex-row flex-col items-center",
        children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
          "class": "lg:flex-grow md:w-1/2 lg:pr-24 md:pr-16 flex flex-col md:items-start md:text-left mb-16 md:mb-0 items-center text-center",
          children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("h1", {
            "class": "title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900",
            children: "Before they sold out readymade gluten"
          }, void 0, false, {
            fileName: _jsxFileName,
            lineNumber: 21,
            columnNumber: 15
          }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("p", {
            "class": "mb-8 leading-relaxed",
            children: "Copper mug try-hard pitchfork pour-over freegan heirloom neutra air plant cold-pressed tacos poke beard tote bag. Heirloom echo park mlkshk tote bag selvage hot chicken authentic tumeric truffaut hexagon try-hard chambray."
          }, void 0, false, {
            fileName: _jsxFileName,
            lineNumber: 24,
            columnNumber: 15
          }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
            "class": "flex justify-center",
            children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("button", {
              "class": "inline-flex text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg",
              "control-id": "ControlID-85",
              children: "Button"
            }, void 0, false, {
              fileName: _jsxFileName,
              lineNumber: 26,
              columnNumber: 17
            }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("button", {
              "class": "ml-4 inline-flex text-gray-700 bg-gray-100 border-0 py-2 px-6 focus:outline-none hover:bg-gray-200 rounded text-lg",
              children: "Button"
            }, void 0, false, {
              fileName: _jsxFileName,
              lineNumber: 27,
              columnNumber: 17
            }, this)]
          }, void 0, true, {
            fileName: _jsxFileName,
            lineNumber: 25,
            columnNumber: 15
          }, this)]
        }, void 0, true, {
          fileName: _jsxFileName,
          lineNumber: 20,
          columnNumber: 13
        }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
          "class": "lg:max-w-lg lg:w-full md:w-1/2 w-5/6",
          children: /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("img", {
            "class": "object-cover object-center rounded",
            alt: "hero",
            src: "https://dummyimage.com/720x600"
          }, void 0, false, {
            fileName: _jsxFileName,
            lineNumber: 31,
            columnNumber: 15
          }, this)
        }, void 0, false, {
          fileName: _jsxFileName,
          lineNumber: 30,
          columnNumber: 13
        }, this)]
      }, void 0, true, {
        fileName: _jsxFileName,
        lineNumber: 19,
        columnNumber: 11
      }, this)]
    }, void 0, true, {
      fileName: _jsxFileName,
      lineNumber: 14,
      columnNumber: 9
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_footer__WEBPACK_IMPORTED_MODULE_2__.default, {}, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 35,
      columnNumber: 9
    }, this)]
  }, void 0, true);
}
_c = AgentBookkeeping;

var _c;

$RefreshReg$(_c, "AgentBookkeeping");

;
    var _a, _b;
    // Legacy CSS implementations will `eval` browser code in a Node.js context
    // to extract CSS. For backwards compatibility, we need to check we're in a
    // browser context before continuing.
    if (typeof self !== 'undefined' &&
        // AMP / No-JS mode does not inject these helpers:
        '$RefreshHelpers$' in self) {
        var currentExports = module.__proto__.exports;
        var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;
        // This cannot happen in MainTemplate because the exports mismatch between
        // templating and execution.
        self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);
        // A module can be accepted automatically based on its exports, e.g. when
        // it is a Refresh Boundary.
        if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {
            // Save the previous exports on update so we can compare the boundary
            // signatures.
            module.hot.dispose(function (data) {
                data.prevExports = currentExports;
            });
            // Unconditionally accept an update to this module, we'll check if it's
            // still a Refresh Boundary later.
            module.hot.accept();
            // This field is set when the previous version of this module was a
            // Refresh Boundary, letting us know we need to check for invalidation or
            // enqueue an update.
            if (prevExports !== null) {
                // A boundary can become ineligible if its exports are incompatible
                // with the previous exports.
                //
                // For example, if you add/remove/change exports, we'll want to
                // re-execute the importing modules, and force those components to
                // re-render. Similarly, if you convert a class component to a
                // function, we want to invalidate the boundary.
                if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {
                    module.hot.invalidate();
                }
                else {
                    self.$RefreshHelpers$.scheduleUpdate();
                }
            }
        }
        else {
            // Since we just executed the code for the module, it's possible that the
            // new exports made it ineligible for being a boundary.
            // We only care about the case when we were _previously_ a boundary,
            // because we already accepted this update (accidental side effect).
            var isNoLongerABoundary = prevExports !== null;
            if (isNoLongerABoundary) {
                module.hot.invalidate();
            }
        }
    }


/***/ }),

/***/ "./node_modules/particles-bg/dist/index.es.js":
/*!****************************************************!*\
  !*** ./node_modules/particles-bg/dist/index.es.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var raf_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! raf-manager */ "./node_modules/raf-manager/build/RAFManager.min.js");
/* harmony import */ var raf_manager__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(raf_manager__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var proton_engine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! proton-engine */ "./node_modules/proton-engine/build/proton.min.js");
/* harmony import */ var proton_engine__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(proton_engine__WEBPACK_IMPORTED_MODULE_2__);




var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();

var inherits = function (subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
};

var possibleConstructorReturn = function (self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return call && (typeof call === "object" || typeof call === "function") ? call : self;
};

// Code source from here, thanks author
// https://github.com/drawcall/Proton/blob/gh-pages/source/src/utils/Rand.js
var Rand = function () {
    function Rand() {
        classCallCheck(this, Rand);

        this.list = [];
    }

    createClass(Rand, [{
        key: "set",
        value: function set$$1(probability, target) {
            this.list.push({
                probability: probability,
                target: target,
                a: 0,
                b: 1
            });

            this.calculation();
        }
    }, {
        key: "calculation",
        value: function calculation() {
            var total = 0;
            for (var i = 0; i < this.list.length; i++) {
                total += this.list[i].probability;
            }

            for (var _i = 0; _i < this.list.length; _i++) {
                var obj = this.list[_i];
                var val = obj.probability / total;

                obj.a = _i === 0 ? 0 : this.list[_i - 1].b;
                obj.b = obj.a + val;
            }
        }
    }, {
        key: "getResult",
        value: function getResult() {
            var val = Math.random();
            for (var i = 0; i < this.list.length; i++) {
                var obj = this.list[i];

                if (val <= obj.b && val > obj.a) {
                    return obj.target;
                }
            }

            return this.list[0].target;
        }
    }]);
    return Rand;
}();

var Canvas = function (_React$Component) {
  inherits(Canvas, _React$Component);

  function Canvas(props) {
    classCallCheck(this, Canvas);

    var _this = possibleConstructorReturn(this, (Canvas.__proto__ || Object.getPrototypeOf(Canvas)).call(this, props));

    _this._iid = 0;
    _this._oid = 0;
    _this.size = { width: 0, height: 0 };
    _this.canvasRef = react__WEBPACK_IMPORTED_MODULE_0___default().createRef();
    return _this;
  }

  createClass(Canvas, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this2 = this;

      this._oid = setTimeout(function () {
        _this2.initCanvas();
        _this2.resize = _this2.resize.bind(_this2);
        window.addEventListener("resize", _this2.resize);
      }, 100);

      var canvas = this.getCanvas();
      this.props.onCanvasDidMount && this.props.onCanvasDidMount(canvas);
    }
  }, {
    key: "initCanvas",
    value: function initCanvas() {
      var canvas = this.getCanvas();

      if (this.props.globalCompositeOperation) {
        var context = canvas.getContext("2d");
        context.globalCompositeOperation = this.props.globalCompositeOperation;
      }

      var _setCanvasSize = this.setCanvasSize(canvas),
          width = _setCanvasSize.width,
          height = _setCanvasSize.height;

      this.heartbeatDetectionCanvasSize(canvas);
      this.props.onCanvasInited(canvas, width, height);
    }
  }, {
    key: "getCanvas",
    value: function getCanvas() {
      var canvas = this.canvasRef.current;
      return canvas;
    }
  }, {
    key: "heartbeatDetectionCanvasSize",
    value: function heartbeatDetectionCanvasSize(canvas) {
      var _this3 = this;

      this._iid = setInterval(function () {
        if (_this3.canvasRef.current) {
          var newHeight = _this3.canvasRef.current.clientHeight;
          if (newHeight !== _this3.size.height) {
            var _setCanvasSize2 = _this3.setCanvasSize(canvas),
                width = _setCanvasSize2.width,
                height = _setCanvasSize2.height;

            _this3.props.onResize && _this3.props.onResize(width, height);
          }
        }
      }, 1000 / 10);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        window.removeEventListener("resize", this.resize);
        clearInterval(this._iid);
        clearTimeout(this._oid);
      } catch (e) {}
    }
  }, {
    key: "resize",
    value: function resize() {
      var canvas = this.getCanvas();

      var _setCanvasSize3 = this.setCanvasSize(canvas),
          width = _setCanvasSize3.width,
          height = _setCanvasSize3.height;

      this.props.onResize && this.props.onResize(width, height);
    }
  }, {
    key: "setCanvasSize",
    value: function setCanvasSize(canvas) {
      var width = this.canvasRef.current.clientWidth;
      var height = this.canvasRef.current.clientHeight;

      this.size.width = width;
      this.size.height = height;
      canvas.width = width;
      canvas.height = height;
      return { width: width, height: height };
    }
  }, {
    key: "handleWaypointEnter",
    value: function handleWaypointEnter() {
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().start();
    }
  }, {
    key: "handleWaypointLeave",
    value: function handleWaypointLeave() {
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().stop();
    }
  }, {
    key: "getStyle",
    value: function getStyle() {
      var bg = this.props.bg;

      var style = { width: "100%", height: "100%" };

      if (bg === true) {
        style = Object.assign(style, {
          position: "absolute",
          zIndex: -1,
          top: 0,
          left: 0
        });
      } else if (bg && (typeof bg === "undefined" ? "undefined" : _typeof(bg)) === "object") {
        style = Object.assign(style, bg);
      }

      return style;
    }
  }, {
    key: "handleMouseDown",
    value: function handleMouseDown(e) {
      this.props.onMouseDown && this.props.onMouseDown(e);
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement("canvas", { className: "particles-bg-canvas-self",
        ref: this.canvasRef,
        onMouseDown: this.handleMouseDown.bind(this),
        style: this.getStyle()
      });
    }
  }]);
  return Canvas;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

function hexToRgb(hex) {
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
    } : {};
}

function getColor(color, a) {
    var c = void 0;
    if (color) {
        c = hexToRgb(color);
        return "rgba(" + c.r + "," + c.g + "," + c.b + ", " + a + ")";
    } else {
        return null;
    }
}

var Ball = function (_React$Component) {
  inherits(Ball, _React$Component);

  function Ball(props) {
    classCallCheck(this, Ball);

    var _this = possibleConstructorReturn(this, (Ball.__proto__ || Object.getPrototypeOf(Ball)).call(this, props));

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Ball, [{
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      this.createMiniEmitter(canvas);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onResize",
    value: function onResize() {}
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      var _this2 = this;

      var context = canvas.getContext("2d");
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 9), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.8, 1.3));

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(1, 50));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(5, 6));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(5, 8), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(30, 70), "polar"));

      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(1, 0));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(["#36aaf3", "#fd769c", "#94ff22", "#ffa545", "#ffffff"]));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(0.7, 1));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Gravity)(3));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Collision)(emitter));
      emitter.addBehaviour(this.customDeadBehaviour(canvas));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "bound"));

      emitter.p.x = Math.min(500, Math.max(canvas.width / 2 - 400, 50));
      emitter.p.y = canvas.height / 2 + 50;
      emitter.emit();
      this.proton.addEmitter(emitter);

      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      renderer.onProtonUpdate = function () {
        context.fillStyle = getColor(_this2.props.color, 0.2) || "rgba(255, 255, 255, 0.2)";
        context.fillRect(0, 0, canvas.width, canvas.height);
      };
      this.proton.addRenderer(renderer);
    }
  }, {
    key: "customDeadBehaviour",
    value: function customDeadBehaviour(canvas) {
      var _this3 = this;

      return {
        initialize: function initialize(particle) {},
        applyBehaviour: function applyBehaviour(particle) {
          if (particle.p.y + particle.radius >= canvas.height) {
            if (particle.radius > 9) {
              _this3.miniEmitteing(particle);
              particle.dead = true;
            }
          }
        }
      };
    }
  }, {
    key: "createMiniEmitter",
    value: function createMiniEmitter(canvas) {
      var miniEmitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      miniEmitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(3, 6), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1, 2));

      miniEmitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      miniEmitter.radiusInitialize = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)();
      miniEmitter.addInitialize(miniEmitter.radiusInitialize);
      miniEmitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(0.5, 1));
      miniEmitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().V)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.5, 3), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 70, true), "polar"));

      miniEmitter.colorBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)("#ffffff");
      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(1, 0));
      miniEmitter.addBehaviour(miniEmitter.colorBehaviour);
      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Gravity)(4));
      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Collision)(miniEmitter));
      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "bound"));
      this.proton.addEmitter(miniEmitter);

      this.miniEmitter = miniEmitter;
    }
  }, {
    key: "miniEmitteing",
    value: function miniEmitteing(particle) {
      var miniEmitter = this.miniEmitter;
      miniEmitter.radiusInitialize.reset(particle.radius * 0.05, particle.radius * 0.2);
      miniEmitter.colorBehaviour.reset(particle.color);
      miniEmitter.p.x = particle.p.x;
      miniEmitter.p.y = particle.p.y;
      miniEmitter.emit("once");
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Ball;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Color = function (_React$Component) {
  inherits(Color, _React$Component);

  function Color(props) {
    classCallCheck(this, Color);

    var _this = possibleConstructorReturn(this, (Color.__proto__ || Object.getPrototypeOf(Color)).call(this, props));

    _this.colors = ["#529B88", "#CDD180", "#FFFA32", "#FB6255", "#FB4A53", "#FF4E50", "#F9D423"];
    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Color, [{
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize() {}
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();
      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(5, 8), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.1, 0.25));

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(20, 200));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(2, 4));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height)));

      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(0, 1, Infinity, (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().easeOutCubic)));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(1, 0, Infinity, (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().easeOutCubic)));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors, "random"));

      emitter.emit();
      this.proton.addEmitter(emitter);

      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      this.proton.addRenderer(renderer);
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Color;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Color$1 = function (_React$Component) {
    inherits(Color, _React$Component);

    function Color(props) {
        classCallCheck(this, Color);

        var _this = possibleConstructorReturn(this, (Color.__proto__ || Object.getPrototypeOf(Color)).call(this, props));

        _this.colors = ["#529B88", "#CDD180", "#FFFA32", "#FB6255", "#FB4A53", "#FF4E50", "#F9D423"];
        _this.renderProton = _this.renderProton.bind(_this);
        return _this;
    }

    createClass(Color, [{
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            try {
                raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
                this.proton.destroy();
            } catch (e) {}
        }
    }, {
        key: "onCanvasInited",
        value: function onCanvasInited(canvas, width, height) {
            this.createProton(canvas, width, height);
            raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
        }
    }, {
        key: "onResize",
        value: function onResize(width, height) {
            this.crossZoneBehaviour.zone.width = width;
            this.crossZoneBehaviour.zone.height = height;
            this.proton.renderers[0].resize(width, height);        }
    }, {
        key: "getProp",
        value: function getProp(key, defaultVal) {
            var config = this.props.config || {};
            var val = config[key] || defaultVal;
            if (Array.isArray(val)) {
                return new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(val[0], val[1]);
            } else {
                return val;
            }
        }
    }, {
        key: "getArrProp",
        value: function getArrProp(key, defaultVal) {
            var config = this.props.config || {};
            var val = config[key] || defaultVal;
            if (!val) return null;

            if (Array.isArray(val)) {
                return val;
            } else {
                return [val, val];
            }
        }
    }, {
        key: "createProton",
        value: function createProton(canvas, width, height) {
            var num = this.getProp("num", [5, 8]);
            var rps = this.getProp("rps", [0.1, 0.2]);
            var mass = this.getProp("mass", 1);
            var radius = this.getProp("radius", [10, 30]);
            var life = this.getProp("life", [2, 3]);
            var body = this.getProp("body");
            var position = this.getProp("position");
            var v = this.getProp("v", [2, 3]);
            var tha = this.getProp("tha", [-15, 15]);
            var alpha = this.getArrProp("alpha");
            var scale = this.getArrProp("scale");
            var color = this.getArrProp("color");
            var cross = this.getProp("cross", "dead");
            var random = this.getProp("random");
            var rotate = this.getArrProp("rotate");
            var g = this.getProp("g");
            var f = this.getArrProp("f");
            var emitterV = this.getProp("emitter");

            this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();
            var emitter = void 0;
            if (emitterV === "follow") {
                emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().FollowEmitter)();
            } else {
                emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
            }
            emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(num, rps);

            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(mass));
            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(radius));
            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(life));
            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(v, tha, "polar"));
            if (body) emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Body)(body));

            var pos = void 0;
            if (position === "all" || position === "screen") {
                pos = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height));
            } else if ((typeof position === "undefined" ? "undefined" : _typeof(position)) === "object") {
                pos = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(position.x, position.y, position.width, position.height));
            } else {
                emitter.p.x = canvas.width / 2;
                emitter.p.y = canvas.height / 2;
            }

            emitter.addInitialize(pos);

            /// behaviour
            var alphaB = alpha ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(alpha[0], alpha[1]) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(0, 1);
            var scaleB = scale ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(scale[0], scale[1]) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(1, 0.2);
            var colorB = color ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(color[0], color[1]) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors);

            emitter.addBehaviour(alphaB);
            emitter.addBehaviour(scaleB);
            if (!body) emitter.addBehaviour(colorB);

            if (rotate) {
                if (rotate[0] === true || rotate[0] === "rotate") {
                    emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rotate)());
                } else {
                    emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rotate)(rotate[0], rotate[1]));
                }
            }

            var zone = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height);
            var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(zone, cross);
            emitter.addBehaviour(crossZoneBehaviour);

            random && emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(random, random, 0.05));
            g && emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().G)(g));
            f && emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().F)(f[0], f[1]));

            emitter.emit();
            this.proton.addEmitter(emitter);

            var renderer = this.createRenderer(canvas);
            this.proton.addRenderer(renderer);

            this.emitter = emitter;
            this.crossZoneBehaviour = crossZoneBehaviour;
        }
    }, {
        key: "createRenderer",
        value: function createRenderer(canvas) {
            var width = canvas.width;
            var height = canvas.height;
            var context = canvas.getContext("2d");
            var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);

            var onUpdate = this.getProp("onUpdate");
            if (onUpdate) {
                renderer.onProtonUpdate = function () {
                    onUpdate(context, width, height);
                };
            }

            var onParticleCreated = this.getProp("onParticleCreated");
            if (onParticleCreated) {
                renderer.onParticleCreated = function (particle) {
                    onParticleCreated(context, particle);
                };
            }

            var onParticleUpdate = this.getProp("onParticleUpdate");
            if (onParticleUpdate) {
                renderer.onParticleUpdate = function (particle) {
                    onParticleUpdate(context, particle);
                };
            }

            return renderer;
        }
    }, {
        key: "renderProton",
        value: function renderProton() {
            this.proton && this.proton.update();
        }
    }, {
        key: "handleMouseDown",
        value: function handleMouseDown(e) {
            var onMouseDown = this.getProp("onMouseDown");
            if (onMouseDown) {
                onMouseDown(e);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var globalCompositeOperation = this.props.globalCompositeOperation || this.props.operation || "source-over";

            return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, {
                bg: this.props.bg,
                onMouseDown: this.handleMouseDown.bind(this),
                globalCompositeOperation: globalCompositeOperation,
                onCanvasInited: this.onCanvasInited.bind(this),
                onResize: this.onResize.bind(this)
            });
        }
    }]);
    return Color;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Lines = function (_React$Component) {
  inherits(Lines, _React$Component);

  function Lines(props) {
    classCallCheck(this, Lines);

    var _this = possibleConstructorReturn(this, (Lines.__proto__ || Object.getPrototypeOf(Lines)).call(this, props));

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Lines, [{
    key: "onCanvasDidMount",
    value: function onCanvasDidMount(canvas) {
      if (this.props.color) {
        canvas.style.backgroundColor = this.props.color;
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      this.crossZoneBehaviour.zone.width = width;
      this.crossZoneBehaviour.zone.height = height;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.damping = 0.008;
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 250);
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(4));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));
      var mouseObj = {
        x: width / 2,
        y: height / 2
      };

      var attractionBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Attraction)(mouseObj, 0, 0);
      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "cross");
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)("random"));
      emitter.addBehaviour(attractionBehaviour, crossZoneBehaviour);
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(10, 10, 0.05));
      emitter.p.x = canvas.width / 2;
      emitter.p.y = canvas.height / 2;
      emitter.emit("once");

      this.proton.addEmitter(emitter);
      this.proton.addRenderer(this.createRenderer(canvas));
      this.crossZoneBehaviour = crossZoneBehaviour;
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas) {
      var _this2 = this;

      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      renderer.onProtonUpdate = function () {
        context.fillStyle = getColor(_this2.props.color, 0.02) || "rgba(0, 0, 0, 0.02)";
        context.fillRect(0, 0, canvas.width, canvas.height);
      };

      renderer.onParticleUpdate = function (particle) {
        context.beginPath();
        context.strokeStyle = particle.color;
        context.lineWidth = 1;
        context.moveTo(particle.old.p.x, particle.old.p.y);
        context.lineTo(particle.p.x, particle.p.y);
        context.closePath();
        context.stroke();
      };

      return renderer;
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasDidMount: this.onCanvasDidMount.bind(this),
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Lines;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Thick = function (_React$Component) {
  inherits(Thick, _React$Component);

  function Thick(props) {
    classCallCheck(this, Thick);

    var _this = possibleConstructorReturn(this, (Thick.__proto__ || Object.getPrototypeOf(Thick)).call(this, props));

    _this.hue = 0;
    _this.index = 0;
    _this.colorTemplate = "hsla(hue,80%,50%, 0.75)";
    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Thick, [{
    key: "onCanvasDidMount",
    value: function onCanvasDidMount(canvas) {
      if (this.props.color) {
        canvas.style.backgroundColor = this.props.color;
      }
    }
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.canvas = canvas;
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      this.crossZoneBehaviour.zone.width = width;
      this.crossZoneBehaviour.zone.height = height;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.damping = 0.008;
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 150);

      // Initialize
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(8));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().V)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.1, 0.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CircleZone)(canvas.width / 2, canvas.height / 2, 100)));

      // Behaviour
      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "cross");
      emitter.addBehaviour(crossZoneBehaviour);
      this.repulsion = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Repulsion)({
        x: canvas.width / 2,
        y: canvas.height / 2 - 100
      }, 3, 300);

      this.attraction = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Attraction)({
        x: canvas.width / 2,
        y: canvas.height / 2
      }, 3, 200);
      emitter.addBehaviour(this.attraction, this.repulsion);
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)("random"));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(20, 15, 0.15));

      emitter.emit("once");
      this.proton.addEmitter(emitter);
      this.proton.addRenderer(this.createRenderer(canvas));
      this.crossZoneBehaviour = crossZoneBehaviour;
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas) {
      var _this2 = this;

      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);

      renderer.onProtonUpdate = function () {
        _this2.hue += 1;
        context.fillStyle = getColor(_this2.props.color, 0.02) || "rgba(0, 0, 0, 0.02)";
        context.fillRect(0, 0, canvas.width, canvas.height);
      };

      renderer.onParticleCreated = function (particle) {
        particle.data.begin = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(1, 120);
        particle.data.tha = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(0, Math.PI * 2);
      };

      renderer.onParticleUpdate = function (particle) {
        var hue = particle.data.begin + _this2.hue;
        particle.color = _this2.colorTemplate.replace("hue", hue % 360);

        var ratio = 3 / 4;
        var radius = particle.radius * (1 - ratio) * Math.cos(particle.data.tha += 0.01) + particle.radius * ratio;

        context.beginPath();
        context.fillStyle = particle.color;
        context.arc(particle.p.x, particle.p.y, radius, 0, Math.PI * 2, true);
        context.closePath();
        context.fill();
      };

      return renderer;
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      var canvas = this.canvas;
      this.proton.update();
      if (this.index % 200 === 0) {
        this.attraction.targetPosition.x = Math.random() * canvas.width;
        this.attraction.targetPosition.y = Math.random() * canvas.height;

        this.repulsion.targetPosition.x = Math.random() * canvas.width;
        this.repulsion.targetPosition.y = Math.random() * canvas.height;
      }

      this.index++;
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        onCanvasDidMount: this.onCanvasDidMount.bind(this),
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Thick;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Square = function (_React$Component) {
  inherits(Square, _React$Component);

  function Square(props) {
    classCallCheck(this, Square);

    var _this = possibleConstructorReturn(this, (Square.__proto__ || Object.getPrototypeOf(Square)).call(this, props));

    _this.colors = ["#fad390", "#81ecec", "#ffffff", "#badc58", "#f9ca24", "#FEA47F"];
    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Square, [{
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onCanvasDidMount",
    value: function onCanvasDidMount(canvas) {}
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      var dis = 150;
      this.crossZoneBehaviour.zone.width = width + 2 * dis;
      this.crossZoneBehaviour.zone.height = height + 2 * dis;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();
      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 50);
      emitter.damping = 0;

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(4, 70));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(2, 10), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0), "polar"));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().LineZone)(0, canvas.height, canvas.width, canvas.height)));

      var dis = 150;
      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0 - dis, 0 - dis, canvas.width + 2 * dis, canvas.height + 2 * dis), "cross");
      emitter.addBehaviour(crossZoneBehaviour);
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().getSpan(0.1, 0.55)));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors));

      emitter.emit("once");
      this.proton.addEmitter(emitter);
      var renderer = this.createRenderer(canvas);
      this.proton.addRenderer(renderer);

      this.crossZoneBehaviour = crossZoneBehaviour;
      emitter.preEmit(2);
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas) {
      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CustomRenderer)();

      renderer.onProtonUpdate = function () {
        context.clearRect(0, 0, canvas.width, canvas.height);
      };

      renderer.onParticleCreated = function (particle) {
        var w = particle.radius || 60;
        var h = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(100, 200, "int");
        particle.data.w = w;
        particle.data.h = h;
      };

      renderer.onParticleUpdate = function (particle) {
        var w = particle.data.w;
        var h = particle.data.h;
        context.save();
        context.globalAlpha = particle.alpha;
        context.fillStyle = particle.color;

        context.translate(particle.p.x, particle.p.y);
        context.rotate(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.degreeTransform(particle.rotation));
        context.translate(-particle.p.x, -particle.p.y);

        context.beginPath();
        context.rect(particle.p.x - w / 2, particle.p.y - h / 2, w, h);

        context.closePath();
        context.fill();
        context.globalAlpha = 1;
        context.restore();
      };

      return renderer;
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "lighter",
        onCanvasDidMount: this.onCanvasDidMount.bind(this),
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Square;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Cobweb = function (_React$Component) {
  inherits(Cobweb, _React$Component);

  function Cobweb(props) {
    classCallCheck(this, Cobweb);

    var _this = possibleConstructorReturn(this, (Cobweb.__proto__ || Object.getPrototypeOf(Cobweb)).call(this, props));

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Cobweb, [{
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      this.crossZoneBehaviour.zone.width = width;
      this.crossZoneBehaviour.zone.height = height;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(100), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.05, 0.2));

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(1, 4));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(Infinity));

      var pointZone = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height));
      emitter.addInitialize(pointZone);
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.3, 0.6), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));

      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().getSpan(0.2, 0.9)));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.props.color || "#333"));
      this.crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height), "cross");
      emitter.addBehaviour(this.crossZoneBehaviour);

      emitter.emit("once");
      emitter.damping = 0;
      this.proton.addEmitter(emitter);
      this.proton.addRenderer(this.createRenderer(canvas, emitter));
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas, emitter) {
      var _this2 = this;

      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      var R = 140;

      renderer.onProtonUpdateAfter = function () {
        var particles = emitter.particles;

        for (var i = 0; i < particles.length; i++) {
          for (var j = i + 1; j < particles.length; j++) {
            var pA = particles[i];
            var pB = particles[j];
            var dis = pA.p.distanceTo(pB.p);

            if (dis < R) {
              var alpha = (1 - dis / R) * 0.5;
              context.strokeStyle = getColor(_this2.props.color, alpha) || "rgba(3, 3, 3, " + alpha + ")";
              context.beginPath();
              context.moveTo(pA.p.x, pA.p.y);
              context.lineTo(pB.p.x, pB.p.y);
              context.closePath();
              context.stroke();
            }
          }
        }
      };

      return renderer;
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Cobweb;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Circle = function (_React$Component) {
  inherits(Circle, _React$Component);

  function Circle(props) {
    classCallCheck(this, Circle);

    var _this = possibleConstructorReturn(this, (Circle.__proto__ || Object.getPrototypeOf(Circle)).call(this, props));

    _this.colors = ["#74b9ff", "#e84393", "#6c5ce7", "#00b894", "#fdcb6e", "#006266", "#1B1464"];

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Circle, [{
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      this.crossZoneBehaviour.zone.width = width;
      this.crossZoneBehaviour.zone.height = height;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num || 20);
      emitter.damping = 0.008;

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(30, 600));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height)));

      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "cross");
      emitter.addBehaviour(crossZoneBehaviour);
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().getSpan(0.35, 0.55)));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.getColor()));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(50, 50, 0.5));

      emitter.emit("once");
      this.proton.addEmitter(emitter);

      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      this.proton.addRenderer(renderer);

      this.crossZoneBehaviour = crossZoneBehaviour;
    }
  }, {
    key: "getColor",
    value: function getColor() {
      var c = this.colors;
      if (this.props.color) {
        if (Array.isArray(this.props.color)) {
          c = this.props.color;
        } else {
          c = [this.props.color];
        }
      }

      return c;
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darken",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Circle;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Tadpole = function (_React$Component) {
  inherits(Tadpole, _React$Component);

  function Tadpole(props) {
    classCallCheck(this, Tadpole);

    var _this = possibleConstructorReturn(this, (Tadpole.__proto__ || Object.getPrototypeOf(Tadpole)).call(this, props));

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Tadpole, [{
    key: "onCanvasDidMount",
    value: function onCanvasDidMount(canvas) {}
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      this.renderProton();
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      this.crossZoneBehaviour.zone.width = width;
      this.crossZoneBehaviour.zone.height = height;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.damping = 0.008;
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 50);
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(5, 9));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height)));

      var mouseInfo = {
        x: width / 2,
        y: height / 2
      };

      var attractionBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Attraction)(mouseInfo, 0, 0);
      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "bound");
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.props.color || "#bbb"));
      //emitter.addBehaviour(new Proton.Alpha(new Proton.Span(0.5, 1)));
      emitter.addBehaviour(attractionBehaviour, crossZoneBehaviour);
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(15, 15, 0.05));
      emitter.emit("once");

      this.proton.addEmitter(emitter);
      this.proton.addRenderer(this.createRenderer(canvas));
      this.crossZoneBehaviour = crossZoneBehaviour;
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas) {
      var jointCount = 10;
      var delayTime = 8;
      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);

      renderer.onProtonUpdate = function () {
        context.clearRect(0, 0, canvas.width, canvas.height);
      };

      renderer.onParticleCreated = function (particle) {
        particle.data.points = [];
        particle.data.index = 0;
      };

      renderer.onParticleUpdate = function (particle) {
        drawTadpoleTail(particle);
        if (particle.data.index % delayTime === 0) fillPointsData(particle);
        drawTadpoleHead(particle);
        particle.data.index++;
      };

      var fillPointsData = function fillPointsData(particle) {
        particle.data.points.unshift(particle.p.y);
        particle.data.points.unshift(particle.p.x);

        if (particle.data.points.length > jointCount) {
          particle.data.points.pop();
          particle.data.points.pop();
        }
      };

      var drawTadpoleHead = function drawTadpoleHead(particle) {
        context.fillStyle = particle.color;
        context.beginPath();
        context.arc(particle.p.x, particle.p.y, particle.radius, 0, Math.PI * 2, true);
        context.closePath();
        context.fill();
      };

      var drawTadpoleTail = function drawTadpoleTail(particle) {
        context.beginPath();
        context.strokeStyle = particle.color;

        context.moveTo(particle.p.x, particle.p.y);

        var l = particle.data.points.length;
        for (var i = 0; i < l; i += 2) {
          var x = particle.data.points[i];
          var y = particle.data.points[i + 1];

          context.lineWidth = linearEvaluation(i, l);
          context.lineTo(x, y);
          context.stroke();
        }
      };

      var linearEvaluation = function linearEvaluation(i, l) {
        if (l <= 2) return 1;

        var max = 6;
        var A = (max - 1) / (2 / l - 1);
        var B = 1 - A;
        var X = (i + 2) / l;
        var val = A * X + B;
        val = val >> 0;

        return val;
      };

      return renderer;
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      var _this2 = this;

      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(function () {
        _this2.proton.update();
        //this.proton.stats.update();
      });
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasDidMount: this.onCanvasDidMount.bind(this),
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Tadpole;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var COLOR = ["#f6b93b", "#18dcff", "#cd84f1", "#ED4C67", "#ffffff", "#b71540", "#32ff7e", "#ff3838"];

var Polygon = function (_React$Component) {
  inherits(Polygon, _React$Component);

  function Polygon(props) {
    classCallCheck(this, Polygon);

    var _this = possibleConstructorReturn(this, (Polygon.__proto__ || Object.getPrototypeOf(Polygon)).call(this, props));

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Polygon, [{
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas);
      this.createEmitter({
        canvas: canvas,
        x: width / 2,
        y: height / 2,
        mainEmitter: true,
        zone: "bound"
      });

      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onResize",
    value: function onResize() {}
  }, {
    key: "createProton",
    value: function createProton(canvas) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();
      var renderer = this.createRenderer(canvas);
      this.proton.addRenderer(renderer);
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas) {
      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CustomRenderer)();

      renderer.onProtonUpdate = function () {
        context.clearRect(0, 0, canvas.width, canvas.height);
      };

      renderer.onParticleCreated = function (particle) {
        particle.data.count = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(3, 10, true);
      };

      renderer.onParticleUpdate = function (particle) {
        context.save();
        context.globalAlpha = particle.alpha;
        context.fillStyle = particle.color;

        context.translate(particle.p.x, particle.p.y);
        context.rotate(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.degreeTransform(particle.rotation));
        context.translate(-particle.p.x, -particle.p.y);

        context.beginPath();
        drawPolygon(particle, particle.data.count);

        context.closePath();
        context.fill();
        context.globalAlpha = 1;
        context.restore();
      };

      renderer.onParticleDead = function (particle) {};

      var drawPolygon = function drawPolygon(particle, count) {
        if (count >= 7) {
          context.arc(particle.p.x, particle.p.y, particle.radius, 0, Math.PI * 2, true);
        } else {
          var radius = particle.radius;

          for (var i = 0; i <= count; i++) {
            var x = particle.p.x + radius * Math.cos(Math.PI / 180 * 360 / count * i);
            var y = particle.p.y + radius * Math.sin(Math.PI / 180 * 360 / count * i);

            if (i === 0) context.moveTo(x, y);else context.lineTo(x, y);
          }
        }
      };

      return renderer;
    }
  }, {
    key: "createEmitter",
    value: function createEmitter(_ref) {
      var mainEmitter = _ref.mainEmitter,
          canvas = _ref.canvas,
          x = _ref.x,
          y = _ref.y,
          radius = _ref.radius,
          _ref$color = _ref.color,
          color = _ref$color === undefined ? COLOR : _ref$color,
          _ref$zone = _ref.zone,
          zone = _ref$zone === undefined ? "dead" : _ref$zone,
          _ref$once = _ref.once,
          once = _ref$once === undefined ? "all" : _ref$once,
          _ref$alpha = _ref.alpha,
          alpha = _ref$alpha === undefined ? 0.85 : _ref$alpha,
          _ref$gravity = _ref.gravity,
          gravity = _ref$gravity === undefined ? 3.5 : _ref$gravity;

      var emitter = this.proton.pool.get((proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter));

      if (!emitter.completed) {
        emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 9), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.6, 2.2));

        var radiusInit = mainEmitter ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(10, 110) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(3, radius);
        emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
        emitter.addInitialize(radiusInit);
        emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(3, 6));
        emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 6), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(-90, 90), "polar"));

        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(alpha, 0.2));
        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(color));
        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(1, 0.3));
        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rotate)());
        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Gravity)(gravity));

        emitter.addBehaviour(this.customDeadBehaviour(canvas));
        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), zone));
      }

      emitter.p.x = x;
      emitter.p.y = y;
      if (once === "once") emitter.emit("once");else emitter.emit();

      this.proton.addEmitter(emitter);
      //this.expireEmitter(emitter);
    }
  }, {
    key: "expireEmitter",
    value: function expireEmitter(emitter) {
      var _this2 = this;

      setTimeout(function () {
        emitter.completed = true;
        _this2.proton.pool.expire(emitter);
        _this2.proton.removeEmitter(emitter);
      }, 500);
    }
  }, {
    key: "customDeadBehaviour",
    value: function customDeadBehaviour(canvas) {
      var _this3 = this;

      return {
        initialize: function initialize(particle) {
          particle.data = particle.data || {};
          particle.data.oldRadius = particle.radius;
          particle.data.emitterCount = 0;
        },
        applyBehaviour: function applyBehaviour(particle) {
          if (particle.radius < 5) return;
          if (particle.data.emitterCount >= 2) return;

          if (particle.radius <= 1 / 3 * particle.data.oldRadius) {
            particle.data.emitterCount++;
            _this3.createEmitter({
              canvas: canvas,
              x: particle.p.x,
              y: particle.p.y,
              radius: particle.radius * (1 / 2),
              alpha: 0.5,
              gravity: 5,
              color: particle.color,
              once: "once"
            });
          }
        }
      };
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Polygon;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Fountain = function (_React$Component) {
  inherits(Fountain, _React$Component);

  function Fountain(props) {
    classCallCheck(this, Fountain);

    var _this = possibleConstructorReturn(this, (Fountain.__proto__ || Object.getPrototypeOf(Fountain)).call(this, props));

    _this.colors = ["#529B88", "#CDD180", "#FFFA32", "#FB6255", "#FB4A53", "#FF4E50", "#F9D423"];
    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Fountain, [{
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize() {}
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();
      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 8), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.1, 0.25));

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(20, 200));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(2, 4));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 7), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CircleZone)(width / 2, height / 2, 100)));

      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(1, 0));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(0.2, 1));
      emitter.addBehaviour(this.createCustomBehaviour());
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors, "random"));
      emitter.emit();
      this.proton.addEmitter(emitter);

      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      this.proton.addRenderer(renderer);
    }
  }, {
    key: "createCustomBehaviour",
    value: function createCustomBehaviour() {
      var f = 10 * 100;
      return {
        initialize: function initialize(particle) {
          particle.f = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Vector2D)(0, 0);
        },
        applyBehaviour: function applyBehaviour(particle) {
          var length = particle.v.length() / 1000;
          var gradient = particle.v.getGradient();
          gradient += 3.14 / 2;

          particle.f.x = f * length * Math.cos(gradient);
          particle.f.y = f * length * Math.sin(gradient);
          particle.a.add(particle.f);
        }
      };
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "xor",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Fountain;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var ParticlesBg = function (_Component) {
  inherits(ParticlesBg, _Component);

  function ParticlesBg(props) {
    classCallCheck(this, ParticlesBg);
    return possibleConstructorReturn(this, (ParticlesBg.__proto__ || Object.getPrototypeOf(ParticlesBg)).call(this, props));
  }

  createClass(ParticlesBg, [{
    key: "getRandom",
    value: function getRandom() {
      var _props = this.props,
          num = _props.num,
          bg = _props.bg,
          color = _props.color;

      // Code source from here, thanks author
      // https://github.com/drawcall/Proton/blob/gh-pages/source/src/utils/Rand.js

      if (!this.random) {
        this.random = new Rand();
        this.random.set(0.25, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color, { num: num, bg: bg, color: color }));
        this.random.set(0.2, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Ball, { num: num, bg: bg, color: color }));
        this.random.set(0.2, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Lines, { num: num, bg: bg, color: color }));
        this.random.set(0.16, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Thick, { num: num, bg: bg, color: color }));
        this.random.set(0.18, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Circle, { num: num, bg: bg, color: color }));
        this.random.set(0.04, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Cobweb, { num: num, bg: bg, color: color }));
        this.random.set(0.1, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Polygon, { num: num, bg: bg, color: color }));
        this.random.set(0.08, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Square, { num: num, bg: bg, color: color }));
        this.random.set(0.18, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Tadpole, { num: num, bg: bg, color: color }));
        this.random.set(0.15, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Fountain, { num: num, bg: bg, color: color }));
      }
      return this.random.getResult();
    }
  }, {
    key: "getBgParticles",
    value: function getBgParticles() {
      var _props2 = this.props,
          type = _props2.type,
          num = _props2.num,
          bg = _props2.bg,
          color = _props2.color,
          config = _props2.config;


      var particles = void 0;
      switch (String(type).toLowerCase()) {
        case "color":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color, { num: num, bg: bg, color: color });
          break;
        case "ball":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Ball, { num: num, bg: bg, color: color });
          break;
        case "lines":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Lines, { num: num, bg: bg, color: color });
          break;
        case "thick":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Thick, { num: num, bg: bg, color: color });
          break;
        case "circle":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Circle, { num: num, bg: bg, color: color });
          break;
        case "cobweb":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Cobweb, { num: num, bg: bg, color: color });
          break;
        case "polygon":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Polygon, { num: num, bg: bg, color: color });
          break;
        case "square":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Square, { num: num, bg: bg, color: color });
          break;
        case "tadpole":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Tadpole, { num: num, bg: bg, color: color });
          break;
        case "fountain":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Fountain, { num: num, bg: bg, color: color });
          break;
        case "custom":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color$1, { bg: bg, config: config });
          break;
        case "random":
          particles = this.getRandom(num);
          break;

        default:
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color, { num: num, bg: bg, color: color });
          break;
      }

      return particles;
    }
  }, {
    key: "render",
    value: function render() {
      var particles = this.getBgParticles();
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(
        (react__WEBPACK_IMPORTED_MODULE_0___default().Fragment),
        null,
        particles
      );
    }
  }]);
  return ParticlesBg;
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);

/* harmony default export */ __webpack_exports__["default"] = (ParticlesBg);
//# sourceMappingURL=index.es.js.map


/***/ }),

/***/ "./node_modules/proton-engine/build/proton.min.js":
/*!********************************************************!*\
  !*** ./node_modules/proton-engine/build/proton.min.js ***!
  \********************************************************/
/***/ (function(module) {

/*!
* Proton v4.2.1
* https://github.com/drawcall/Proton
*
* Copyright 2013-2020, A-JIE
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/
!function(t,e){ true?module.exports=e():0}(this,function(){"use strict";var e=3.1415926,s={PI:e,PIx2:2*e,PI_2:e/2,PI_180:e/180,N180_PI:180/e,Infinity:-999,isInfinity:function(t){return t===this.Infinity||t===1/0},randomAToB:function(t,e,i){return 2<arguments.length&&void 0!==i&&i?Math.floor(Math.random()*(e-t))+t:t+Math.random()*(e-t)},randomFloating:function(t,e,i){return this.randomAToB(t-e,t+e,i)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},randomZone:function(){},floor:function(t,e){e=1<arguments.length&&void 0!==e?e:4,e=Math.pow(10,e);return Math.floor(t*e)/e},degreeTransform:function(t){return t*e/180},toColor16:function(t){return"#"+t.toString(16)}},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t};function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0!==a){if("value"in a)return a.value;a=a.get;return void 0!==a?a.call(i):void 0}if(null!==(t=Object.getPrototypeOf(t)))return n(t,e,i)}var r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},l=(t(u,[{key:"getValue",value:function(t){t=0<arguments.length&&void 0!==t&&t;return this.isArray?P.getRandFromArray(this.a):this.center?s.randomFloating(this.a,this.b,t):s.randomAToB(this.a,this.b,t)}}],[{key:"setSpanValue",value:function(t,e,i){return t instanceof u?t:void 0===e?new u(t):void 0===i?new u(t,e):new u(t,e,i)}},{key:"getSpanValue",value:function(t){return t instanceof u?t.getValue():t}}]),u);function u(t,e,i){o(this,u),P.isArray(t)?(this.isArray=!0,this.a=t):(this.isArray=!1,this.a=P.initValue(t,1),this.b=P.initValue(e,this.a),this.center=P.initValue(i,!1))}var c=function(t){--t;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},d=function(t,e){return[1,0,0,0,1,0,t,e,1]},y=function(t){var e=Math.cos(t),t=Math.sin(t);return[e,-t,0,t,e,0,0,0,1]},p=function(t,e){return[t,0,0,0,e,0,0,0,1]},f=function(t,e){var i=t[0],a=t[1],r=t[2],n=t[3],s=t[4],o=t[5],h=t[6],l=t[7],u=t[8],c=e[0],d=e[1],y=e[2],p=e[3],f=e[4],v=e[5],g=e[6],t=e[7],e=e[8];return[i*c+a*p+r*g,i*d+a*f+r*t,i*y+a*v+r*e,n*c+s*p+o*g,n*d+s*f+o*t,n*y+s*v+o*e,h*c+l*p+u*g,h*d+l*f+u*t,h*y+l*v+u*e]},v={createCanvas:function(t,e,i,a){var r=3<arguments.length&&void 0!==a?a:"absolute",a=document.createElement("canvas");return a.id=t,a.width=e,a.height=i,a.style.opacity=0,a.style.position=r,this.transform(a,-500,-500,0,0),a},createDiv:function(t,e,i){var a=document.createElement("div");return a.id=t,a.style.position="absolute",this.resize(a,e,i),a},resize:function(t,e,i){t.style.width=e+"px",t.style.height=i+"px",t.style.marginLeft=-e/2+"px",t.style.marginTop=-i/2+"px"},transform:function(t,e,i,a,r){t.style.willChange="transform";var n="translate("+e+"px, "+i+"px) scale("+a+") rotate("+r+"deg)";this.css3(t,"transform",n)},transform3d:function(t,e,i,a,r){t.style.willChange="transform";r="translate3d("+e+"px, "+i+"px, 0) scale("+a+") rotate("+r+"deg)";this.css3(t,"backfaceVisibility","hidden"),this.css3(t,"transform",r)},css3:function(t,e,i){var a=e.charAt(0).toUpperCase()+e.substr(1);t.style["Webkit"+a]=i,t.style["Moz"+a]=i,t.style["O"+a]=i,t.style["ms"+a]=i,t.style[""+e]=i}},g={},m={},b=0,_=function(t,e,i){t.drawImage(e,i.x,i.y);e=t.getImageData(i.x,i.y,i.width,i.height);return t.clearRect(i.x,i.y,i.width,i.height),e},x=function(t,e,i){var a="string"==typeof t?t:t.src;g[a]?e(g[a],i):((t=new Image).onload=function(t){g[a]=t.target,e(g[a],i)},t.src=a)},k=function(t,e,i){var a,r,n=t.src;return m[n]||(a=c(t.width),r=c(t.height),(r=v.createCanvas("proton_canvas_cache_"+ ++b,a,r)).getContext("2d").drawImage(t,0,0,t.width,t.height),m[n]=r),e&&e(m[n],i),m[n]},P={initValue:function(t,e){return t=null!=t?t:e},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyArray:function(t){t&&(t.length=0)},toArray:function(t){return this.isArray(t)?t:[t]},getRandFromArray:function(t){return t?t[Math.floor(t.length*Math.random())]:null},emptyObject:function(t,e){var i,a=1<arguments.length&&void 0!==e?e:null;for(i in t)a&&-1<a.indexOf(i)||delete t[i]},classApply:function(t,e){e=1<arguments.length&&void 0!==e?e:null;return new(e?t.bind.apply(t,[null].concat(e)):t)},setVectorVal:function(t,e){e=1<arguments.length&&void 0!==e?e:null;e&&(this.hasProp(e,"x")&&(t.p.x=e.x),this.hasProp(e,"y")&&(t.p.y=e.y),this.hasProp(e,"vx")&&(t.v.x=e.vx),this.hasProp(e,"vy")&&(t.v.y=e.vy),this.hasProp(e,"ax")&&(t.a.x=e.ax),this.hasProp(e,"ay")&&(t.a.y=e.ay),this.hasProp(e,"p")&&t.p.copy(e.p),this.hasProp(e,"v")&&t.v.copy(e.v),this.hasProp(e,"a")&&t.a.copy(e.a),this.hasProp(e,"position")&&t.p.copy(e.position),this.hasProp(e,"velocity")&&t.v.copy(e.velocity),this.hasProp(e,"accelerate")&&t.a.copy(e.accelerate))},hasProp:function(t,e){return!!t&&void 0!==t[e]},setProp:function(t,e){for(var i in e)t.hasOwnProperty(i)&&(t[i]=l.getSpanValue(e[i]));return t},getImageData:function(t,e,i){return _(t,e,i)},destroyAll:function(t,e){for(var i=1<arguments.length&&void 0!==e?e:null,a=t.length;a--;){try{t[a].destroy(i)}catch(t){}delete t[a]}t.length=0},assign:function(t,e){if("function"==typeof Object.assign)return Object.assign(t,e);for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}},E={},A={_index:0,_cache:{},id:function(t){return void 0!==E[t]&&null!==E[t]||(E[t]=0),t+"_"+E[t]++},getId:function(t){var e=this.getIdFromCache(t);return e||(e="PUID_"+this._index++,this._cache[e]=t,e)},getIdFromCache:function(t){var e,i=void 0;for(i in this._cache){if((e=this._cache[i])===t)return i;if(this.isBody(e,t)&&e.src===t.src)return i}return null},isBody:function(t,e){return"object"===(void 0===t?"undefined":i(t))&&"object"===(void 0===e?"undefined":i(e))&&t.isInner&&e.isInner},getTarget:function(t){return this._cache[t]}},T=(t(R,[{key:"get",value:function(t,e,i){var a=void 0;return i=i||t.__puid||A.getId(t),(a=this.cache[i]&&0<this.cache[i].length?this.cache[i].pop():this.createOrClone(t,e)).__puid=t.__puid||i,a}},{key:"expire",value:function(t){return this.getCache(t.__puid).push(t)}},{key:"createOrClone",value:function(t,e){return this.total++,this.create?this.create(t,e):"function"==typeof t?P.classApply(t,e):t.clone()}},{key:"getCount",value:function(){var t,e=0;for(t in this.cache)e+=this.cache[t].length;return e++}},{key:"destroy",value:function(){for(var t in this.cache)this.cache[t].length=0,delete this.cache[t]}},{key:"getCache",value:function(t){t=0<arguments.length&&void 0!==t?t:"default";return this.cache[t]||(this.cache[t]=[]),this.cache[t]}}]),R);function R(t){o(this,R),this.total=0,this.cache={}}var O=(t(w,[{key:"update",value:function(t,e){this.add(t,e);var i=this.getEmitter(),t=this.getRenderer(),e="";switch(this.type){case 2:e+="emitter:"+this.proton.emitters.length+"<br>",i&&(e+="em speed:"+i.emitSpeed+"<br>"),i&&(e+="pos:"+this.getEmitterPos(i));break;case 3:i&&(e+="initializes:"+i.initializes.length+"<br>"),i&&(e+='<span style="display:inline-block;">'+this.concatArr(i.initializes)+"</span><br>"),i&&(e+="behaviours:"+i.behaviours.length+"<br>"),i&&(e+='<span style="display:inline-block;">'+this.concatArr(i.behaviours)+"</span><br>");break;case 4:t&&(e+=t.name+"<br>"),t&&(e+="body:"+this.getCreatedNumber(t)+"<br>");break;default:e+="particles:"+this.proton.getCount()+"<br>",e+="pool:"+this.proton.pool.getCount()+"<br>",e+="total:"+this.proton.pool.total}this.container.innerHTML=e}},{key:"add",value:function(t,e){var i=this;if(!this.container){this.type=1,this.container=document.createElement("div"),this.container.style.cssText=["position:absolute;bottom:0px;left:0;cursor:pointer;","opacity:0.9;z-index:10000;padding:10px;font-size:12px;font-family:Helvetica,Arial,sans-serif;","width:120px;height:50px;background-color:#002;color:#0ff;"].join(""),this.container.addEventListener("click",function(t){i.type++,4<i.type&&(i.type=1)},!1);var a=void 0,r=void 0;switch(t){case 2:a="#201",r="#f08";break;case 3:a="#020",r="#0f0";break;default:a="#002",r="#0ff"}this.container.style["background-color"]=a,this.container.style.color=r}this.container.parentNode||(e=e||this.body||document.body).appendChild(this.container)}},{key:"getEmitter",value:function(){return this.proton.emitters[this.emitterIndex]}},{key:"getRenderer",value:function(){return this.proton.renderers[this.rendererIndex]}},{key:"concatArr",value:function(t){var e="";if(!t||!t.length)return e;for(var i=0;i<t.length;i++)e+=(t[i].name||"").substr(0,1)+".";return e}},{key:"getCreatedNumber",value:function(t){return t.pool.total||t.cpool&&t.cpool.total||0}},{key:"getEmitterPos",value:function(t){return Math.round(t.p.x)+","+Math.round(t.p.y)}}]),w);function w(t){o(this,w),this.proton=t,this.container=null,this.type=1,this.emitterIndex=0,this.rendererIndex=0}var C=(t(S,[{key:"addEventListener",value:function(t,e){return this._listeners?this.removeEventListener(t,e):this._listeners={},this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),e}},{key:"removeEventListener",value:function(t,e){if(this._listeners&&this._listeners[t])for(var i=this._listeners[t],a=i.length,r=0;r<a;r++)if(i[r]===e){1===a?delete this._listeners[t]:i.splice(r,1);break}}},{key:"removeAllEventListeners",value:function(t){t?this._listeners&&delete this._listeners[t]:this._listeners=null}},{key:"dispatchEvent",value:function(t,e){var i=!1,a=this._listeners;if(t&&a){var r=a[t];if(!r)return i;for(var n=void 0,s=r.length;s--;)n=r[s],i=i||n(e)}return!!i}},{key:"hasEventListener",value:function(t){var e=this._listeners;return!(!e||!e[t])}}],[{key:"bind",value:function(t){t.prototype.dispatchEvent=S.prototype.dispatchEvent,t.prototype.hasEventListener=S.prototype.hasEventListener,t.prototype.addEventListener=S.prototype.addEventListener,t.prototype.removeEventListener=S.prototype.removeEventListener,t.prototype.removeAllEventListeners=S.prototype.removeAllEventListeners}}]),S);function S(){o(this,S),this._listeners=null}var I=(t(D,[{key:"calculate",value:function(t,e,i){this.eulerIntegrate(t,e,i)}},{key:"eulerIntegrate",value:function(t,e,i){t.sleep||(t.old.p.copy(t.p),t.old.v.copy(t.v),t.a.multiplyScalar(1/t.mass),t.v.add(t.a.multiplyScalar(e)),t.p.add(t.old.v.multiplyScalar(e)),i&&t.v.multiplyScalar(i),t.a.clear())}}]),D);function D(t){o(this,D),this.type=t}var V=(t(M,[{key:"addRenderer",value:function(t){t.init(this),this.renderers.push(t)}},{key:"removeRenderer",value:function(t){var e=this.renderers.indexOf(t);this.renderers.splice(e,1),t.remove(this)}},{key:"addEmitter",value:function(t){this.emitters.push(t),(t.parent=this).dispatchEvent(M.EMITTER_ADDED,t)}},{key:"removeEmitter",value:function(t){var e=this.emitters.indexOf(t);this.emitters.splice(e,1),t.parent=null,this.dispatchEvent(M.EMITTER_REMOVED,t)}},{key:"update",value:function(){"auto"===this._fps?(this.dispatchEvent(M.PROTON_UPDATE),M.USE_CLOCK?(this.then||(this.then=(new Date).getTime()),this.now=(new Date).getTime(),this.elapsed=.001*(this.now-this.then),this.amendChangeTabsBug(),0<this.elapsed&&this.emittersUpdate(this.elapsed),this.then=this.now):this.emittersUpdate(M.DEFAULT_INTERVAL),this.dispatchEvent(M.PROTON_UPDATE_AFTER)):(this.then||(this.then=(new Date).getTime()),this.now=(new Date).getTime(),this.elapsed=.001*(this.now-this.then),this.elapsed>this._interval&&(this.dispatchEvent(M.PROTON_UPDATE),this.emittersUpdate(this._interval),this.then=this.now-this.elapsed%this._interval*1e3,this.dispatchEvent(M.PROTON_UPDATE_AFTER)))}},{key:"emittersUpdate",value:function(t){for(var e=this.emitters.length;e--;)this.emitters[e].update(t)}},{key:"amendChangeTabsBug",value:function(){M.amendChangeTabsBug&&.5<this.elapsed&&(this.then=(new Date).getTime(),this.elapsed=0)}},{key:"getCount",value:function(){for(var t=0,e=this.emitters.length;e--;)t+=this.emitters[e].particles.length;return t}},{key:"getAllParticles",value:function(){for(var t=[],e=this.emitters.length;e--;)t=t.concat(this.emitters[e].particles);return t}},{key:"destroyAllEmitters",value:function(){P.destroyAll(this.emitters)}},{key:"destroy",value:function(t){function e(){i.time=0,i.then=0,i.pool.destroy(),P.destroyAll(i.emitters),P.destroyAll(i.renderers,i.getAllParticles())}var i=this;0<arguments.length&&void 0!==t&&t?setTimeout(e,200):e()}},{key:"fps",set:function(t){this._fps=t,this._interval="auto"===t?M.DEFAULT_INTERVAL:s.floor(1/t,7)},get:function(){return this._fps}}]),M);function M(t){o(this,M),this.emitters=[],this.renderers=[],this.time=0,this.now=0,this.then=0,this.elapsed=0,this.stats=new O(this),this.pool=new T(80),this.integrationType=P.initValue(t,M.EULER),this.integrator=new I(this.integrationType),this._fps="auto",this._interval=M.DEFAULT_INTERVAL}V.USE_CLOCK=!1,V.MEASURE=100,V.EULER="euler",V.RK2="runge-kutta2",V.PARTICLE_CREATED="PARTICLE_CREATED",V.PARTICLE_UPDATE="PARTICLE_UPDATE",V.PARTICLE_SLEEP="PARTICLE_SLEEP",V.PARTICLE_DEAD="PARTICLE_DEAD",V.EMITTER_ADDED="EMITTER_ADDED",V.EMITTER_REMOVED="EMITTER_REMOVED",V.PROTON_UPDATE="PROTON_UPDATE",V.PROTON_UPDATE_AFTER="PROTON_UPDATE_AFTER",V.DEFAULT_INTERVAL=.0167,V.amendChangeTabsBug=!0,C.bind(V);var B=(t(L,[{key:"reset",value:function(){this.r=255,this.g=255,this.b=255}}]),L);function L(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:255;o(this,L),this.r=t,this.g=e,this.b=i}var U={easeLinear:function(t){return t},easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInSine:function(t){return 1-Math.cos(t*s.PI_2)},easeOutSine:function(t){return Math.sin(t*s.PI_2)},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInBack:function(t){return t*t*(2.70158*t-1.70158)},easeOutBack:function(t){return--t*t*(2.70158*t+1.70158)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},getEasing:function(t){return"function"==typeof t?t:this[t]||this.easeLinear}},F=(t(z,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"getGradient",value:function(){return 0!==this.x?Math.atan2(this.y,this.x):0<this.y?s.PI_2:this.y<0?-s.PI_2:void 0}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)}},{key:"addXY",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"sub",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"divideScalar",value:function(t){return 0!==t?(this.x/=t,this.y/=t):this.set(0,0),this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"negate",value:function(){return this.multiplyScalar(-1)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"rotate",value:function(t){var e=this.x,i=this.y;return this.x=e*Math.cos(t)+i*Math.sin(t),this.y=-e*Math.sin(t)+i*Math.cos(t),this}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,t=this.y-t.y;return e*e+t*t}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"clear",value:function(){return this.x=0,this.y=0,this}},{key:"clone",value:function(){return new z(this.x,this.y)}}]),z);function z(t,e){o(this,z),this.x=t||0,this.y=e||0}var j=(t(N,[{key:"getDirection",value:function(){return Math.atan2(this.v.x,-this.v.y)*s.N180_PI}},{key:"reset",value:function(){return this.life=1/0,this.age=0,this.dead=!1,this.sleep=!1,this.body=null,this.sprite=null,this.parent=null,this.energy=1,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.rotation=0,this.color=null,this.p.set(0,0),this.v.set(0,0),this.a.set(0,0),this.old.p.set(0,0),this.old.v.set(0,0),this.old.a.set(0,0),this.easing=U.easeLinear,this.rgb.reset(),P.emptyObject(this.data),this.removeAllBehaviours(),this}},{key:"update",value:function(t,e){this.sleep||(this.age+=t,this.applyBehaviours(t,e)),this.age<this.life?(e=this.easing(this.age/this.life),this.energy=Math.max(1-e,0)):this.destroy()}},{key:"applyBehaviours",value:function(t,e){for(var i=this.behaviours.length,a=void 0,a=0;a<i;a++)this.behaviours[a]&&this.behaviours[a].applyBehaviour(this,t,e)}},{key:"addBehaviour",value:function(t){this.behaviours.push(t),t.hasOwnProperty("parents")&&t.parents.push(this),t.initialize(this)}},{key:"addBehaviours",value:function(t){for(var e=t.length,i=void 0,i=0;i<e;i++)this.addBehaviour(t[i])}},{key:"removeBehaviour",value:function(t){t=this.behaviours.indexOf(t);-1<t&&(this.behaviours.splice(t,1).parents=null)}},{key:"removeAllBehaviours",value:function(){P.emptyArray(this.behaviours)}},{key:"destroy",value:function(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}}]),N);function N(t){o(this,N),this.id="",this.old={},this.data={},this.behaviours=[],this.p=[],this.v=[],this.a=[],this.rgb={},this.name="Particle",this.id=A.id(this.name),this.old={},this.data={},this.behaviours=[],this.p=new F,this.v=new F,this.a=new F,this.old.p=new F,this.old.v=new F,this.old.a=new F,this.rgb=new B,this.reset(),t&&P.setProp(this,t)}var H={hexToRgb:function(t){t="#"===t.charAt(0)?t.substring(1,7):t;return{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},rgbToHex:function(t){return"rgb("+t.r+", "+t.g+", "+t.b+")"},getHex16FromParticle:function(t){return 65536*Number(t.rgb.r)+256*Number(t.rgb.g)+Number(t.rgb.b)}},q=(t(G,[{key:"set",value:function(t,e){return this.r=t,this.tha=e,this}},{key:"setR",value:function(t){return this.r=t,this}},{key:"setTha",value:function(t){return this.tha=t,this}},{key:"copy",value:function(t){return this.r=t.r,this.tha=t.tha,this}},{key:"toVector",value:function(){return new F(this.getX(),this.getY())}},{key:"getX",value:function(){return this.r*Math.sin(this.tha)}},{key:"getY",value:function(){return-this.r*Math.cos(this.tha)}},{key:"normalize",value:function(){return this.r=1,this}},{key:"equals",value:function(t){return t.r===this.r&&t.tha===this.tha}},{key:"clear",value:function(){return this.r=0,this.tha=0,this}},{key:"clone",value:function(){return new G(this.r,this.tha)}}]),G);function G(t,e){o(this,G),this.r=Math.abs(t)||0,this.tha=e||0}var X={create:function(t){var e=new Float32Array(9);return t&&this.set(t,e),e},set:function(t,e){for(var i=0;i<9;i++)e[i]=t[i];return e},multiply:function(t,e,i){var a=t[0],r=t[1],n=t[2],s=t[3],o=t[4],h=t[6],l=t[7],u=e[0],c=e[1],d=e[2],y=e[3],p=e[4],t=e[6],e=e[7];return i[0]=u*a+c*s,i[1]=u*r+c*o,i[2]=n*d,i[3]=y*a+p*s,i[4]=y*r+p*o,i[6]=t*a+e*s+h,i[7]=t*r+e*o+l,i},inverse:function(t,e){var i=t[0],a=t[1],r=t[3],n=t[4],s=t[6],o=t[7],h=-r,t=o*r-n*s,r=1/(i*n+a*h);return e[0]=n*r,e[1]=-a*r,e[3]=h*r,e[4]=i*r,e[6]=t*r,e[7]=(-o*i+a*s)*r,e},multiplyVec2:function(t,e,i){var a=e[0],e=e[1];return i[0]=a*t[0]+e*t[3]+t[6],i[1]=a*t[1]+e*t[4]+t[7],i}},Y=(r(W,l),t(W,[{key:"getValue",value:function(){var t=P.getRandFromArray(this._arr);return"random"===t||"Random"===t?s.randomColor():t}}],[{key:"createArraySpan",value:function(t){return t?t instanceof W?t:new W(t):null}}]),W);function W(t){o(this,W);var e=h(this,(W.__proto__||Object.getPrototypeOf(W)).call(this));return e._arr=P.toArray(t),e}var Z=(t(Q,[{key:"contains",value:function(t,e){return t<=this.right&&t>=this.x&&e<=this.bottom&&e>=this.y}}]),Q);function Q(t,e,i,a){o(this,Q),this.x=t,this.y=e,this.width=i,this.height=a,this.bottom=this.y+this.height,this.right=this.x+this.width}var K=(t(J,[{key:"init",value:function(){this.startTime=0,this.nextTime=this.timePan.getValue()}},{key:"getValue",value:function(t){return this.startTime+=t,this.startTime>=this.nextTime?(this.startTime=0,this.nextTime=this.timePan.getValue(),1===this.numPan.b?.5<this.numPan.getValue(!1)?1:0:this.numPan.getValue(!0)):0}}]),J);function J(t,e){o(this,J),this.numPan=l.setSpanValue(P.initValue(t,1)),this.timePan=l.setSpanValue(P.initValue(e,1)),this.startTime=0,this.nextTime=0,this.init()}var $=(t(tt,[{key:"reset",value:function(){}},{key:"init",value:function(t,e){e?this.initialize(e):this.initialize(t)}},{key:"initialize",value:function(){}}]),tt);function tt(){o(this,tt)}var et=(r(it,$),t(it,[{key:"initialize",value:function(t){this.lifePan.a===1/0?t.life=1/0:t.life=this.lifePan.getValue()}}]),it);function it(t,e,i){o(this,it);var a=h(this,(it.__proto__||Object.getPrototypeOf(it)).call(this));return a.lifePan=l.setSpanValue(t,e,i),a.name="Life",a}var at=(t(rt,[{key:"getPosition",value:function(){}},{key:"crossing",value:function(){}}]),rt);function rt(){o(this,rt),this.vector=new F(0,0),this.random=0,this.crossType="dead",this.alert=!0}var nt=(r(st,at),t(st,[{key:"getPosition",value:function(){return this.vector.x=this.x,this.vector.y=this.y,this.vector}},{key:"crossing",value:function(){this.alert&&(console.error("Sorry, PointZone does not support crossing method!"),this.alert=!1)}}]),st);function st(t,e){o(this,st);var i=h(this,(st.__proto__||Object.getPrototypeOf(st)).call(this));return i.x=t,i.y=e,i}var ot=(r(ht,$),t(ht,[{key:"reset",value:function(t){this.zone=P.initValue(t,new nt)}},{key:"initialize",value:function(t){this.zone.getPosition(),t.p.x=this.zone.vector.x,t.p.y=this.zone.vector.y}}]),ht);function ht(t){o(this,ht);var e=h(this,(ht.__proto__||Object.getPrototypeOf(ht)).call(this));return e.zone=P.initValue(t,new nt),e.name="Position",e}var lt=(r(ut,$),t(ut,[{key:"reset",value:function(t,e,i){this.rPan=l.setSpanValue(t),this.thaPan=l.setSpanValue(e),this.type=P.initValue(i,"vector")}},{key:"normalizeVelocity",value:function(t){return t*V.MEASURE}},{key:"initialize",value:function(t){var e;"p"===this.type||"P"===this.type||"polar"===this.type?(e=new q(this.normalizeVelocity(this.rPan.getValue()),this.thaPan.getValue()*s.PI_180),t.v.x=e.getX(),t.v.y=e.getY()):(t.v.x=this.normalizeVelocity(this.rPan.getValue()),t.v.y=this.normalizeVelocity(this.thaPan.getValue()))}}]),ut);function ut(t,e,i){o(this,ut);var a=h(this,(ut.__proto__||Object.getPrototypeOf(ut)).call(this));return a.rPan=l.setSpanValue(t),a.thaPan=l.setSpanValue(e),a.type=P.initValue(i,"vector"),a.name="Velocity",a}var ct=(r(dt,$),t(dt,[{key:"initialize",value:function(t){t.mass=this.massPan.getValue()}}]),dt);function dt(t,e,i){o(this,dt);var a=h(this,(dt.__proto__||Object.getPrototypeOf(dt)).call(this));return a.massPan=l.setSpanValue(t,e,i),a.name="Mass",a}var yt=(r(pt,$),t(pt,[{key:"reset",value:function(t,e,i){this.radius=l.setSpanValue(t,e,i)}},{key:"initialize",value:function(t){t.radius=this.radius.getValue(),t.data.oldRadius=t.radius}}]),pt);function pt(t,e,i){o(this,pt);var a=h(this,(pt.__proto__||Object.getPrototypeOf(pt)).call(this));return a.radius=l.setSpanValue(t,e,i),a.name="Radius",a}var ft=(r(vt,$),t(vt,[{key:"initialize",value:function(t){var e=this.image.getValue();t.body="string"==typeof e?{width:this.w,height:this.h,src:e,isInner:!0,inner:!0}:e}},{key:"setSpanValue",value:function(t){return t instanceof Y?t:new Y(t)}}]),vt);function vt(t,e,i){o(this,vt);var a=h(this,(vt.__proto__||Object.getPrototypeOf(vt)).call(this));return a.image=a.setSpanValue(t),a.w=P.initValue(e,20),a.h=P.initValue(i,a.w),a.name="Body",a}var gt=(t(mt,[{key:"reset",value:function(t,e){this.life=P.initValue(t,1/0),this.easing=U.getEasing(e)}},{key:"normalizeForce",value:function(t){return t.multiplyScalar(V.MEASURE)}},{key:"normalizeValue",value:function(t){return t*V.MEASURE}},{key:"initialize",value:function(){}},{key:"calculate",value:function(t,e){this.age+=e,this.age>=this.life||this.dead?(this.energy=0,this.dead=!0,this.destroy()):(t=this.easing(t.age/t.life),this.energy=Math.max(1-t,0))}},{key:"destroy",value:function(){for(var t=this.parents.length;t--;)this.parents[t].removeBehaviour(this);this.parents.length=0}}]),mt);function mt(t,e){o(this,mt),this.life=P.initValue(t,1/0),this.easing=U.getEasing(e),this.age=0,this.energy=1,this.dead=!1,this.parents=[],this.id="Behaviour_"+mt.id++,this.name="Behaviour"}gt.id=0;var bt=(r(_t,gt),t(_t,[{key:"reset",value:function(t,e,i,a){this.force=this.normalizeForce(new F(t,e)),i&&n(_t.prototype.__proto__||Object.getPrototypeOf(_t.prototype),"reset",this).call(this,i,a)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.a.add(this.force)}}]),_t);function _t(t,e,i,a){o(this,_t);a=h(this,(_t.__proto__||Object.getPrototypeOf(_t)).call(this,i,a));return a.force=a.normalizeForce(new F(t,e)),a.name="Force",a}var xt=(r(kt,gt),t(kt,[{key:"reset",value:function(t,e,i,a,r){this.targetPosition=P.initValue(t,new F),this.radius=P.initValue(i,1e3),this.force=P.initValue(this.normalizeValue(e),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new F,this.lengthSq=0,a&&n(kt.prototype.__proto__||Object.getPrototypeOf(kt.prototype),"reset",this).call(this,a,r)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(t.p),this.lengthSq=this.attractionForce.lengthSq(),4e-5<this.lengthSq&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.multiplyScalar(1-this.lengthSq/this.radiusSq),this.attractionForce.multiplyScalar(this.force),t.a.add(this.attractionForce))}}]),kt);function kt(t,e,i,a,r){o(this,kt);r=h(this,(kt.__proto__||Object.getPrototypeOf(kt)).call(this,a,r));return r.targetPosition=P.initValue(t,new F),r.radius=P.initValue(i,1e3),r.force=P.initValue(r.normalizeValue(e),100),r.radiusSq=r.radius*r.radius,r.attractionForce=new F,r.lengthSq=0,r.name="Attraction",r}var Pt=(r(Et,gt),t(Et,[{key:"reset",value:function(t,e,i,a,r){this.panFoce=new F(t,e),this.panFoce=this.normalizeForce(this.panFoce),this.delay=i,a&&n(Et.prototype.__proto__||Object.getPrototypeOf(Et.prototype),"reset",this).call(this,a,r)}},{key:"initialize",value:function(t){t.data.time=0}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.data.time+=e,t.data.time>=this.delay&&(t.a.addXY(s.randomAToB(-this.panFoce.x,this.panFoce.x),s.randomAToB(-this.panFoce.y,this.panFoce.y)),t.data.time=0)}}]),Et);function Et(t,e,i,a,r){o(this,Et);r=h(this,(Et.__proto__||Object.getPrototypeOf(Et)).call(this,a,r));return r.reset(t,e,i),r.time=0,r.name="RandomDrift",r}var At=(r(Tt,bt),t(Tt,[{key:"reset",value:function(t,e,i){n(Tt.prototype.__proto__||Object.getPrototypeOf(Tt.prototype),"reset",this).call(this,0,t,e,i)}}]),Tt);function Tt(t,e,i){o(this,Tt);i=h(this,(Tt.__proto__||Object.getPrototypeOf(Tt)).call(this,0,t,e,i));return i.name="Gravity",i}var Rt=(r(Ot,gt),t(Ot,[{key:"reset",value:function(t,e,i,a,r){this.emitter=P.initValue(t,null),this.mass=P.initValue(e,!0),this.callback=P.initValue(i,null),this.collisionPool=[],this.delta=new F,a&&n(Ot.prototype.__proto__||Object.getPrototypeOf(Ot.prototype),"reset",this).call(this,a,r)}},{key:"applyBehaviour",value:function(t,e,i){for(var a,r,n,s,o,h,l=(this.emitter?this.emitter.particles:this.pool).slice(i),u=l.length,c=void 0,d=void 0,d=0;d<u;d++){(c=l[d])!==t&&(this.delta.copy(c.p),this.delta.sub(t.p),(a=this.delta.lengthSq())<=(h=t.radius+c.radius)*h&&(r=h-Math.sqrt(a),r+=.5,n=t.mass+c.mass,s=this.mass?c.mass/n:.5,o=this.mass?t.mass/n:.5,t.p.add(this.delta.clone().normalize().multiplyScalar(r*-s)),c.p.add(this.delta.normalize().multiplyScalar(r*o)),this.callback&&this.callback(t,c)))}}}]),Ot);function Ot(t,e,i,a,r){o(this,Ot);r=h(this,(Ot.__proto__||Object.getPrototypeOf(Ot)).call(this,a,r));return r.reset(t,e,i),r.name="Collision",r}var wt=(r(Ct,gt),t(Ct,[{key:"reset",value:function(t,e,i,a){this.zone=t,this.zone.crossType=P.initValue(e,"dead"),i&&n(Ct.prototype.__proto__||Object.getPrototypeOf(Ct.prototype),"reset",this).call(this,i,a)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.zone.crossing(t)}}]),Ct);function Ct(t,e,i,a){o(this,Ct);a=h(this,(Ct.__proto__||Object.getPrototypeOf(Ct)).call(this,i,a));return a.reset(t,e),a.name="CrossZone",a}var St=(r(It,gt),t(It,[{key:"reset",value:function(t,e,i,a){this.same=null==e,this.a=l.setSpanValue(P.initValue(t,1)),this.b=l.setSpanValue(e),i&&n(It.prototype.__proto__||Object.getPrototypeOf(It.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(t){t.data.alphaA=this.a.getValue(),this.same?t.data.alphaB=t.data.alphaA:t.data.alphaB=this.b.getValue()}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.alpha=t.data.alphaB+(t.data.alphaA-t.data.alphaB)*this.energy,t.alpha<.001&&(t.alpha=0)}}]),It);function It(t,e,i,a){o(this,It);a=h(this,(It.__proto__||Object.getPrototypeOf(It)).call(this,i,a));return a.reset(t,e),a.name="Alpha",a}var Dt=(r(Vt,gt),t(Vt,[{key:"reset",value:function(t,e,i,a){this.same=null==e,this.a=l.setSpanValue(P.initValue(t,1)),this.b=l.setSpanValue(e),i&&n(Vt.prototype.__proto__||Object.getPrototypeOf(Vt.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(t){t.data.scaleA=this.a.getValue(),t.data.oldRadius=t.radius,t.data.scaleB=this.same?t.data.scaleA:this.b.getValue()}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.scale=t.data.scaleB+(t.data.scaleA-t.data.scaleB)*this.energy,t.scale<1e-4&&(t.scale=0),t.radius=t.data.oldRadius*t.scale}}]),Vt);function Vt(t,e,i,a){o(this,Vt);a=h(this,(Vt.__proto__||Object.getPrototypeOf(Vt)).call(this,i,a));return a.reset(t,e),a.name="Scale",a}var Mt=(r(Bt,gt),t(Bt,[{key:"reset",value:function(t,e,i,a,r){this.same=null==e,this.a=l.setSpanValue(P.initValue(t,"Velocity")),this.b=l.setSpanValue(P.initValue(e,0)),this.style=P.initValue(i,"to"),a&&n(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"reset",this).call(this,a,r)}},{key:"initialize",value:function(t){t.rotation=this.a.getValue(),t.data.rotationA=this.a.getValue(),this.same||(t.data.rotationB=this.b.getValue())}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.same?"V"!==this.a.a&&"Velocity"!==this.a.a&&"v"!==this.a.a||(t.rotation=t.getDirection()):"to"===this.style||"TO"===this.style||"_"===this.style?t.rotation+=t.data.rotationB+(t.data.rotationA-t.data.rotationB)*this.energy:t.rotation+=t.data.rotationB}}]),Bt);function Bt(t,e,i,a,r){o(this,Bt);r=h(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).call(this,a,r));return r.reset(t,e,i),r.name="Rotate",r}var Lt=(r(Ut,gt),t(Ut,[{key:"reset",value:function(t,e,i,a){this.a=Y.createArraySpan(t),this.b=Y.createArraySpan(e),i&&n(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(t){t.color=this.a.getValue(),t.data.colorA=H.hexToRgb(t.color),this.b&&(t.data.colorB=H.hexToRgb(this.b.getValue()))}},{key:"applyBehaviour",value:function(t,e,i){this.b?(this.calculate(t,e,i),t.rgb.r=t.data.colorB.r+(t.data.colorA.r-t.data.colorB.r)*this.energy,t.rgb.g=t.data.colorB.g+(t.data.colorA.g-t.data.colorB.g)*this.energy,t.rgb.b=t.data.colorB.b+(t.data.colorA.b-t.data.colorB.b)*this.energy,t.rgb.r=Math.floor(t.rgb.r),t.rgb.g=Math.floor(t.rgb.g),t.rgb.b=Math.floor(t.rgb.b)):(t.rgb.r=t.data.colorA.r,t.rgb.g=t.data.colorA.g,t.rgb.b=t.data.colorA.b)}}]),Ut);function Ut(t,e,i,a){o(this,Ut);a=h(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).call(this,i,a));return a.reset(t,e),a.name="Color",a}var Ft="changing",zt=(r(jt,gt),t(jt,[{key:"setAngleAndForce",value:function(t,e){this.force=Ft,this.angle=s.PI/2,"right"===t?this.angle=s.PI/2:"left"===t?this.angle=-s.PI/2:"random"===t?this.angle="random":t instanceof l?(this.angle="span",this.span=t):t&&(this.angle=t),"changing"===String(e).toLowerCase()||"chang"===String(e).toLowerCase()||"auto"===String(e).toLowerCase()?this.force=Ft:e&&(this.force=e)}},{key:"reset",value:function(t,e,i,a){this.angle=s.PI/2,this.setAngleAndForce(t,e),i&&n(jt.prototype.__proto__||Object.getPrototypeOf(jt.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(t){"random"===this.angle?t.data.cangle=s.randomAToB(-s.PI,s.PI):"span"===this.angle&&(t.data.cangle=this.span.getValue()),t.data.cyclone=new F(0,0)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i);e=void 0,i=t.v.getGradient();"random"===this.angle||"span"===this.angle?i+=t.data.cangle:i+=this.angle,e=this.force===Ft?t.v.length()/100:this.force,t.data.cyclone.x=e*Math.cos(i),t.data.cyclone.y=e*Math.sin(i),t.data.cyclone=this.normalizeForce(t.data.cyclone),t.a.add(t.data.cyclone)}}]),jt);function jt(t,e,i,a){o(this,jt);a=h(this,(jt.__proto__||Object.getPrototypeOf(jt)).call(this,i,a));return a.setAngleAndForce(t,e),a.name="Cyclone",a}var Nt=(r(Ht,xt),t(Ht,[{key:"reset",value:function(t,e,i,a,r){n(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"reset",this).call(this,t,e,i,a,r),this.force*=-1}}]),Ht);function Ht(t,e,i,a,r){o(this,Ht);r=h(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).call(this,t,e,i,a,r));return r.force*=-1,r.name="Repulsion",r}var qt=(r(Gt,gt),t(Gt,[{key:"reset",value:function(t,e,i,a){this.distanceVec=new F,this.centerPoint=P.initValue(t,new F),this.force=P.initValue(this.normalizeValue(e),100),i&&n(Gt.prototype.__proto__||Object.getPrototypeOf(Gt.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(){}},{key:"applyBehaviour",value:function(t,e){this.distanceVec.set(this.centerPoint.x-t.p.x,this.centerPoint.y-t.p.y);var i,a=this.distanceVec.lengthSq();0!==a&&(i=this.distanceVec.length(),i=this.force*e/(a*i),t.v.x+=i*this.distanceVec.x,t.v.y+=i*this.distanceVec.y)}}]),Gt);function Gt(t,e,i,a){o(this,Gt);a=h(this,(Gt.__proto__||Object.getPrototypeOf(Gt)).call(this,i,a));return a.distanceVec=new F,a.centerPoint=P.initValue(t,new F),a.force=P.initValue(a.normalizeValue(e),100),a.name="GravityWell",a}var Xt={initialize:function(t,e,i){for(var a=i.length,r=void 0,r=0;r<a;r++)i[r]instanceof $?i[r].init(t,e):this.init(t,e,i[r]);this.bindEmitter(t,e)},init:function(t,e,i){P.setProp(e,i),P.setVectorVal(e,i)},bindEmitter:function(t,e){t.bindEmitter&&(e.p.add(t.p),e.v.add(t.v),e.a.add(t.a),e.v.rotate(s.degreeTransform(t.rotation)))}},Yt=(r(Wt,j),t(Wt,[{key:"emit",value:function(t,e){this.stoped=!1,this.emitTime=0,this.totalTime=P.initValue(t,1/0),!0===e||"life"===e||"destroy"===e?this.life="once"===t?1:this.totalTime:isNaN(e)||(this.life=e),this.rate.init()}},{key:"stop",value:function(){this.totalTime=-1,this.emitTime=0,this.stoped=!0}},{key:"preEmit",value:function(t){var e=this.stoped,i=this.emitTime,a=this.totalTime;this.stoped=!1,this.emitTime=0,this.totalTime=t,this.rate.init();for(;.0167<t;)t-=.0167,this.update(.0167);this.stoped=e,this.emitTime=i+Math.max(t,0),this.totalTime=a}},{key:"removeAllParticles",value:function(){for(var t=this.particles.length;t--;)this.particles[t].dead=!0}},{key:"addSelfInitialize",value:function(t){t.init?t.init(this):this.initAll()}},{key:"addInitialize",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=e.length;a--;)this.initializes.push(e[a])}},{key:"removeInitialize",value:function(t){t=this.initializes.indexOf(t);-1<t&&this.initializes.splice(t,1)}},{key:"removeAllInitializers",value:function(){P.emptyArray(this.initializes)}},{key:"addBehaviour",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=arguments.length;a--;){var r=e[a];this.behaviours.push(r),r.parents&&r.parents.push(this)}}},{key:"removeBehaviour",value:function(t){var e=this.behaviours.indexOf(t);return this.behaviours.splice(e,1),t.parents&&(e=t.parents.indexOf(t),t.parents.splice(e,1)),e}},{key:"removeAllBehaviours",value:function(){P.emptyArray(this.behaviours)}},{key:"update",value:function(t){this.age+=t,(this.age>=this.life||this.dead)&&this.destroy(),this.emitting(t),this.integrate(t)}},{key:"integrate",value:function(t){if(this.parent){var e=1-this.damping;this.parent.integrator.calculate(this,t,e);for(var i=void 0,a=void 0,i=this.particles.length-1;0<=i;i--)(a=this.particles[i]).update(t,i),this.parent.integrator.calculate(a,t,e),this.dispatch("PARTICLE_UPDATE",a),a.dead&&(this.dispatch("PARTICLE_DEAD",a),this.parent.pool.expire(a),this.particles.splice(i,1))}}},{key:"dispatch",value:function(t,e){this.parent&&this.parent.dispatchEvent(t,e),this.bindEvent&&this.dispatchEvent(t,e)}},{key:"emitting",value:function(t){if("once"===this.totalTime){var e=void 0,i=this.rate.getValue(99999);for(0<i&&(this.emitSpeed=i),e=0;e<i;e++)this.createParticle();this.totalTime="none"}else if(this.emitTime+=t,this.emitTime<this.totalTime){var a=this.rate.getValue(t),r=void 0;for(0<a&&(this.emitSpeed=a),r=0;r<a;r++)this.createParticle()}}},{key:"createParticle",value:function(t,e){var i=this.parent.pool.get(j);return this.setupParticle(i,t,e),this.dispatch("PARTICLE_CREATED",i),i}},{key:"setupParticle",value:function(t,e,i){var a=this.initializes,r=this.behaviours;e&&(a=P.toArray(e)),i&&(r=P.toArray(i)),t.reset(),Xt.initialize(this,t,a),t.addBehaviours(r),(t.parent=this).particles.push(t)}},{key:"remove",value:function(){this.stop(),P.destroyAll(this.particles)}},{key:"destroy",value:function(){this.dead=!0,this.remove(),this.removeAllInitializers(),this.removeAllBehaviours(),this.parent&&this.parent.removeEmitter(this)}}]),Wt);function Wt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,Wt);t=h(this,(Wt.__proto__||Object.getPrototypeOf(Wt)).call(this,t));return t.particles=[],t.behaviours=[],t.initializes=[],t.emitTime=0,t.emitSpeed=0,t.totalTime=-1,t.damping=.006,t.bindEmitter=!0,t.rate=new K(1,.1),t.name="Emitter",t.id=A.id(t.name),t}C.bind(Yt);var Zt=(r(Qt,Yt),t(Qt,[{key:"addSelfBehaviour",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=void 0,r=e.length,a=0;a<r;a++){var n=e[a];this.selfBehaviours.push(n),n.initialize(this)}}},{key:"removeSelfBehaviour",value:function(t){t=this.selfBehaviours.indexOf(t);-1<t&&this.selfBehaviours.splice(t,1)}},{key:"update",value:function(t){if(n(Qt.prototype.__proto__||Object.getPrototypeOf(Qt.prototype),"update",this).call(this,t),!this.sleep)for(var e=this.selfBehaviours.length,i=void 0,i=0;i<e;i++)this.selfBehaviours[i].applyBehaviour(this,t,i)}}]),Qt);function Qt(t){o(this,Qt);t=h(this,(Qt.__proto__||Object.getPrototypeOf(Qt)).call(this,t));return t.selfBehaviours=[],t}var Kt=(r(Jt,Yt),t(Jt,[{key:"initEventHandler",value:function(){var e=this;this.mousemoveHandler=function(t){return e.mousemove.call(e,t)},this.mousedownHandler=function(t){return e.mousedown.call(e,t)},this.mouseupHandler=function(t){return e.mouseup.call(e,t)},this.mouseTarget.addEventListener("mousemove",this.mousemoveHandler,!1)}},{key:"emit",value:function(){this._allowEmitting=!0}},{key:"stop",value:function(){this._allowEmitting=!1}},{key:"mousemove",value:function(t){t.layerX||0===t.layerX?(this.p.x+=(t.layerX-this.p.x)*this.ease,this.p.y+=(t.layerY-this.p.y)*this.ease):!t.offsetX&&0!==t.offsetX||(this.p.x+=(t.offsetX-this.p.x)*this.ease,this.p.y+=(t.offsetY-this.p.y)*this.ease),this._allowEmitting&&n(Jt.prototype.__proto__||Object.getPrototypeOf(Jt.prototype),"emit",this).call(this,"once")}},{key:"destroy",value:function(){n(Jt.prototype.__proto__||Object.getPrototypeOf(Jt.prototype),"destroy",this).call(this),this.mouseTarget.removeEventListener("mousemove",this.mousemoveHandler,!1)}}]),Jt);function Jt(t,e,i){o(this,Jt);i=h(this,(Jt.__proto__||Object.getPrototypeOf(Jt)).call(this,i));return i.mouseTarget=P.initValue(t,window),i.ease=P.initValue(e,.7),i._allowEmitting=!1,i.initEventHandler(),i}var $t=(t(te,[{key:"setStroke",value:function(t,e){t=0<arguments.length&&void 0!==t?t:"#000000",e=1<arguments.length&&void 0!==e?e:1;this.stroke={color:t,thinkness:e}}},{key:"initHandler",value:function(){var e=this;this._protonUpdateHandler=function(){e.onProtonUpdate.call(e)},this._protonUpdateAfterHandler=function(){e.onProtonUpdateAfter.call(e)},this._emitterAddedHandler=function(t){e.onEmitterAdded.call(e,t)},this._emitterRemovedHandler=function(t){e.onEmitterRemoved.call(e,t)},this._particleCreatedHandler=function(t){e.onParticleCreated.call(e,t)},this._particleUpdateHandler=function(t){e.onParticleUpdate.call(e,t)},this._particleDeadHandler=function(t){e.onParticleDead.call(e,t)}}},{key:"init",value:function(t){(this.parent=t).addEventListener("PROTON_UPDATE",this._protonUpdateHandler),t.addEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),t.addEventListener("EMITTER_ADDED",this._emitterAddedHandler),t.addEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),t.addEventListener("PARTICLE_CREATED",this._particleCreatedHandler),t.addEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),t.addEventListener("PARTICLE_DEAD",this._particleDeadHandler)}},{key:"resize",value:function(){}},{key:"destroy",value:function(){this.remove()}},{key:"remove",value:function(){this.parent.removeEventListener("PROTON_UPDATE",this._protonUpdateHandler),this.parent.removeEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),this.parent.removeEventListener("EMITTER_ADDED",this._emitterAddedHandler),this.parent.removeEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),this.parent.removeEventListener("PARTICLE_CREATED",this._particleCreatedHandler),this.parent.removeEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),this.parent.removeEventListener("PARTICLE_DEAD",this._particleDeadHandler),this.parent=null}},{key:"onProtonUpdate",value:function(){}},{key:"onProtonUpdateAfter",value:function(){}},{key:"onEmitterAdded",value:function(){}},{key:"onEmitterRemoved",value:function(){}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(){}},{key:"onParticleDead",value:function(){}}]),te);function te(t,e){o(this,te),this.pool=new T,this.element=t,this.stroke=e,this.circleConf={isCircle:!0},this.initHandler(),this.name="BaseRenderer"}var ee=(r(ie,$t),t(ie,[{key:"resize",value:function(t,e){this.element.width=t,this.element.height=e}},{key:"onProtonUpdate",value:function(){this.context.clearRect(0,0,this.element.width,this.element.height)}},{key:"onParticleCreated",value:function(t){t.body?x(t.body,this.addImg2Body,t):t.color=t.color||"#ff0000"}},{key:"onParticleUpdate",value:function(t){t.body?t.body instanceof Image&&this.drawImage(t):this.drawCircle(t)}},{key:"onParticleDead",value:function(t){t.body=null}},{key:"addImg2Body",value:function(t,e){e.body=t}},{key:"drawImage",value:function(t){var e,i=t.body.width*t.scale|0,a=t.body.height*t.scale|0,r=t.p.x-i/2,n=t.p.y-a/2;t.color?(t.data.buffer||(t.data.buffer=this.createBuffer(t.body)),(e=t.data.buffer.getContext("2d")).clearRect(0,0,t.data.buffer.width,t.data.buffer.height),e.globalAlpha=t.alpha,e.drawImage(t.body,0,0),e.globalCompositeOperation="source-atop",e.fillStyle=H.rgbToHex(t.rgb),e.fillRect(0,0,t.data.buffer.width,t.data.buffer.height),e.globalCompositeOperation="source-over",e.globalAlpha=1,this.context.drawImage(t.data.buffer,0,0,t.data.buffer.width,t.data.buffer.height,r,n,i,a)):(this.context.save(),this.context.globalAlpha=t.alpha,this.context.translate(t.p.x,t.p.y),this.context.rotate(s.degreeTransform(t.rotation)),this.context.translate(-t.p.x,-t.p.y),this.context.drawImage(t.body,0,0,t.body.width,t.body.height,r,n,i,a),this.context.globalAlpha=1,this.context.restore())}},{key:"drawCircle",value:function(t){t.rgb?this.context.fillStyle="rgba("+t.rgb.r+","+t.rgb.g+","+t.rgb.b+","+t.alpha+")":this.context.fillStyle=t.color,this.context.beginPath(),this.context.arc(t.p.x,t.p.y,t.radius,0,2*Math.PI,!0),this.stroke&&(this.context.strokeStyle=this.stroke.color,this.context.lineWidth=this.stroke.thinkness,this.context.stroke()),this.context.closePath(),this.context.fill()}},{key:"createBuffer",value:function(t){if(t instanceof Image){var e=t.width+"_"+t.height,i=this.bufferCache[e];return i||((i=document.createElement("canvas")).width=t.width,i.height=t.height,this.bufferCache[e]=i),i}}}]),ie);function ie(t){o(this,ie);t=h(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this,t));return t.stroke=null,t.context=t.element.getContext("2d"),t.bufferCache={},t.name="CanvasRenderer",t}var ae=(r(re,$t),t(re,[{key:"onParticleCreated",value:function(t){t.body?x(t.body,this.addImg2Body,t):(t.body=this.pool.get(this.circleConf,t),this.element.appendChild(t.body))}},{key:"onParticleUpdate",value:function(t){this.bodyReady(t)&&(this.transform3d?v.transform3d(t.body,t.p.x,t.p.y,t.scale,t.rotation):v.transform(t.body,t.p.x,t.p.y,t.scale,t.rotation),t.body.style.opacity=t.alpha,t.body.isCircle&&(t.body.style.backgroundColor=t.color||"#ff0000"))}},{key:"onParticleDead",value:function(t){this.bodyReady(t)&&(this.element.removeChild(t.body),this.pool.expire(t.body),t.body=null)}},{key:"bodyReady",value:function(t){return"object"===i(t.body)&&t.body&&!t.body.isInner}},{key:"addImg2Body",value:function(t,e){e.dead||(e.body=this.pool.get(t,e),v.resize(e.body,t.width,t.height),this.element.appendChild(e.body))}},{key:"createBody",value:function(t,e){return t.isCircle?this.createCircle(e):this.createSprite(t,e)}},{key:"createCircle",value:function(t){var e=v.createDiv(t.id+"_dom",2*t.radius,2*t.radius);return e.style.borderRadius=t.radius+"px",this.stroke&&(e.style.borderColor=this.stroke.color,e.style.borderWidth=this.stroke.thinkness+"px"),e.isCircle=!0,e}},{key:"createSprite",value:function(t,e){var i="string"==typeof t?t:t.src,t=v.createDiv(e.id+"_dom",t.width,t.height);return t.style.backgroundImage="url("+i+")",t}}]),re);function re(t){o(this,re);var i=h(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,t));return i.stroke=null,i.pool.create=function(t,e){return i.createBody(t,e)},i.addImg2Body=i.addImg2Body.bind(i),i.transform3d=!1,i.name="DomRenderer",i}var ne=(r(se,$t),t(se,[{key:"onParticleCreated",value:function(t){t.body?this.createSprite(t):this.createCircle(t),this.element.addChild(t.body)}},{key:"onParticleUpdate",value:function(t){t.body&&(t.body.x=t.p.x,t.body.y=t.p.y,t.body.alpha=t.alpha,t.body.scaleX=t.body.scaleY=t.scale,t.body.rotation=t.rotation)}},{key:"onParticleDead",value:function(t){t.body&&(t.body.parent&&t.body.parent.removeChild(t.body),this.pool.expire(t.body),t.body=null),t.graphics&&this.pool.expire(t.graphics)}},{key:"createSprite",value:function(t){t.body=this.pool.get(t.body),t.body.parent||t.body.image&&(t.body.regX=t.body.image.width/2,t.body.regY=t.body.image.height/2)}},{key:"createCircle",value:function(t){var e=this.pool.get(createjs.Graphics);this.stroke&&(this.stroke instanceof String?e.beginStroke(this.stroke):e.beginStroke("#000000")),e.beginFill(t.color||"#ff0000").drawCircle(0,0,t.radius);var i=this.pool.get(createjs.Shape,[e]);t.body=i,t.graphics=e}}]),se);function se(t,e){o(this,se);t=h(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,t));return t.stroke=e,t.name="EaselRenderer",t}var oe=(r(he,$t),t(he,[{key:"resize",value:function(t,e){this.element.width=t,this.element.height=e}},{key:"createImageData",value:function(t){this.rectangle=t||new Z(0,0,this.element.width,this.element.height),this.imageData=this.context.createImageData(this.rectangle.width,this.rectangle.height),this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onProtonUpdate",value:function(){this.context.clearRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),this.imageData=this.context.getImageData(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height)}},{key:"onProtonUpdateAfter",value:function(){this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(t){this.imageData&&this.setPixel(this.imageData,Math.floor(t.p.x-this.rectangle.x),Math.floor(t.p.y-this.rectangle.y),t)}},{key:"setPixel",value:function(t,e,i,a){var r=a.rgb;e<0||e>this.element.width||i<0||i>this.elementwidth||(e=4*((i>>0)*t.width+(e>>0)),t.data[e]=r.r,t.data[1+e]=r.g,t.data[2+e]=r.b,t.data[3+e]=255*a.alpha)}},{key:"onParticleDead",value:function(){}}]),he);function he(t,e){o(this,he);t=h(this,(he.__proto__||Object.getPrototypeOf(he)).call(this,t));return t.context=t.element.getContext("2d"),t.imageData=null,t.rectangle=null,t.rectangle=e,t.createImageData(e),t.name="PixelRenderer",t}var le=void 0,ue=(r(ce,$t),t(ce,[{key:"setPIXI",value:function(t){try{le=t||{Sprite:{}},this.createFromImage=le.Sprite.from||le.Sprite.fromImage}catch(t){}}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(t){t.body?t.body=this.pool.get(t.body,t):t.body=this.pool.get(this.circleConf,t),this.blendMode&&(t.body.blendMode=this.blendMode),this.element.addChild(t.body)}},{key:"onParticleUpdate",value:function(t){this.transform(t,t.body),!0!==this.setColor&&!0!==this.color||(t.body.tint=H.getHex16FromParticle(t))}},{key:"onParticleDead",value:function(t){this.element.removeChild(t.body),this.pool.expire(t.body),t.body=null}},{key:"destroy",value:function(t){n(ce.prototype.__proto__||Object.getPrototypeOf(ce.prototype),"destroy",this).call(this),this.pool.destroy();for(var e=t.length;e--;){var i=t[e];i.body&&this.element.removeChild(i.body)}}},{key:"transform",value:function(t,e){e.x=t.p.x,e.y=t.p.y,e.alpha=t.alpha,e.scale.x=t.scale,e.scale.y=t.scale,e.rotation=t.rotation*s.PI_180}},{key:"createBody",value:function(t,e){return t.isCircle?this.createCircle(e):this.createSprite(t)}},{key:"createSprite",value:function(t){t=t.isInner?this.createFromImage(t.src):new le.Sprite(t);return t.anchor.x=.5,t.anchor.y=.5,t}},{key:"createCircle",value:function(t){var e,i=new le.Graphics;return this.stroke&&(e=this.stroke instanceof String?this.stroke:0,i.beginStroke(e)),i.beginFill(t.color||36077),i.drawCircle(0,0,t.radius),i.endFill(),i}}]),ce);function ce(t,e){o(this,ce);var i=h(this,(ce.__proto__||Object.getPrototypeOf(ce)).call(this,t));return i.stroke=e,i.color=!1,i.setColor=!1,i.blendMode=null,i.pool.create=function(t,e){return i.createBody(t,e)},i.setPIXI(window.PIXI),i.name="PixiRenderer",i}var de=(t(ye,[{key:"set",value:function(t,e){0===e?X.set(t,this.mats[0]):X.multiply(this.mats[e-1],t,this.mats[e]),this.size=Math.max(this.size,e+1)}},{key:"push",value:function(t){0===this.size?X.set(t,this.mats[0]):X.multiply(this.mats[this.size-1],t,this.mats[this.size]),this.size++}},{key:"pop",value:function(){0<this.size&&this.size--}},{key:"top",value:function(){return this.mats[this.size-1]}}]),ye);function ye(){o(this,ye),this.mats=[];for(var t=this.size=0;t<20;t++)this.mats.push(X.create([0,0,0,0,0,0,0,0,0]))}r(pe,$t),t(pe,[{key:"init",value:function(t){n(pe.prototype.__proto__||Object.getPrototypeOf(pe.prototype),"init",this).call(this,t),this.resize(this.element.width,this.element.height)}},{key:"resize",value:function(t,e){this.umat[4]=-2,this.umat[7]=1,this.smat[0]=1/t,this.smat[4]=1/e,this.mstack.set(this.umat,0),this.mstack.set(this.smat,1),this.gl.viewport(0,0,t,e),this.element.width=t,this.element.height=e}},{key:"setMaxRadius",value:function(t){this.circleCanvasURL=this.createCircle(t)}},{key:"getVertexShader",value:function(){return["uniform vec2 viewport;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 tMat;","varying vec2 vTextureCoord;","varying float alpha;","void main() {","vec3 v = tMat * vec3(aVertexPosition, 1.0);","gl_Position = vec4(v.x, v.y, 0, 1);","vTextureCoord = aTextureCoord;","alpha = tMat[0][2];","}"].join("\n")}},{key:"getFragmentShader",value:function(){return["precision mediump float;","varying vec2 vTextureCoord;","varying float alpha;","uniform sampler2D uSampler;","uniform vec4 color;","uniform bool useTexture;","uniform vec3 uColor;","void main() {","vec4 textureColor = texture2D(uSampler, vTextureCoord);","gl_FragColor = textureColor * vec4(uColor, 1.0);","gl_FragColor.w *= alpha;","}"].join("\n")}},{key:"initVar",value:function(){this.mstack=new de,this.umat=X.create([2,0,1,0,-2,0,-1,1,1]),this.smat=X.create([.01,0,1,0,.01,0,0,0,1]),this.texturebuffers={}}},{key:"blendEquation",value:function(t){this.gl.blendEquation(this.gl[t])}},{key:"blendFunc",value:function(t,e){this.gl.blendFunc(this.gl[t],this.gl[e])}},{key:"getShader",value:function(t,e,i){i=i?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);return t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(alert(t.getShaderInfoLog(i)),null)}},{key:"initShaders",value:function(){var t=this.getShader(this.gl,this.getFragmentShader(),!0),e=this.getShader(this.gl,this.getVertexShader(),!1);this.sprogram=this.gl.createProgram(),this.gl.attachShader(this.sprogram,e),this.gl.attachShader(this.sprogram,t),this.gl.linkProgram(this.sprogram),this.gl.getProgramParameter(this.sprogram,this.gl.LINK_STATUS)||alert("Could not initialise shaders"),this.gl.useProgram(this.sprogram),this.sprogram.vpa=this.gl.getAttribLocation(this.sprogram,"aVertexPosition"),this.sprogram.tca=this.gl.getAttribLocation(this.sprogram,"aTextureCoord"),this.gl.enableVertexAttribArray(this.sprogram.tca),this.gl.enableVertexAttribArray(this.sprogram.vpa),this.sprogram.tMatUniform=this.gl.getUniformLocation(this.sprogram,"tMat"),this.sprogram.samplerUniform=this.gl.getUniformLocation(this.sprogram,"uSampler"),this.sprogram.useTex=this.gl.getUniformLocation(this.sprogram,"useTexture"),this.sprogram.color=this.gl.getUniformLocation(this.sprogram,"uColor"),this.gl.uniform1i(this.sprogram.useTex,1)}},{key:"initBuffers",value:function(){var t;this.unitIBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,3,1,0,2,3]),this.gl.STATIC_DRAW);for(var e=void 0,i=[],e=0;e<100;e++)i.push(e);for(t=new Uint16Array(i),this.unitI33=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitI33),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),i=[],e=0;e<100;e++)i.push(e,e+1,e+2);t=new Uint16Array(i),this.stripBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.stripBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"createCircle",value:function(t){this.circleCanvasRadius=c(P.initValue(t,32));var e=v.createCanvas("circle_canvas",2*this.circleCanvasRadius,2*this.circleCanvasRadius),t=e.getContext("2d");return t.beginPath(),t.arc(this.circleCanvasRadius,this.circleCanvasRadius,this.circleCanvasRadius,0,2*Math.PI,!0),t.closePath(),t.fillStyle="#FFF",t.fill(),e.toDataURL()}},{key:"drawImg2Canvas",value:function(t){var e=t.body.width,i=t.body.height,a=c(t.body.width),r=c(t.body.height),n=t.body.width/a,s=t.body.height/r;this.texturebuffers[t.data.src]||(this.texturebuffers[t.data.src]=[this.gl.createTexture(),this.gl.createBuffer(),this.gl.createBuffer()]),t.data.texture=this.texturebuffers[t.data.src][0],t.data.vcBuffer=this.texturebuffers[t.data.src][1],t.data.tcBuffer=this.texturebuffers[t.data.src][2],this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.tcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,n,0,0,s,s,s]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.vcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,e,0,0,i,e,i]),this.gl.STATIC_DRAW);r=t.data.canvas.getContext("2d").getImageData(0,0,a,r);this.gl.bindTexture(this.gl.TEXTURE_2D,t.data.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_NEAREST),this.gl.generateMipmap(this.gl.TEXTURE_2D),t.data.textureLoaded=!0,t.data.textureWidth=e,t.data.textureHeight=i}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(t){t.data.textureLoaded=!1,t.data.tmat=X.create(),t.data.tmat[8]=1,t.data.imat=X.create(),t.data.imat[8]=1,t.body?x(t.body,this.addImg2Body,t):(x(this.circleCanvasURL,this.addImg2Body,t),t.data.oldScale=t.radius/this.circleCanvasRadius)}},{key:"addImg2Body",value:function(t,e){e.dead||(e.body=t,e.data.src=t.src,e.data.canvas=k(t),e.data.oldScale=1,this.drawImg2Canvas(e))}},{key:"onParticleUpdate",value:function(t){t.data.textureLoaded&&(this.updateMatrix(t),this.gl.uniform3f(this.sprogram.color,t.rgb.r/255,t.rgb.g/255,t.rgb.b/255),this.gl.uniformMatrix3fv(this.sprogram.tMatUniform,!1,this.mstack.top()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.vcBuffer),this.gl.vertexAttribPointer(this.sprogram.vpa,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.tcBuffer),this.gl.vertexAttribPointer(this.sprogram.tca,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,t.data.texture),this.gl.uniform1i(this.sprogram.samplerUniform,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0),this.mstack.pop())}},{key:"onParticleDead",value:function(){}},{key:"updateMatrix",value:function(t){var e=d(-t.data.textureWidth/2,-t.data.textureHeight/2),i=d(t.p.x,t.p.y),a=t.rotation*s.PI_180,r=y(a),a=t.scale*t.data.oldScale,a=p(a,a),a=f(e,a),a=f(a,r);a=f(a,i),X.inverse(a,t.data.imat),a[2]=t.alpha,this.mstack.push(a)}}]),C=pe;function pe(t){o(this,pe);t=h(this,(pe.__proto__||Object.getPrototypeOf(pe)).call(this,t));return t.gl=t.element.getContext("experimental-webgl",{antialias:!0,stencil:!1,depth:!1}),t.gl||alert("Sorry your browser do not suppest WebGL!"),t.initVar(),t.setMaxRadius(),t.initShaders(),t.initBuffers(),t.gl.blendEquation(t.gl.FUNC_ADD),t.gl.blendFunc(t.gl.SRC_ALPHA,t.gl.ONE_MINUS_SRC_ALPHA),t.gl.enable(t.gl.BLEND),t.addImg2Body=t.addImg2Body.bind(t),t.name="WebGLRenderer",t}r(fe,$t),$t=fe;function fe(t){o(this,fe);t=h(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this,t));return t.name="CustomRenderer",t}var ve=(r(ge,at),t(ge,[{key:"getPosition",value:function(){return this.random=Math.random(),this.vector.x=this.x1+this.random*this.length*Math.cos(this.gradient),this.vector.y=this.y1+this.random*this.length*Math.sin(this.gradient),this.vector}},{key:"getDirection",value:function(t,e){var i=this.dy,a=-this.dx;return 0<(i*t+a*e+this.dot)*(0==a?1:a)}},{key:"getDistance",value:function(t,e){return(this.dy*t+-this.dx*e+this.dot)/Math.sqrt(this.xxyy)}},{key:"getSymmetric",value:function(t){var e=t.getGradient(),i=2*(this.getGradient()-e),a=t.x,e=t.y;return t.x=a*Math.cos(i)-e*Math.sin(i),t.y=a*Math.sin(i)+e*Math.cos(i),t}},{key:"getGradient",value:function(){return Math.atan2(this.dy,this.dx)}},{key:"rangeOut",value:function(t){if(Math.abs(this.getGradient())<=s.PI/4){if(t.p.x<=this.maxx&&t.p.x>=this.minx)return!0}else if(t.p.y<=this.maxy&&t.p.y>=this.miny)return!0;return!1}},{key:"getLength",value:function(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)}},{key:"crossing",value:function(t){"dead"===this.crossType?">"===this.direction||"R"===this.direction||"right"===this.direction||"down"===this.direction?this.rangeOut(t)&&this.getDirection(t.p.x,t.p.y)&&(t.dead=!0):this.rangeOut(t)&&(this.getDirection(t.p.x,t.p.y)||(t.dead=!0)):"bound"===this.crossType?this.rangeOut(t)&&this.getDistance(t.p.x,t.p.y)<=t.radius&&(0===this.dx?t.v.x*=-1:0===this.dy?t.v.y*=-1:this.getSymmetric(t.v)):"cross"===this.crossType&&this.alert&&(console.error("Sorry, LineZone does not support cross method!"),this.alert=!1)}}]),ge);function ge(t,e,i,a,r){o(this,ge);var n=h(this,(ge.__proto__||Object.getPrototypeOf(ge)).call(this));return 0<=i-t?(n.x1=t,n.y1=e,n.x2=i,n.y2=a):(n.x1=i,n.y1=a,n.x2=t,n.y2=e),n.dx=n.x2-n.x1,n.dy=n.y2-n.y1,n.minx=Math.min(n.x1,n.x2),n.miny=Math.min(n.y1,n.y2),n.maxx=Math.max(n.x1,n.x2),n.maxy=Math.max(n.y1,n.y2),n.dot=n.x2*n.y1-n.x1*n.y2,n.xxyy=n.dx*n.dx+n.dy*n.dy,n.gradient=n.getGradient(),n.length=n.getLength(),n.direction=P.initValue(r,">"),n}var me=(r(be,at),t(be,[{key:"getPosition",value:function(){return this.angle=s.PIx2*Math.random(),this.randomRadius=Math.random()*this.radius,this.vector.x=this.x+this.randomRadius*Math.cos(this.angle),this.vector.y=this.y+this.randomRadius*Math.sin(this.angle),this.vector}},{key:"setCenter",value:function(t,e){this.center.x=t,this.center.y=e}},{key:"crossing",value:function(t){var e=t.p.distanceTo(this.center);"dead"===this.crossType?e-t.radius>this.radius&&(t.dead=!0):"bound"===this.crossType?e+t.radius>=this.radius&&this.getSymmetric(t):"cross"===this.crossType&&this.alert&&(console.error("Sorry, CircleZone does not support cross method!"),this.alert=!1)}},{key:"getSymmetric",value:function(t){var e=t.v.getGradient(),i=2*(this.getGradient(t)-e),a=t.v.x,e=t.v.y;t.v.x=a*Math.cos(i)-e*Math.sin(i),t.v.y=a*Math.sin(i)+e*Math.cos(i)}},{key:"getGradient",value:function(t){return-s.PI_2+Math.atan2(t.p.y-this.center.y,t.p.x-this.center.x)}}]),be);function be(t,e,i){o(this,be);var a=h(this,(be.__proto__||Object.getPrototypeOf(be)).call(this));return a.x=t,a.y=e,a.radius=i,a.angle=0,a.center={x:t,y:e},a}var _e=(r(xe,at),t(xe,[{key:"getPosition",value:function(){return this.vector.x=this.x+Math.random()*this.width,this.vector.y=this.y+Math.random()*this.height,this.vector}},{key:"crossing",value:function(t){"dead"===this.crossType?((t.p.x+t.radius<this.x||t.p.x-t.radius>this.x+this.width)&&(t.dead=!0),(t.p.y+t.radius<this.y||t.p.y-t.radius>this.y+this.height)&&(t.dead=!0)):"bound"===this.crossType?(t.p.x-t.radius<this.x?(t.p.x=this.x+t.radius,t.v.x*=-1):t.p.x+t.radius>this.x+this.width&&(t.p.x=this.x+this.width-t.radius,t.v.x*=-1),t.p.y-t.radius<this.y?(t.p.y=this.y+t.radius,t.v.y*=-1):t.p.y+t.radius>this.y+this.height&&(t.p.y=this.y+this.height-t.radius,t.v.y*=-1)):"cross"===this.crossType&&(t.p.x+t.radius<this.x&&t.v.x<=0?t.p.x=this.x+this.width+t.radius:t.p.x-t.radius>this.x+this.width&&0<=t.v.x&&(t.p.x=this.x-t.radius),t.p.y+t.radius<this.y&&t.v.y<=0?t.p.y=this.y+this.height+t.radius:t.p.y-t.radius>this.y+this.height&&0<=t.v.y&&(t.p.y=this.y-t.radius))}}]),xe);function xe(t,e,i,a){o(this,xe);var r=h(this,(xe.__proto__||Object.getPrototypeOf(xe)).call(this));return r.x=t,r.y=e,r.width=i,r.height=a,r}r(ke,at),t(ke,[{key:"reset",value:function(t,e,i,a){this.imageData=t,this.x=P.initValue(e,0),this.y=P.initValue(i,0),this.d=P.initValue(a,2),this.vectors=[],this.setVectors()}},{key:"setVectors",value:function(){for(var t=void 0,e=void 0,i=this.imageData.width,a=this.imageData.height,t=0;t<i;t+=this.d)for(e=0;e<a;e+=this.d){var r=4*((e>>0)*i+(t>>0));0<this.imageData.data[3+r]&&this.vectors.push({x:t+this.x,y:e+this.y})}return this.vector}},{key:"getBound",value:function(t,e){t=4*((e>>0)*this.imageData.width+(t>>0));return 0<this.imageData.data[3+t]}},{key:"getPosition",value:function(){var t=P.getRandFromArray(this.vectors);return this.vector.copy(t)}},{key:"getColor",value:function(t,e){t-=this.x;t=4*(((e-=this.y)>>0)*this.imageData.width+(t>>0));return{r:this.imageData.data[t],g:this.imageData.data[1+t],b:this.imageData.data[2+t],a:this.imageData.data[3+t]}}},{key:"crossing",value:function(t){"dead"===this.crossType?this.getBound(t.p.x-this.x,t.p.y-this.y)?t.dead=!0:t.dead=!1:"bound"===this.crossType&&(this.getBound(t.p.x-this.x,t.p.y-this.y)||t.v.negate())}}]),r=ke;function ke(t,e,i,a){o(this,ke);var r=h(this,(ke.__proto__||Object.getPrototypeOf(ke)).call(this));return r.reset(t,e,i,a),r}t={addEventListener:function(t,e){t.addEventListener("PROTON_UPDATE_AFTER",function(){return e()})},getStyle:function(t){t=H.hexToRgb(0<arguments.length&&void 0!==t?t:"#ff0000");return"rgba("+t.r+", "+t.g+", "+t.b+", 0.5)"},drawZone:function(t,e,i,a){var r=e.getContext("2d"),n=this.getStyle();this.addEventListener(t,function(){a&&r.clearRect(0,0,e.width,e.height),i instanceof nt?(r.beginPath(),r.fillStyle=n,r.arc(i.x,i.y,10,0,2*Math.PI,!0),r.fill(),r.closePath()):i instanceof ve?(r.beginPath(),r.strokeStyle=n,r.moveTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.stroke(),r.closePath()):i instanceof _e?(r.beginPath(),r.strokeStyle=n,r.drawRect(i.x,i.y,i.width,i.height),r.stroke(),r.closePath()):i instanceof me&&(r.beginPath(),r.strokeStyle=n,r.arc(i.x,i.y,i.radius,0,2*Math.PI,!0),r.stroke(),r.closePath())})},drawEmitter:function(t,e,i,a){var r=e.getContext("2d"),n=this.getStyle();this.addEventListener(t,function(){a&&r.clearRect(0,0,e.width,e.height),r.beginPath(),r.fillStyle=n,r.arc(i.p.x,i.p.y,10,0,2*Math.PI,!0),r.fill(),r.closePath()})}};return V.Particle=j,V.Pool=T,V.Util=P,V.ColorUtil=H,V.MathUtil=s,V.Vector2D=V.Vector=F,V.Polar2D=V.Polar=q,V.ArraySpan=Y,V.Rectangle=Z,V.Rate=K,V.ease=U,V.Span=l,V.Mat3=X,V.getSpan=function(t,e,i){return new l(t,e,i)},V.createArraySpan=Y.createArraySpan,V.Initialize=V.Init=$,V.Life=V.L=et,V.Position=V.P=ot,V.Velocity=V.V=lt,V.Mass=V.M=ct,V.Radius=V.R=yt,V.Body=V.B=ft,V.Behaviour=gt,V.Force=V.F=bt,V.Attraction=V.A=xt,V.RandomDrift=V.RD=Pt,V.Gravity=V.G=At,V.Collision=Rt,V.CrossZone=wt,V.Alpha=St,V.Scale=V.S=Dt,V.Rotate=Mt,V.Color=Lt,V.Repulsion=Nt,V.Cyclone=zt,V.GravityWell=qt,V.Emitter=Yt,V.BehaviourEmitter=Zt,V.FollowEmitter=Kt,V.Zone=at,V.LineZone=ve,V.CircleZone=me,V.PointZone=nt,V.RectZone=_e,V.ImageZone=r,V.CanvasRenderer=ee,V.DomRenderer=ae,V.EaselRenderer=ne,V.PixiRenderer=ue,V.PixelRenderer=oe,V.WebGLRenderer=V.WebGlRenderer=C,V.CustomRenderer=$t,V.Debug=t,P.assign(V,U),V});
//# sourceMappingURL=proton.min.js.map


/***/ }),

/***/ "./node_modules/raf-manager/build/RAFManager.min.js":
/*!**********************************************************!*\
  !*** ./node_modules/raf-manager/build/RAFManager.min.js ***!
  \**********************************************************/
/***/ (function(module) {

/*!
* RAFManager v0.1.0
*
* Copyright 2018-2018, ajiemath <ajiemath@gmail.com>
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/
!function(t,i){ true?module.exports=i():0}(this,function(){"use strict";return function(){for(var t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"]}(),{timer:0,state:"stop",animations:[],add:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n={callback:t,fps:i,n:60/i,param:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i:0};return this.animations.push(n),this.animations.length>=1&&this.start(),this},getIndex:function(t){for(var i=0;i<this.animations.length;i++){if(this.animations[i].callback===t)return i}return-1},remove:function(t){if(!(this.getIndex(t)<0))return this.deleteMap(t),0===this.animations.length&&this.stop(),this},deleteMap:function(t){var i=this.getIndex(t),n=this.animations[i];for(var e in n)delete n[e];this.animations.splice(i,1)},start:function(){if("start"!==this.state)return this.state="start",this.tick(),this},stop:function(){if("stop"!==this.state)return this.state="stop",cancelAnimationFrame(this.timer),this},tick:function(){var t=this;this.timer=requestAnimationFrame(function(){t.tick()});for(var i=0;i<this.animations.length;i++){var n=this.animations[i],e=n.callback,a=n.param;n.i++,n.i>=n.n&&(e(a),n.i=0)}}}});
//# sourceMappingURL=RAFManager.min.js.map


/***/ })

});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vcGFnZXMvYWdlbnRfYm9va2tlZXBpbmcuanMiLCJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9wYXJ0aWNsZXMtYmcvZGlzdC9pbmRleC5lcy5qcyIsIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3Byb3Rvbi1lbmdpbmUvYnVpbGQvcHJvdG9uLm1pbi5qcyIsIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3JhZi1tYW5hZ2VyL2J1aWxkL1JBRk1hbmFnZXIubWluLmpzIl0sIm5hbWVzIjpbIkFnZW50Qm9va2tlZXBpbmciLCJ3aWR0aCIsInBvc2l0aW9uIiwiekluZGV4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFZSxTQUFTQSxnQkFBVCxHQUE0QjtBQUN2QyxzQkFDSTtBQUFBLDRCQUNBLDhEQUFDLHdEQUFEO0FBQUE7QUFBQTtBQUFBO0FBQUEsWUFEQSxlQUtBO0FBQVMsZUFBTSx5QkFBZjtBQUFBLDhCQUNBLDhEQUFDLGlEQUFEO0FBQ0ksWUFBSSxFQUFDLE9BRFQ7QUFFSSxVQUFFLEVBQUU7QUFBRUMsZUFBSyxFQUFFLE1BQVQ7QUFBa0JDLGtCQUFRLEVBQUUsVUFBNUI7QUFBd0NDLGdCQUFNLEVBQUU7QUFBaEQ7QUFGUjtBQUFBO0FBQUE7QUFBQTtBQUFBLGNBREEsZUFLRTtBQUFLLGlCQUFNLHFFQUFYO0FBQUEsZ0NBQ0U7QUFBSyxtQkFBTSwwSEFBWDtBQUFBLGtDQUNFO0FBQUkscUJBQU0sZ0VBQVY7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsa0JBREYsZUFJRTtBQUFHLHFCQUFNLHNCQUFUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGtCQUpGLGVBS0U7QUFBSyxxQkFBTSxxQkFBWDtBQUFBLG9DQUNFO0FBQVEsdUJBQU0sZ0hBQWQ7QUFBK0gsNEJBQVcsY0FBMUk7QUFBQTtBQUFBO0FBQUE7QUFBQTtB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QkFBa0IsbUVBQW1FLGlCQUFpQixzRkFBc0YsaUJBQWlCLFdBQVcsNENBQTRDLFNBQVMsRUFBRSxZQUFZLHlCQUF5QixLQUFLLGdEQUFnRCxnQ0FBZ0M7QUFDNTlDIiwiZmlsZSI6InN0YXRpYy93ZWJwYWNrL3BhZ2VzL2FnZW50X2Jvb2trZWVwaW5nLjFiYTYyODI3MmJlODM5MTc5ZTI5LmhvdC11cGRhdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3R5bGVzIGZyb20gJy4uL3N0eWxlcy9Ib21lLm1vZHVsZS5jc3MnXHJcbmltcG9ydCBIZWFkZXIgZnJvbSAnLi9jb21wb25lbnRzL2hlYXJkZXInXHJcbmltcG9ydCBGb290ZXIgZnJvbSAnLi9jb21wb25lbnRzL2Zvb3RlcidcclxuXHJcbmltcG9ydCBQYXJ0aWNsZXNCZyBmcm9tICdwYXJ0aWNsZXMtYmcnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBZ2VudEJvb2trZWVwaW5nKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8PlxyXG4gICAgICAgIDxIZWFkZXIvPlxyXG4gICAgICAgIFxyXG4gICAgICAgICAgXHJcblxyXG4gICAgICAgIDxzZWN0aW9uIGNsYXNzPVwidGV4dC1ncmF5LTYwMCBib2R5LWZvbnRcIj5cclxuICAgICAgICA8UGFydGljbGVzQmdcclxuICAgICAgICAgICAgdHlwZT0nY29sb3InXHJcbiAgICAgICAgICAgIGJnPXt7IHdpZHRoOiBcIjEwMCVcIiwgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsIHpJbmRleDogXCIwXCIgfX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyIG14LWF1dG8gZmxleCBweC01IHB5LTI0IG1kOmZsZXgtcm93IGZsZXgtY29sIGl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGc6ZmxleC1ncm93IG1kOnctMS8yIGxnOnByLTI0IG1kOnByLTE2IGZsZXggZmxleC1jb2wgbWQ6aXRlbXMtc3RhcnQgbWQ6dGV4dC1sZWZ0IG1iLTE2IG1kOm1iLTAgaXRlbXMtY2VudGVyIHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgPGgxIGNsYXNzPVwidGl0bGUtZm9udCBzbTp0ZXh0LTR4bCB0ZXh0LTN4bCBtYi00IGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5CZWZvcmUgdGhleSBzb2xkIG91dFxyXG4gICAgICAgICAgICAgICAgcmVhZHltYWRlIGdsdXRlblxyXG4gICAgICAgICAgICAgIDwvaDE+XHJcbiAgICAgICAgICAgICAgPHAgY2xhc3M9XCJtYi04IGxlYWRpbmctcmVsYXhlZFwiPkNvcHBlciBtdWcgdHJ5LWhhcmQgcGl0Y2hmb3JrIHBvdXItb3ZlciBmcmVlZ2FuIGhlaXJsb29tIG5ldXRyYSBhaXIgcGxhbnQgY29sZC1wcmVzc2VkIHRhY29zIHBva2UgYmVhcmQgdG90ZSBiYWcuIEhlaXJsb29tIGVjaG8gcGFyayBtbGtzaGsgdG90ZSBiYWcgc2VsdmFnZSBob3QgY2hpY2tlbiBhdXRoZW50aWMgdHVtZXJpYyB0cnVmZmF1dCBoZXhhZ29uIHRyeS1oYXJkIGNoYW1icmF5LjwvcD5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImlubGluZS1mbGV4IHRleHQtd2hpdGUgYmctaW5kaWdvLTUwMCBib3JkZXItMCBweS0yIHB4LTYgZm9jdXM6b3V0bGluZS1ub25lIGhvdmVyOmJnLWluZGlnby02MDAgcm91bmRlZCB0ZXh0LWxnXCIgY29udHJvbC1pZD1cIkNvbnRyb2xJRC04NVwiPkJ1dHRvbjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1sLTQgaW5saW5lLWZsZXggdGV4dC1ncmF5LTcwMCBiZy1ncmF5LTEwMCBib3JkZXItMCBweS0yIHB4LTYgZm9jdXM6b3V0bGluZS1ub25lIGhvdmVyOmJnLWdyYXktMjAwIHJvdW5kZWQgdGV4dC1sZ1wiPkJ1dHRvbjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxnOm1heC13LWxnIGxnOnctZnVsbCBtZDp3LTEvMiB3LTUvNlwiPlxyXG4gICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJvYmplY3QtY292ZXIgb2JqZWN0LWNlbnRlciByb3VuZGVkXCIgYWx0PVwiaGVyb1wiIHNyYz1cImh0dHBzOi8vZHVtbXlpbWFnZS5jb20vNzIweDYwMFwiLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgICAgPEZvb3Rlci8+XHJcbiAgICAgICAgPC8+XHJcbiAgICBcclxuICAgIClcclxufSIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUkFGTWFuYWdlciBmcm9tICdyYWYtbWFuYWdlcic7XG5pbXBvcnQgUHJvdG9uIGZyb20gJ3Byb3Rvbi1lbmdpbmUnO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iajtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xufTtcblxudmFyIGNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn07XG5cbnZhciBjcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0oKTtcblxudmFyIGluaGVyaXRzID0gZnVuY3Rpb24gKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufTtcblxudmFyIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gPSBmdW5jdGlvbiAoc2VsZiwgY2FsbCkge1xuICBpZiAoIXNlbGYpIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cblxuICByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcbn07XG5cbi8vIENvZGUgc291cmNlIGZyb20gaGVyZSwgdGhhbmtzIGF1dGhvclxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2RyYXdjYWxsL1Byb3Rvbi9ibG9iL2doLXBhZ2VzL3NvdXJjZS9zcmMvdXRpbHMvUmFuZC5qc1xudmFyIFJhbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmFuZCgpIHtcbiAgICAgICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgUmFuZCk7XG5cbiAgICAgICAgdGhpcy5saXN0ID0gW107XG4gICAgfVxuXG4gICAgY3JlYXRlQ2xhc3MoUmFuZCwgW3tcbiAgICAgICAga2V5OiBcInNldFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0JCQxKHByb2JhYmlsaXR5LCB0YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMubGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgICBwcm9iYWJpbGl0eTogcHJvYmFiaWxpdHksXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgICAgICAgYTogMCxcbiAgICAgICAgICAgICAgICBiOiAxXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGlvbigpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY2FsY3VsYXRpb25cIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGN1bGF0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdG90YWwgKz0gdGhpcy5saXN0W2ldLnByb2JhYmlsaXR5O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgdGhpcy5saXN0Lmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBvYmogPSB0aGlzLmxpc3RbX2ldO1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBvYmoucHJvYmFiaWxpdHkgLyB0b3RhbDtcblxuICAgICAgICAgICAgICAgIG9iai5hID0gX2kgPT09IDAgPyAwIDogdGhpcy5saXN0W19pIC0gMV0uYjtcbiAgICAgICAgICAgICAgICBvYmouYiA9IG9iai5hICsgdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZ2V0UmVzdWx0XCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZXN1bHQoKSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gTWF0aC5yYW5kb20oKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IHRoaXMubGlzdFtpXTtcblxuICAgICAgICAgICAgICAgIGlmICh2YWwgPD0gb2JqLmIgJiYgdmFsID4gb2JqLmEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai50YXJnZXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0WzBdLnRhcmdldDtcbiAgICAgICAgfVxuICAgIH1dKTtcbiAgICByZXR1cm4gUmFuZDtcbn0oKTtcblxudmFyIENhbnZhcyA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKENhbnZhcywgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ2FudmFzKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FudmFzKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENhbnZhcy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENhbnZhcykpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLl9paWQgPSAwO1xuICAgIF90aGlzLl9vaWQgPSAwO1xuICAgIF90aGlzLnNpemUgPSB7IHdpZHRoOiAwLCBoZWlnaHQ6IDAgfTtcbiAgICBfdGhpcy5jYW52YXNSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhDYW52YXMsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHRoaXMuX29pZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIuaW5pdENhbnZhcygpO1xuICAgICAgICBfdGhpczIucmVzaXplID0gX3RoaXMyLnJlc2l6ZS5iaW5kKF90aGlzMik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIF90aGlzMi5yZXNpemUpO1xuICAgICAgfSwgMTAwKTtcblxuICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuZ2V0Q2FudmFzKCk7XG4gICAgICB0aGlzLnByb3BzLm9uQ2FudmFzRGlkTW91bnQgJiYgdGhpcy5wcm9wcy5vbkNhbnZhc0RpZE1vdW50KGNhbnZhcyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRDYW52YXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdENhbnZhcygpIHtcbiAgICAgIHZhciBjYW52YXMgPSB0aGlzLmdldENhbnZhcygpO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24pIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICBjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IHRoaXMucHJvcHMuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgX3NldENhbnZhc1NpemUgPSB0aGlzLnNldENhbnZhc1NpemUoY2FudmFzKSxcbiAgICAgICAgICB3aWR0aCA9IF9zZXRDYW52YXNTaXplLndpZHRoLFxuICAgICAgICAgIGhlaWdodCA9IF9zZXRDYW52YXNTaXplLmhlaWdodDtcblxuICAgICAgdGhpcy5oZWFydGJlYXREZXRlY3Rpb25DYW52YXNTaXplKGNhbnZhcyk7XG4gICAgICB0aGlzLnByb3BzLm9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldENhbnZhc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDYW52YXMoKSB7XG4gICAgICB2YXIgY2FudmFzID0gdGhpcy5jYW52YXNSZWYuY3VycmVudDtcbiAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhlYXJ0YmVhdERldGVjdGlvbkNhbnZhc1NpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGVhcnRiZWF0RGV0ZWN0aW9uQ2FudmFzU2l6ZShjYW52YXMpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB0aGlzLl9paWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfdGhpczMuY2FudmFzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICB2YXIgbmV3SGVpZ2h0ID0gX3RoaXMzLmNhbnZhc1JlZi5jdXJyZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgICBpZiAobmV3SGVpZ2h0ICE9PSBfdGhpczMuc2l6ZS5oZWlnaHQpIHtcbiAgICAgICAgICAgIHZhciBfc2V0Q2FudmFzU2l6ZTIgPSBfdGhpczMuc2V0Q2FudmFzU2l6ZShjYW52YXMpLFxuICAgICAgICAgICAgICAgIHdpZHRoID0gX3NldENhbnZhc1NpemUyLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodCA9IF9zZXRDYW52YXNTaXplMi5oZWlnaHQ7XG5cbiAgICAgICAgICAgIF90aGlzMy5wcm9wcy5vblJlc2l6ZSAmJiBfdGhpczMucHJvcHMub25SZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCAxMDAwIC8gMTApO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9paWQpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fb2lkKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemUoKSB7XG4gICAgICB2YXIgY2FudmFzID0gdGhpcy5nZXRDYW52YXMoKTtcblxuICAgICAgdmFyIF9zZXRDYW52YXNTaXplMyA9IHRoaXMuc2V0Q2FudmFzU2l6ZShjYW52YXMpLFxuICAgICAgICAgIHdpZHRoID0gX3NldENhbnZhc1NpemUzLndpZHRoLFxuICAgICAgICAgIGhlaWdodCA9IF9zZXRDYW52YXNTaXplMy5oZWlnaHQ7XG5cbiAgICAgIHRoaXMucHJvcHMub25SZXNpemUgJiYgdGhpcy5wcm9wcy5vblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2V0Q2FudmFzU2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDYW52YXNTaXplKGNhbnZhcykge1xuICAgICAgdmFyIHdpZHRoID0gdGhpcy5jYW52YXNSZWYuY3VycmVudC5jbGllbnRXaWR0aDtcbiAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmNhbnZhc1JlZi5jdXJyZW50LmNsaWVudEhlaWdodDtcblxuICAgICAgdGhpcy5zaXplLndpZHRoID0gd2lkdGg7XG4gICAgICB0aGlzLnNpemUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgcmV0dXJuIHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVXYXlwb2ludEVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVdheXBvaW50RW50ZXIoKSB7XG4gICAgICBSQUZNYW5hZ2VyLnN0YXJ0KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhbmRsZVdheXBvaW50TGVhdmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlV2F5cG9pbnRMZWF2ZSgpIHtcbiAgICAgIFJBRk1hbmFnZXIuc3RvcCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRTdHlsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdHlsZSgpIHtcbiAgICAgIHZhciBiZyA9IHRoaXMucHJvcHMuYmc7XG5cbiAgICAgIHZhciBzdHlsZSA9IHsgd2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiIH07XG5cbiAgICAgIGlmIChiZyA9PT0gdHJ1ZSkge1xuICAgICAgICBzdHlsZSA9IE9iamVjdC5hc3NpZ24oc3R5bGUsIHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgIHpJbmRleDogLTEsXG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGJnICYmICh0eXBlb2YgYmcgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihiZykpID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHN0eWxlID0gT2JqZWN0LmFzc2lnbihzdHlsZSwgYmcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3R5bGU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhbmRsZU1vdXNlRG93blwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbk1vdXNlRG93biAmJiB0aGlzLnByb3BzLm9uTW91c2VEb3duKGUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiwgeyBjbGFzc05hbWU6IFwicGFydGljbGVzLWJnLWNhbnZhcy1zZWxmXCIsXG4gICAgICAgIHJlZjogdGhpcy5jYW52YXNSZWYsXG4gICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZU1vdXNlRG93bi5iaW5kKHRoaXMpLFxuICAgICAgICBzdHlsZTogdGhpcy5nZXRTdHlsZSgpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIENhbnZhcztcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuZnVuY3Rpb24gaGV4VG9SZ2IoaGV4KSB7XG4gICAgdmFyIHJlc3VsdCA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhoZXgpO1xuICAgIHJldHVybiByZXN1bHQgPyB7XG4gICAgICAgIHI6IHBhcnNlSW50KHJlc3VsdFsxXSwgMTYpLFxuICAgICAgICBnOiBwYXJzZUludChyZXN1bHRbMl0sIDE2KSxcbiAgICAgICAgYjogcGFyc2VJbnQocmVzdWx0WzNdLCAxNilcbiAgICB9IDoge307XG59XG5cbmZ1bmN0aW9uIGdldENvbG9yKGNvbG9yLCBhKSB7XG4gICAgdmFyIGMgPSB2b2lkIDA7XG4gICAgaWYgKGNvbG9yKSB7XG4gICAgICAgIGMgPSBoZXhUb1JnYihjb2xvcik7XG4gICAgICAgIHJldHVybiBcInJnYmEoXCIgKyBjLnIgKyBcIixcIiArIGMuZyArIFwiLFwiICsgYy5iICsgXCIsIFwiICsgYSArIFwiKVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxudmFyIEJhbGwgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBpbmhlcml0cyhCYWxsLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBCYWxsKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQmFsbCk7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChCYWxsLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQmFsbCkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLnJlbmRlclByb3RvbiA9IF90aGlzLnJlbmRlclByb3Rvbi5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhCYWxsLCBbe1xuICAgIGtleTogXCJvbkNhbnZhc0luaXRlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICB0aGlzLmNyZWF0ZU1pbmlFbWl0dGVyKGNhbnZhcyk7XG4gICAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgUkFGTWFuYWdlci5yZW1vdmUodGhpcy5yZW5kZXJQcm90b24pO1xuICAgICAgICB0aGlzLnByb3Rvbi5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSgpIHt9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTtcblxuICAgICAgdmFyIGVtaXR0ZXIgPSBuZXcgUHJvdG9uLkVtaXR0ZXIoKTtcbiAgICAgIGVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZSh0aGlzLnByb3BzLm51bSA/IG5ldyBQcm90b24uU3Bhbih0aGlzLnByb3BzLm51bSkgOiBuZXcgUHJvdG9uLlNwYW4oNCwgOSksIG5ldyBQcm90b24uU3BhbigwLjgsIDEuMykpO1xuXG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKDEpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlJhZGl1cygxLCA1MCkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTGlmZSg1LCA2KSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WZWxvY2l0eShuZXcgUHJvdG9uLlNwYW4oNSwgOCksIG5ldyBQcm90b24uU3BhbigzMCwgNzApLCBcInBvbGFyXCIpKTtcblxuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5BbHBoYSgxLCAwKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbG9yKFtcIiMzNmFhZjNcIiwgXCIjZmQ3NjljXCIsIFwiIzk0ZmYyMlwiLCBcIiNmZmE1NDVcIiwgXCIjZmZmZmZmXCJdKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlNjYWxlKDAuNywgMSkpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5HcmF2aXR5KDMpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sbGlzaW9uKGVtaXR0ZXIpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKHRoaXMuY3VzdG9tRGVhZEJlaGF2aW91cihjYW52YXMpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ3Jvc3Nab25lKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSwgXCJib3VuZFwiKSk7XG5cbiAgICAgIGVtaXR0ZXIucC54ID0gTWF0aC5taW4oNTAwLCBNYXRoLm1heChjYW52YXMud2lkdGggLyAyIC0gNDAwLCA1MCkpO1xuICAgICAgZW1pdHRlci5wLnkgPSBjYW52YXMuaGVpZ2h0IC8gMiArIDUwO1xuICAgICAgZW1pdHRlci5lbWl0KCk7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xuXG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgUHJvdG9uLkNhbnZhc1JlbmRlcmVyKGNhbnZhcyk7XG4gICAgICByZW5kZXJlci5vblByb3RvblVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBnZXRDb2xvcihfdGhpczIucHJvcHMuY29sb3IsIDAuMikgfHwgXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMilcIjtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgfTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHJlbmRlcmVyKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3VzdG9tRGVhZEJlaGF2aW91clwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjdXN0b21EZWFkQmVoYXZpb3VyKGNhbnZhcykge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUocGFydGljbGUpIHt9LFxuICAgICAgICBhcHBseUJlaGF2aW91cjogZnVuY3Rpb24gYXBwbHlCZWhhdmlvdXIocGFydGljbGUpIHtcbiAgICAgICAgICBpZiAocGFydGljbGUucC55ICsgcGFydGljbGUucmFkaXVzID49IGNhbnZhcy5oZWlnaHQpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0aWNsZS5yYWRpdXMgPiA5KSB7XG4gICAgICAgICAgICAgIF90aGlzMy5taW5pRW1pdHRlaW5nKHBhcnRpY2xlKTtcbiAgICAgICAgICAgICAgcGFydGljbGUuZGVhZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVNaW5pRW1pdHRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVNaW5pRW1pdHRlcihjYW52YXMpIHtcbiAgICAgIHZhciBtaW5pRW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpO1xuICAgICAgbWluaUVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZShuZXcgUHJvdG9uLlNwYW4oMywgNiksIG5ldyBQcm90b24uU3BhbigxLCAyKSk7XG5cbiAgICAgIG1pbmlFbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKDEpKTtcbiAgICAgIG1pbmlFbWl0dGVyLnJhZGl1c0luaXRpYWxpemUgPSBuZXcgUHJvdG9uLlJhZGl1cygpO1xuICAgICAgbWluaUVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShtaW5pRW1pdHRlci5yYWRpdXNJbml0aWFsaXplKTtcbiAgICAgIG1pbmlFbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5MaWZlKDAuNSwgMSkpO1xuICAgICAgbWluaUVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlYobmV3IFByb3Rvbi5TcGFuKDEuNSwgMyksIG5ldyBQcm90b24uU3BhbigwLCA3MCwgdHJ1ZSksIFwicG9sYXJcIikpO1xuXG4gICAgICBtaW5pRW1pdHRlci5jb2xvckJlaGF2aW91ciA9IG5ldyBQcm90b24uQ29sb3IoXCIjZmZmZmZmXCIpO1xuICAgICAgbWluaUVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQWxwaGEoMSwgMCkpO1xuICAgICAgbWluaUVtaXR0ZXIuYWRkQmVoYXZpb3VyKG1pbmlFbWl0dGVyLmNvbG9yQmVoYXZpb3VyKTtcbiAgICAgIG1pbmlFbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkdyYXZpdHkoNCkpO1xuICAgICAgbWluaUVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sbGlzaW9uKG1pbmlFbWl0dGVyKSk7XG4gICAgICBtaW5pRW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Dcm9zc1pvbmUobmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpLCBcImJvdW5kXCIpKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIobWluaUVtaXR0ZXIpO1xuXG4gICAgICB0aGlzLm1pbmlFbWl0dGVyID0gbWluaUVtaXR0ZXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm1pbmlFbWl0dGVpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWluaUVtaXR0ZWluZyhwYXJ0aWNsZSkge1xuICAgICAgdmFyIG1pbmlFbWl0dGVyID0gdGhpcy5taW5pRW1pdHRlcjtcbiAgICAgIG1pbmlFbWl0dGVyLnJhZGl1c0luaXRpYWxpemUucmVzZXQocGFydGljbGUucmFkaXVzICogMC4wNSwgcGFydGljbGUucmFkaXVzICogMC4yKTtcbiAgICAgIG1pbmlFbWl0dGVyLmNvbG9yQmVoYXZpb3VyLnJlc2V0KHBhcnRpY2xlLmNvbG9yKTtcbiAgICAgIG1pbmlFbWl0dGVyLnAueCA9IHBhcnRpY2xlLnAueDtcbiAgICAgIG1pbmlFbWl0dGVyLnAueSA9IHBhcnRpY2xlLnAueTtcbiAgICAgIG1pbmlFbWl0dGVyLmVtaXQoXCJvbmNlXCIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUHJvdG9uKCkge1xuICAgICAgdGhpcy5wcm90b24gJiYgdGhpcy5wcm90b24udXBkYXRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXMsIHsgYmc6IHRoaXMucHJvcHMuYmcsXG4gICAgICAgIGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjogXCJkYXJrZXJcIixcbiAgICAgICAgb25DYW52YXNJbml0ZWQ6IHRoaXMub25DYW52YXNJbml0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgb25SZXNpemU6IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBCYWxsO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG52YXIgQ29sb3IgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBpbmhlcml0cyhDb2xvciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ29sb3IocHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xvcik7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDb2xvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbG9yKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuY29sb3JzID0gW1wiIzUyOUI4OFwiLCBcIiNDREQxODBcIiwgXCIjRkZGQTMyXCIsIFwiI0ZCNjI1NVwiLCBcIiNGQjRBNTNcIiwgXCIjRkY0RTUwXCIsIFwiI0Y5RDQyM1wiXTtcbiAgICBfdGhpcy5yZW5kZXJQcm90b24gPSBfdGhpcy5yZW5kZXJQcm90b24uYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoQ29sb3IsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgUkFGTWFuYWdlci5yZW1vdmUodGhpcy5yZW5kZXJQcm90b24pO1xuICAgICAgICB0aGlzLnByb3Rvbi5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNhbnZhc0luaXRlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKCkge31cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5wcm90b24gPSBuZXcgUHJvdG9uKCk7XG4gICAgICB2YXIgZW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpO1xuICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKHRoaXMucHJvcHMubnVtID8gbmV3IFByb3Rvbi5TcGFuKHRoaXMucHJvcHMubnVtKSA6IG5ldyBQcm90b24uU3Bhbig1LCA4KSwgbmV3IFByb3Rvbi5TcGFuKDAuMSwgMC4yNSkpO1xuXG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKDEpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlJhZGl1cygyMCwgMjAwKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5MaWZlKDIsIDQpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlBvc2l0aW9uKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgd2lkdGgsIGhlaWdodCkpKTtcblxuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5BbHBoYSgwLCAxLCBJbmZpbml0eSwgUHJvdG9uLmVhc2VPdXRDdWJpYykpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5TY2FsZSgxLCAwLCBJbmZpbml0eSwgUHJvdG9uLmVhc2VPdXRDdWJpYykpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xvcih0aGlzLmNvbG9ycywgXCJyYW5kb21cIikpO1xuXG4gICAgICBlbWl0dGVyLmVtaXQoKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG5cbiAgICAgIHZhciByZW5kZXJlciA9IG5ldyBQcm90b24uQ2FudmFzUmVuZGVyZXIoY2FudmFzKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHJlbmRlcmVyKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclByb3RvbigpIHtcbiAgICAgIHRoaXMucHJvdG9uICYmIHRoaXMucHJvdG9uLnVwZGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7IGJnOiB0aGlzLnByb3BzLmJnLFxuICAgICAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb246IFwiZGFya2VyXCIsXG4gICAgICAgIG9uQ2FudmFzSW5pdGVkOiB0aGlzLm9uQ2FudmFzSW5pdGVkLmJpbmQodGhpcyksXG4gICAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ29sb3I7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBDb2xvciQxID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgICBpbmhlcml0cyhDb2xvciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBDb2xvcihwcm9wcykge1xuICAgICAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xvcik7XG5cbiAgICAgICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ29sb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb2xvcikpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5jb2xvcnMgPSBbXCIjNTI5Qjg4XCIsIFwiI0NERDE4MFwiLCBcIiNGRkZBMzJcIiwgXCIjRkI2MjU1XCIsIFwiI0ZCNEE1M1wiLCBcIiNGRjRFNTBcIiwgXCIjRjlENDIzXCJdO1xuICAgICAgICBfdGhpcy5yZW5kZXJQcm90b24gPSBfdGhpcy5yZW5kZXJQcm90b24uYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBjcmVhdGVDbGFzcyhDb2xvciwgW3tcbiAgICAgICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgUkFGTWFuYWdlci5yZW1vdmUodGhpcy5yZW5kZXJQcm90b24pO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvdG9uLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJvbkNhbnZhc0luaXRlZFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXJQcm90b24pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwib25SZXNpemVcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5wcm90b24ucmVuZGVyZXJzWzBdLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTsgICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJnZXRQcm9wXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQcm9wKGtleSwgZGVmYXVsdFZhbCkge1xuICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMucHJvcHMuY29uZmlnIHx8IHt9O1xuICAgICAgICAgICAgdmFyIHZhbCA9IGNvbmZpZ1trZXldIHx8IGRlZmF1bHRWYWw7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm90b24uU3Bhbih2YWxbMF0sIHZhbFsxXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJnZXRBcnJQcm9wXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBcnJQcm9wKGtleSwgZGVmYXVsdFZhbCkge1xuICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMucHJvcHMuY29uZmlnIHx8IHt9O1xuICAgICAgICAgICAgdmFyIHZhbCA9IGNvbmZpZ1trZXldIHx8IGRlZmF1bHRWYWw7XG4gICAgICAgICAgICBpZiAoIXZhbCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3ZhbCwgdmFsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImNyZWF0ZVByb3RvblwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICAgICAgdmFyIG51bSA9IHRoaXMuZ2V0UHJvcChcIm51bVwiLCBbNSwgOF0pO1xuICAgICAgICAgICAgdmFyIHJwcyA9IHRoaXMuZ2V0UHJvcChcInJwc1wiLCBbMC4xLCAwLjJdKTtcbiAgICAgICAgICAgIHZhciBtYXNzID0gdGhpcy5nZXRQcm9wKFwibWFzc1wiLCAxKTtcbiAgICAgICAgICAgIHZhciByYWRpdXMgPSB0aGlzLmdldFByb3AoXCJyYWRpdXNcIiwgWzEwLCAzMF0pO1xuICAgICAgICAgICAgdmFyIGxpZmUgPSB0aGlzLmdldFByb3AoXCJsaWZlXCIsIFsyLCAzXSk7XG4gICAgICAgICAgICB2YXIgYm9keSA9IHRoaXMuZ2V0UHJvcChcImJvZHlcIik7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSB0aGlzLmdldFByb3AoXCJwb3NpdGlvblwiKTtcbiAgICAgICAgICAgIHZhciB2ID0gdGhpcy5nZXRQcm9wKFwidlwiLCBbMiwgM10pO1xuICAgICAgICAgICAgdmFyIHRoYSA9IHRoaXMuZ2V0UHJvcChcInRoYVwiLCBbLTE1LCAxNV0pO1xuICAgICAgICAgICAgdmFyIGFscGhhID0gdGhpcy5nZXRBcnJQcm9wKFwiYWxwaGFcIik7XG4gICAgICAgICAgICB2YXIgc2NhbGUgPSB0aGlzLmdldEFyclByb3AoXCJzY2FsZVwiKTtcbiAgICAgICAgICAgIHZhciBjb2xvciA9IHRoaXMuZ2V0QXJyUHJvcChcImNvbG9yXCIpO1xuICAgICAgICAgICAgdmFyIGNyb3NzID0gdGhpcy5nZXRQcm9wKFwiY3Jvc3NcIiwgXCJkZWFkXCIpO1xuICAgICAgICAgICAgdmFyIHJhbmRvbSA9IHRoaXMuZ2V0UHJvcChcInJhbmRvbVwiKTtcbiAgICAgICAgICAgIHZhciByb3RhdGUgPSB0aGlzLmdldEFyclByb3AoXCJyb3RhdGVcIik7XG4gICAgICAgICAgICB2YXIgZyA9IHRoaXMuZ2V0UHJvcChcImdcIik7XG4gICAgICAgICAgICB2YXIgZiA9IHRoaXMuZ2V0QXJyUHJvcChcImZcIik7XG4gICAgICAgICAgICB2YXIgZW1pdHRlclYgPSB0aGlzLmdldFByb3AoXCJlbWl0dGVyXCIpO1xuXG4gICAgICAgICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTtcbiAgICAgICAgICAgIHZhciBlbWl0dGVyID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKGVtaXR0ZXJWID09PSBcImZvbGxvd1wiKSB7XG4gICAgICAgICAgICAgICAgZW1pdHRlciA9IG5ldyBQcm90b24uRm9sbG93RW1pdHRlcigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbWl0dGVyID0gbmV3IFByb3Rvbi5FbWl0dGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUobnVtLCBycHMpO1xuXG4gICAgICAgICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKG1hc3MpKTtcbiAgICAgICAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlJhZGl1cyhyYWRpdXMpKTtcbiAgICAgICAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLkxpZmUobGlmZSkpO1xuICAgICAgICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uVmVsb2NpdHkodiwgdGhhLCBcInBvbGFyXCIpKTtcbiAgICAgICAgICAgIGlmIChib2R5KSBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5Cb2R5KGJvZHkpKTtcblxuICAgICAgICAgICAgdmFyIHBvcyA9IHZvaWQgMDtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gXCJhbGxcIiB8fCBwb3NpdGlvbiA9PT0gXCJzY3JlZW5cIikge1xuICAgICAgICAgICAgICAgIHBvcyA9IG5ldyBQcm90b24uUG9zaXRpb24obmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKHR5cGVvZiBwb3NpdGlvbiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHBvc2l0aW9uKSkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBwb3MgPSBuZXcgUHJvdG9uLlBvc2l0aW9uKG5ldyBQcm90b24uUmVjdFpvbmUocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ud2lkdGgsIHBvc2l0aW9uLmhlaWdodCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbWl0dGVyLnAueCA9IGNhbnZhcy53aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgZW1pdHRlci5wLnkgPSBjYW52YXMuaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKHBvcyk7XG5cbiAgICAgICAgICAgIC8vLyBiZWhhdmlvdXJcbiAgICAgICAgICAgIHZhciBhbHBoYUIgPSBhbHBoYSA/IG5ldyBQcm90b24uQWxwaGEoYWxwaGFbMF0sIGFscGhhWzFdKSA6IG5ldyBQcm90b24uQWxwaGEoMCwgMSk7XG4gICAgICAgICAgICB2YXIgc2NhbGVCID0gc2NhbGUgPyBuZXcgUHJvdG9uLlNjYWxlKHNjYWxlWzBdLCBzY2FsZVsxXSkgOiBuZXcgUHJvdG9uLlNjYWxlKDEsIDAuMik7XG4gICAgICAgICAgICB2YXIgY29sb3JCID0gY29sb3IgPyBuZXcgUHJvdG9uLkNvbG9yKGNvbG9yWzBdLCBjb2xvclsxXSkgOiBuZXcgUHJvdG9uLkNvbG9yKHRoaXMuY29sb3JzKTtcblxuICAgICAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIoYWxwaGFCKTtcbiAgICAgICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKHNjYWxlQik7XG4gICAgICAgICAgICBpZiAoIWJvZHkpIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKGNvbG9yQik7XG5cbiAgICAgICAgICAgIGlmIChyb3RhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocm90YXRlWzBdID09PSB0cnVlIHx8IHJvdGF0ZVswXSA9PT0gXCJyb3RhdGVcIikge1xuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlJvdGF0ZSgpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlJvdGF0ZShyb3RhdGVbMF0sIHJvdGF0ZVsxXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHpvbmUgPSBuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICB2YXIgY3Jvc3Nab25lQmVoYXZpb3VyID0gbmV3IFByb3Rvbi5Dcm9zc1pvbmUoem9uZSwgY3Jvc3MpO1xuICAgICAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIoY3Jvc3Nab25lQmVoYXZpb3VyKTtcblxuICAgICAgICAgICAgcmFuZG9tICYmIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uUmFuZG9tRHJpZnQocmFuZG9tLCByYW5kb20sIDAuMDUpKTtcbiAgICAgICAgICAgIGcgJiYgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5HKGcpKTtcbiAgICAgICAgICAgIGYgJiYgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5GKGZbMF0sIGZbMV0pKTtcblxuICAgICAgICAgICAgZW1pdHRlci5lbWl0KCk7XG4gICAgICAgICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xuXG4gICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLmNyZWF0ZVJlbmRlcmVyKGNhbnZhcyk7XG4gICAgICAgICAgICB0aGlzLnByb3Rvbi5hZGRSZW5kZXJlcihyZW5kZXJlcik7XG5cbiAgICAgICAgICAgIHRoaXMuZW1pdHRlciA9IGVtaXR0ZXI7XG4gICAgICAgICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ciA9IGNyb3NzWm9uZUJlaGF2aW91cjtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImNyZWF0ZVJlbmRlcmVyXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVSZW5kZXJlcihjYW52YXMpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGNhbnZhcy53aWR0aDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DYW52YXNSZW5kZXJlcihjYW52YXMpO1xuXG4gICAgICAgICAgICB2YXIgb25VcGRhdGUgPSB0aGlzLmdldFByb3AoXCJvblVwZGF0ZVwiKTtcbiAgICAgICAgICAgIGlmIChvblVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLm9uUHJvdG9uVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZShjb250ZXh0LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb25QYXJ0aWNsZUNyZWF0ZWQgPSB0aGlzLmdldFByb3AoXCJvblBhcnRpY2xlQ3JlYXRlZFwiKTtcbiAgICAgICAgICAgIGlmIChvblBhcnRpY2xlQ3JlYXRlZCkge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVDcmVhdGVkID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uUGFydGljbGVDcmVhdGVkKGNvbnRleHQsIHBhcnRpY2xlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb25QYXJ0aWNsZVVwZGF0ZSA9IHRoaXMuZ2V0UHJvcChcIm9uUGFydGljbGVVcGRhdGVcIik7XG4gICAgICAgICAgICBpZiAob25QYXJ0aWNsZVVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVVcGRhdGUgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgb25QYXJ0aWNsZVVwZGF0ZShjb250ZXh0LCBwYXJ0aWNsZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmVyO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwicmVuZGVyUHJvdG9uXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcm90b24oKSB7XG4gICAgICAgICAgICB0aGlzLnByb3RvbiAmJiB0aGlzLnByb3Rvbi51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImhhbmRsZU1vdXNlRG93blwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duKGUpIHtcbiAgICAgICAgICAgIHZhciBvbk1vdXNlRG93biA9IHRoaXMuZ2V0UHJvcChcIm9uTW91c2VEb3duXCIpO1xuICAgICAgICAgICAgaWYgKG9uTW91c2VEb3duKSB7XG4gICAgICAgICAgICAgICAgb25Nb3VzZURvd24oZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJyZW5kZXJcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSB0aGlzLnByb3BzLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiB8fCB0aGlzLnByb3BzLm9wZXJhdGlvbiB8fCBcInNvdXJjZS1vdmVyXCI7XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywge1xuICAgICAgICAgICAgICAgIGJnOiB0aGlzLnByb3BzLmJnLFxuICAgICAgICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZU1vdXNlRG93bi5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjogZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uLFxuICAgICAgICAgICAgICAgIG9uQ2FudmFzSW5pdGVkOiB0aGlzLm9uQ2FudmFzSW5pdGVkLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgb25SZXNpemU6IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG4gICAgcmV0dXJuIENvbG9yO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG52YXIgTGluZXMgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBpbmhlcml0cyhMaW5lcywgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gTGluZXMocHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBMaW5lcyk7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChMaW5lcy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKExpbmVzKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMucmVuZGVyUHJvdG9uID0gX3RoaXMucmVuZGVyUHJvdG9uLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKExpbmVzLCBbe1xuICAgIGtleTogXCJvbkNhbnZhc0RpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzRGlkTW91bnQoY2FudmFzKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5jb2xvcikge1xuICAgICAgICBjYW52YXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5wcm9wcy5jb2xvcjtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgICAgIHRoaXMucHJvdG9uLmRlc3Ryb3koKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2FudmFzSW5pdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIFJBRk1hbmFnZXIuYWRkKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNpemUod2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS53aWR0aCA9IHdpZHRoO1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICB0aGlzLnByb3Rvbi5yZW5kZXJlcnNbMF0ucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5wcm90b24gPSBuZXcgUHJvdG9uKCk7XG5cbiAgICAgIHZhciBlbWl0dGVyID0gbmV3IFByb3Rvbi5FbWl0dGVyKCk7XG4gICAgICBlbWl0dGVyLmRhbXBpbmcgPSAwLjAwODtcbiAgICAgIGVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZSh0aGlzLnByb3BzLm51bSA/IHRoaXMucHJvcHMubnVtIDogMjUwKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUmFkaXVzKDQpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlZlbG9jaXR5KG5ldyBQcm90b24uU3BhbigxLjUpLCBuZXcgUHJvdG9uLlNwYW4oMCwgMzYwKSwgXCJwb2xhclwiKSk7XG4gICAgICB2YXIgbW91c2VPYmogPSB7XG4gICAgICAgIHg6IHdpZHRoIC8gMixcbiAgICAgICAgeTogaGVpZ2h0IC8gMlxuICAgICAgfTtcblxuICAgICAgdmFyIGF0dHJhY3Rpb25CZWhhdmlvdXIgPSBuZXcgUHJvdG9uLkF0dHJhY3Rpb24obW91c2VPYmosIDAsIDApO1xuICAgICAgdmFyIGNyb3NzWm9uZUJlaGF2aW91ciA9IG5ldyBQcm90b24uQ3Jvc3Nab25lKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSwgXCJjcm9zc1wiKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sb3IoXCJyYW5kb21cIikpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIoYXR0cmFjdGlvbkJlaGF2aW91ciwgY3Jvc3Nab25lQmVoYXZpb3VyKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uUmFuZG9tRHJpZnQoMTAsIDEwLCAwLjA1KSk7XG4gICAgICBlbWl0dGVyLnAueCA9IGNhbnZhcy53aWR0aCAvIDI7XG4gICAgICBlbWl0dGVyLnAueSA9IGNhbnZhcy5oZWlnaHQgLyAyO1xuICAgICAgZW1pdHRlci5lbWl0KFwib25jZVwiKTtcblxuICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihlbWl0dGVyKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHRoaXMuY3JlYXRlUmVuZGVyZXIoY2FudmFzKSk7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ciA9IGNyb3NzWm9uZUJlaGF2aW91cjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUmVuZGVyZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIoY2FudmFzKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DYW52YXNSZW5kZXJlcihjYW52YXMpO1xuICAgICAgcmVuZGVyZXIub25Qcm90b25VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZ2V0Q29sb3IoX3RoaXMyLnByb3BzLmNvbG9yLCAwLjAyKSB8fCBcInJnYmEoMCwgMCwgMCwgMC4wMilcIjtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZVVwZGF0ZSA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gcGFydGljbGUuY29sb3I7XG4gICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gMTtcbiAgICAgICAgY29udGV4dC5tb3ZlVG8ocGFydGljbGUub2xkLnAueCwgcGFydGljbGUub2xkLnAueSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKHBhcnRpY2xlLnAueCwgcGFydGljbGUucC55KTtcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiByZW5kZXJlcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclByb3RvbigpIHtcbiAgICAgIHRoaXMucHJvdG9uICYmIHRoaXMucHJvdG9uLnVwZGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7IGJnOiB0aGlzLnByb3BzLmJnLFxuICAgICAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb246IFwiZGFya2VyXCIsXG4gICAgICAgIG9uQ2FudmFzRGlkTW91bnQ6IHRoaXMub25DYW52YXNEaWRNb3VudC5iaW5kKHRoaXMpLFxuICAgICAgICBvbkNhbnZhc0luaXRlZDogdGhpcy5vbkNhbnZhc0luaXRlZC5iaW5kKHRoaXMpLFxuICAgICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIExpbmVzO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG52YXIgVGhpY2sgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBpbmhlcml0cyhUaGljaywgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gVGhpY2socHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBUaGljayk7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChUaGljay5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRoaWNrKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuaHVlID0gMDtcbiAgICBfdGhpcy5pbmRleCA9IDA7XG4gICAgX3RoaXMuY29sb3JUZW1wbGF0ZSA9IFwiaHNsYShodWUsODAlLDUwJSwgMC43NSlcIjtcbiAgICBfdGhpcy5yZW5kZXJQcm90b24gPSBfdGhpcy5yZW5kZXJQcm90b24uYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoVGhpY2ssIFt7XG4gICAga2V5OiBcIm9uQ2FudmFzRGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNEaWRNb3VudChjYW52YXMpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmNvbG9yKSB7XG4gICAgICAgIGNhbnZhcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLnByb3BzLmNvbG9yO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNhbnZhc0luaXRlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIFJBRk1hbmFnZXIuYWRkKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNpemUod2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS53aWR0aCA9IHdpZHRoO1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICB0aGlzLnByb3Rvbi5yZW5kZXJlcnNbMF0ucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5wcm90b24gPSBuZXcgUHJvdG9uKCk7XG5cbiAgICAgIHZhciBlbWl0dGVyID0gbmV3IFByb3Rvbi5FbWl0dGVyKCk7XG4gICAgICBlbWl0dGVyLmRhbXBpbmcgPSAwLjAwODtcbiAgICAgIGVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZSh0aGlzLnByb3BzLm51bSA/IHRoaXMucHJvcHMubnVtIDogMTUwKTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZVxuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcygxKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5SYWRpdXMoOCkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uVihuZXcgUHJvdG9uLlNwYW4oMC4xLCAwLjUpLCBuZXcgUHJvdG9uLlNwYW4oMCwgMzYwKSwgXCJwb2xhclwiKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5Qb3NpdGlvbihuZXcgUHJvdG9uLkNpcmNsZVpvbmUoY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIsIDEwMCkpKTtcblxuICAgICAgLy8gQmVoYXZpb3VyXG4gICAgICB2YXIgY3Jvc3Nab25lQmVoYXZpb3VyID0gbmV3IFByb3Rvbi5Dcm9zc1pvbmUobmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpLCBcImNyb3NzXCIpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIoY3Jvc3Nab25lQmVoYXZpb3VyKTtcbiAgICAgIHRoaXMucmVwdWxzaW9uID0gbmV3IFByb3Rvbi5SZXB1bHNpb24oe1xuICAgICAgICB4OiBjYW52YXMud2lkdGggLyAyLFxuICAgICAgICB5OiBjYW52YXMuaGVpZ2h0IC8gMiAtIDEwMFxuICAgICAgfSwgMywgMzAwKTtcblxuICAgICAgdGhpcy5hdHRyYWN0aW9uID0gbmV3IFByb3Rvbi5BdHRyYWN0aW9uKHtcbiAgICAgICAgeDogY2FudmFzLndpZHRoIC8gMixcbiAgICAgICAgeTogY2FudmFzLmhlaWdodCAvIDJcbiAgICAgIH0sIDMsIDIwMCk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cih0aGlzLmF0dHJhY3Rpb24sIHRoaXMucmVwdWxzaW9uKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sb3IoXCJyYW5kb21cIikpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5SYW5kb21EcmlmdCgyMCwgMTUsIDAuMTUpKTtcblxuICAgICAgZW1pdHRlci5lbWl0KFwib25jZVwiKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRSZW5kZXJlcih0aGlzLmNyZWF0ZVJlbmRlcmVyKGNhbnZhcykpO1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIgPSBjcm9zc1pvbmVCZWhhdmlvdXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVJlbmRlcmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyKGNhbnZhcykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIHZhciByZW5kZXJlciA9IG5ldyBQcm90b24uQ2FudmFzUmVuZGVyZXIoY2FudmFzKTtcblxuICAgICAgcmVuZGVyZXIub25Qcm90b25VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMi5odWUgKz0gMTtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBnZXRDb2xvcihfdGhpczIucHJvcHMuY29sb3IsIDAuMDIpIHx8IFwicmdiYSgwLCAwLCAwLCAwLjAyKVwiO1xuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJlci5vblBhcnRpY2xlQ3JlYXRlZCA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge1xuICAgICAgICBwYXJ0aWNsZS5kYXRhLmJlZ2luID0gUHJvdG9uLk1hdGhVdGlsLnJhbmRvbUFUb0IoMSwgMTIwKTtcbiAgICAgICAgcGFydGljbGUuZGF0YS50aGEgPSBQcm90b24uTWF0aFV0aWwucmFuZG9tQVRvQigwLCBNYXRoLlBJICogMik7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJlci5vblBhcnRpY2xlVXBkYXRlID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgIHZhciBodWUgPSBwYXJ0aWNsZS5kYXRhLmJlZ2luICsgX3RoaXMyLmh1ZTtcbiAgICAgICAgcGFydGljbGUuY29sb3IgPSBfdGhpczIuY29sb3JUZW1wbGF0ZS5yZXBsYWNlKFwiaHVlXCIsIGh1ZSAlIDM2MCk7XG5cbiAgICAgICAgdmFyIHJhdGlvID0gMyAvIDQ7XG4gICAgICAgIHZhciByYWRpdXMgPSBwYXJ0aWNsZS5yYWRpdXMgKiAoMSAtIHJhdGlvKSAqIE1hdGguY29zKHBhcnRpY2xlLmRhdGEudGhhICs9IDAuMDEpICsgcGFydGljbGUucmFkaXVzICogcmF0aW87XG5cbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBwYXJ0aWNsZS5jb2xvcjtcbiAgICAgICAgY29udGV4dC5hcmMocGFydGljbGUucC54LCBwYXJ0aWNsZS5wLnksIHJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIHRydWUpO1xuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiByZW5kZXJlcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgICAgIHRoaXMucHJvdG9uLmRlc3Ryb3koKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcm90b24oKSB7XG4gICAgICB2YXIgY2FudmFzID0gdGhpcy5jYW52YXM7XG4gICAgICB0aGlzLnByb3Rvbi51cGRhdGUoKTtcbiAgICAgIGlmICh0aGlzLmluZGV4ICUgMjAwID09PSAwKSB7XG4gICAgICAgIHRoaXMuYXR0cmFjdGlvbi50YXJnZXRQb3NpdGlvbi54ID0gTWF0aC5yYW5kb20oKSAqIGNhbnZhcy53aWR0aDtcbiAgICAgICAgdGhpcy5hdHRyYWN0aW9uLnRhcmdldFBvc2l0aW9uLnkgPSBNYXRoLnJhbmRvbSgpICogY2FudmFzLmhlaWdodDtcblxuICAgICAgICB0aGlzLnJlcHVsc2lvbi50YXJnZXRQb3NpdGlvbi54ID0gTWF0aC5yYW5kb20oKSAqIGNhbnZhcy53aWR0aDtcbiAgICAgICAgdGhpcy5yZXB1bHNpb24udGFyZ2V0UG9zaXRpb24ueSA9IE1hdGgucmFuZG9tKCkgKiBjYW52YXMuaGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICB0aGlzLmluZGV4Kys7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXMsIHsgYmc6IHRoaXMucHJvcHMuYmcsXG4gICAgICAgIG9uQ2FudmFzRGlkTW91bnQ6IHRoaXMub25DYW52YXNEaWRNb3VudC5iaW5kKHRoaXMpLFxuICAgICAgICBvbkNhbnZhc0luaXRlZDogdGhpcy5vbkNhbnZhc0luaXRlZC5iaW5kKHRoaXMpLFxuICAgICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFRoaWNrO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG52YXIgU3F1YXJlID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoU3F1YXJlLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBTcXVhcmUocHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBTcXVhcmUpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU3F1YXJlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU3F1YXJlKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuY29sb3JzID0gW1wiI2ZhZDM5MFwiLCBcIiM4MWVjZWNcIiwgXCIjZmZmZmZmXCIsIFwiI2JhZGM1OFwiLCBcIiNmOWNhMjRcIiwgXCIjRkVBNDdGXCJdO1xuICAgIF90aGlzLnJlbmRlclByb3RvbiA9IF90aGlzLnJlbmRlclByb3Rvbi5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhTcXVhcmUsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgUkFGTWFuYWdlci5yZW1vdmUodGhpcy5yZW5kZXJQcm90b24pO1xuICAgICAgICB0aGlzLnByb3Rvbi5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNhbnZhc0RpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzRGlkTW91bnQoY2FudmFzKSB7fVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2FudmFzSW5pdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIFJBRk1hbmFnZXIuYWRkKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNpemUod2lkdGgsIGhlaWdodCkge1xuICAgICAgdmFyIGRpcyA9IDE1MDtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUud2lkdGggPSB3aWR0aCArIDIgKiBkaXM7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLmhlaWdodCA9IGhlaWdodCArIDIgKiBkaXM7XG4gICAgICB0aGlzLnByb3Rvbi5yZW5kZXJlcnNbMF0ucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5wcm90b24gPSBuZXcgUHJvdG9uKCk7XG4gICAgICB2YXIgZW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpO1xuICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKHRoaXMucHJvcHMubnVtID8gdGhpcy5wcm9wcy5udW0gOiA1MCk7XG4gICAgICBlbWl0dGVyLmRhbXBpbmcgPSAwO1xuXG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKDEpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlJhZGl1cyg0LCA3MCkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uVmVsb2NpdHkobmV3IFByb3Rvbi5TcGFuKDIsIDEwKSwgbmV3IFByb3Rvbi5TcGFuKDApLCBcInBvbGFyXCIpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlBvc2l0aW9uKG5ldyBQcm90b24uTGluZVpvbmUoMCwgY2FudmFzLmhlaWdodCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSkpO1xuXG4gICAgICB2YXIgZGlzID0gMTUwO1xuICAgICAgdmFyIGNyb3NzWm9uZUJlaGF2aW91ciA9IG5ldyBQcm90b24uQ3Jvc3Nab25lKG5ldyBQcm90b24uUmVjdFpvbmUoMCAtIGRpcywgMCAtIGRpcywgY2FudmFzLndpZHRoICsgMiAqIGRpcywgY2FudmFzLmhlaWdodCArIDIgKiBkaXMpLCBcImNyb3NzXCIpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIoY3Jvc3Nab25lQmVoYXZpb3VyKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQWxwaGEoUHJvdG9uLmdldFNwYW4oMC4xLCAwLjU1KSkpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xvcih0aGlzLmNvbG9ycykpO1xuXG4gICAgICBlbWl0dGVyLmVtaXQoXCJvbmNlXCIpO1xuICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihlbWl0dGVyKTtcbiAgICAgIHZhciByZW5kZXJlciA9IHRoaXMuY3JlYXRlUmVuZGVyZXIoY2FudmFzKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHJlbmRlcmVyKTtcblxuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIgPSBjcm9zc1pvbmVCZWhhdmlvdXI7XG4gICAgICBlbWl0dGVyLnByZUVtaXQoMik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVJlbmRlcmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyKGNhbnZhcykge1xuICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DdXN0b21SZW5kZXJlcigpO1xuXG4gICAgICByZW5kZXJlci5vblByb3RvblVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVDcmVhdGVkID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgIHZhciB3ID0gcGFydGljbGUucmFkaXVzIHx8IDYwO1xuICAgICAgICB2YXIgaCA9IFByb3Rvbi5NYXRoVXRpbC5yYW5kb21BVG9CKDEwMCwgMjAwLCBcImludFwiKTtcbiAgICAgICAgcGFydGljbGUuZGF0YS53ID0gdztcbiAgICAgICAgcGFydGljbGUuZGF0YS5oID0gaDtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVVcGRhdGUgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgdmFyIHcgPSBwYXJ0aWNsZS5kYXRhLnc7XG4gICAgICAgIHZhciBoID0gcGFydGljbGUuZGF0YS5oO1xuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IHBhcnRpY2xlLmFscGhhO1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHBhcnRpY2xlLmNvbG9yO1xuXG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKHBhcnRpY2xlLnAueCwgcGFydGljbGUucC55KTtcbiAgICAgICAgY29udGV4dC5yb3RhdGUoUHJvdG9uLk1hdGhVdGlsLmRlZ3JlZVRyYW5zZm9ybShwYXJ0aWNsZS5yb3RhdGlvbikpO1xuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSgtcGFydGljbGUucC54LCAtcGFydGljbGUucC55KTtcblxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0LnJlY3QocGFydGljbGUucC54IC0gdyAvIDIsIHBhcnRpY2xlLnAueSAtIGggLyAyLCB3LCBoKTtcblxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IDE7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHJlbmRlcmVyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUHJvdG9uKCkge1xuICAgICAgdGhpcy5wcm90b24gJiYgdGhpcy5wcm90b24udXBkYXRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXMsIHsgYmc6IHRoaXMucHJvcHMuYmcsXG4gICAgICAgIGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjogXCJsaWdodGVyXCIsXG4gICAgICAgIG9uQ2FudmFzRGlkTW91bnQ6IHRoaXMub25DYW52YXNEaWRNb3VudC5iaW5kKHRoaXMpLFxuICAgICAgICBvbkNhbnZhc0luaXRlZDogdGhpcy5vbkNhbnZhc0luaXRlZC5iaW5kKHRoaXMpLFxuICAgICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFNxdWFyZTtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxudmFyIENvYndlYiA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKENvYndlYiwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ29id2ViKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29id2ViKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENvYndlYi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvYndlYikpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLnJlbmRlclByb3RvbiA9IF90aGlzLnJlbmRlclByb3Rvbi5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhDb2J3ZWIsIFt7XG4gICAga2V5OiBcIm9uQ2FudmFzSW5pdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIFJBRk1hbmFnZXIuYWRkKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgICAgIHRoaXMucHJvdG9uLmRlc3Ryb3koKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUud2lkdGggPSB3aWR0aDtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgdGhpcy5wcm90b24ucmVuZGVyZXJzWzBdLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMucHJvdG9uID0gbmV3IFByb3RvbigpO1xuXG4gICAgICB2YXIgZW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpO1xuICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKHRoaXMucHJvcHMubnVtID8gbmV3IFByb3Rvbi5TcGFuKHRoaXMucHJvcHMubnVtKSA6IG5ldyBQcm90b24uU3BhbigxMDApLCBuZXcgUHJvdG9uLlNwYW4oMC4wNSwgMC4yKSk7XG5cbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUmFkaXVzKDEsIDQpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLkxpZmUoSW5maW5pdHkpKTtcblxuICAgICAgdmFyIHBvaW50Wm9uZSA9IG5ldyBQcm90b24uUG9zaXRpb24obmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCB3aWR0aCwgaGVpZ2h0KSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUocG9pbnRab25lKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlZlbG9jaXR5KG5ldyBQcm90b24uU3BhbigwLjMsIDAuNiksIG5ldyBQcm90b24uU3BhbigwLCAzNjApLCBcInBvbGFyXCIpKTtcblxuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5BbHBoYShQcm90b24uZ2V0U3BhbigwLjIsIDAuOSkpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sb3IodGhpcy5wcm9wcy5jb2xvciB8fCBcIiMzMzNcIikpO1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIgPSBuZXcgUHJvdG9uLkNyb3NzWm9uZShuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIHdpZHRoLCBoZWlnaHQpLCBcImNyb3NzXCIpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIodGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIpO1xuXG4gICAgICBlbWl0dGVyLmVtaXQoXCJvbmNlXCIpO1xuICAgICAgZW1pdHRlci5kYW1waW5nID0gMDtcbiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRSZW5kZXJlcih0aGlzLmNyZWF0ZVJlbmRlcmVyKGNhbnZhcywgZW1pdHRlcikpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVSZW5kZXJlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVSZW5kZXJlcihjYW52YXMsIGVtaXR0ZXIpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgUHJvdG9uLkNhbnZhc1JlbmRlcmVyKGNhbnZhcyk7XG4gICAgICB2YXIgUiA9IDE0MDtcblxuICAgICAgcmVuZGVyZXIub25Qcm90b25VcGRhdGVBZnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhcnRpY2xlcyA9IGVtaXR0ZXIucGFydGljbGVzO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydGljbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgcGFydGljbGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgcEEgPSBwYXJ0aWNsZXNbaV07XG4gICAgICAgICAgICB2YXIgcEIgPSBwYXJ0aWNsZXNbal07XG4gICAgICAgICAgICB2YXIgZGlzID0gcEEucC5kaXN0YW5jZVRvKHBCLnApO1xuXG4gICAgICAgICAgICBpZiAoZGlzIDwgUikge1xuICAgICAgICAgICAgICB2YXIgYWxwaGEgPSAoMSAtIGRpcyAvIFIpICogMC41O1xuICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gZ2V0Q29sb3IoX3RoaXMyLnByb3BzLmNvbG9yLCBhbHBoYSkgfHwgXCJyZ2JhKDMsIDMsIDMsIFwiICsgYWxwaGEgKyBcIilcIjtcbiAgICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8ocEEucC54LCBwQS5wLnkpO1xuICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhwQi5wLngsIHBCLnAueSk7XG4gICAgICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gcmVuZGVyZXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcm90b24oKSB7XG4gICAgICB0aGlzLnByb3RvbiAmJiB0aGlzLnByb3Rvbi51cGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywgeyBiZzogdGhpcy5wcm9wcy5iZyxcbiAgICAgICAgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uOiBcImRhcmtlclwiLFxuICAgICAgICBvbkNhbnZhc0luaXRlZDogdGhpcy5vbkNhbnZhc0luaXRlZC5iaW5kKHRoaXMpLFxuICAgICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIENvYndlYjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxudmFyIENpcmNsZSA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKENpcmNsZSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ2lyY2xlKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2lyY2xlKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENpcmNsZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENpcmNsZSkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLmNvbG9ycyA9IFtcIiM3NGI5ZmZcIiwgXCIjZTg0MzkzXCIsIFwiIzZjNWNlN1wiLCBcIiMwMGI4OTRcIiwgXCIjZmRjYjZlXCIsIFwiIzAwNjI2NlwiLCBcIiMxQjE0NjRcIl07XG5cbiAgICBfdGhpcy5yZW5kZXJQcm90b24gPSBfdGhpcy5yZW5kZXJQcm90b24uYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoQ2lyY2xlLCBbe1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICAgICAgdGhpcy5wcm90b24uZGVzdHJveSgpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DYW52YXNJbml0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXJQcm90b24pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLndpZHRoID0gd2lkdGg7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIHRoaXMucHJvdG9uLnJlbmRlcmVyc1swXS5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTtcblxuICAgICAgdmFyIGVtaXR0ZXIgPSBuZXcgUHJvdG9uLkVtaXR0ZXIoKTtcbiAgICAgIGVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZSh0aGlzLnByb3BzLm51bSB8fCAyMCk7XG4gICAgICBlbWl0dGVyLmRhbXBpbmcgPSAwLjAwODtcblxuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcygxKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5SYWRpdXMoMzAsIDYwMCkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uVmVsb2NpdHkobmV3IFByb3Rvbi5TcGFuKDAuNSksIG5ldyBQcm90b24uU3BhbigwLCAzNjApLCBcInBvbGFyXCIpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlBvc2l0aW9uKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSkpO1xuXG4gICAgICB2YXIgY3Jvc3Nab25lQmVoYXZpb3VyID0gbmV3IFByb3Rvbi5Dcm9zc1pvbmUobmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpLCBcImNyb3NzXCIpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIoY3Jvc3Nab25lQmVoYXZpb3VyKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQWxwaGEoUHJvdG9uLmdldFNwYW4oMC4zNSwgMC41NSkpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sb3IodGhpcy5nZXRDb2xvcigpKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlJhbmRvbURyaWZ0KDUwLCA1MCwgMC41KSk7XG5cbiAgICAgIGVtaXR0ZXIuZW1pdChcIm9uY2VcIik7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xuXG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgUHJvdG9uLkNhbnZhc1JlbmRlcmVyKGNhbnZhcyk7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRSZW5kZXJlcihyZW5kZXJlcik7XG5cbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyID0gY3Jvc3Nab25lQmVoYXZpb3VyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRDb2xvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb2xvcigpIHtcbiAgICAgIHZhciBjID0gdGhpcy5jb2xvcnM7XG4gICAgICBpZiAodGhpcy5wcm9wcy5jb2xvcikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnByb3BzLmNvbG9yKSkge1xuICAgICAgICAgIGMgPSB0aGlzLnByb3BzLmNvbG9yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGMgPSBbdGhpcy5wcm9wcy5jb2xvcl07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcm90b24oKSB7XG4gICAgICB0aGlzLnByb3RvbiAmJiB0aGlzLnByb3Rvbi51cGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywgeyBiZzogdGhpcy5wcm9wcy5iZyxcbiAgICAgICAgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uOiBcImRhcmtlblwiLFxuICAgICAgICBvbkNhbnZhc0luaXRlZDogdGhpcy5vbkNhbnZhc0luaXRlZC5iaW5kKHRoaXMpLFxuICAgICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIENpcmNsZTtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxudmFyIFRhZHBvbGUgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBpbmhlcml0cyhUYWRwb2xlLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBUYWRwb2xlKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFkcG9sZSk7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChUYWRwb2xlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGFkcG9sZSkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLnJlbmRlclByb3RvbiA9IF90aGlzLnJlbmRlclByb3Rvbi5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhUYWRwb2xlLCBbe1xuICAgIGtleTogXCJvbkNhbnZhc0RpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzRGlkTW91bnQoY2FudmFzKSB7fVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2FudmFzSW5pdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIHRoaXMucmVuZGVyUHJvdG9uKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUud2lkdGggPSB3aWR0aDtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgdGhpcy5wcm90b24ucmVuZGVyZXJzWzBdLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMucHJvdG9uID0gbmV3IFByb3RvbigpO1xuXG4gICAgICB2YXIgZW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpO1xuICAgICAgZW1pdHRlci5kYW1waW5nID0gMC4wMDg7XG4gICAgICBlbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUodGhpcy5wcm9wcy5udW0gPyB0aGlzLnByb3BzLm51bSA6IDUwKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUmFkaXVzKDUsIDkpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlZlbG9jaXR5KG5ldyBQcm90b24uU3BhbigxLjUpLCBuZXcgUHJvdG9uLlNwYW4oMCwgMzYwKSwgXCJwb2xhclwiKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5Qb3NpdGlvbihuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIHdpZHRoLCBoZWlnaHQpKSk7XG5cbiAgICAgIHZhciBtb3VzZUluZm8gPSB7XG4gICAgICAgIHg6IHdpZHRoIC8gMixcbiAgICAgICAgeTogaGVpZ2h0IC8gMlxuICAgICAgfTtcblxuICAgICAgdmFyIGF0dHJhY3Rpb25CZWhhdmlvdXIgPSBuZXcgUHJvdG9uLkF0dHJhY3Rpb24obW91c2VJbmZvLCAwLCAwKTtcbiAgICAgIHZhciBjcm9zc1pvbmVCZWhhdmlvdXIgPSBuZXcgUHJvdG9uLkNyb3NzWm9uZShuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCksIFwiYm91bmRcIik7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbG9yKHRoaXMucHJvcHMuY29sb3IgfHwgXCIjYmJiXCIpKTtcbiAgICAgIC8vZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5BbHBoYShuZXcgUHJvdG9uLlNwYW4oMC41LCAxKSkpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIoYXR0cmFjdGlvbkJlaGF2aW91ciwgY3Jvc3Nab25lQmVoYXZpb3VyKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uUmFuZG9tRHJpZnQoMTUsIDE1LCAwLjA1KSk7XG4gICAgICBlbWl0dGVyLmVtaXQoXCJvbmNlXCIpO1xuXG4gICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xuICAgICAgdGhpcy5wcm90b24uYWRkUmVuZGVyZXIodGhpcy5jcmVhdGVSZW5kZXJlcihjYW52YXMpKTtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyID0gY3Jvc3Nab25lQmVoYXZpb3VyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVSZW5kZXJlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVSZW5kZXJlcihjYW52YXMpIHtcbiAgICAgIHZhciBqb2ludENvdW50ID0gMTA7XG4gICAgICB2YXIgZGVsYXlUaW1lID0gODtcbiAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIHZhciByZW5kZXJlciA9IG5ldyBQcm90b24uQ2FudmFzUmVuZGVyZXIoY2FudmFzKTtcblxuICAgICAgcmVuZGVyZXIub25Qcm90b25VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJlci5vblBhcnRpY2xlQ3JlYXRlZCA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge1xuICAgICAgICBwYXJ0aWNsZS5kYXRhLnBvaW50cyA9IFtdO1xuICAgICAgICBwYXJ0aWNsZS5kYXRhLmluZGV4ID0gMDtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVVcGRhdGUgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgZHJhd1RhZHBvbGVUYWlsKHBhcnRpY2xlKTtcbiAgICAgICAgaWYgKHBhcnRpY2xlLmRhdGEuaW5kZXggJSBkZWxheVRpbWUgPT09IDApIGZpbGxQb2ludHNEYXRhKHBhcnRpY2xlKTtcbiAgICAgICAgZHJhd1RhZHBvbGVIZWFkKHBhcnRpY2xlKTtcbiAgICAgICAgcGFydGljbGUuZGF0YS5pbmRleCsrO1xuICAgICAgfTtcblxuICAgICAgdmFyIGZpbGxQb2ludHNEYXRhID0gZnVuY3Rpb24gZmlsbFBvaW50c0RhdGEocGFydGljbGUpIHtcbiAgICAgICAgcGFydGljbGUuZGF0YS5wb2ludHMudW5zaGlmdChwYXJ0aWNsZS5wLnkpO1xuICAgICAgICBwYXJ0aWNsZS5kYXRhLnBvaW50cy51bnNoaWZ0KHBhcnRpY2xlLnAueCk7XG5cbiAgICAgICAgaWYgKHBhcnRpY2xlLmRhdGEucG9pbnRzLmxlbmd0aCA+IGpvaW50Q291bnQpIHtcbiAgICAgICAgICBwYXJ0aWNsZS5kYXRhLnBvaW50cy5wb3AoKTtcbiAgICAgICAgICBwYXJ0aWNsZS5kYXRhLnBvaW50cy5wb3AoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIGRyYXdUYWRwb2xlSGVhZCA9IGZ1bmN0aW9uIGRyYXdUYWRwb2xlSGVhZChwYXJ0aWNsZSkge1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHBhcnRpY2xlLmNvbG9yO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0LmFyYyhwYXJ0aWNsZS5wLngsIHBhcnRpY2xlLnAueSwgcGFydGljbGUucmFkaXVzLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSk7XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xuICAgICAgfTtcblxuICAgICAgdmFyIGRyYXdUYWRwb2xlVGFpbCA9IGZ1bmN0aW9uIGRyYXdUYWRwb2xlVGFpbChwYXJ0aWNsZSkge1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gcGFydGljbGUuY29sb3I7XG5cbiAgICAgICAgY29udGV4dC5tb3ZlVG8ocGFydGljbGUucC54LCBwYXJ0aWNsZS5wLnkpO1xuXG4gICAgICAgIHZhciBsID0gcGFydGljbGUuZGF0YS5wb2ludHMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkgKz0gMikge1xuICAgICAgICAgIHZhciB4ID0gcGFydGljbGUuZGF0YS5wb2ludHNbaV07XG4gICAgICAgICAgdmFyIHkgPSBwYXJ0aWNsZS5kYXRhLnBvaW50c1tpICsgMV07XG5cbiAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IGxpbmVhckV2YWx1YXRpb24oaSwgbCk7XG4gICAgICAgICAgY29udGV4dC5saW5lVG8oeCwgeSk7XG4gICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIGxpbmVhckV2YWx1YXRpb24gPSBmdW5jdGlvbiBsaW5lYXJFdmFsdWF0aW9uKGksIGwpIHtcbiAgICAgICAgaWYgKGwgPD0gMikgcmV0dXJuIDE7XG5cbiAgICAgICAgdmFyIG1heCA9IDY7XG4gICAgICAgIHZhciBBID0gKG1heCAtIDEpIC8gKDIgLyBsIC0gMSk7XG4gICAgICAgIHZhciBCID0gMSAtIEE7XG4gICAgICAgIHZhciBYID0gKGkgKyAyKSAvIGw7XG4gICAgICAgIHZhciB2YWwgPSBBICogWCArIEI7XG4gICAgICAgIHZhbCA9IHZhbCA+PiAwO1xuXG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gcmVuZGVyZXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcm90b24oKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgUkFGTWFuYWdlci5hZGQoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIucHJvdG9uLnVwZGF0ZSgpO1xuICAgICAgICAvL3RoaXMucHJvdG9uLnN0YXRzLnVwZGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXMsIHsgYmc6IHRoaXMucHJvcHMuYmcsXG4gICAgICAgIGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjogXCJkYXJrZXJcIixcbiAgICAgICAgb25DYW52YXNEaWRNb3VudDogdGhpcy5vbkNhbnZhc0RpZE1vdW50LmJpbmQodGhpcyksXG4gICAgICAgIG9uQ2FudmFzSW5pdGVkOiB0aGlzLm9uQ2FudmFzSW5pdGVkLmJpbmQodGhpcyksXG4gICAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gVGFkcG9sZTtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxudmFyIENPTE9SID0gW1wiI2Y2YjkzYlwiLCBcIiMxOGRjZmZcIiwgXCIjY2Q4NGYxXCIsIFwiI0VENEM2N1wiLCBcIiNmZmZmZmZcIiwgXCIjYjcxNTQwXCIsIFwiIzMyZmY3ZVwiLCBcIiNmZjM4MzhcIl07XG5cbnZhciBQb2x5Z29uID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoUG9seWdvbiwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUG9seWdvbihwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFBvbHlnb24pO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUG9seWdvbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFBvbHlnb24pKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5yZW5kZXJQcm90b24gPSBfdGhpcy5yZW5kZXJQcm90b24uYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoUG9seWdvbiwgW3tcbiAgICBrZXk6IFwib25DYW52YXNJbml0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyZWF0ZVByb3RvbihjYW52YXMpO1xuICAgICAgdGhpcy5jcmVhdGVFbWl0dGVyKHtcbiAgICAgICAgY2FudmFzOiBjYW52YXMsXG4gICAgICAgIHg6IHdpZHRoIC8gMixcbiAgICAgICAgeTogaGVpZ2h0IC8gMixcbiAgICAgICAgbWFpbkVtaXR0ZXI6IHRydWUsXG4gICAgICAgIHpvbmU6IFwiYm91bmRcIlxuICAgICAgfSk7XG5cbiAgICAgIFJBRk1hbmFnZXIuYWRkKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgICAgIHRoaXMucHJvdG9uLmRlc3Ryb3koKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKCkge31cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJvdG9uKGNhbnZhcykge1xuICAgICAgdGhpcy5wcm90b24gPSBuZXcgUHJvdG9uKCk7XG4gICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLmNyZWF0ZVJlbmRlcmVyKGNhbnZhcyk7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRSZW5kZXJlcihyZW5kZXJlcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVJlbmRlcmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyKGNhbnZhcykge1xuICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DdXN0b21SZW5kZXJlcigpO1xuXG4gICAgICByZW5kZXJlci5vblByb3RvblVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVDcmVhdGVkID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgIHBhcnRpY2xlLmRhdGEuY291bnQgPSBQcm90b24uTWF0aFV0aWwucmFuZG9tQVRvQigzLCAxMCwgdHJ1ZSk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJlci5vblBhcnRpY2xlVXBkYXRlID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0Lmdsb2JhbEFscGhhID0gcGFydGljbGUuYWxwaGE7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gcGFydGljbGUuY29sb3I7XG5cbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUocGFydGljbGUucC54LCBwYXJ0aWNsZS5wLnkpO1xuICAgICAgICBjb250ZXh0LnJvdGF0ZShQcm90b24uTWF0aFV0aWwuZGVncmVlVHJhbnNmb3JtKHBhcnRpY2xlLnJvdGF0aW9uKSk7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKC1wYXJ0aWNsZS5wLngsIC1wYXJ0aWNsZS5wLnkpO1xuXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGRyYXdQb2x5Z29uKHBhcnRpY2xlLCBwYXJ0aWNsZS5kYXRhLmNvdW50KTtcblxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IDE7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZURlYWQgPSBmdW5jdGlvbiAocGFydGljbGUpIHt9O1xuXG4gICAgICB2YXIgZHJhd1BvbHlnb24gPSBmdW5jdGlvbiBkcmF3UG9seWdvbihwYXJ0aWNsZSwgY291bnQpIHtcbiAgICAgICAgaWYgKGNvdW50ID49IDcpIHtcbiAgICAgICAgICBjb250ZXh0LmFyYyhwYXJ0aWNsZS5wLngsIHBhcnRpY2xlLnAueSwgcGFydGljbGUucmFkaXVzLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHJhZGl1cyA9IHBhcnRpY2xlLnJhZGl1cztcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIHZhciB4ID0gcGFydGljbGUucC54ICsgcmFkaXVzICogTWF0aC5jb3MoTWF0aC5QSSAvIDE4MCAqIDM2MCAvIGNvdW50ICogaSk7XG4gICAgICAgICAgICB2YXIgeSA9IHBhcnRpY2xlLnAueSArIHJhZGl1cyAqIE1hdGguc2luKE1hdGguUEkgLyAxODAgKiAzNjAgLyBjb3VudCAqIGkpO1xuXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkgY29udGV4dC5tb3ZlVG8oeCwgeSk7ZWxzZSBjb250ZXh0LmxpbmVUbyh4LCB5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiByZW5kZXJlcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlRW1pdHRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFbWl0dGVyKF9yZWYpIHtcbiAgICAgIHZhciBtYWluRW1pdHRlciA9IF9yZWYubWFpbkVtaXR0ZXIsXG4gICAgICAgICAgY2FudmFzID0gX3JlZi5jYW52YXMsXG4gICAgICAgICAgeCA9IF9yZWYueCxcbiAgICAgICAgICB5ID0gX3JlZi55LFxuICAgICAgICAgIHJhZGl1cyA9IF9yZWYucmFkaXVzLFxuICAgICAgICAgIF9yZWYkY29sb3IgPSBfcmVmLmNvbG9yLFxuICAgICAgICAgIGNvbG9yID0gX3JlZiRjb2xvciA9PT0gdW5kZWZpbmVkID8gQ09MT1IgOiBfcmVmJGNvbG9yLFxuICAgICAgICAgIF9yZWYkem9uZSA9IF9yZWYuem9uZSxcbiAgICAgICAgICB6b25lID0gX3JlZiR6b25lID09PSB1bmRlZmluZWQgPyBcImRlYWRcIiA6IF9yZWYkem9uZSxcbiAgICAgICAgICBfcmVmJG9uY2UgPSBfcmVmLm9uY2UsXG4gICAgICAgICAgb25jZSA9IF9yZWYkb25jZSA9PT0gdW5kZWZpbmVkID8gXCJhbGxcIiA6IF9yZWYkb25jZSxcbiAgICAgICAgICBfcmVmJGFscGhhID0gX3JlZi5hbHBoYSxcbiAgICAgICAgICBhbHBoYSA9IF9yZWYkYWxwaGEgPT09IHVuZGVmaW5lZCA/IDAuODUgOiBfcmVmJGFscGhhLFxuICAgICAgICAgIF9yZWYkZ3Jhdml0eSA9IF9yZWYuZ3Jhdml0eSxcbiAgICAgICAgICBncmF2aXR5ID0gX3JlZiRncmF2aXR5ID09PSB1bmRlZmluZWQgPyAzLjUgOiBfcmVmJGdyYXZpdHk7XG5cbiAgICAgIHZhciBlbWl0dGVyID0gdGhpcy5wcm90b24ucG9vbC5nZXQoUHJvdG9uLkVtaXR0ZXIpO1xuXG4gICAgICBpZiAoIWVtaXR0ZXIuY29tcGxldGVkKSB7XG4gICAgICAgIGVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZSh0aGlzLnByb3BzLm51bSA/IG5ldyBQcm90b24uU3Bhbih0aGlzLnByb3BzLm51bSkgOiBuZXcgUHJvdG9uLlNwYW4oNCwgOSksIG5ldyBQcm90b24uU3BhbigxLjYsIDIuMikpO1xuXG4gICAgICAgIHZhciByYWRpdXNJbml0ID0gbWFpbkVtaXR0ZXIgPyBuZXcgUHJvdG9uLlJhZGl1cygxMCwgMTEwKSA6IG5ldyBQcm90b24uUmFkaXVzKDMsIHJhZGl1cyk7XG4gICAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpO1xuICAgICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUocmFkaXVzSW5pdCk7XG4gICAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLkxpZmUoMywgNikpO1xuICAgICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WZWxvY2l0eShuZXcgUHJvdG9uLlNwYW4oNCwgNiksIG5ldyBQcm90b24uU3BhbigtOTAsIDkwKSwgXCJwb2xhclwiKSk7XG5cbiAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5BbHBoYShhbHBoYSwgMC4yKSk7XG4gICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sb3IoY29sb3IpKTtcbiAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5TY2FsZSgxLCAwLjMpKTtcbiAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Sb3RhdGUoKSk7XG4gICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uR3Jhdml0eShncmF2aXR5KSk7XG5cbiAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIodGhpcy5jdXN0b21EZWFkQmVoYXZpb3VyKGNhbnZhcykpO1xuICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNyb3NzWm9uZShuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCksIHpvbmUpKTtcbiAgICAgIH1cblxuICAgICAgZW1pdHRlci5wLnggPSB4O1xuICAgICAgZW1pdHRlci5wLnkgPSB5O1xuICAgICAgaWYgKG9uY2UgPT09IFwib25jZVwiKSBlbWl0dGVyLmVtaXQoXCJvbmNlXCIpO2Vsc2UgZW1pdHRlci5lbWl0KCk7XG5cbiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG4gICAgICAvL3RoaXMuZXhwaXJlRW1pdHRlcihlbWl0dGVyKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZXhwaXJlRW1pdHRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBleHBpcmVFbWl0dGVyKGVtaXR0ZXIpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZW1pdHRlci5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBfdGhpczIucHJvdG9uLnBvb2wuZXhwaXJlKGVtaXR0ZXIpO1xuICAgICAgICBfdGhpczIucHJvdG9uLnJlbW92ZUVtaXR0ZXIoZW1pdHRlcik7XG4gICAgICB9LCA1MDApO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjdXN0b21EZWFkQmVoYXZpb3VyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGN1c3RvbURlYWRCZWhhdmlvdXIoY2FudmFzKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShwYXJ0aWNsZSkge1xuICAgICAgICAgIHBhcnRpY2xlLmRhdGEgPSBwYXJ0aWNsZS5kYXRhIHx8IHt9O1xuICAgICAgICAgIHBhcnRpY2xlLmRhdGEub2xkUmFkaXVzID0gcGFydGljbGUucmFkaXVzO1xuICAgICAgICAgIHBhcnRpY2xlLmRhdGEuZW1pdHRlckNvdW50ID0gMDtcbiAgICAgICAgfSxcbiAgICAgICAgYXBwbHlCZWhhdmlvdXI6IGZ1bmN0aW9uIGFwcGx5QmVoYXZpb3VyKHBhcnRpY2xlKSB7XG4gICAgICAgICAgaWYgKHBhcnRpY2xlLnJhZGl1cyA8IDUpIHJldHVybjtcbiAgICAgICAgICBpZiAocGFydGljbGUuZGF0YS5lbWl0dGVyQ291bnQgPj0gMikgcmV0dXJuO1xuXG4gICAgICAgICAgaWYgKHBhcnRpY2xlLnJhZGl1cyA8PSAxIC8gMyAqIHBhcnRpY2xlLmRhdGEub2xkUmFkaXVzKSB7XG4gICAgICAgICAgICBwYXJ0aWNsZS5kYXRhLmVtaXR0ZXJDb3VudCsrO1xuICAgICAgICAgICAgX3RoaXMzLmNyZWF0ZUVtaXR0ZXIoe1xuICAgICAgICAgICAgICBjYW52YXM6IGNhbnZhcyxcbiAgICAgICAgICAgICAgeDogcGFydGljbGUucC54LFxuICAgICAgICAgICAgICB5OiBwYXJ0aWNsZS5wLnksXG4gICAgICAgICAgICAgIHJhZGl1czogcGFydGljbGUucmFkaXVzICogKDEgLyAyKSxcbiAgICAgICAgICAgICAgYWxwaGE6IDAuNSxcbiAgICAgICAgICAgICAgZ3Jhdml0eTogNSxcbiAgICAgICAgICAgICAgY29sb3I6IHBhcnRpY2xlLmNvbG9yLFxuICAgICAgICAgICAgICBvbmNlOiBcIm9uY2VcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUHJvdG9uKCkge1xuICAgICAgdGhpcy5wcm90b24gJiYgdGhpcy5wcm90b24udXBkYXRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXMsIHsgYmc6IHRoaXMucHJvcHMuYmcsXG4gICAgICAgIGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjogXCJkYXJrZXJcIixcbiAgICAgICAgb25DYW52YXNJbml0ZWQ6IHRoaXMub25DYW52YXNJbml0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgb25SZXNpemU6IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBQb2x5Z29uO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG52YXIgRm91bnRhaW4gPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBpbmhlcml0cyhGb3VudGFpbiwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRm91bnRhaW4ocHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBGb3VudGFpbik7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGb3VudGFpbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZvdW50YWluKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuY29sb3JzID0gW1wiIzUyOUI4OFwiLCBcIiNDREQxODBcIiwgXCIjRkZGQTMyXCIsIFwiI0ZCNjI1NVwiLCBcIiNGQjRBNTNcIiwgXCIjRkY0RTUwXCIsIFwiI0Y5RDQyM1wiXTtcbiAgICBfdGhpcy5yZW5kZXJQcm90b24gPSBfdGhpcy5yZW5kZXJQcm90b24uYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoRm91bnRhaW4sIFt7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgUkFGTWFuYWdlci5yZW1vdmUodGhpcy5yZW5kZXJQcm90b24pO1xuICAgICAgICB0aGlzLnByb3Rvbi5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNhbnZhc0luaXRlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKCkge31cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5wcm90b24gPSBuZXcgUHJvdG9uKCk7XG4gICAgICB2YXIgZW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpO1xuICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKHRoaXMucHJvcHMubnVtID8gbmV3IFByb3Rvbi5TcGFuKHRoaXMucHJvcHMubnVtKSA6IG5ldyBQcm90b24uU3Bhbig0LCA4KSwgbmV3IFByb3Rvbi5TcGFuKDAuMSwgMC4yNSkpO1xuXG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKDEpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlJhZGl1cygyMCwgMjAwKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5MaWZlKDIsIDQpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlZlbG9jaXR5KG5ldyBQcm90b24uU3Bhbig0LCA3KSwgbmV3IFByb3Rvbi5TcGFuKDAsIDM2MCksIFwicG9sYXJcIikpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUG9zaXRpb24obmV3IFByb3Rvbi5DaXJjbGVab25lKHdpZHRoIC8gMiwgaGVpZ2h0IC8gMiwgMTAwKSkpO1xuXG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkFscGhhKDEsIDApKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uU2NhbGUoMC4yLCAxKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cih0aGlzLmNyZWF0ZUN1c3RvbUJlaGF2aW91cigpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sb3IodGhpcy5jb2xvcnMsIFwicmFuZG9tXCIpKTtcbiAgICAgIGVtaXR0ZXIuZW1pdCgpO1xuICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihlbWl0dGVyKTtcblxuICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DYW52YXNSZW5kZXJlcihjYW52YXMpO1xuICAgICAgdGhpcy5wcm90b24uYWRkUmVuZGVyZXIocmVuZGVyZXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVDdXN0b21CZWhhdmlvdXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQ3VzdG9tQmVoYXZpb3VyKCkge1xuICAgICAgdmFyIGYgPSAxMCAqIDEwMDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUocGFydGljbGUpIHtcbiAgICAgICAgICBwYXJ0aWNsZS5mID0gbmV3IFByb3Rvbi5WZWN0b3IyRCgwLCAwKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXBwbHlCZWhhdmlvdXI6IGZ1bmN0aW9uIGFwcGx5QmVoYXZpb3VyKHBhcnRpY2xlKSB7XG4gICAgICAgICAgdmFyIGxlbmd0aCA9IHBhcnRpY2xlLnYubGVuZ3RoKCkgLyAxMDAwO1xuICAgICAgICAgIHZhciBncmFkaWVudCA9IHBhcnRpY2xlLnYuZ2V0R3JhZGllbnQoKTtcbiAgICAgICAgICBncmFkaWVudCArPSAzLjE0IC8gMjtcblxuICAgICAgICAgIHBhcnRpY2xlLmYueCA9IGYgKiBsZW5ndGggKiBNYXRoLmNvcyhncmFkaWVudCk7XG4gICAgICAgICAgcGFydGljbGUuZi55ID0gZiAqIGxlbmd0aCAqIE1hdGguc2luKGdyYWRpZW50KTtcbiAgICAgICAgICBwYXJ0aWNsZS5hLmFkZChwYXJ0aWNsZS5mKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclByb3RvbigpIHtcbiAgICAgIHRoaXMucHJvdG9uICYmIHRoaXMucHJvdG9uLnVwZGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7IGJnOiB0aGlzLnByb3BzLmJnLFxuICAgICAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb246IFwieG9yXCIsXG4gICAgICAgIG9uQ2FudmFzSW5pdGVkOiB0aGlzLm9uQ2FudmFzSW5pdGVkLmJpbmQodGhpcyksXG4gICAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gRm91bnRhaW47XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBQYXJ0aWNsZXNCZyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKFBhcnRpY2xlc0JnLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBQYXJ0aWNsZXNCZyhwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFBhcnRpY2xlc0JnKTtcbiAgICByZXR1cm4gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUGFydGljbGVzQmcuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQYXJ0aWNsZXNCZykpLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKFBhcnRpY2xlc0JnLCBbe1xuICAgIGtleTogXCJnZXRSYW5kb21cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmFuZG9tKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgbnVtID0gX3Byb3BzLm51bSxcbiAgICAgICAgICBiZyA9IF9wcm9wcy5iZyxcbiAgICAgICAgICBjb2xvciA9IF9wcm9wcy5jb2xvcjtcblxuICAgICAgLy8gQ29kZSBzb3VyY2UgZnJvbSBoZXJlLCB0aGFua3MgYXV0aG9yXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZHJhd2NhbGwvUHJvdG9uL2Jsb2IvZ2gtcGFnZXMvc291cmNlL3NyYy91dGlscy9SYW5kLmpzXG5cbiAgICAgIGlmICghdGhpcy5yYW5kb20pIHtcbiAgICAgICAgdGhpcy5yYW5kb20gPSBuZXcgUmFuZCgpO1xuICAgICAgICB0aGlzLnJhbmRvbS5zZXQoMC4yNSwgUmVhY3QuY3JlYXRlRWxlbWVudChDb2xvciwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSkpO1xuICAgICAgICB0aGlzLnJhbmRvbS5zZXQoMC4yLCBSZWFjdC5jcmVhdGVFbGVtZW50KEJhbGwsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pKTtcbiAgICAgICAgdGhpcy5yYW5kb20uc2V0KDAuMiwgUmVhY3QuY3JlYXRlRWxlbWVudChMaW5lcywgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSkpO1xuICAgICAgICB0aGlzLnJhbmRvbS5zZXQoMC4xNiwgUmVhY3QuY3JlYXRlRWxlbWVudChUaGljaywgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSkpO1xuICAgICAgICB0aGlzLnJhbmRvbS5zZXQoMC4xOCwgUmVhY3QuY3JlYXRlRWxlbWVudChDaXJjbGUsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pKTtcbiAgICAgICAgdGhpcy5yYW5kb20uc2V0KDAuMDQsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29id2ViLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KSk7XG4gICAgICAgIHRoaXMucmFuZG9tLnNldCgwLjEsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUG9seWdvbiwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSkpO1xuICAgICAgICB0aGlzLnJhbmRvbS5zZXQoMC4wOCwgUmVhY3QuY3JlYXRlRWxlbWVudChTcXVhcmUsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pKTtcbiAgICAgICAgdGhpcy5yYW5kb20uc2V0KDAuMTgsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFkcG9sZSwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSkpO1xuICAgICAgICB0aGlzLnJhbmRvbS5zZXQoMC4xNSwgUmVhY3QuY3JlYXRlRWxlbWVudChGb3VudGFpbiwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucmFuZG9tLmdldFJlc3VsdCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRCZ1BhcnRpY2xlc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRCZ1BhcnRpY2xlcygpIHtcbiAgICAgIHZhciBfcHJvcHMyID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICB0eXBlID0gX3Byb3BzMi50eXBlLFxuICAgICAgICAgIG51bSA9IF9wcm9wczIubnVtLFxuICAgICAgICAgIGJnID0gX3Byb3BzMi5iZyxcbiAgICAgICAgICBjb2xvciA9IF9wcm9wczIuY29sb3IsXG4gICAgICAgICAgY29uZmlnID0gX3Byb3BzMi5jb25maWc7XG5cblxuICAgICAgdmFyIHBhcnRpY2xlcyA9IHZvaWQgMDtcbiAgICAgIHN3aXRjaCAoU3RyaW5nKHR5cGUpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgY2FzZSBcImNvbG9yXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChDb2xvciwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJiYWxsXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChCYWxsLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImxpbmVzXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChMaW5lcywgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ0aGlja1wiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGhpY2ssIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiY2lyY2xlXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChDaXJjbGUsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiY29id2ViXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChDb2J3ZWIsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicG9seWdvblwiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoUG9seWdvbiwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJzcXVhcmVcIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFNxdWFyZSwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ0YWRwb2xlXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChUYWRwb2xlLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImZvdW50YWluXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChGb3VudGFpbiwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJjdXN0b21cIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KENvbG9yJDEsIHsgYmc6IGJnLCBjb25maWc6IGNvbmZpZyB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInJhbmRvbVwiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IHRoaXMuZ2V0UmFuZG9tKG51bSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KENvbG9yLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhcnRpY2xlcztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBwYXJ0aWNsZXMgPSB0aGlzLmdldEJnUGFydGljbGVzKCk7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgUmVhY3QuRnJhZ21lbnQsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHBhcnRpY2xlc1xuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFBhcnRpY2xlc0JnO1xufShDb21wb25lbnQpO1xuXG5leHBvcnQgZGVmYXVsdCBQYXJ0aWNsZXNCZztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzLmpzLm1hcFxuIiwiLyohXG4qIFByb3RvbiB2NC4yLjFcbiogaHR0cHM6Ly9naXRodWIuY29tL2RyYXdjYWxsL1Byb3RvblxuKlxuKiBDb3B5cmlnaHQgMjAxMy0yMDIwLCBBLUpJRVxuKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuKlxuKi9cbiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGUpOnQuUHJvdG9uPWUoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBlPTMuMTQxNTkyNixzPXtQSTplLFBJeDI6MiplLFBJXzI6ZS8yLFBJXzE4MDplLzE4MCxOMTgwX1BJOjE4MC9lLEluZmluaXR5Oi05OTksaXNJbmZpbml0eTpmdW5jdGlvbih0KXtyZXR1cm4gdD09PXRoaXMuSW5maW5pdHl8fHQ9PT0xLzB9LHJhbmRvbUFUb0I6ZnVuY3Rpb24odCxlLGkpe3JldHVybiAyPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWkmJmk/TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihlLXQpKSt0OnQrTWF0aC5yYW5kb20oKSooZS10KX0scmFuZG9tRmxvYXRpbmc6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLnJhbmRvbUFUb0IodC1lLHQrZSxpKX0scmFuZG9tQ29sb3I6ZnVuY3Rpb24oKXtyZXR1cm5cIiNcIisoXCIwMDAwMFwiKygxNjc3NzIxNipNYXRoLnJhbmRvbSgpPDwwKS50b1N0cmluZygxNikpLnNsaWNlKC02KX0scmFuZG9tWm9uZTpmdW5jdGlvbigpe30sZmxvb3I6ZnVuY3Rpb24odCxlKXtlPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZT9lOjQsZT1NYXRoLnBvdygxMCxlKTtyZXR1cm4gTWF0aC5mbG9vcih0KmUpL2V9LGRlZ3JlZVRyYW5zZm9ybTpmdW5jdGlvbih0KXtyZXR1cm4gdCplLzE4MH0sdG9Db2xvcjE2OmZ1bmN0aW9uKHQpe3JldHVyblwiI1wiK3QudG9TdHJpbmcoMTYpfX0saT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxvPWZ1bmN0aW9uKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0sdD1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGUmJmEodC5wcm90b3R5cGUsZSksaSYmYSh0LGkpLHR9O2Z1bmN0aW9uIGEodCxlKXtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIGE9ZVtpXTthLmVudW1lcmFibGU9YS5lbnVtZXJhYmxlfHwhMSxhLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBhJiYoYS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsYS5rZXksYSl9fWZ1bmN0aW9uIG4odCxlLGkpe251bGw9PT10JiYodD1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxlKTtpZih2b2lkIDAhPT1hKXtpZihcInZhbHVlXCJpbiBhKXJldHVybiBhLnZhbHVlO2E9YS5nZXQ7cmV0dXJuIHZvaWQgMCE9PWE/YS5jYWxsKGkpOnZvaWQgMH1pZihudWxsIT09KHQ9T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpKSlyZXR1cm4gbih0LGUsaSl9dmFyIHI9ZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX0saD1mdW5jdGlvbih0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfSxsPSh0KHUsW3trZXk6XCJnZXRWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT10JiZ0O3JldHVybiB0aGlzLmlzQXJyYXk/UC5nZXRSYW5kRnJvbUFycmF5KHRoaXMuYSk6dGhpcy5jZW50ZXI/cy5yYW5kb21GbG9hdGluZyh0aGlzLmEsdGhpcy5iLHQpOnMucmFuZG9tQVRvQih0aGlzLmEsdGhpcy5iLHQpfX1dLFt7a2V5Olwic2V0U3BhblZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0IGluc3RhbmNlb2YgdT90OnZvaWQgMD09PWU/bmV3IHUodCk6dm9pZCAwPT09aT9uZXcgdSh0LGUpOm5ldyB1KHQsZSxpKX19LHtrZXk6XCJnZXRTcGFuVmFsdWVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHU/dC5nZXRWYWx1ZSgpOnR9fV0pLHUpO2Z1bmN0aW9uIHUodCxlLGkpe28odGhpcyx1KSxQLmlzQXJyYXkodCk/KHRoaXMuaXNBcnJheT0hMCx0aGlzLmE9dCk6KHRoaXMuaXNBcnJheT0hMSx0aGlzLmE9UC5pbml0VmFsdWUodCwxKSx0aGlzLmI9UC5pbml0VmFsdWUoZSx0aGlzLmEpLHRoaXMuY2VudGVyPVAuaW5pdFZhbHVlKGksITEpKX12YXIgYz1mdW5jdGlvbih0KXstLXQ7Zm9yKHZhciBlPTE7ZTwzMjtlPDw9MSl0fD10Pj5lO3JldHVybiB0KzF9LGQ9ZnVuY3Rpb24odCxlKXtyZXR1cm5bMSwwLDAsMCwxLDAsdCxlLDFdfSx5PWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguY29zKHQpLHQ9TWF0aC5zaW4odCk7cmV0dXJuW2UsLXQsMCx0LGUsMCwwLDAsMV19LHA9ZnVuY3Rpb24odCxlKXtyZXR1cm5bdCwwLDAsMCxlLDAsMCwwLDFdfSxmPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dFswXSxhPXRbMV0scj10WzJdLG49dFszXSxzPXRbNF0sbz10WzVdLGg9dFs2XSxsPXRbN10sdT10WzhdLGM9ZVswXSxkPWVbMV0seT1lWzJdLHA9ZVszXSxmPWVbNF0sdj1lWzVdLGc9ZVs2XSx0PWVbN10sZT1lWzhdO3JldHVybltpKmMrYSpwK3IqZyxpKmQrYSpmK3IqdCxpKnkrYSp2K3IqZSxuKmMrcypwK28qZyxuKmQrcypmK28qdCxuKnkrcyp2K28qZSxoKmMrbCpwK3UqZyxoKmQrbCpmK3UqdCxoKnkrbCp2K3UqZV19LHY9e2NyZWF0ZUNhbnZhczpmdW5jdGlvbih0LGUsaSxhKXt2YXIgcj0zPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWE/YTpcImFic29sdXRlXCIsYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3JldHVybiBhLmlkPXQsYS53aWR0aD1lLGEuaGVpZ2h0PWksYS5zdHlsZS5vcGFjaXR5PTAsYS5zdHlsZS5wb3NpdGlvbj1yLHRoaXMudHJhbnNmb3JtKGEsLTUwMCwtNTAwLDAsMCksYX0sY3JlYXRlRGl2OmZ1bmN0aW9uKHQsZSxpKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBhLmlkPXQsYS5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy5yZXNpemUoYSxlLGkpLGF9LHJlc2l6ZTpmdW5jdGlvbih0LGUsaSl7dC5zdHlsZS53aWR0aD1lK1wicHhcIix0LnN0eWxlLmhlaWdodD1pK1wicHhcIix0LnN0eWxlLm1hcmdpbkxlZnQ9LWUvMitcInB4XCIsdC5zdHlsZS5tYXJnaW5Ub3A9LWkvMitcInB4XCJ9LHRyYW5zZm9ybTpmdW5jdGlvbih0LGUsaSxhLHIpe3Quc3R5bGUud2lsbENoYW5nZT1cInRyYW5zZm9ybVwiO3ZhciBuPVwidHJhbnNsYXRlKFwiK2UrXCJweCwgXCIraStcInB4KSBzY2FsZShcIithK1wiKSByb3RhdGUoXCIrcitcImRlZylcIjt0aGlzLmNzczModCxcInRyYW5zZm9ybVwiLG4pfSx0cmFuc2Zvcm0zZDpmdW5jdGlvbih0LGUsaSxhLHIpe3Quc3R5bGUud2lsbENoYW5nZT1cInRyYW5zZm9ybVwiO3I9XCJ0cmFuc2xhdGUzZChcIitlK1wicHgsIFwiK2krXCJweCwgMCkgc2NhbGUoXCIrYStcIikgcm90YXRlKFwiK3IrXCJkZWcpXCI7dGhpcy5jc3MzKHQsXCJiYWNrZmFjZVZpc2liaWxpdHlcIixcImhpZGRlblwiKSx0aGlzLmNzczModCxcInRyYW5zZm9ybVwiLHIpfSxjc3MzOmZ1bmN0aW9uKHQsZSxpKXt2YXIgYT1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyKDEpO3Quc3R5bGVbXCJXZWJraXRcIithXT1pLHQuc3R5bGVbXCJNb3pcIithXT1pLHQuc3R5bGVbXCJPXCIrYV09aSx0LnN0eWxlW1wibXNcIithXT1pLHQuc3R5bGVbXCJcIitlXT1pfX0sZz17fSxtPXt9LGI9MCxfPWZ1bmN0aW9uKHQsZSxpKXt0LmRyYXdJbWFnZShlLGkueCxpLnkpO2U9dC5nZXRJbWFnZURhdGEoaS54LGkueSxpLndpZHRoLGkuaGVpZ2h0KTtyZXR1cm4gdC5jbGVhclJlY3QoaS54LGkueSxpLndpZHRoLGkuaGVpZ2h0KSxlfSx4PWZ1bmN0aW9uKHQsZSxpKXt2YXIgYT1cInN0cmluZ1wiPT10eXBlb2YgdD90OnQuc3JjO2dbYV0/ZShnW2FdLGkpOigodD1uZXcgSW1hZ2UpLm9ubG9hZD1mdW5jdGlvbih0KXtnW2FdPXQudGFyZ2V0LGUoZ1thXSxpKX0sdC5zcmM9YSl9LGs9ZnVuY3Rpb24odCxlLGkpe3ZhciBhLHIsbj10LnNyYztyZXR1cm4gbVtuXXx8KGE9Yyh0LndpZHRoKSxyPWModC5oZWlnaHQpLChyPXYuY3JlYXRlQ2FudmFzKFwicHJvdG9uX2NhbnZhc19jYWNoZV9cIisgKytiLGEscikpLmdldENvbnRleHQoXCIyZFwiKS5kcmF3SW1hZ2UodCwwLDAsdC53aWR0aCx0LmhlaWdodCksbVtuXT1yKSxlJiZlKG1bbl0saSksbVtuXX0sUD17aW5pdFZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9bnVsbCE9dD90OmV9LGlzQXJyYXk6ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSxlbXB0eUFycmF5OmZ1bmN0aW9uKHQpe3QmJih0Lmxlbmd0aD0wKX0sdG9BcnJheTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc0FycmF5KHQpP3Q6W3RdfSxnZXRSYW5kRnJvbUFycmF5OmZ1bmN0aW9uKHQpe3JldHVybiB0P3RbTWF0aC5mbG9vcih0Lmxlbmd0aCpNYXRoLnJhbmRvbSgpKV06bnVsbH0sZW1wdHlPYmplY3Q6ZnVuY3Rpb24odCxlKXt2YXIgaSxhPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZT9lOm51bGw7Zm9yKGkgaW4gdClhJiYtMTxhLmluZGV4T2YoaSl8fGRlbGV0ZSB0W2ldfSxjbGFzc0FwcGx5OmZ1bmN0aW9uKHQsZSl7ZT0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWU/ZTpudWxsO3JldHVybiBuZXcoZT90LmJpbmQuYXBwbHkodCxbbnVsbF0uY29uY2F0KGUpKTp0KX0sc2V0VmVjdG9yVmFsOmZ1bmN0aW9uKHQsZSl7ZT0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWU/ZTpudWxsO2UmJih0aGlzLmhhc1Byb3AoZSxcInhcIikmJih0LnAueD1lLngpLHRoaXMuaGFzUHJvcChlLFwieVwiKSYmKHQucC55PWUueSksdGhpcy5oYXNQcm9wKGUsXCJ2eFwiKSYmKHQudi54PWUudngpLHRoaXMuaGFzUHJvcChlLFwidnlcIikmJih0LnYueT1lLnZ5KSx0aGlzLmhhc1Byb3AoZSxcImF4XCIpJiYodC5hLng9ZS5heCksdGhpcy5oYXNQcm9wKGUsXCJheVwiKSYmKHQuYS55PWUuYXkpLHRoaXMuaGFzUHJvcChlLFwicFwiKSYmdC5wLmNvcHkoZS5wKSx0aGlzLmhhc1Byb3AoZSxcInZcIikmJnQudi5jb3B5KGUudiksdGhpcy5oYXNQcm9wKGUsXCJhXCIpJiZ0LmEuY29weShlLmEpLHRoaXMuaGFzUHJvcChlLFwicG9zaXRpb25cIikmJnQucC5jb3B5KGUucG9zaXRpb24pLHRoaXMuaGFzUHJvcChlLFwidmVsb2NpdHlcIikmJnQudi5jb3B5KGUudmVsb2NpdHkpLHRoaXMuaGFzUHJvcChlLFwiYWNjZWxlcmF0ZVwiKSYmdC5hLmNvcHkoZS5hY2NlbGVyYXRlKSl9LGhhc1Byb3A6ZnVuY3Rpb24odCxlKXtyZXR1cm4hIXQmJnZvaWQgMCE9PXRbZV19LHNldFByb3A6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSl0Lmhhc093blByb3BlcnR5KGkpJiYodFtpXT1sLmdldFNwYW5WYWx1ZShlW2ldKSk7cmV0dXJuIHR9LGdldEltYWdlRGF0YTpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIF8odCxlLGkpfSxkZXN0cm95QWxsOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZT9lOm51bGwsYT10Lmxlbmd0aDthLS07KXt0cnl7dFthXS5kZXN0cm95KGkpfWNhdGNoKHQpe31kZWxldGUgdFthXX10Lmxlbmd0aD0wfSxhc3NpZ246ZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuYXNzaWduKXJldHVybiBPYmplY3QuYXNzaWduKHQsZSk7Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJih0W2ldPWVbaV0pO3JldHVybiB0fX0sRT17fSxBPXtfaW5kZXg6MCxfY2FjaGU6e30saWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PUVbdF0mJm51bGwhPT1FW3RdfHwoRVt0XT0wKSx0K1wiX1wiK0VbdF0rK30sZ2V0SWQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRJZEZyb21DYWNoZSh0KTtyZXR1cm4gZXx8KGU9XCJQVUlEX1wiK3RoaXMuX2luZGV4KyssdGhpcy5fY2FjaGVbZV09dCxlKX0sZ2V0SWRGcm9tQ2FjaGU6ZnVuY3Rpb24odCl7dmFyIGUsaT12b2lkIDA7Zm9yKGkgaW4gdGhpcy5fY2FjaGUpe2lmKChlPXRoaXMuX2NhY2hlW2ldKT09PXQpcmV0dXJuIGk7aWYodGhpcy5pc0JvZHkoZSx0KSYmZS5zcmM9PT10LnNyYylyZXR1cm4gaX1yZXR1cm4gbnVsbH0saXNCb2R5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJvYmplY3RcIj09PSh2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6aSh0KSkmJlwib2JqZWN0XCI9PT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOmkoZSkpJiZ0LmlzSW5uZXImJmUuaXNJbm5lcn0sZ2V0VGFyZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jYWNoZVt0XX19LFQ9KHQoUixbe2tleTpcImdldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgYT12b2lkIDA7cmV0dXJuIGk9aXx8dC5fX3B1aWR8fEEuZ2V0SWQodCksKGE9dGhpcy5jYWNoZVtpXSYmMDx0aGlzLmNhY2hlW2ldLmxlbmd0aD90aGlzLmNhY2hlW2ldLnBvcCgpOnRoaXMuY3JlYXRlT3JDbG9uZSh0LGUpKS5fX3B1aWQ9dC5fX3B1aWR8fGksYX19LHtrZXk6XCJleHBpcmVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRDYWNoZSh0Ll9fcHVpZCkucHVzaCh0KX19LHtrZXk6XCJjcmVhdGVPckNsb25lXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50b3RhbCsrLHRoaXMuY3JlYXRlP3RoaXMuY3JlYXRlKHQsZSk6XCJmdW5jdGlvblwiPT10eXBlb2YgdD9QLmNsYXNzQXBwbHkodCxlKTp0LmNsb25lKCl9fSx7a2V5OlwiZ2V0Q291bnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0LGU9MDtmb3IodCBpbiB0aGlzLmNhY2hlKWUrPXRoaXMuY2FjaGVbdF0ubGVuZ3RoO3JldHVybiBlKyt9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuY2FjaGUpdGhpcy5jYWNoZVt0XS5sZW5ndGg9MCxkZWxldGUgdGhpcy5jYWNoZVt0XX19LHtrZXk6XCJnZXRDYWNoZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT10P3Q6XCJkZWZhdWx0XCI7cmV0dXJuIHRoaXMuY2FjaGVbdF18fCh0aGlzLmNhY2hlW3RdPVtdKSx0aGlzLmNhY2hlW3RdfX1dKSxSKTtmdW5jdGlvbiBSKHQpe28odGhpcyxSKSx0aGlzLnRvdGFsPTAsdGhpcy5jYWNoZT17fX12YXIgTz0odCh3LFt7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLmFkZCh0LGUpO3ZhciBpPXRoaXMuZ2V0RW1pdHRlcigpLHQ9dGhpcy5nZXRSZW5kZXJlcigpLGU9XCJcIjtzd2l0Y2godGhpcy50eXBlKXtjYXNlIDI6ZSs9XCJlbWl0dGVyOlwiK3RoaXMucHJvdG9uLmVtaXR0ZXJzLmxlbmd0aCtcIjxicj5cIixpJiYoZSs9XCJlbSBzcGVlZDpcIitpLmVtaXRTcGVlZCtcIjxicj5cIiksaSYmKGUrPVwicG9zOlwiK3RoaXMuZ2V0RW1pdHRlclBvcyhpKSk7YnJlYWs7Y2FzZSAzOmkmJihlKz1cImluaXRpYWxpemVzOlwiK2kuaW5pdGlhbGl6ZXMubGVuZ3RoK1wiPGJyPlwiKSxpJiYoZSs9JzxzcGFuIHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7XCI+Jyt0aGlzLmNvbmNhdEFycihpLmluaXRpYWxpemVzKStcIjwvc3Bhbj48YnI+XCIpLGkmJihlKz1cImJlaGF2aW91cnM6XCIraS5iZWhhdmlvdXJzLmxlbmd0aCtcIjxicj5cIiksaSYmKGUrPSc8c3BhbiBzdHlsZT1cImRpc3BsYXk6aW5saW5lLWJsb2NrO1wiPicrdGhpcy5jb25jYXRBcnIoaS5iZWhhdmlvdXJzKStcIjwvc3Bhbj48YnI+XCIpO2JyZWFrO2Nhc2UgNDp0JiYoZSs9dC5uYW1lK1wiPGJyPlwiKSx0JiYoZSs9XCJib2R5OlwiK3RoaXMuZ2V0Q3JlYXRlZE51bWJlcih0KStcIjxicj5cIik7YnJlYWs7ZGVmYXVsdDplKz1cInBhcnRpY2xlczpcIit0aGlzLnByb3Rvbi5nZXRDb3VudCgpK1wiPGJyPlwiLGUrPVwicG9vbDpcIit0aGlzLnByb3Rvbi5wb29sLmdldENvdW50KCkrXCI8YnI+XCIsZSs9XCJ0b3RhbDpcIit0aGlzLnByb3Rvbi5wb29sLnRvdGFsfXRoaXMuY29udGFpbmVyLmlubmVySFRNTD1lfX0se2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcztpZighdGhpcy5jb250YWluZXIpe3RoaXMudHlwZT0xLHRoaXMuY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5jb250YWluZXIuc3R5bGUuY3NzVGV4dD1bXCJwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MHB4O2xlZnQ6MDtjdXJzb3I6cG9pbnRlcjtcIixcIm9wYWNpdHk6MC45O3otaW5kZXg6MTAwMDA7cGFkZGluZzoxMHB4O2ZvbnQtc2l6ZToxMnB4O2ZvbnQtZmFtaWx5OkhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO1wiLFwid2lkdGg6MTIwcHg7aGVpZ2h0OjUwcHg7YmFja2dyb3VuZC1jb2xvcjojMDAyO2NvbG9yOiMwZmY7XCJdLmpvaW4oXCJcIiksdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24odCl7aS50eXBlKyssNDxpLnR5cGUmJihpLnR5cGU9MSl9LCExKTt2YXIgYT12b2lkIDAscj12b2lkIDA7c3dpdGNoKHQpe2Nhc2UgMjphPVwiIzIwMVwiLHI9XCIjZjA4XCI7YnJlYWs7Y2FzZSAzOmE9XCIjMDIwXCIscj1cIiMwZjBcIjticmVhaztkZWZhdWx0OmE9XCIjMDAyXCIscj1cIiMwZmZcIn10aGlzLmNvbnRhaW5lci5zdHlsZVtcImJhY2tncm91bmQtY29sb3JcIl09YSx0aGlzLmNvbnRhaW5lci5zdHlsZS5jb2xvcj1yfXRoaXMuY29udGFpbmVyLnBhcmVudE5vZGV8fChlPWV8fHRoaXMuYm9keXx8ZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXIpfX0se2tleTpcImdldEVtaXR0ZXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3Rvbi5lbWl0dGVyc1t0aGlzLmVtaXR0ZXJJbmRleF19fSx7a2V5OlwiZ2V0UmVuZGVyZXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3Rvbi5yZW5kZXJlcnNbdGhpcy5yZW5kZXJlckluZGV4XX19LHtrZXk6XCJjb25jYXRBcnJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1cIlwiO2lmKCF0fHwhdC5sZW5ndGgpcmV0dXJuIGU7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspZSs9KHRbaV0ubmFtZXx8XCJcIikuc3Vic3RyKDAsMSkrXCIuXCI7cmV0dXJuIGV9fSx7a2V5OlwiZ2V0Q3JlYXRlZE51bWJlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0LnBvb2wudG90YWx8fHQuY3Bvb2wmJnQuY3Bvb2wudG90YWx8fDB9fSx7a2V5OlwiZ2V0RW1pdHRlclBvc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnJvdW5kKHQucC54KStcIixcIitNYXRoLnJvdW5kKHQucC55KX19XSksdyk7ZnVuY3Rpb24gdyh0KXtvKHRoaXMsdyksdGhpcy5wcm90b249dCx0aGlzLmNvbnRhaW5lcj1udWxsLHRoaXMudHlwZT0xLHRoaXMuZW1pdHRlckluZGV4PTAsdGhpcy5yZW5kZXJlckluZGV4PTB9dmFyIEM9KHQoUyxbe2tleTpcImFkZEV2ZW50TGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9saXN0ZW5lcnM/dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHQsZSk6dGhpcy5fbGlzdGVuZXJzPXt9LHRoaXMuX2xpc3RlbmVyc1t0XXx8KHRoaXMuX2xpc3RlbmVyc1t0XT1bXSksdGhpcy5fbGlzdGVuZXJzW3RdLnB1c2goZSksZX19LHtrZXk6XCJyZW1vdmVFdmVudExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9saXN0ZW5lcnMmJnRoaXMuX2xpc3RlbmVyc1t0XSlmb3IodmFyIGk9dGhpcy5fbGlzdGVuZXJzW3RdLGE9aS5sZW5ndGgscj0wO3I8YTtyKyspaWYoaVtyXT09PWUpezE9PT1hP2RlbGV0ZSB0aGlzLl9saXN0ZW5lcnNbdF06aS5zcGxpY2UociwxKTticmVha319fSx7a2V5OlwicmVtb3ZlQWxsRXZlbnRMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbih0KXt0P3RoaXMuX2xpc3RlbmVycyYmZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1t0XTp0aGlzLl9saXN0ZW5lcnM9bnVsbH19LHtrZXk6XCJkaXNwYXRjaEV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgaT0hMSxhPXRoaXMuX2xpc3RlbmVycztpZih0JiZhKXt2YXIgcj1hW3RdO2lmKCFyKXJldHVybiBpO2Zvcih2YXIgbj12b2lkIDAscz1yLmxlbmd0aDtzLS07KW49cltzXSxpPWl8fG4oZSl9cmV0dXJuISFpfX0se2tleTpcImhhc0V2ZW50TGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9saXN0ZW5lcnM7cmV0dXJuISghZXx8IWVbdF0pfX1dLFt7a2V5OlwiYmluZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQ9Uy5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCx0LnByb3RvdHlwZS5oYXNFdmVudExpc3RlbmVyPVMucHJvdG90eXBlLmhhc0V2ZW50TGlzdGVuZXIsdC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1TLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyLHQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9Uy5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcix0LnByb3RvdHlwZS5yZW1vdmVBbGxFdmVudExpc3RlbmVycz1TLnByb3RvdHlwZS5yZW1vdmVBbGxFdmVudExpc3RlbmVyc319XSksUyk7ZnVuY3Rpb24gUygpe28odGhpcyxTKSx0aGlzLl9saXN0ZW5lcnM9bnVsbH12YXIgST0odChELFt7a2V5OlwiY2FsY3VsYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3RoaXMuZXVsZXJJbnRlZ3JhdGUodCxlLGkpfX0se2tleTpcImV1bGVySW50ZWdyYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3Quc2xlZXB8fCh0Lm9sZC5wLmNvcHkodC5wKSx0Lm9sZC52LmNvcHkodC52KSx0LmEubXVsdGlwbHlTY2FsYXIoMS90Lm1hc3MpLHQudi5hZGQodC5hLm11bHRpcGx5U2NhbGFyKGUpKSx0LnAuYWRkKHQub2xkLnYubXVsdGlwbHlTY2FsYXIoZSkpLGkmJnQudi5tdWx0aXBseVNjYWxhcihpKSx0LmEuY2xlYXIoKSl9fV0pLEQpO2Z1bmN0aW9uIEQodCl7byh0aGlzLEQpLHRoaXMudHlwZT10fXZhciBWPSh0KE0sW3trZXk6XCJhZGRSZW5kZXJlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuaW5pdCh0aGlzKSx0aGlzLnJlbmRlcmVycy5wdXNoKHQpfX0se2tleTpcInJlbW92ZVJlbmRlcmVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5yZW5kZXJlcnMuaW5kZXhPZih0KTt0aGlzLnJlbmRlcmVycy5zcGxpY2UoZSwxKSx0LnJlbW92ZSh0aGlzKX19LHtrZXk6XCJhZGRFbWl0dGVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5lbWl0dGVycy5wdXNoKHQpLCh0LnBhcmVudD10aGlzKS5kaXNwYXRjaEV2ZW50KE0uRU1JVFRFUl9BRERFRCx0KX19LHtrZXk6XCJyZW1vdmVFbWl0dGVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5lbWl0dGVycy5pbmRleE9mKHQpO3RoaXMuZW1pdHRlcnMuc3BsaWNlKGUsMSksdC5wYXJlbnQ9bnVsbCx0aGlzLmRpc3BhdGNoRXZlbnQoTS5FTUlUVEVSX1JFTU9WRUQsdCl9fSx7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtcImF1dG9cIj09PXRoaXMuX2Zwcz8odGhpcy5kaXNwYXRjaEV2ZW50KE0uUFJPVE9OX1VQREFURSksTS5VU0VfQ0xPQ0s/KHRoaXMudGhlbnx8KHRoaXMudGhlbj0obmV3IERhdGUpLmdldFRpbWUoKSksdGhpcy5ub3c9KG5ldyBEYXRlKS5nZXRUaW1lKCksdGhpcy5lbGFwc2VkPS4wMDEqKHRoaXMubm93LXRoaXMudGhlbiksdGhpcy5hbWVuZENoYW5nZVRhYnNCdWcoKSwwPHRoaXMuZWxhcHNlZCYmdGhpcy5lbWl0dGVyc1VwZGF0ZSh0aGlzLmVsYXBzZWQpLHRoaXMudGhlbj10aGlzLm5vdyk6dGhpcy5lbWl0dGVyc1VwZGF0ZShNLkRFRkFVTFRfSU5URVJWQUwpLHRoaXMuZGlzcGF0Y2hFdmVudChNLlBST1RPTl9VUERBVEVfQUZURVIpKToodGhpcy50aGVufHwodGhpcy50aGVuPShuZXcgRGF0ZSkuZ2V0VGltZSgpKSx0aGlzLm5vdz0obmV3IERhdGUpLmdldFRpbWUoKSx0aGlzLmVsYXBzZWQ9LjAwMSoodGhpcy5ub3ctdGhpcy50aGVuKSx0aGlzLmVsYXBzZWQ+dGhpcy5faW50ZXJ2YWwmJih0aGlzLmRpc3BhdGNoRXZlbnQoTS5QUk9UT05fVVBEQVRFKSx0aGlzLmVtaXR0ZXJzVXBkYXRlKHRoaXMuX2ludGVydmFsKSx0aGlzLnRoZW49dGhpcy5ub3ctdGhpcy5lbGFwc2VkJXRoaXMuX2ludGVydmFsKjFlMyx0aGlzLmRpc3BhdGNoRXZlbnQoTS5QUk9UT05fVVBEQVRFX0FGVEVSKSkpfX0se2tleTpcImVtaXR0ZXJzVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZW1pdHRlcnMubGVuZ3RoO2UtLTspdGhpcy5lbWl0dGVyc1tlXS51cGRhdGUodCl9fSx7a2V5OlwiYW1lbmRDaGFuZ2VUYWJzQnVnXCIsdmFsdWU6ZnVuY3Rpb24oKXtNLmFtZW5kQ2hhbmdlVGFic0J1ZyYmLjU8dGhpcy5lbGFwc2VkJiYodGhpcy50aGVuPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHRoaXMuZWxhcHNlZD0wKX19LHtrZXk6XCJnZXRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmVtaXR0ZXJzLmxlbmd0aDtlLS07KXQrPXRoaXMuZW1pdHRlcnNbZV0ucGFydGljbGVzLmxlbmd0aDtyZXR1cm4gdH19LHtrZXk6XCJnZXRBbGxQYXJ0aWNsZXNcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPXRoaXMuZW1pdHRlcnMubGVuZ3RoO2UtLTspdD10LmNvbmNhdCh0aGlzLmVtaXR0ZXJzW2VdLnBhcnRpY2xlcyk7cmV0dXJuIHR9fSx7a2V5OlwiZGVzdHJveUFsbEVtaXR0ZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXtQLmRlc3Ryb3lBbGwodGhpcy5lbWl0dGVycyl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtpLnRpbWU9MCxpLnRoZW49MCxpLnBvb2wuZGVzdHJveSgpLFAuZGVzdHJveUFsbChpLmVtaXR0ZXJzKSxQLmRlc3Ryb3lBbGwoaS5yZW5kZXJlcnMsaS5nZXRBbGxQYXJ0aWNsZXMoKSl9dmFyIGk9dGhpczswPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PXQmJnQ/c2V0VGltZW91dChlLDIwMCk6ZSgpfX0se2tleTpcImZwc1wiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9mcHM9dCx0aGlzLl9pbnRlcnZhbD1cImF1dG9cIj09PXQ/TS5ERUZBVUxUX0lOVEVSVkFMOnMuZmxvb3IoMS90LDcpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZnBzfX1dKSxNKTtmdW5jdGlvbiBNKHQpe28odGhpcyxNKSx0aGlzLmVtaXR0ZXJzPVtdLHRoaXMucmVuZGVyZXJzPVtdLHRoaXMudGltZT0wLHRoaXMubm93PTAsdGhpcy50aGVuPTAsdGhpcy5lbGFwc2VkPTAsdGhpcy5zdGF0cz1uZXcgTyh0aGlzKSx0aGlzLnBvb2w9bmV3IFQoODApLHRoaXMuaW50ZWdyYXRpb25UeXBlPVAuaW5pdFZhbHVlKHQsTS5FVUxFUiksdGhpcy5pbnRlZ3JhdG9yPW5ldyBJKHRoaXMuaW50ZWdyYXRpb25UeXBlKSx0aGlzLl9mcHM9XCJhdXRvXCIsdGhpcy5faW50ZXJ2YWw9TS5ERUZBVUxUX0lOVEVSVkFMfVYuVVNFX0NMT0NLPSExLFYuTUVBU1VSRT0xMDAsVi5FVUxFUj1cImV1bGVyXCIsVi5SSzI9XCJydW5nZS1rdXR0YTJcIixWLlBBUlRJQ0xFX0NSRUFURUQ9XCJQQVJUSUNMRV9DUkVBVEVEXCIsVi5QQVJUSUNMRV9VUERBVEU9XCJQQVJUSUNMRV9VUERBVEVcIixWLlBBUlRJQ0xFX1NMRUVQPVwiUEFSVElDTEVfU0xFRVBcIixWLlBBUlRJQ0xFX0RFQUQ9XCJQQVJUSUNMRV9ERUFEXCIsVi5FTUlUVEVSX0FEREVEPVwiRU1JVFRFUl9BRERFRFwiLFYuRU1JVFRFUl9SRU1PVkVEPVwiRU1JVFRFUl9SRU1PVkVEXCIsVi5QUk9UT05fVVBEQVRFPVwiUFJPVE9OX1VQREFURVwiLFYuUFJPVE9OX1VQREFURV9BRlRFUj1cIlBST1RPTl9VUERBVEVfQUZURVJcIixWLkRFRkFVTFRfSU5URVJWQUw9LjAxNjcsVi5hbWVuZENoYW5nZVRhYnNCdWc9ITAsQy5iaW5kKFYpO3ZhciBCPSh0KEwsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yPTI1NSx0aGlzLmc9MjU1LHRoaXMuYj0yNTV9fV0pLEwpO2Z1bmN0aW9uIEwoKXt2YXIgdD0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MjU1LGU9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjI1NSxpPTI8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXToyNTU7byh0aGlzLEwpLHRoaXMucj10LHRoaXMuZz1lLHRoaXMuYj1pfXZhciBVPXtlYXNlTGluZWFyOmZ1bmN0aW9uKHQpe3JldHVybiB0fSxlYXNlSW5RdWFkOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnBvdyh0LDIpfSxlYXNlT3V0UXVhZDpmdW5jdGlvbih0KXtyZXR1cm4tKE1hdGgucG93KHQtMSwyKS0xKX0sZWFzZUluT3V0UXVhZDpmdW5jdGlvbih0KXtyZXR1cm4odC89LjUpPDE/LjUqTWF0aC5wb3codCwyKTotLjUqKCh0LT0yKSp0LTIpfSxlYXNlSW5DdWJpYzpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3codCwzKX0sZWFzZU91dEN1YmljOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnBvdyh0LTEsMykrMX0sZWFzZUluT3V0Q3ViaWM6ZnVuY3Rpb24odCl7cmV0dXJuKHQvPS41KTwxPy41Kk1hdGgucG93KHQsMyk6LjUqKE1hdGgucG93KHQtMiwzKSsyKX0sZWFzZUluUXVhcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KHQsNCl9LGVhc2VPdXRRdWFydDpmdW5jdGlvbih0KXtyZXR1cm4tKE1hdGgucG93KHQtMSw0KS0xKX0sZWFzZUluT3V0UXVhcnQ6ZnVuY3Rpb24odCl7cmV0dXJuKHQvPS41KTwxPy41Kk1hdGgucG93KHQsNCk6LS41KigodC09MikqTWF0aC5wb3codCwzKS0yKX0sZWFzZUluU2luZTpmdW5jdGlvbih0KXtyZXR1cm4gMS1NYXRoLmNvcyh0KnMuUElfMil9LGVhc2VPdXRTaW5lOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnNpbih0KnMuUElfMil9LGVhc2VJbk91dFNpbmU6ZnVuY3Rpb24odCl7cmV0dXJuLS41KihNYXRoLmNvcyhNYXRoLlBJKnQpLTEpfSxlYXNlSW5FeHBvOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD8wOk1hdGgucG93KDIsMTAqKHQtMSkpfSxlYXNlT3V0RXhwbzpmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQ/MToxLU1hdGgucG93KDIsLTEwKnQpfSxlYXNlSW5PdXRFeHBvOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD8wOjE9PT10PzE6KHQvPS41KTwxPy41Kk1hdGgucG93KDIsMTAqKHQtMSkpOi41KigyLU1hdGgucG93KDIsLTEwKi0tdCkpfSxlYXNlSW5DaXJjOmZ1bmN0aW9uKHQpe3JldHVybi0oTWF0aC5zcXJ0KDEtdCp0KS0xKX0sZWFzZU91dENpcmM6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguc3FydCgxLU1hdGgucG93KHQtMSwyKSl9LGVhc2VJbk91dENpcmM6ZnVuY3Rpb24odCl7cmV0dXJuKHQvPS41KTwxPy0uNSooTWF0aC5zcXJ0KDEtdCp0KS0xKTouNSooTWF0aC5zcXJ0KDEtKHQtPTIpKnQpKzEpfSxlYXNlSW5CYWNrOmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqKDIuNzAxNTgqdC0xLjcwMTU4KX0sZWFzZU91dEJhY2s6ZnVuY3Rpb24odCl7cmV0dXJuLS10KnQqKDIuNzAxNTgqdCsxLjcwMTU4KSsxfSxlYXNlSW5PdXRCYWNrOmZ1bmN0aW9uKHQpe3ZhciBlPTEuNzAxNTg7cmV0dXJuKHQvPS41KTwxP3QqdCooKDErKGUqPTEuNTI1KSkqdC1lKSouNTouNSooKHQtPTIpKnQqKCgxKyhlKj0xLjUyNSkpKnQrZSkrMil9LGdldEVhc2luZzpmdW5jdGlvbih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6dGhpc1t0XXx8dGhpcy5lYXNlTGluZWFyfX0sRj0odCh6LFt7a2V5Olwic2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy54PXQsdGhpcy55PWUsdGhpc319LHtrZXk6XCJzZXRYXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueD10LHRoaXN9fSx7a2V5Olwic2V0WVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnk9dCx0aGlzfX0se2tleTpcImdldEdyYWRpZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMueD9NYXRoLmF0YW4yKHRoaXMueSx0aGlzLngpOjA8dGhpcy55P3MuUElfMjp0aGlzLnk8MD8tcy5QSV8yOnZvaWQgMH19LHtrZXk6XCJjb3B5XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueD10LngsdGhpcy55PXQueSx0aGlzfX0se2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/dGhpcy5hZGRWZWN0b3JzKHQsZSk6KHRoaXMueCs9dC54LHRoaXMueSs9dC55LHRoaXMpfX0se2tleTpcImFkZFhZXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy54Kz10LHRoaXMueSs9ZSx0aGlzfX0se2tleTpcImFkZFZlY3RvcnNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLng9dC54K2UueCx0aGlzLnk9dC55K2UueSx0aGlzfX0se2tleTpcInN1YlwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/dGhpcy5zdWJWZWN0b3JzKHQsZSk6KHRoaXMueC09dC54LHRoaXMueS09dC55LHRoaXMpfX0se2tleTpcInN1YlZlY3RvcnNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLng9dC54LWUueCx0aGlzLnk9dC55LWUueSx0aGlzfX0se2tleTpcImRpdmlkZVNjYWxhclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiAwIT09dD8odGhpcy54Lz10LHRoaXMueS89dCk6dGhpcy5zZXQoMCwwKSx0aGlzfX0se2tleTpcIm11bHRpcGx5U2NhbGFyXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCo9dCx0aGlzLnkqPXQsdGhpc319LHtrZXk6XCJuZWdhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKC0xKX19LHtrZXk6XCJkb3RcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54KnQueCt0aGlzLnkqdC55fX0se2tleTpcImxlbmd0aFNxXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55fX0se2tleTpcImxlbmd0aFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkpfX0se2tleTpcIm5vcm1hbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCkpfX0se2tleTpcImRpc3RhbmNlVG9cIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQodCkpfX0se2tleTpcInJvdGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMueCxpPXRoaXMueTtyZXR1cm4gdGhpcy54PWUqTWF0aC5jb3ModCkraSpNYXRoLnNpbih0KSx0aGlzLnk9LWUqTWF0aC5zaW4odCkraSpNYXRoLmNvcyh0KSx0aGlzfX0se2tleTpcImRpc3RhbmNlVG9TcXVhcmVkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy54LXQueCx0PXRoaXMueS10Lnk7cmV0dXJuIGUqZSt0KnR9fSx7a2V5OlwibGVycFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueCs9KHQueC10aGlzLngpKmUsdGhpcy55Kz0odC55LXRoaXMueSkqZSx0aGlzfX0se2tleTpcImVxdWFsc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0Lng9PT10aGlzLngmJnQueT09PXRoaXMueX19LHtrZXk6XCJjbGVhclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueD0wLHRoaXMueT0wLHRoaXN9fSx7a2V5OlwiY2xvbmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgeih0aGlzLngsdGhpcy55KX19XSkseik7ZnVuY3Rpb24geih0LGUpe28odGhpcyx6KSx0aGlzLng9dHx8MCx0aGlzLnk9ZXx8MH12YXIgaj0odChOLFt7a2V5OlwiZ2V0RGlyZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hdGFuMih0aGlzLnYueCwtdGhpcy52LnkpKnMuTjE4MF9QSX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGlmZT0xLzAsdGhpcy5hZ2U9MCx0aGlzLmRlYWQ9ITEsdGhpcy5zbGVlcD0hMSx0aGlzLmJvZHk9bnVsbCx0aGlzLnNwcml0ZT1udWxsLHRoaXMucGFyZW50PW51bGwsdGhpcy5lbmVyZ3k9MSx0aGlzLm1hc3M9MSx0aGlzLnJhZGl1cz0xMCx0aGlzLmFscGhhPTEsdGhpcy5zY2FsZT0xLHRoaXMucm90YXRpb249MCx0aGlzLmNvbG9yPW51bGwsdGhpcy5wLnNldCgwLDApLHRoaXMudi5zZXQoMCwwKSx0aGlzLmEuc2V0KDAsMCksdGhpcy5vbGQucC5zZXQoMCwwKSx0aGlzLm9sZC52LnNldCgwLDApLHRoaXMub2xkLmEuc2V0KDAsMCksdGhpcy5lYXNpbmc9VS5lYXNlTGluZWFyLHRoaXMucmdiLnJlc2V0KCksUC5lbXB0eU9iamVjdCh0aGlzLmRhdGEpLHRoaXMucmVtb3ZlQWxsQmVoYXZpb3VycygpLHRoaXN9fSx7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLnNsZWVwfHwodGhpcy5hZ2UrPXQsdGhpcy5hcHBseUJlaGF2aW91cnModCxlKSksdGhpcy5hZ2U8dGhpcy5saWZlPyhlPXRoaXMuZWFzaW5nKHRoaXMuYWdlL3RoaXMubGlmZSksdGhpcy5lbmVyZ3k9TWF0aC5tYXgoMS1lLDApKTp0aGlzLmRlc3Ryb3koKX19LHtrZXk6XCJhcHBseUJlaGF2aW91cnNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10aGlzLmJlaGF2aW91cnMubGVuZ3RoLGE9dm9pZCAwLGE9MDthPGk7YSsrKXRoaXMuYmVoYXZpb3Vyc1thXSYmdGhpcy5iZWhhdmlvdXJzW2FdLmFwcGx5QmVoYXZpb3VyKHRoaXMsdCxlKX19LHtrZXk6XCJhZGRCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmJlaGF2aW91cnMucHVzaCh0KSx0Lmhhc093blByb3BlcnR5KFwicGFyZW50c1wiKSYmdC5wYXJlbnRzLnB1c2godGhpcyksdC5pbml0aWFsaXplKHRoaXMpfX0se2tleTpcImFkZEJlaGF2aW91cnNcIix2YWx1ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgsaT12b2lkIDAsaT0wO2k8ZTtpKyspdGhpcy5hZGRCZWhhdmlvdXIodFtpXSl9fSx7a2V5OlwicmVtb3ZlQmVoYXZpb3VyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dD10aGlzLmJlaGF2aW91cnMuaW5kZXhPZih0KTstMTx0JiYodGhpcy5iZWhhdmlvdXJzLnNwbGljZSh0LDEpLnBhcmVudHM9bnVsbCl9fSx7a2V5OlwicmVtb3ZlQWxsQmVoYXZpb3Vyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7UC5lbXB0eUFycmF5KHRoaXMuYmVoYXZpb3Vycyl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVBbGxCZWhhdmlvdXJzKCksdGhpcy5lbmVyZ3k9MCx0aGlzLmRlYWQ9ITAsdGhpcy5wYXJlbnQ9bnVsbH19XSksTik7ZnVuY3Rpb24gTih0KXtvKHRoaXMsTiksdGhpcy5pZD1cIlwiLHRoaXMub2xkPXt9LHRoaXMuZGF0YT17fSx0aGlzLmJlaGF2aW91cnM9W10sdGhpcy5wPVtdLHRoaXMudj1bXSx0aGlzLmE9W10sdGhpcy5yZ2I9e30sdGhpcy5uYW1lPVwiUGFydGljbGVcIix0aGlzLmlkPUEuaWQodGhpcy5uYW1lKSx0aGlzLm9sZD17fSx0aGlzLmRhdGE9e30sdGhpcy5iZWhhdmlvdXJzPVtdLHRoaXMucD1uZXcgRix0aGlzLnY9bmV3IEYsdGhpcy5hPW5ldyBGLHRoaXMub2xkLnA9bmV3IEYsdGhpcy5vbGQudj1uZXcgRix0aGlzLm9sZC5hPW5ldyBGLHRoaXMucmdiPW5ldyBCLHRoaXMucmVzZXQoKSx0JiZQLnNldFByb3AodGhpcyx0KX12YXIgSD17aGV4VG9SZ2I6ZnVuY3Rpb24odCl7dD1cIiNcIj09PXQuY2hhckF0KDApP3Quc3Vic3RyaW5nKDEsNyk6dDtyZXR1cm57cjpwYXJzZUludCh0LnN1YnN0cmluZygwLDIpLDE2KSxnOnBhcnNlSW50KHQuc3Vic3RyaW5nKDIsNCksMTYpLGI6cGFyc2VJbnQodC5zdWJzdHJpbmcoNCw2KSwxNil9fSxyZ2JUb0hleDpmdW5jdGlvbih0KXtyZXR1cm5cInJnYihcIit0LnIrXCIsIFwiK3QuZytcIiwgXCIrdC5iK1wiKVwifSxnZXRIZXgxNkZyb21QYXJ0aWNsZTpmdW5jdGlvbih0KXtyZXR1cm4gNjU1MzYqTnVtYmVyKHQucmdiLnIpKzI1NipOdW1iZXIodC5yZ2IuZykrTnVtYmVyKHQucmdiLmIpfX0scT0odChHLFt7a2V5Olwic2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yPXQsdGhpcy50aGE9ZSx0aGlzfX0se2tleTpcInNldFJcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yPXQsdGhpc319LHtrZXk6XCJzZXRUaGFcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGE9dCx0aGlzfX0se2tleTpcImNvcHlcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yPXQucix0aGlzLnRoYT10LnRoYSx0aGlzfX0se2tleTpcInRvVmVjdG9yXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEYodGhpcy5nZXRYKCksdGhpcy5nZXRZKCkpfX0se2tleTpcImdldFhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnIqTWF0aC5zaW4odGhpcy50aGEpfX0se2tleTpcImdldFlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybi10aGlzLnIqTWF0aC5jb3ModGhpcy50aGEpfX0se2tleTpcIm5vcm1hbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucj0xLHRoaXN9fSx7a2V5OlwiZXF1YWxzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQucj09PXRoaXMuciYmdC50aGE9PT10aGlzLnRoYX19LHtrZXk6XCJjbGVhclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucj0wLHRoaXMudGhhPTAsdGhpc319LHtrZXk6XCJjbG9uZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBHKHRoaXMucix0aGlzLnRoYSl9fV0pLEcpO2Z1bmN0aW9uIEcodCxlKXtvKHRoaXMsRyksdGhpcy5yPU1hdGguYWJzKHQpfHwwLHRoaXMudGhhPWV8fDB9dmFyIFg9e2NyZWF0ZTpmdW5jdGlvbih0KXt2YXIgZT1uZXcgRmxvYXQzMkFycmF5KDkpO3JldHVybiB0JiZ0aGlzLnNldCh0LGUpLGV9LHNldDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT0wO2k8OTtpKyspZVtpXT10W2ldO3JldHVybiBlfSxtdWx0aXBseTpmdW5jdGlvbih0LGUsaSl7dmFyIGE9dFswXSxyPXRbMV0sbj10WzJdLHM9dFszXSxvPXRbNF0saD10WzZdLGw9dFs3XSx1PWVbMF0sYz1lWzFdLGQ9ZVsyXSx5PWVbM10scD1lWzRdLHQ9ZVs2XSxlPWVbN107cmV0dXJuIGlbMF09dSphK2MqcyxpWzFdPXUqcitjKm8saVsyXT1uKmQsaVszXT15KmErcCpzLGlbNF09eSpyK3AqbyxpWzZdPXQqYStlKnMraCxpWzddPXQqcitlKm8rbCxpfSxpbnZlcnNlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dFswXSxhPXRbMV0scj10WzNdLG49dFs0XSxzPXRbNl0sbz10WzddLGg9LXIsdD1vKnItbipzLHI9MS8oaSpuK2EqaCk7cmV0dXJuIGVbMF09bipyLGVbMV09LWEqcixlWzNdPWgqcixlWzRdPWkqcixlWzZdPXQqcixlWzddPSgtbyppK2EqcykqcixlfSxtdWx0aXBseVZlYzI6ZnVuY3Rpb24odCxlLGkpe3ZhciBhPWVbMF0sZT1lWzFdO3JldHVybiBpWzBdPWEqdFswXStlKnRbM10rdFs2XSxpWzFdPWEqdFsxXStlKnRbNF0rdFs3XSxpfX0sWT0ocihXLGwpLHQoVyxbe2tleTpcImdldFZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1QLmdldFJhbmRGcm9tQXJyYXkodGhpcy5fYXJyKTtyZXR1cm5cInJhbmRvbVwiPT09dHx8XCJSYW5kb21cIj09PXQ/cy5yYW5kb21Db2xvcigpOnR9fV0sW3trZXk6XCJjcmVhdGVBcnJheVNwYW5cIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdD90IGluc3RhbmNlb2YgVz90Om5ldyBXKHQpOm51bGx9fV0pLFcpO2Z1bmN0aW9uIFcodCl7byh0aGlzLFcpO3ZhciBlPWgodGhpcywoVy5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihXKSkuY2FsbCh0aGlzKSk7cmV0dXJuIGUuX2Fycj1QLnRvQXJyYXkodCksZX12YXIgWj0odChRLFt7a2V5OlwiY29udGFpbnNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0PD10aGlzLnJpZ2h0JiZ0Pj10aGlzLngmJmU8PXRoaXMuYm90dG9tJiZlPj10aGlzLnl9fV0pLFEpO2Z1bmN0aW9uIFEodCxlLGksYSl7byh0aGlzLFEpLHRoaXMueD10LHRoaXMueT1lLHRoaXMud2lkdGg9aSx0aGlzLmhlaWdodD1hLHRoaXMuYm90dG9tPXRoaXMueSt0aGlzLmhlaWdodCx0aGlzLnJpZ2h0PXRoaXMueCt0aGlzLndpZHRofXZhciBLPSh0KEosW3trZXk6XCJpbml0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0VGltZT0wLHRoaXMubmV4dFRpbWU9dGhpcy50aW1lUGFuLmdldFZhbHVlKCl9fSx7a2V5OlwiZ2V0VmFsdWVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdGFydFRpbWUrPXQsdGhpcy5zdGFydFRpbWU+PXRoaXMubmV4dFRpbWU/KHRoaXMuc3RhcnRUaW1lPTAsdGhpcy5uZXh0VGltZT10aGlzLnRpbWVQYW4uZ2V0VmFsdWUoKSwxPT09dGhpcy5udW1QYW4uYj8uNTx0aGlzLm51bVBhbi5nZXRWYWx1ZSghMSk/MTowOnRoaXMubnVtUGFuLmdldFZhbHVlKCEwKSk6MH19XSksSik7ZnVuY3Rpb24gSih0LGUpe28odGhpcyxKKSx0aGlzLm51bVBhbj1sLnNldFNwYW5WYWx1ZShQLmluaXRWYWx1ZSh0LDEpKSx0aGlzLnRpbWVQYW49bC5zZXRTcGFuVmFsdWUoUC5pbml0VmFsdWUoZSwxKSksdGhpcy5zdGFydFRpbWU9MCx0aGlzLm5leHRUaW1lPTAsdGhpcy5pbml0KCl9dmFyICQ9KHQodHQsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcImluaXRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U/dGhpcy5pbml0aWFsaXplKGUpOnRoaXMuaW5pdGlhbGl6ZSh0KX19LHtrZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fV0pLHR0KTtmdW5jdGlvbiB0dCgpe28odGhpcyx0dCl9dmFyIGV0PShyKGl0LCQpLHQoaXQsW3trZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5saWZlUGFuLmE9PT0xLzA/dC5saWZlPTEvMDp0LmxpZmU9dGhpcy5saWZlUGFuLmdldFZhbHVlKCl9fV0pLGl0KTtmdW5jdGlvbiBpdCh0LGUsaSl7byh0aGlzLGl0KTt2YXIgYT1oKHRoaXMsKGl0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGl0KSkuY2FsbCh0aGlzKSk7cmV0dXJuIGEubGlmZVBhbj1sLnNldFNwYW5WYWx1ZSh0LGUsaSksYS5uYW1lPVwiTGlmZVwiLGF9dmFyIGF0PSh0KHJ0LFt7a2V5OlwiZ2V0UG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJjcm9zc2luZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7fX1dKSxydCk7ZnVuY3Rpb24gcnQoKXtvKHRoaXMscnQpLHRoaXMudmVjdG9yPW5ldyBGKDAsMCksdGhpcy5yYW5kb209MCx0aGlzLmNyb3NzVHlwZT1cImRlYWRcIix0aGlzLmFsZXJ0PSEwfXZhciBudD0ocihzdCxhdCksdChzdCxbe2tleTpcImdldFBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZWN0b3IueD10aGlzLngsdGhpcy52ZWN0b3IueT10aGlzLnksdGhpcy52ZWN0b3J9fSx7a2V5OlwiY3Jvc3NpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuYWxlcnQmJihjb25zb2xlLmVycm9yKFwiU29ycnksIFBvaW50Wm9uZSBkb2VzIG5vdCBzdXBwb3J0IGNyb3NzaW5nIG1ldGhvZCFcIiksdGhpcy5hbGVydD0hMSl9fV0pLHN0KTtmdW5jdGlvbiBzdCh0LGUpe28odGhpcyxzdCk7dmFyIGk9aCh0aGlzLChzdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihzdCkpLmNhbGwodGhpcykpO3JldHVybiBpLng9dCxpLnk9ZSxpfXZhciBvdD0ocihodCwkKSx0KGh0LFt7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnpvbmU9UC5pbml0VmFsdWUodCxuZXcgbnQpfX0se2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnpvbmUuZ2V0UG9zaXRpb24oKSx0LnAueD10aGlzLnpvbmUudmVjdG9yLngsdC5wLnk9dGhpcy56b25lLnZlY3Rvci55fX1dKSxodCk7ZnVuY3Rpb24gaHQodCl7byh0aGlzLGh0KTt2YXIgZT1oKHRoaXMsKGh0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGh0KSkuY2FsbCh0aGlzKSk7cmV0dXJuIGUuem9uZT1QLmluaXRWYWx1ZSh0LG5ldyBudCksZS5uYW1lPVwiUG9zaXRpb25cIixlfXZhciBsdD0ocih1dCwkKSx0KHV0LFt7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5yUGFuPWwuc2V0U3BhblZhbHVlKHQpLHRoaXMudGhhUGFuPWwuc2V0U3BhblZhbHVlKGUpLHRoaXMudHlwZT1QLmluaXRWYWx1ZShpLFwidmVjdG9yXCIpfX0se2tleTpcIm5vcm1hbGl6ZVZlbG9jaXR5XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQqVi5NRUFTVVJFfX0se2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZTtcInBcIj09PXRoaXMudHlwZXx8XCJQXCI9PT10aGlzLnR5cGV8fFwicG9sYXJcIj09PXRoaXMudHlwZT8oZT1uZXcgcSh0aGlzLm5vcm1hbGl6ZVZlbG9jaXR5KHRoaXMuclBhbi5nZXRWYWx1ZSgpKSx0aGlzLnRoYVBhbi5nZXRWYWx1ZSgpKnMuUElfMTgwKSx0LnYueD1lLmdldFgoKSx0LnYueT1lLmdldFkoKSk6KHQudi54PXRoaXMubm9ybWFsaXplVmVsb2NpdHkodGhpcy5yUGFuLmdldFZhbHVlKCkpLHQudi55PXRoaXMubm9ybWFsaXplVmVsb2NpdHkodGhpcy50aGFQYW4uZ2V0VmFsdWUoKSkpfX1dKSx1dCk7ZnVuY3Rpb24gdXQodCxlLGkpe28odGhpcyx1dCk7dmFyIGE9aCh0aGlzLCh1dC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih1dCkpLmNhbGwodGhpcykpO3JldHVybiBhLnJQYW49bC5zZXRTcGFuVmFsdWUodCksYS50aGFQYW49bC5zZXRTcGFuVmFsdWUoZSksYS50eXBlPVAuaW5pdFZhbHVlKGksXCJ2ZWN0b3JcIiksYS5uYW1lPVwiVmVsb2NpdHlcIixhfXZhciBjdD0ocihkdCwkKSx0KGR0LFt7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QubWFzcz10aGlzLm1hc3NQYW4uZ2V0VmFsdWUoKX19XSksZHQpO2Z1bmN0aW9uIGR0KHQsZSxpKXtvKHRoaXMsZHQpO3ZhciBhPWgodGhpcywoZHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZHQpKS5jYWxsKHRoaXMpKTtyZXR1cm4gYS5tYXNzUGFuPWwuc2V0U3BhblZhbHVlKHQsZSxpKSxhLm5hbWU9XCJNYXNzXCIsYX12YXIgeXQ9KHIocHQsJCksdChwdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3RoaXMucmFkaXVzPWwuc2V0U3BhblZhbHVlKHQsZSxpKX19LHtrZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5yYWRpdXM9dGhpcy5yYWRpdXMuZ2V0VmFsdWUoKSx0LmRhdGEub2xkUmFkaXVzPXQucmFkaXVzfX1dKSxwdCk7ZnVuY3Rpb24gcHQodCxlLGkpe28odGhpcyxwdCk7dmFyIGE9aCh0aGlzLChwdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihwdCkpLmNhbGwodGhpcykpO3JldHVybiBhLnJhZGl1cz1sLnNldFNwYW5WYWx1ZSh0LGUsaSksYS5uYW1lPVwiUmFkaXVzXCIsYX12YXIgZnQ9KHIodnQsJCksdCh2dCxbe2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmltYWdlLmdldFZhbHVlKCk7dC5ib2R5PVwic3RyaW5nXCI9PXR5cGVvZiBlP3t3aWR0aDp0aGlzLncsaGVpZ2h0OnRoaXMuaCxzcmM6ZSxpc0lubmVyOiEwLGlubmVyOiEwfTplfX0se2tleTpcInNldFNwYW5WYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgWT90Om5ldyBZKHQpfX1dKSx2dCk7ZnVuY3Rpb24gdnQodCxlLGkpe28odGhpcyx2dCk7dmFyIGE9aCh0aGlzLCh2dC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih2dCkpLmNhbGwodGhpcykpO3JldHVybiBhLmltYWdlPWEuc2V0U3BhblZhbHVlKHQpLGEudz1QLmluaXRWYWx1ZShlLDIwKSxhLmg9UC5pbml0VmFsdWUoaSxhLncpLGEubmFtZT1cIkJvZHlcIixhfXZhciBndD0odChtdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLmxpZmU9UC5pbml0VmFsdWUodCwxLzApLHRoaXMuZWFzaW5nPVUuZ2V0RWFzaW5nKGUpfX0se2tleTpcIm5vcm1hbGl6ZUZvcmNlXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQubXVsdGlwbHlTY2FsYXIoVi5NRUFTVVJFKX19LHtrZXk6XCJub3JtYWxpemVWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0KlYuTUVBU1VSRX19LHtrZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5OlwiY2FsY3VsYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLmFnZSs9ZSx0aGlzLmFnZT49dGhpcy5saWZlfHx0aGlzLmRlYWQ/KHRoaXMuZW5lcmd5PTAsdGhpcy5kZWFkPSEwLHRoaXMuZGVzdHJveSgpKToodD10aGlzLmVhc2luZyh0LmFnZS90LmxpZmUpLHRoaXMuZW5lcmd5PU1hdGgubWF4KDEtdCwwKSl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMucGFyZW50cy5sZW5ndGg7dC0tOyl0aGlzLnBhcmVudHNbdF0ucmVtb3ZlQmVoYXZpb3VyKHRoaXMpO3RoaXMucGFyZW50cy5sZW5ndGg9MH19XSksbXQpO2Z1bmN0aW9uIG10KHQsZSl7byh0aGlzLG10KSx0aGlzLmxpZmU9UC5pbml0VmFsdWUodCwxLzApLHRoaXMuZWFzaW5nPVUuZ2V0RWFzaW5nKGUpLHRoaXMuYWdlPTAsdGhpcy5lbmVyZ3k9MSx0aGlzLmRlYWQ9ITEsdGhpcy5wYXJlbnRzPVtdLHRoaXMuaWQ9XCJCZWhhdmlvdXJfXCIrbXQuaWQrKyx0aGlzLm5hbWU9XCJCZWhhdmlvdXJcIn1ndC5pZD0wO3ZhciBidD0ocihfdCxndCksdChfdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSl7dGhpcy5mb3JjZT10aGlzLm5vcm1hbGl6ZUZvcmNlKG5ldyBGKHQsZSkpLGkmJm4oX3QucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKF90LnByb3RvdHlwZSksXCJyZXNldFwiLHRoaXMpLmNhbGwodGhpcyxpLGEpfX0se2tleTpcImFwcGx5QmVoYXZpb3VyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3RoaXMuY2FsY3VsYXRlKHQsZSxpKSx0LmEuYWRkKHRoaXMuZm9yY2UpfX1dKSxfdCk7ZnVuY3Rpb24gX3QodCxlLGksYSl7byh0aGlzLF90KTthPWgodGhpcywoX3QuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoX3QpKS5jYWxsKHRoaXMsaSxhKSk7cmV0dXJuIGEuZm9yY2U9YS5ub3JtYWxpemVGb3JjZShuZXcgRih0LGUpKSxhLm5hbWU9XCJGb3JjZVwiLGF9dmFyIHh0PShyKGt0LGd0KSx0KGt0LFt7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSxhLHIpe3RoaXMudGFyZ2V0UG9zaXRpb249UC5pbml0VmFsdWUodCxuZXcgRiksdGhpcy5yYWRpdXM9UC5pbml0VmFsdWUoaSwxZTMpLHRoaXMuZm9yY2U9UC5pbml0VmFsdWUodGhpcy5ub3JtYWxpemVWYWx1ZShlKSwxMDApLHRoaXMucmFkaXVzU3E9dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXMsdGhpcy5hdHRyYWN0aW9uRm9yY2U9bmV3IEYsdGhpcy5sZW5ndGhTcT0wLGEmJm4oa3QucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGt0LnByb3RvdHlwZSksXCJyZXNldFwiLHRoaXMpLmNhbGwodGhpcyxhLHIpfX0se2tleTpcImFwcGx5QmVoYXZpb3VyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3RoaXMuY2FsY3VsYXRlKHQsZSxpKSx0aGlzLmF0dHJhY3Rpb25Gb3JjZS5jb3B5KHRoaXMudGFyZ2V0UG9zaXRpb24pLHRoaXMuYXR0cmFjdGlvbkZvcmNlLnN1Yih0LnApLHRoaXMubGVuZ3RoU3E9dGhpcy5hdHRyYWN0aW9uRm9yY2UubGVuZ3RoU3EoKSw0ZS01PHRoaXMubGVuZ3RoU3EmJnRoaXMubGVuZ3RoU3E8dGhpcy5yYWRpdXNTcSYmKHRoaXMuYXR0cmFjdGlvbkZvcmNlLm5vcm1hbGl6ZSgpLHRoaXMuYXR0cmFjdGlvbkZvcmNlLm11bHRpcGx5U2NhbGFyKDEtdGhpcy5sZW5ndGhTcS90aGlzLnJhZGl1c1NxKSx0aGlzLmF0dHJhY3Rpb25Gb3JjZS5tdWx0aXBseVNjYWxhcih0aGlzLmZvcmNlKSx0LmEuYWRkKHRoaXMuYXR0cmFjdGlvbkZvcmNlKSl9fV0pLGt0KTtmdW5jdGlvbiBrdCh0LGUsaSxhLHIpe28odGhpcyxrdCk7cj1oKHRoaXMsKGt0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGt0KSkuY2FsbCh0aGlzLGEscikpO3JldHVybiByLnRhcmdldFBvc2l0aW9uPVAuaW5pdFZhbHVlKHQsbmV3IEYpLHIucmFkaXVzPVAuaW5pdFZhbHVlKGksMWUzKSxyLmZvcmNlPVAuaW5pdFZhbHVlKHIubm9ybWFsaXplVmFsdWUoZSksMTAwKSxyLnJhZGl1c1NxPXIucmFkaXVzKnIucmFkaXVzLHIuYXR0cmFjdGlvbkZvcmNlPW5ldyBGLHIubGVuZ3RoU3E9MCxyLm5hbWU9XCJBdHRyYWN0aW9uXCIscn12YXIgUHQ9KHIoRXQsZ3QpLHQoRXQsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpLGEscil7dGhpcy5wYW5Gb2NlPW5ldyBGKHQsZSksdGhpcy5wYW5Gb2NlPXRoaXMubm9ybWFsaXplRm9yY2UodGhpcy5wYW5Gb2NlKSx0aGlzLmRlbGF5PWksYSYmbihFdC5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoRXQucHJvdG90eXBlKSxcInJlc2V0XCIsdGhpcykuY2FsbCh0aGlzLGEscil9fSx7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuZGF0YS50aW1lPTB9fSx7a2V5OlwiYXBwbHlCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5jYWxjdWxhdGUodCxlLGkpLHQuZGF0YS50aW1lKz1lLHQuZGF0YS50aW1lPj10aGlzLmRlbGF5JiYodC5hLmFkZFhZKHMucmFuZG9tQVRvQigtdGhpcy5wYW5Gb2NlLngsdGhpcy5wYW5Gb2NlLngpLHMucmFuZG9tQVRvQigtdGhpcy5wYW5Gb2NlLnksdGhpcy5wYW5Gb2NlLnkpKSx0LmRhdGEudGltZT0wKX19XSksRXQpO2Z1bmN0aW9uIEV0KHQsZSxpLGEscil7byh0aGlzLEV0KTtyPWgodGhpcywoRXQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoRXQpKS5jYWxsKHRoaXMsYSxyKSk7cmV0dXJuIHIucmVzZXQodCxlLGkpLHIudGltZT0wLHIubmFtZT1cIlJhbmRvbURyaWZ0XCIscn12YXIgQXQ9KHIoVHQsYnQpLHQoVHQsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXtuKFR0LnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihUdC5wcm90b3R5cGUpLFwicmVzZXRcIix0aGlzKS5jYWxsKHRoaXMsMCx0LGUsaSl9fV0pLFR0KTtmdW5jdGlvbiBUdCh0LGUsaSl7byh0aGlzLFR0KTtpPWgodGhpcywoVHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoVHQpKS5jYWxsKHRoaXMsMCx0LGUsaSkpO3JldHVybiBpLm5hbWU9XCJHcmF2aXR5XCIsaX12YXIgUnQ9KHIoT3QsZ3QpLHQoT3QsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpLGEscil7dGhpcy5lbWl0dGVyPVAuaW5pdFZhbHVlKHQsbnVsbCksdGhpcy5tYXNzPVAuaW5pdFZhbHVlKGUsITApLHRoaXMuY2FsbGJhY2s9UC5pbml0VmFsdWUoaSxudWxsKSx0aGlzLmNvbGxpc2lvblBvb2w9W10sdGhpcy5kZWx0YT1uZXcgRixhJiZuKE90LnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihPdC5wcm90b3R5cGUpLFwicmVzZXRcIix0aGlzKS5jYWxsKHRoaXMsYSxyKX19LHtrZXk6XCJhcHBseUJlaGF2aW91clwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIGEscixuLHMsbyxoLGw9KHRoaXMuZW1pdHRlcj90aGlzLmVtaXR0ZXIucGFydGljbGVzOnRoaXMucG9vbCkuc2xpY2UoaSksdT1sLmxlbmd0aCxjPXZvaWQgMCxkPXZvaWQgMCxkPTA7ZDx1O2QrKyl7KGM9bFtkXSkhPT10JiYodGhpcy5kZWx0YS5jb3B5KGMucCksdGhpcy5kZWx0YS5zdWIodC5wKSwoYT10aGlzLmRlbHRhLmxlbmd0aFNxKCkpPD0oaD10LnJhZGl1cytjLnJhZGl1cykqaCYmKHI9aC1NYXRoLnNxcnQoYSkscis9LjUsbj10Lm1hc3MrYy5tYXNzLHM9dGhpcy5tYXNzP2MubWFzcy9uOi41LG89dGhpcy5tYXNzP3QubWFzcy9uOi41LHQucC5hZGQodGhpcy5kZWx0YS5jbG9uZSgpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHIqLXMpKSxjLnAuYWRkKHRoaXMuZGVsdGEubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIocipvKSksdGhpcy5jYWxsYmFjayYmdGhpcy5jYWxsYmFjayh0LGMpKSl9fX1dKSxPdCk7ZnVuY3Rpb24gT3QodCxlLGksYSxyKXtvKHRoaXMsT3QpO3I9aCh0aGlzLChPdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihPdCkpLmNhbGwodGhpcyxhLHIpKTtyZXR1cm4gci5yZXNldCh0LGUsaSksci5uYW1lPVwiQ29sbGlzaW9uXCIscn12YXIgd3Q9KHIoQ3QsZ3QpLHQoQ3QsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpLGEpe3RoaXMuem9uZT10LHRoaXMuem9uZS5jcm9zc1R5cGU9UC5pbml0VmFsdWUoZSxcImRlYWRcIiksaSYmbihDdC5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ3QucHJvdG90eXBlKSxcInJlc2V0XCIsdGhpcykuY2FsbCh0aGlzLGksYSl9fSx7a2V5OlwiYXBwbHlCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5jYWxjdWxhdGUodCxlLGkpLHRoaXMuem9uZS5jcm9zc2luZyh0KX19XSksQ3QpO2Z1bmN0aW9uIEN0KHQsZSxpLGEpe28odGhpcyxDdCk7YT1oKHRoaXMsKEN0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKEN0KSkuY2FsbCh0aGlzLGksYSkpO3JldHVybiBhLnJlc2V0KHQsZSksYS5uYW1lPVwiQ3Jvc3Nab25lXCIsYX12YXIgU3Q9KHIoSXQsZ3QpLHQoSXQsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpLGEpe3RoaXMuc2FtZT1udWxsPT1lLHRoaXMuYT1sLnNldFNwYW5WYWx1ZShQLmluaXRWYWx1ZSh0LDEpKSx0aGlzLmI9bC5zZXRTcGFuVmFsdWUoZSksaSYmbihJdC5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoSXQucHJvdG90eXBlKSxcInJlc2V0XCIsdGhpcykuY2FsbCh0aGlzLGksYSl9fSx7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuZGF0YS5hbHBoYUE9dGhpcy5hLmdldFZhbHVlKCksdGhpcy5zYW1lP3QuZGF0YS5hbHBoYUI9dC5kYXRhLmFscGhhQTp0LmRhdGEuYWxwaGFCPXRoaXMuYi5nZXRWYWx1ZSgpfX0se2tleTpcImFwcGx5QmVoYXZpb3VyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3RoaXMuY2FsY3VsYXRlKHQsZSxpKSx0LmFscGhhPXQuZGF0YS5hbHBoYUIrKHQuZGF0YS5hbHBoYUEtdC5kYXRhLmFscGhhQikqdGhpcy5lbmVyZ3ksdC5hbHBoYTwuMDAxJiYodC5hbHBoYT0wKX19XSksSXQpO2Z1bmN0aW9uIEl0KHQsZSxpLGEpe28odGhpcyxJdCk7YT1oKHRoaXMsKEl0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKEl0KSkuY2FsbCh0aGlzLGksYSkpO3JldHVybiBhLnJlc2V0KHQsZSksYS5uYW1lPVwiQWxwaGFcIixhfXZhciBEdD0ocihWdCxndCksdChWdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSl7dGhpcy5zYW1lPW51bGw9PWUsdGhpcy5hPWwuc2V0U3BhblZhbHVlKFAuaW5pdFZhbHVlKHQsMSkpLHRoaXMuYj1sLnNldFNwYW5WYWx1ZShlKSxpJiZuKFZ0LnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihWdC5wcm90b3R5cGUpLFwicmVzZXRcIix0aGlzKS5jYWxsKHRoaXMsaSxhKX19LHtrZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5kYXRhLnNjYWxlQT10aGlzLmEuZ2V0VmFsdWUoKSx0LmRhdGEub2xkUmFkaXVzPXQucmFkaXVzLHQuZGF0YS5zY2FsZUI9dGhpcy5zYW1lP3QuZGF0YS5zY2FsZUE6dGhpcy5iLmdldFZhbHVlKCl9fSx7a2V5OlwiYXBwbHlCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5jYWxjdWxhdGUodCxlLGkpLHQuc2NhbGU9dC5kYXRhLnNjYWxlQisodC5kYXRhLnNjYWxlQS10LmRhdGEuc2NhbGVCKSp0aGlzLmVuZXJneSx0LnNjYWxlPDFlLTQmJih0LnNjYWxlPTApLHQucmFkaXVzPXQuZGF0YS5vbGRSYWRpdXMqdC5zY2FsZX19XSksVnQpO2Z1bmN0aW9uIFZ0KHQsZSxpLGEpe28odGhpcyxWdCk7YT1oKHRoaXMsKFZ0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKFZ0KSkuY2FsbCh0aGlzLGksYSkpO3JldHVybiBhLnJlc2V0KHQsZSksYS5uYW1lPVwiU2NhbGVcIixhfXZhciBNdD0ocihCdCxndCksdChCdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSxyKXt0aGlzLnNhbWU9bnVsbD09ZSx0aGlzLmE9bC5zZXRTcGFuVmFsdWUoUC5pbml0VmFsdWUodCxcIlZlbG9jaXR5XCIpKSx0aGlzLmI9bC5zZXRTcGFuVmFsdWUoUC5pbml0VmFsdWUoZSwwKSksdGhpcy5zdHlsZT1QLmluaXRWYWx1ZShpLFwidG9cIiksYSYmbihCdC5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoQnQucHJvdG90eXBlKSxcInJlc2V0XCIsdGhpcykuY2FsbCh0aGlzLGEscil9fSx7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Qucm90YXRpb249dGhpcy5hLmdldFZhbHVlKCksdC5kYXRhLnJvdGF0aW9uQT10aGlzLmEuZ2V0VmFsdWUoKSx0aGlzLnNhbWV8fCh0LmRhdGEucm90YXRpb25CPXRoaXMuYi5nZXRWYWx1ZSgpKX19LHtrZXk6XCJhcHBseUJlaGF2aW91clwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLmNhbGN1bGF0ZSh0LGUsaSksdGhpcy5zYW1lP1wiVlwiIT09dGhpcy5hLmEmJlwiVmVsb2NpdHlcIiE9PXRoaXMuYS5hJiZcInZcIiE9PXRoaXMuYS5hfHwodC5yb3RhdGlvbj10LmdldERpcmVjdGlvbigpKTpcInRvXCI9PT10aGlzLnN0eWxlfHxcIlRPXCI9PT10aGlzLnN0eWxlfHxcIl9cIj09PXRoaXMuc3R5bGU/dC5yb3RhdGlvbis9dC5kYXRhLnJvdGF0aW9uQisodC5kYXRhLnJvdGF0aW9uQS10LmRhdGEucm90YXRpb25CKSp0aGlzLmVuZXJneTp0LnJvdGF0aW9uKz10LmRhdGEucm90YXRpb25CfX1dKSxCdCk7ZnVuY3Rpb24gQnQodCxlLGksYSxyKXtvKHRoaXMsQnQpO3I9aCh0aGlzLChCdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihCdCkpLmNhbGwodGhpcyxhLHIpKTtyZXR1cm4gci5yZXNldCh0LGUsaSksci5uYW1lPVwiUm90YXRlXCIscn12YXIgTHQ9KHIoVXQsZ3QpLHQoVXQsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpLGEpe3RoaXMuYT1ZLmNyZWF0ZUFycmF5U3Bhbih0KSx0aGlzLmI9WS5jcmVhdGVBcnJheVNwYW4oZSksaSYmbihVdC5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoVXQucHJvdG90eXBlKSxcInJlc2V0XCIsdGhpcykuY2FsbCh0aGlzLGksYSl9fSx7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuY29sb3I9dGhpcy5hLmdldFZhbHVlKCksdC5kYXRhLmNvbG9yQT1ILmhleFRvUmdiKHQuY29sb3IpLHRoaXMuYiYmKHQuZGF0YS5jb2xvckI9SC5oZXhUb1JnYih0aGlzLmIuZ2V0VmFsdWUoKSkpfX0se2tleTpcImFwcGx5QmVoYXZpb3VyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3RoaXMuYj8odGhpcy5jYWxjdWxhdGUodCxlLGkpLHQucmdiLnI9dC5kYXRhLmNvbG9yQi5yKyh0LmRhdGEuY29sb3JBLnItdC5kYXRhLmNvbG9yQi5yKSp0aGlzLmVuZXJneSx0LnJnYi5nPXQuZGF0YS5jb2xvckIuZysodC5kYXRhLmNvbG9yQS5nLXQuZGF0YS5jb2xvckIuZykqdGhpcy5lbmVyZ3ksdC5yZ2IuYj10LmRhdGEuY29sb3JCLmIrKHQuZGF0YS5jb2xvckEuYi10LmRhdGEuY29sb3JCLmIpKnRoaXMuZW5lcmd5LHQucmdiLnI9TWF0aC5mbG9vcih0LnJnYi5yKSx0LnJnYi5nPU1hdGguZmxvb3IodC5yZ2IuZyksdC5yZ2IuYj1NYXRoLmZsb29yKHQucmdiLmIpKToodC5yZ2Iucj10LmRhdGEuY29sb3JBLnIsdC5yZ2IuZz10LmRhdGEuY29sb3JBLmcsdC5yZ2IuYj10LmRhdGEuY29sb3JBLmIpfX1dKSxVdCk7ZnVuY3Rpb24gVXQodCxlLGksYSl7byh0aGlzLFV0KTthPWgodGhpcywoVXQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoVXQpKS5jYWxsKHRoaXMsaSxhKSk7cmV0dXJuIGEucmVzZXQodCxlKSxhLm5hbWU9XCJDb2xvclwiLGF9dmFyIEZ0PVwiY2hhbmdpbmdcIix6dD0ocihqdCxndCksdChqdCxbe2tleTpcInNldEFuZ2xlQW5kRm9yY2VcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuZm9yY2U9RnQsdGhpcy5hbmdsZT1zLlBJLzIsXCJyaWdodFwiPT09dD90aGlzLmFuZ2xlPXMuUEkvMjpcImxlZnRcIj09PXQ/dGhpcy5hbmdsZT0tcy5QSS8yOlwicmFuZG9tXCI9PT10P3RoaXMuYW5nbGU9XCJyYW5kb21cIjp0IGluc3RhbmNlb2YgbD8odGhpcy5hbmdsZT1cInNwYW5cIix0aGlzLnNwYW49dCk6dCYmKHRoaXMuYW5nbGU9dCksXCJjaGFuZ2luZ1wiPT09U3RyaW5nKGUpLnRvTG93ZXJDYXNlKCl8fFwiY2hhbmdcIj09PVN0cmluZyhlKS50b0xvd2VyQ2FzZSgpfHxcImF1dG9cIj09PVN0cmluZyhlKS50b0xvd2VyQ2FzZSgpP3RoaXMuZm9yY2U9RnQ6ZSYmKHRoaXMuZm9yY2U9ZSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSxhKXt0aGlzLmFuZ2xlPXMuUEkvMix0aGlzLnNldEFuZ2xlQW5kRm9yY2UodCxlKSxpJiZuKGp0LnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihqdC5wcm90b3R5cGUpLFwicmVzZXRcIix0aGlzKS5jYWxsKHRoaXMsaSxhKX19LHtrZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7XCJyYW5kb21cIj09PXRoaXMuYW5nbGU/dC5kYXRhLmNhbmdsZT1zLnJhbmRvbUFUb0IoLXMuUEkscy5QSSk6XCJzcGFuXCI9PT10aGlzLmFuZ2xlJiYodC5kYXRhLmNhbmdsZT10aGlzLnNwYW4uZ2V0VmFsdWUoKSksdC5kYXRhLmN5Y2xvbmU9bmV3IEYoMCwwKX19LHtrZXk6XCJhcHBseUJlaGF2aW91clwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLmNhbGN1bGF0ZSh0LGUsaSk7ZT12b2lkIDAsaT10LnYuZ2V0R3JhZGllbnQoKTtcInJhbmRvbVwiPT09dGhpcy5hbmdsZXx8XCJzcGFuXCI9PT10aGlzLmFuZ2xlP2krPXQuZGF0YS5jYW5nbGU6aSs9dGhpcy5hbmdsZSxlPXRoaXMuZm9yY2U9PT1GdD90LnYubGVuZ3RoKCkvMTAwOnRoaXMuZm9yY2UsdC5kYXRhLmN5Y2xvbmUueD1lKk1hdGguY29zKGkpLHQuZGF0YS5jeWNsb25lLnk9ZSpNYXRoLnNpbihpKSx0LmRhdGEuY3ljbG9uZT10aGlzLm5vcm1hbGl6ZUZvcmNlKHQuZGF0YS5jeWNsb25lKSx0LmEuYWRkKHQuZGF0YS5jeWNsb25lKX19XSksanQpO2Z1bmN0aW9uIGp0KHQsZSxpLGEpe28odGhpcyxqdCk7YT1oKHRoaXMsKGp0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGp0KSkuY2FsbCh0aGlzLGksYSkpO3JldHVybiBhLnNldEFuZ2xlQW5kRm9yY2UodCxlKSxhLm5hbWU9XCJDeWNsb25lXCIsYX12YXIgTnQ9KHIoSHQseHQpLHQoSHQsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpLGEscil7bihIdC5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoSHQucHJvdG90eXBlKSxcInJlc2V0XCIsdGhpcykuY2FsbCh0aGlzLHQsZSxpLGEsciksdGhpcy5mb3JjZSo9LTF9fV0pLEh0KTtmdW5jdGlvbiBIdCh0LGUsaSxhLHIpe28odGhpcyxIdCk7cj1oKHRoaXMsKEh0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKEh0KSkuY2FsbCh0aGlzLHQsZSxpLGEscikpO3JldHVybiByLmZvcmNlKj0tMSxyLm5hbWU9XCJSZXB1bHNpb25cIixyfXZhciBxdD0ocihHdCxndCksdChHdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSl7dGhpcy5kaXN0YW5jZVZlYz1uZXcgRix0aGlzLmNlbnRlclBvaW50PVAuaW5pdFZhbHVlKHQsbmV3IEYpLHRoaXMuZm9yY2U9UC5pbml0VmFsdWUodGhpcy5ub3JtYWxpemVWYWx1ZShlKSwxMDApLGkmJm4oR3QucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKEd0LnByb3RvdHlwZSksXCJyZXNldFwiLHRoaXMpLmNhbGwodGhpcyxpLGEpfX0se2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJhcHBseUJlaGF2aW91clwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5kaXN0YW5jZVZlYy5zZXQodGhpcy5jZW50ZXJQb2ludC54LXQucC54LHRoaXMuY2VudGVyUG9pbnQueS10LnAueSk7dmFyIGksYT10aGlzLmRpc3RhbmNlVmVjLmxlbmd0aFNxKCk7MCE9PWEmJihpPXRoaXMuZGlzdGFuY2VWZWMubGVuZ3RoKCksaT10aGlzLmZvcmNlKmUvKGEqaSksdC52LngrPWkqdGhpcy5kaXN0YW5jZVZlYy54LHQudi55Kz1pKnRoaXMuZGlzdGFuY2VWZWMueSl9fV0pLEd0KTtmdW5jdGlvbiBHdCh0LGUsaSxhKXtvKHRoaXMsR3QpO2E9aCh0aGlzLChHdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihHdCkpLmNhbGwodGhpcyxpLGEpKTtyZXR1cm4gYS5kaXN0YW5jZVZlYz1uZXcgRixhLmNlbnRlclBvaW50PVAuaW5pdFZhbHVlKHQsbmV3IEYpLGEuZm9yY2U9UC5pbml0VmFsdWUoYS5ub3JtYWxpemVWYWx1ZShlKSwxMDApLGEubmFtZT1cIkdyYXZpdHlXZWxsXCIsYX12YXIgWHQ9e2luaXRpYWxpemU6ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgYT1pLmxlbmd0aCxyPXZvaWQgMCxyPTA7cjxhO3IrKylpW3JdaW5zdGFuY2VvZiAkP2lbcl0uaW5pdCh0LGUpOnRoaXMuaW5pdCh0LGUsaVtyXSk7dGhpcy5iaW5kRW1pdHRlcih0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSxpKXtQLnNldFByb3AoZSxpKSxQLnNldFZlY3RvclZhbChlLGkpfSxiaW5kRW1pdHRlcjpmdW5jdGlvbih0LGUpe3QuYmluZEVtaXR0ZXImJihlLnAuYWRkKHQucCksZS52LmFkZCh0LnYpLGUuYS5hZGQodC5hKSxlLnYucm90YXRlKHMuZGVncmVlVHJhbnNmb3JtKHQucm90YXRpb24pKSl9fSxZdD0ocihXdCxqKSx0KFd0LFt7a2V5OlwiZW1pdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5zdG9wZWQ9ITEsdGhpcy5lbWl0VGltZT0wLHRoaXMudG90YWxUaW1lPVAuaW5pdFZhbHVlKHQsMS8wKSwhMD09PWV8fFwibGlmZVwiPT09ZXx8XCJkZXN0cm95XCI9PT1lP3RoaXMubGlmZT1cIm9uY2VcIj09PXQ/MTp0aGlzLnRvdGFsVGltZTppc05hTihlKXx8KHRoaXMubGlmZT1lKSx0aGlzLnJhdGUuaW5pdCgpfX0se2tleTpcInN0b3BcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudG90YWxUaW1lPS0xLHRoaXMuZW1pdFRpbWU9MCx0aGlzLnN0b3BlZD0hMH19LHtrZXk6XCJwcmVFbWl0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zdG9wZWQsaT10aGlzLmVtaXRUaW1lLGE9dGhpcy50b3RhbFRpbWU7dGhpcy5zdG9wZWQ9ITEsdGhpcy5lbWl0VGltZT0wLHRoaXMudG90YWxUaW1lPXQsdGhpcy5yYXRlLmluaXQoKTtmb3IoOy4wMTY3PHQ7KXQtPS4wMTY3LHRoaXMudXBkYXRlKC4wMTY3KTt0aGlzLnN0b3BlZD1lLHRoaXMuZW1pdFRpbWU9aStNYXRoLm1heCh0LDApLHRoaXMudG90YWxUaW1lPWF9fSx7a2V5OlwicmVtb3ZlQWxsUGFydGljbGVzXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5wYXJ0aWNsZXMubGVuZ3RoO3QtLTspdGhpcy5wYXJ0aWNsZXNbdF0uZGVhZD0hMH19LHtrZXk6XCJhZGRTZWxmSW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuaW5pdD90LmluaXQodGhpcyk6dGhpcy5pbml0QWxsKCl9fSx7a2V5OlwiYWRkSW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxpPTA7aTx0O2krKyllW2ldPWFyZ3VtZW50c1tpXTtmb3IodmFyIGE9ZS5sZW5ndGg7YS0tOyl0aGlzLmluaXRpYWxpemVzLnB1c2goZVthXSl9fSx7a2V5OlwicmVtb3ZlSW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q9dGhpcy5pbml0aWFsaXplcy5pbmRleE9mKHQpOy0xPHQmJnRoaXMuaW5pdGlhbGl6ZXMuc3BsaWNlKHQsMSl9fSx7a2V5OlwicmVtb3ZlQWxsSW5pdGlhbGl6ZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXtQLmVtcHR5QXJyYXkodGhpcy5pbml0aWFsaXplcyl9fSx7a2V5OlwiYWRkQmVoYXZpb3VyXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpLGk9MDtpPHQ7aSsrKWVbaV09YXJndW1lbnRzW2ldO2Zvcih2YXIgYT1hcmd1bWVudHMubGVuZ3RoO2EtLTspe3ZhciByPWVbYV07dGhpcy5iZWhhdmlvdXJzLnB1c2gociksci5wYXJlbnRzJiZyLnBhcmVudHMucHVzaCh0aGlzKX19fSx7a2V5OlwicmVtb3ZlQmVoYXZpb3VyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5iZWhhdmlvdXJzLmluZGV4T2YodCk7cmV0dXJuIHRoaXMuYmVoYXZpb3Vycy5zcGxpY2UoZSwxKSx0LnBhcmVudHMmJihlPXQucGFyZW50cy5pbmRleE9mKHQpLHQucGFyZW50cy5zcGxpY2UoZSwxKSksZX19LHtrZXk6XCJyZW1vdmVBbGxCZWhhdmlvdXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXtQLmVtcHR5QXJyYXkodGhpcy5iZWhhdmlvdXJzKX19LHtrZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmFnZSs9dCwodGhpcy5hZ2U+PXRoaXMubGlmZXx8dGhpcy5kZWFkKSYmdGhpcy5kZXN0cm95KCksdGhpcy5lbWl0dGluZyh0KSx0aGlzLmludGVncmF0ZSh0KX19LHtrZXk6XCJpbnRlZ3JhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLnBhcmVudCl7dmFyIGU9MS10aGlzLmRhbXBpbmc7dGhpcy5wYXJlbnQuaW50ZWdyYXRvci5jYWxjdWxhdGUodGhpcyx0LGUpO2Zvcih2YXIgaT12b2lkIDAsYT12b2lkIDAsaT10aGlzLnBhcnRpY2xlcy5sZW5ndGgtMTswPD1pO2ktLSkoYT10aGlzLnBhcnRpY2xlc1tpXSkudXBkYXRlKHQsaSksdGhpcy5wYXJlbnQuaW50ZWdyYXRvci5jYWxjdWxhdGUoYSx0LGUpLHRoaXMuZGlzcGF0Y2goXCJQQVJUSUNMRV9VUERBVEVcIixhKSxhLmRlYWQmJih0aGlzLmRpc3BhdGNoKFwiUEFSVElDTEVfREVBRFwiLGEpLHRoaXMucGFyZW50LnBvb2wuZXhwaXJlKGEpLHRoaXMucGFydGljbGVzLnNwbGljZShpLDEpKX19fSx7a2V5OlwiZGlzcGF0Y2hcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5kaXNwYXRjaEV2ZW50KHQsZSksdGhpcy5iaW5kRXZlbnQmJnRoaXMuZGlzcGF0Y2hFdmVudCh0LGUpfX0se2tleTpcImVtaXR0aW5nXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoXCJvbmNlXCI9PT10aGlzLnRvdGFsVGltZSl7dmFyIGU9dm9pZCAwLGk9dGhpcy5yYXRlLmdldFZhbHVlKDk5OTk5KTtmb3IoMDxpJiYodGhpcy5lbWl0U3BlZWQ9aSksZT0wO2U8aTtlKyspdGhpcy5jcmVhdGVQYXJ0aWNsZSgpO3RoaXMudG90YWxUaW1lPVwibm9uZVwifWVsc2UgaWYodGhpcy5lbWl0VGltZSs9dCx0aGlzLmVtaXRUaW1lPHRoaXMudG90YWxUaW1lKXt2YXIgYT10aGlzLnJhdGUuZ2V0VmFsdWUodCkscj12b2lkIDA7Zm9yKDA8YSYmKHRoaXMuZW1pdFNwZWVkPWEpLHI9MDtyPGE7cisrKXRoaXMuY3JlYXRlUGFydGljbGUoKX19fSx7a2V5OlwiY3JlYXRlUGFydGljbGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMucGFyZW50LnBvb2wuZ2V0KGopO3JldHVybiB0aGlzLnNldHVwUGFydGljbGUoaSx0LGUpLHRoaXMuZGlzcGF0Y2goXCJQQVJUSUNMRV9DUkVBVEVEXCIsaSksaX19LHtrZXk6XCJzZXR1cFBhcnRpY2xlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3ZhciBhPXRoaXMuaW5pdGlhbGl6ZXMscj10aGlzLmJlaGF2aW91cnM7ZSYmKGE9UC50b0FycmF5KGUpKSxpJiYocj1QLnRvQXJyYXkoaSkpLHQucmVzZXQoKSxYdC5pbml0aWFsaXplKHRoaXMsdCxhKSx0LmFkZEJlaGF2aW91cnMociksKHQucGFyZW50PXRoaXMpLnBhcnRpY2xlcy5wdXNoKHQpfX0se2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zdG9wKCksUC5kZXN0cm95QWxsKHRoaXMucGFydGljbGVzKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmRlYWQ9ITAsdGhpcy5yZW1vdmUoKSx0aGlzLnJlbW92ZUFsbEluaXRpYWxpemVycygpLHRoaXMucmVtb3ZlQWxsQmVoYXZpb3VycygpLHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5yZW1vdmVFbWl0dGVyKHRoaXMpfX1dKSxXdCk7ZnVuY3Rpb24gV3QoKXt2YXIgdD0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307byh0aGlzLFd0KTt0PWgodGhpcywoV3QuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoV3QpKS5jYWxsKHRoaXMsdCkpO3JldHVybiB0LnBhcnRpY2xlcz1bXSx0LmJlaGF2aW91cnM9W10sdC5pbml0aWFsaXplcz1bXSx0LmVtaXRUaW1lPTAsdC5lbWl0U3BlZWQ9MCx0LnRvdGFsVGltZT0tMSx0LmRhbXBpbmc9LjAwNix0LmJpbmRFbWl0dGVyPSEwLHQucmF0ZT1uZXcgSygxLC4xKSx0Lm5hbWU9XCJFbWl0dGVyXCIsdC5pZD1BLmlkKHQubmFtZSksdH1DLmJpbmQoWXQpO3ZhciBadD0ocihRdCxZdCksdChRdCxbe2tleTpcImFkZFNlbGZCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodCksaT0wO2k8dDtpKyspZVtpXT1hcmd1bWVudHNbaV07Zm9yKHZhciBhPXZvaWQgMCxyPWUubGVuZ3RoLGE9MDthPHI7YSsrKXt2YXIgbj1lW2FdO3RoaXMuc2VsZkJlaGF2aW91cnMucHVzaChuKSxuLmluaXRpYWxpemUodGhpcyl9fX0se2tleTpcInJlbW92ZVNlbGZCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbih0KXt0PXRoaXMuc2VsZkJlaGF2aW91cnMuaW5kZXhPZih0KTstMTx0JiZ0aGlzLnNlbGZCZWhhdmlvdXJzLnNwbGljZSh0LDEpfX0se2tleTpcInVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKG4oUXQucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKFF0LnByb3RvdHlwZSksXCJ1cGRhdGVcIix0aGlzKS5jYWxsKHRoaXMsdCksIXRoaXMuc2xlZXApZm9yKHZhciBlPXRoaXMuc2VsZkJlaGF2aW91cnMubGVuZ3RoLGk9dm9pZCAwLGk9MDtpPGU7aSsrKXRoaXMuc2VsZkJlaGF2aW91cnNbaV0uYXBwbHlCZWhhdmlvdXIodGhpcyx0LGkpfX1dKSxRdCk7ZnVuY3Rpb24gUXQodCl7byh0aGlzLFF0KTt0PWgodGhpcywoUXQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoUXQpKS5jYWxsKHRoaXMsdCkpO3JldHVybiB0LnNlbGZCZWhhdmlvdXJzPVtdLHR9dmFyIEt0PShyKEp0LFl0KSx0KEp0LFt7a2V5OlwiaW5pdEV2ZW50SGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLm1vdXNlbW92ZUhhbmRsZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGUubW91c2Vtb3ZlLmNhbGwoZSx0KX0sdGhpcy5tb3VzZWRvd25IYW5kbGVyPWZ1bmN0aW9uKHQpe3JldHVybiBlLm1vdXNlZG93bi5jYWxsKGUsdCl9LHRoaXMubW91c2V1cEhhbmRsZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGUubW91c2V1cC5jYWxsKGUsdCl9LHRoaXMubW91c2VUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMubW91c2Vtb3ZlSGFuZGxlciwhMSl9fSx7a2V5OlwiZW1pdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYWxsb3dFbWl0dGluZz0hMH19LHtrZXk6XCJzdG9wXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9hbGxvd0VtaXR0aW5nPSExfX0se2tleTpcIm1vdXNlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QubGF5ZXJYfHwwPT09dC5sYXllclg/KHRoaXMucC54Kz0odC5sYXllclgtdGhpcy5wLngpKnRoaXMuZWFzZSx0aGlzLnAueSs9KHQubGF5ZXJZLXRoaXMucC55KSp0aGlzLmVhc2UpOiF0Lm9mZnNldFgmJjAhPT10Lm9mZnNldFh8fCh0aGlzLnAueCs9KHQub2Zmc2V0WC10aGlzLnAueCkqdGhpcy5lYXNlLHRoaXMucC55Kz0odC5vZmZzZXRZLXRoaXMucC55KSp0aGlzLmVhc2UpLHRoaXMuX2FsbG93RW1pdHRpbmcmJm4oSnQucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKEp0LnByb3RvdHlwZSksXCJlbWl0XCIsdGhpcykuY2FsbCh0aGlzLFwib25jZVwiKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXtuKEp0LnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihKdC5wcm90b3R5cGUpLFwiZGVzdHJveVwiLHRoaXMpLmNhbGwodGhpcyksdGhpcy5tb3VzZVRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5tb3VzZW1vdmVIYW5kbGVyLCExKX19XSksSnQpO2Z1bmN0aW9uIEp0KHQsZSxpKXtvKHRoaXMsSnQpO2k9aCh0aGlzLChKdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihKdCkpLmNhbGwodGhpcyxpKSk7cmV0dXJuIGkubW91c2VUYXJnZXQ9UC5pbml0VmFsdWUodCx3aW5kb3cpLGkuZWFzZT1QLmluaXRWYWx1ZShlLC43KSxpLl9hbGxvd0VtaXR0aW5nPSExLGkuaW5pdEV2ZW50SGFuZGxlcigpLGl9dmFyICR0PSh0KHRlLFt7a2V5Olwic2V0U3Ryb2tlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0PTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09dD90OlwiIzAwMDAwMFwiLGU9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lP2U6MTt0aGlzLnN0cm9rZT17Y29sb3I6dCx0aGlua25lc3M6ZX19fSx7a2V5OlwiaW5pdEhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fcHJvdG9uVXBkYXRlSGFuZGxlcj1mdW5jdGlvbigpe2Uub25Qcm90b25VcGRhdGUuY2FsbChlKX0sdGhpcy5fcHJvdG9uVXBkYXRlQWZ0ZXJIYW5kbGVyPWZ1bmN0aW9uKCl7ZS5vblByb3RvblVwZGF0ZUFmdGVyLmNhbGwoZSl9LHRoaXMuX2VtaXR0ZXJBZGRlZEhhbmRsZXI9ZnVuY3Rpb24odCl7ZS5vbkVtaXR0ZXJBZGRlZC5jYWxsKGUsdCl9LHRoaXMuX2VtaXR0ZXJSZW1vdmVkSGFuZGxlcj1mdW5jdGlvbih0KXtlLm9uRW1pdHRlclJlbW92ZWQuY2FsbChlLHQpfSx0aGlzLl9wYXJ0aWNsZUNyZWF0ZWRIYW5kbGVyPWZ1bmN0aW9uKHQpe2Uub25QYXJ0aWNsZUNyZWF0ZWQuY2FsbChlLHQpfSx0aGlzLl9wYXJ0aWNsZVVwZGF0ZUhhbmRsZXI9ZnVuY3Rpb24odCl7ZS5vblBhcnRpY2xlVXBkYXRlLmNhbGwoZSx0KX0sdGhpcy5fcGFydGljbGVEZWFkSGFuZGxlcj1mdW5jdGlvbih0KXtlLm9uUGFydGljbGVEZWFkLmNhbGwoZSx0KX19fSx7a2V5OlwiaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKHQpeyh0aGlzLnBhcmVudD10KS5hZGRFdmVudExpc3RlbmVyKFwiUFJPVE9OX1VQREFURVwiLHRoaXMuX3Byb3RvblVwZGF0ZUhhbmRsZXIpLHQuYWRkRXZlbnRMaXN0ZW5lcihcIlBST1RPTl9VUERBVEVfQUZURVJcIix0aGlzLl9wcm90b25VcGRhdGVBZnRlckhhbmRsZXIpLHQuYWRkRXZlbnRMaXN0ZW5lcihcIkVNSVRURVJfQURERURcIix0aGlzLl9lbWl0dGVyQWRkZWRIYW5kbGVyKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJFTUlUVEVSX1JFTU9WRURcIix0aGlzLl9lbWl0dGVyUmVtb3ZlZEhhbmRsZXIpLHQuYWRkRXZlbnRMaXN0ZW5lcihcIlBBUlRJQ0xFX0NSRUFURURcIix0aGlzLl9wYXJ0aWNsZUNyZWF0ZWRIYW5kbGVyKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJQQVJUSUNMRV9VUERBVEVcIix0aGlzLl9wYXJ0aWNsZVVwZGF0ZUhhbmRsZXIpLHQuYWRkRXZlbnRMaXN0ZW5lcihcIlBBUlRJQ0xFX0RFQURcIix0aGlzLl9wYXJ0aWNsZURlYWRIYW5kbGVyKX19LHtrZXk6XCJyZXNpemVcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZSgpfX0se2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIlBST1RPTl9VUERBVEVcIix0aGlzLl9wcm90b25VcGRhdGVIYW5kbGVyKSx0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiUFJPVE9OX1VQREFURV9BRlRFUlwiLHRoaXMuX3Byb3RvblVwZGF0ZUFmdGVySGFuZGxlciksdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkVNSVRURVJfQURERURcIix0aGlzLl9lbWl0dGVyQWRkZWRIYW5kbGVyKSx0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRU1JVFRFUl9SRU1PVkVEXCIsdGhpcy5fZW1pdHRlclJlbW92ZWRIYW5kbGVyKSx0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiUEFSVElDTEVfQ1JFQVRFRFwiLHRoaXMuX3BhcnRpY2xlQ3JlYXRlZEhhbmRsZXIpLHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJQQVJUSUNMRV9VUERBVEVcIix0aGlzLl9wYXJ0aWNsZVVwZGF0ZUhhbmRsZXIpLHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJQQVJUSUNMRV9ERUFEXCIsdGhpcy5fcGFydGljbGVEZWFkSGFuZGxlciksdGhpcy5wYXJlbnQ9bnVsbH19LHtrZXk6XCJvblByb3RvblVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIm9uUHJvdG9uVXBkYXRlQWZ0ZXJcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJvbkVtaXR0ZXJBZGRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIm9uRW1pdHRlclJlbW92ZWRcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJvblBhcnRpY2xlQ3JlYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIm9uUGFydGljbGVVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJvblBhcnRpY2xlRGVhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7fX1dKSx0ZSk7ZnVuY3Rpb24gdGUodCxlKXtvKHRoaXMsdGUpLHRoaXMucG9vbD1uZXcgVCx0aGlzLmVsZW1lbnQ9dCx0aGlzLnN0cm9rZT1lLHRoaXMuY2lyY2xlQ29uZj17aXNDaXJjbGU6ITB9LHRoaXMuaW5pdEhhbmRsZXIoKSx0aGlzLm5hbWU9XCJCYXNlUmVuZGVyZXJcIn12YXIgZWU9KHIoaWUsJHQpLHQoaWUsW3trZXk6XCJyZXNpemVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuZWxlbWVudC53aWR0aD10LHRoaXMuZWxlbWVudC5oZWlnaHQ9ZX19LHtrZXk6XCJvblByb3RvblVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLDAsdGhpcy5lbGVtZW50LndpZHRoLHRoaXMuZWxlbWVudC5oZWlnaHQpfX0se2tleTpcIm9uUGFydGljbGVDcmVhdGVkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5ib2R5P3godC5ib2R5LHRoaXMuYWRkSW1nMkJvZHksdCk6dC5jb2xvcj10LmNvbG9yfHxcIiNmZjAwMDBcIn19LHtrZXk6XCJvblBhcnRpY2xlVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5ib2R5P3QuYm9keSBpbnN0YW5jZW9mIEltYWdlJiZ0aGlzLmRyYXdJbWFnZSh0KTp0aGlzLmRyYXdDaXJjbGUodCl9fSx7a2V5Olwib25QYXJ0aWNsZURlYWRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmJvZHk9bnVsbH19LHtrZXk6XCJhZGRJbWcyQm9keVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZS5ib2R5PXR9fSx7a2V5OlwiZHJhd0ltYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGUsaT10LmJvZHkud2lkdGgqdC5zY2FsZXwwLGE9dC5ib2R5LmhlaWdodCp0LnNjYWxlfDAscj10LnAueC1pLzIsbj10LnAueS1hLzI7dC5jb2xvcj8odC5kYXRhLmJ1ZmZlcnx8KHQuZGF0YS5idWZmZXI9dGhpcy5jcmVhdGVCdWZmZXIodC5ib2R5KSksKGU9dC5kYXRhLmJ1ZmZlci5nZXRDb250ZXh0KFwiMmRcIikpLmNsZWFyUmVjdCgwLDAsdC5kYXRhLmJ1ZmZlci53aWR0aCx0LmRhdGEuYnVmZmVyLmhlaWdodCksZS5nbG9iYWxBbHBoYT10LmFscGhhLGUuZHJhd0ltYWdlKHQuYm9keSwwLDApLGUuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwic291cmNlLWF0b3BcIixlLmZpbGxTdHlsZT1ILnJnYlRvSGV4KHQucmdiKSxlLmZpbGxSZWN0KDAsMCx0LmRhdGEuYnVmZmVyLndpZHRoLHQuZGF0YS5idWZmZXIuaGVpZ2h0KSxlLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj1cInNvdXJjZS1vdmVyXCIsZS5nbG9iYWxBbHBoYT0xLHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodC5kYXRhLmJ1ZmZlciwwLDAsdC5kYXRhLmJ1ZmZlci53aWR0aCx0LmRhdGEuYnVmZmVyLmhlaWdodCxyLG4saSxhKSk6KHRoaXMuY29udGV4dC5zYXZlKCksdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhPXQuYWxwaGEsdGhpcy5jb250ZXh0LnRyYW5zbGF0ZSh0LnAueCx0LnAueSksdGhpcy5jb250ZXh0LnJvdGF0ZShzLmRlZ3JlZVRyYW5zZm9ybSh0LnJvdGF0aW9uKSksdGhpcy5jb250ZXh0LnRyYW5zbGF0ZSgtdC5wLngsLXQucC55KSx0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHQuYm9keSwwLDAsdC5ib2R5LndpZHRoLHQuYm9keS5oZWlnaHQscixuLGksYSksdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhPTEsdGhpcy5jb250ZXh0LnJlc3RvcmUoKSl9fSx7a2V5OlwiZHJhd0NpcmNsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QucmdiP3RoaXMuY29udGV4dC5maWxsU3R5bGU9XCJyZ2JhKFwiK3QucmdiLnIrXCIsXCIrdC5yZ2IuZytcIixcIit0LnJnYi5iK1wiLFwiK3QuYWxwaGErXCIpXCI6dGhpcy5jb250ZXh0LmZpbGxTdHlsZT10LmNvbG9yLHRoaXMuY29udGV4dC5iZWdpblBhdGgoKSx0aGlzLmNvbnRleHQuYXJjKHQucC54LHQucC55LHQucmFkaXVzLDAsMipNYXRoLlBJLCEwKSx0aGlzLnN0cm9rZSYmKHRoaXMuY29udGV4dC5zdHJva2VTdHlsZT10aGlzLnN0cm9rZS5jb2xvcix0aGlzLmNvbnRleHQubGluZVdpZHRoPXRoaXMuc3Ryb2tlLnRoaW5rbmVzcyx0aGlzLmNvbnRleHQuc3Ryb2tlKCkpLHRoaXMuY29udGV4dC5jbG9zZVBhdGgoKSx0aGlzLmNvbnRleHQuZmlsbCgpfX0se2tleTpcImNyZWF0ZUJ1ZmZlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBJbWFnZSl7dmFyIGU9dC53aWR0aCtcIl9cIit0LmhlaWdodCxpPXRoaXMuYnVmZmVyQ2FjaGVbZV07cmV0dXJuIGl8fCgoaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpKS53aWR0aD10LndpZHRoLGkuaGVpZ2h0PXQuaGVpZ2h0LHRoaXMuYnVmZmVyQ2FjaGVbZV09aSksaX19fV0pLGllKTtmdW5jdGlvbiBpZSh0KXtvKHRoaXMsaWUpO3Q9aCh0aGlzLChpZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihpZSkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIHQuc3Ryb2tlPW51bGwsdC5jb250ZXh0PXQuZWxlbWVudC5nZXRDb250ZXh0KFwiMmRcIiksdC5idWZmZXJDYWNoZT17fSx0Lm5hbWU9XCJDYW52YXNSZW5kZXJlclwiLHR9dmFyIGFlPShyKHJlLCR0KSx0KHJlLFt7a2V5Olwib25QYXJ0aWNsZUNyZWF0ZWRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmJvZHk/eCh0LmJvZHksdGhpcy5hZGRJbWcyQm9keSx0KToodC5ib2R5PXRoaXMucG9vbC5nZXQodGhpcy5jaXJjbGVDb25mLHQpLHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0LmJvZHkpKX19LHtrZXk6XCJvblBhcnRpY2xlVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5ib2R5UmVhZHkodCkmJih0aGlzLnRyYW5zZm9ybTNkP3YudHJhbnNmb3JtM2QodC5ib2R5LHQucC54LHQucC55LHQuc2NhbGUsdC5yb3RhdGlvbik6di50cmFuc2Zvcm0odC5ib2R5LHQucC54LHQucC55LHQuc2NhbGUsdC5yb3RhdGlvbiksdC5ib2R5LnN0eWxlLm9wYWNpdHk9dC5hbHBoYSx0LmJvZHkuaXNDaXJjbGUmJih0LmJvZHkuc3R5bGUuYmFja2dyb3VuZENvbG9yPXQuY29sb3J8fFwiI2ZmMDAwMFwiKSl9fSx7a2V5Olwib25QYXJ0aWNsZURlYWRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmJvZHlSZWFkeSh0KSYmKHRoaXMuZWxlbWVudC5yZW1vdmVDaGlsZCh0LmJvZHkpLHRoaXMucG9vbC5leHBpcmUodC5ib2R5KSx0LmJvZHk9bnVsbCl9fSx7a2V5OlwiYm9keVJlYWR5XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuXCJvYmplY3RcIj09PWkodC5ib2R5KSYmdC5ib2R5JiYhdC5ib2R5LmlzSW5uZXJ9fSx7a2V5OlwiYWRkSW1nMkJvZHlcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UuZGVhZHx8KGUuYm9keT10aGlzLnBvb2wuZ2V0KHQsZSksdi5yZXNpemUoZS5ib2R5LHQud2lkdGgsdC5oZWlnaHQpLHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlLmJvZHkpKX19LHtrZXk6XCJjcmVhdGVCb2R5XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5pc0NpcmNsZT90aGlzLmNyZWF0ZUNpcmNsZShlKTp0aGlzLmNyZWF0ZVNwcml0ZSh0LGUpfX0se2tleTpcImNyZWF0ZUNpcmNsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXYuY3JlYXRlRGl2KHQuaWQrXCJfZG9tXCIsMip0LnJhZGl1cywyKnQucmFkaXVzKTtyZXR1cm4gZS5zdHlsZS5ib3JkZXJSYWRpdXM9dC5yYWRpdXMrXCJweFwiLHRoaXMuc3Ryb2tlJiYoZS5zdHlsZS5ib3JkZXJDb2xvcj10aGlzLnN0cm9rZS5jb2xvcixlLnN0eWxlLmJvcmRlcldpZHRoPXRoaXMuc3Ryb2tlLnRoaW5rbmVzcytcInB4XCIpLGUuaXNDaXJjbGU9ITAsZX19LHtrZXk6XCJjcmVhdGVTcHJpdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBpPVwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6dC5zcmMsdD12LmNyZWF0ZURpdihlLmlkK1wiX2RvbVwiLHQud2lkdGgsdC5oZWlnaHQpO3JldHVybiB0LnN0eWxlLmJhY2tncm91bmRJbWFnZT1cInVybChcIitpK1wiKVwiLHR9fV0pLHJlKTtmdW5jdGlvbiByZSh0KXtvKHRoaXMscmUpO3ZhciBpPWgodGhpcywocmUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YocmUpKS5jYWxsKHRoaXMsdCkpO3JldHVybiBpLnN0cm9rZT1udWxsLGkucG9vbC5jcmVhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gaS5jcmVhdGVCb2R5KHQsZSl9LGkuYWRkSW1nMkJvZHk9aS5hZGRJbWcyQm9keS5iaW5kKGkpLGkudHJhbnNmb3JtM2Q9ITEsaS5uYW1lPVwiRG9tUmVuZGVyZXJcIixpfXZhciBuZT0ocihzZSwkdCksdChzZSxbe2tleTpcIm9uUGFydGljbGVDcmVhdGVkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5ib2R5P3RoaXMuY3JlYXRlU3ByaXRlKHQpOnRoaXMuY3JlYXRlQ2lyY2xlKHQpLHRoaXMuZWxlbWVudC5hZGRDaGlsZCh0LmJvZHkpfX0se2tleTpcIm9uUGFydGljbGVVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmJvZHkmJih0LmJvZHkueD10LnAueCx0LmJvZHkueT10LnAueSx0LmJvZHkuYWxwaGE9dC5hbHBoYSx0LmJvZHkuc2NhbGVYPXQuYm9keS5zY2FsZVk9dC5zY2FsZSx0LmJvZHkucm90YXRpb249dC5yb3RhdGlvbil9fSx7a2V5Olwib25QYXJ0aWNsZURlYWRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmJvZHkmJih0LmJvZHkucGFyZW50JiZ0LmJvZHkucGFyZW50LnJlbW92ZUNoaWxkKHQuYm9keSksdGhpcy5wb29sLmV4cGlyZSh0LmJvZHkpLHQuYm9keT1udWxsKSx0LmdyYXBoaWNzJiZ0aGlzLnBvb2wuZXhwaXJlKHQuZ3JhcGhpY3MpfX0se2tleTpcImNyZWF0ZVNwcml0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuYm9keT10aGlzLnBvb2wuZ2V0KHQuYm9keSksdC5ib2R5LnBhcmVudHx8dC5ib2R5LmltYWdlJiYodC5ib2R5LnJlZ1g9dC5ib2R5LmltYWdlLndpZHRoLzIsdC5ib2R5LnJlZ1k9dC5ib2R5LmltYWdlLmhlaWdodC8yKX19LHtrZXk6XCJjcmVhdGVDaXJjbGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnBvb2wuZ2V0KGNyZWF0ZWpzLkdyYXBoaWNzKTt0aGlzLnN0cm9rZSYmKHRoaXMuc3Ryb2tlIGluc3RhbmNlb2YgU3RyaW5nP2UuYmVnaW5TdHJva2UodGhpcy5zdHJva2UpOmUuYmVnaW5TdHJva2UoXCIjMDAwMDAwXCIpKSxlLmJlZ2luRmlsbCh0LmNvbG9yfHxcIiNmZjAwMDBcIikuZHJhd0NpcmNsZSgwLDAsdC5yYWRpdXMpO3ZhciBpPXRoaXMucG9vbC5nZXQoY3JlYXRlanMuU2hhcGUsW2VdKTt0LmJvZHk9aSx0LmdyYXBoaWNzPWV9fV0pLHNlKTtmdW5jdGlvbiBzZSh0LGUpe28odGhpcyxzZSk7dD1oKHRoaXMsKHNlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHNlKSkuY2FsbCh0aGlzLHQpKTtyZXR1cm4gdC5zdHJva2U9ZSx0Lm5hbWU9XCJFYXNlbFJlbmRlcmVyXCIsdH12YXIgb2U9KHIoaGUsJHQpLHQoaGUsW3trZXk6XCJyZXNpemVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuZWxlbWVudC53aWR0aD10LHRoaXMuZWxlbWVudC5oZWlnaHQ9ZX19LHtrZXk6XCJjcmVhdGVJbWFnZURhdGFcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnJlY3RhbmdsZT10fHxuZXcgWigwLDAsdGhpcy5lbGVtZW50LndpZHRoLHRoaXMuZWxlbWVudC5oZWlnaHQpLHRoaXMuaW1hZ2VEYXRhPXRoaXMuY29udGV4dC5jcmVhdGVJbWFnZURhdGEodGhpcy5yZWN0YW5nbGUud2lkdGgsdGhpcy5yZWN0YW5nbGUuaGVpZ2h0KSx0aGlzLmNvbnRleHQucHV0SW1hZ2VEYXRhKHRoaXMuaW1hZ2VEYXRhLHRoaXMucmVjdGFuZ2xlLngsdGhpcy5yZWN0YW5nbGUueSl9fSx7a2V5Olwib25Qcm90b25VcGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY29udGV4dC5jbGVhclJlY3QodGhpcy5yZWN0YW5nbGUueCx0aGlzLnJlY3RhbmdsZS55LHRoaXMucmVjdGFuZ2xlLndpZHRoLHRoaXMucmVjdGFuZ2xlLmhlaWdodCksdGhpcy5pbWFnZURhdGE9dGhpcy5jb250ZXh0LmdldEltYWdlRGF0YSh0aGlzLnJlY3RhbmdsZS54LHRoaXMucmVjdGFuZ2xlLnksdGhpcy5yZWN0YW5nbGUud2lkdGgsdGhpcy5yZWN0YW5nbGUuaGVpZ2h0KX19LHtrZXk6XCJvblByb3RvblVwZGF0ZUFmdGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHQucHV0SW1hZ2VEYXRhKHRoaXMuaW1hZ2VEYXRhLHRoaXMucmVjdGFuZ2xlLngsdGhpcy5yZWN0YW5nbGUueSl9fSx7a2V5Olwib25QYXJ0aWNsZUNyZWF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJvblBhcnRpY2xlVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5pbWFnZURhdGEmJnRoaXMuc2V0UGl4ZWwodGhpcy5pbWFnZURhdGEsTWF0aC5mbG9vcih0LnAueC10aGlzLnJlY3RhbmdsZS54KSxNYXRoLmZsb29yKHQucC55LXRoaXMucmVjdGFuZ2xlLnkpLHQpfX0se2tleTpcInNldFBpeGVsXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSl7dmFyIHI9YS5yZ2I7ZTwwfHxlPnRoaXMuZWxlbWVudC53aWR0aHx8aTwwfHxpPnRoaXMuZWxlbWVudHdpZHRofHwoZT00KigoaT4+MCkqdC53aWR0aCsoZT4+MCkpLHQuZGF0YVtlXT1yLnIsdC5kYXRhWzErZV09ci5nLHQuZGF0YVsyK2VdPXIuYix0LmRhdGFbMytlXT0yNTUqYS5hbHBoYSl9fSx7a2V5Olwib25QYXJ0aWNsZURlYWRcIix2YWx1ZTpmdW5jdGlvbigpe319XSksaGUpO2Z1bmN0aW9uIGhlKHQsZSl7byh0aGlzLGhlKTt0PWgodGhpcywoaGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoaGUpKS5jYWxsKHRoaXMsdCkpO3JldHVybiB0LmNvbnRleHQ9dC5lbGVtZW50LmdldENvbnRleHQoXCIyZFwiKSx0LmltYWdlRGF0YT1udWxsLHQucmVjdGFuZ2xlPW51bGwsdC5yZWN0YW5nbGU9ZSx0LmNyZWF0ZUltYWdlRGF0YShlKSx0Lm5hbWU9XCJQaXhlbFJlbmRlcmVyXCIsdH12YXIgbGU9dm9pZCAwLHVlPShyKGNlLCR0KSx0KGNlLFt7a2V5Olwic2V0UElYSVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RyeXtsZT10fHx7U3ByaXRlOnt9fSx0aGlzLmNyZWF0ZUZyb21JbWFnZT1sZS5TcHJpdGUuZnJvbXx8bGUuU3ByaXRlLmZyb21JbWFnZX1jYXRjaCh0KXt9fX0se2tleTpcIm9uUHJvdG9uVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5Olwib25QYXJ0aWNsZUNyZWF0ZWRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmJvZHk/dC5ib2R5PXRoaXMucG9vbC5nZXQodC5ib2R5LHQpOnQuYm9keT10aGlzLnBvb2wuZ2V0KHRoaXMuY2lyY2xlQ29uZix0KSx0aGlzLmJsZW5kTW9kZSYmKHQuYm9keS5ibGVuZE1vZGU9dGhpcy5ibGVuZE1vZGUpLHRoaXMuZWxlbWVudC5hZGRDaGlsZCh0LmJvZHkpfX0se2tleTpcIm9uUGFydGljbGVVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnRyYW5zZm9ybSh0LHQuYm9keSksITAhPT10aGlzLnNldENvbG9yJiYhMCE9PXRoaXMuY29sb3J8fCh0LmJvZHkudGludD1ILmdldEhleDE2RnJvbVBhcnRpY2xlKHQpKX19LHtrZXk6XCJvblBhcnRpY2xlRGVhZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuZWxlbWVudC5yZW1vdmVDaGlsZCh0LmJvZHkpLHRoaXMucG9vbC5leHBpcmUodC5ib2R5KSx0LmJvZHk9bnVsbH19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24odCl7bihjZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoY2UucHJvdG90eXBlKSxcImRlc3Ryb3lcIix0aGlzKS5jYWxsKHRoaXMpLHRoaXMucG9vbC5kZXN0cm95KCk7Zm9yKHZhciBlPXQubGVuZ3RoO2UtLTspe3ZhciBpPXRbZV07aS5ib2R5JiZ0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQoaS5ib2R5KX19fSx7a2V5OlwidHJhbnNmb3JtXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLng9dC5wLngsZS55PXQucC55LGUuYWxwaGE9dC5hbHBoYSxlLnNjYWxlLng9dC5zY2FsZSxlLnNjYWxlLnk9dC5zY2FsZSxlLnJvdGF0aW9uPXQucm90YXRpb24qcy5QSV8xODB9fSx7a2V5OlwiY3JlYXRlQm9keVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaXNDaXJjbGU/dGhpcy5jcmVhdGVDaXJjbGUoZSk6dGhpcy5jcmVhdGVTcHJpdGUodCl9fSx7a2V5OlwiY3JlYXRlU3ByaXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dD10LmlzSW5uZXI/dGhpcy5jcmVhdGVGcm9tSW1hZ2UodC5zcmMpOm5ldyBsZS5TcHJpdGUodCk7cmV0dXJuIHQuYW5jaG9yLng9LjUsdC5hbmNob3IueT0uNSx0fX0se2tleTpcImNyZWF0ZUNpcmNsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlLGk9bmV3IGxlLkdyYXBoaWNzO3JldHVybiB0aGlzLnN0cm9rZSYmKGU9dGhpcy5zdHJva2UgaW5zdGFuY2VvZiBTdHJpbmc/dGhpcy5zdHJva2U6MCxpLmJlZ2luU3Ryb2tlKGUpKSxpLmJlZ2luRmlsbCh0LmNvbG9yfHwzNjA3NyksaS5kcmF3Q2lyY2xlKDAsMCx0LnJhZGl1cyksaS5lbmRGaWxsKCksaX19XSksY2UpO2Z1bmN0aW9uIGNlKHQsZSl7byh0aGlzLGNlKTt2YXIgaT1oKHRoaXMsKGNlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGNlKSkuY2FsbCh0aGlzLHQpKTtyZXR1cm4gaS5zdHJva2U9ZSxpLmNvbG9yPSExLGkuc2V0Q29sb3I9ITEsaS5ibGVuZE1vZGU9bnVsbCxpLnBvb2wuY3JlYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkuY3JlYXRlQm9keSh0LGUpfSxpLnNldFBJWEkod2luZG93LlBJWEkpLGkubmFtZT1cIlBpeGlSZW5kZXJlclwiLGl9dmFyIGRlPSh0KHllLFt7a2V5Olwic2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXswPT09ZT9YLnNldCh0LHRoaXMubWF0c1swXSk6WC5tdWx0aXBseSh0aGlzLm1hdHNbZS0xXSx0LHRoaXMubWF0c1tlXSksdGhpcy5zaXplPU1hdGgubWF4KHRoaXMuc2l6ZSxlKzEpfX0se2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0KXswPT09dGhpcy5zaXplP1guc2V0KHQsdGhpcy5tYXRzWzBdKTpYLm11bHRpcGx5KHRoaXMubWF0c1t0aGlzLnNpemUtMV0sdCx0aGlzLm1hdHNbdGhpcy5zaXplXSksdGhpcy5zaXplKyt9fSx7a2V5OlwicG9wXCIsdmFsdWU6ZnVuY3Rpb24oKXswPHRoaXMuc2l6ZSYmdGhpcy5zaXplLS19fSx7a2V5OlwidG9wXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXRzW3RoaXMuc2l6ZS0xXX19XSkseWUpO2Z1bmN0aW9uIHllKCl7byh0aGlzLHllKSx0aGlzLm1hdHM9W107Zm9yKHZhciB0PXRoaXMuc2l6ZT0wO3Q8MjA7dCsrKXRoaXMubWF0cy5wdXNoKFguY3JlYXRlKFswLDAsMCwwLDAsMCwwLDAsMF0pKX1yKHBlLCR0KSx0KHBlLFt7a2V5OlwiaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe24ocGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHBlLnByb3RvdHlwZSksXCJpbml0XCIsdGhpcykuY2FsbCh0aGlzLHQpLHRoaXMucmVzaXplKHRoaXMuZWxlbWVudC53aWR0aCx0aGlzLmVsZW1lbnQuaGVpZ2h0KX19LHtrZXk6XCJyZXNpemVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMudW1hdFs0XT0tMix0aGlzLnVtYXRbN109MSx0aGlzLnNtYXRbMF09MS90LHRoaXMuc21hdFs0XT0xL2UsdGhpcy5tc3RhY2suc2V0KHRoaXMudW1hdCwwKSx0aGlzLm1zdGFjay5zZXQodGhpcy5zbWF0LDEpLHRoaXMuZ2wudmlld3BvcnQoMCwwLHQsZSksdGhpcy5lbGVtZW50LndpZHRoPXQsdGhpcy5lbGVtZW50LmhlaWdodD1lfX0se2tleTpcInNldE1heFJhZGl1c1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuY2lyY2xlQ2FudmFzVVJMPXRoaXMuY3JlYXRlQ2lyY2xlKHQpfX0se2tleTpcImdldFZlcnRleFNoYWRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuW1widW5pZm9ybSB2ZWMyIHZpZXdwb3J0O1wiLFwiYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1wiLFwiYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDtcIixcInVuaWZvcm0gbWF0MyB0TWF0O1wiLFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXCJ2YXJ5aW5nIGZsb2F0IGFscGhhO1wiLFwidm9pZCBtYWluKCkge1wiLFwidmVjMyB2ID0gdE1hdCAqIHZlYzMoYVZlcnRleFBvc2l0aW9uLCAxLjApO1wiLFwiZ2xfUG9zaXRpb24gPSB2ZWM0KHYueCwgdi55LCAwLCAxKTtcIixcInZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkO1wiLFwiYWxwaGEgPSB0TWF0WzBdWzJdO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpfX0se2tleTpcImdldEZyYWdtZW50U2hhZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFwidmFyeWluZyBmbG9hdCBhbHBoYTtcIixcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFwidW5pZm9ybSB2ZWM0IGNvbG9yO1wiLFwidW5pZm9ybSBib29sIHVzZVRleHR1cmU7XCIsXCJ1bmlmb3JtIHZlYzMgdUNvbG9yO1wiLFwidm9pZCBtYWluKCkge1wiLFwidmVjNCB0ZXh0dXJlQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQpO1wiLFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZUNvbG9yICogdmVjNCh1Q29sb3IsIDEuMCk7XCIsXCJnbF9GcmFnQ29sb3IudyAqPSBhbHBoYTtcIixcIn1cIl0uam9pbihcIlxcblwiKX19LHtrZXk6XCJpbml0VmFyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm1zdGFjaz1uZXcgZGUsdGhpcy51bWF0PVguY3JlYXRlKFsyLDAsMSwwLC0yLDAsLTEsMSwxXSksdGhpcy5zbWF0PVguY3JlYXRlKFsuMDEsMCwxLDAsLjAxLDAsMCwwLDFdKSx0aGlzLnRleHR1cmVidWZmZXJzPXt9fX0se2tleTpcImJsZW5kRXF1YXRpb25cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmdsLmJsZW5kRXF1YXRpb24odGhpcy5nbFt0XSl9fSx7a2V5OlwiYmxlbmRGdW5jXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLmdsLmJsZW5kRnVuYyh0aGlzLmdsW3RdLHRoaXMuZ2xbZV0pfX0se2tleTpcImdldFNoYWRlclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXtpPWk/dC5jcmVhdGVTaGFkZXIodC5GUkFHTUVOVF9TSEFERVIpOnQuY3JlYXRlU2hhZGVyKHQuVkVSVEVYX1NIQURFUik7cmV0dXJuIHQuc2hhZGVyU291cmNlKGksZSksdC5jb21waWxlU2hhZGVyKGkpLHQuZ2V0U2hhZGVyUGFyYW1ldGVyKGksdC5DT01QSUxFX1NUQVRVUyk/aTooYWxlcnQodC5nZXRTaGFkZXJJbmZvTG9nKGkpKSxudWxsKX19LHtrZXk6XCJpbml0U2hhZGVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRTaGFkZXIodGhpcy5nbCx0aGlzLmdldEZyYWdtZW50U2hhZGVyKCksITApLGU9dGhpcy5nZXRTaGFkZXIodGhpcy5nbCx0aGlzLmdldFZlcnRleFNoYWRlcigpLCExKTt0aGlzLnNwcm9ncmFtPXRoaXMuZ2wuY3JlYXRlUHJvZ3JhbSgpLHRoaXMuZ2wuYXR0YWNoU2hhZGVyKHRoaXMuc3Byb2dyYW0sZSksdGhpcy5nbC5hdHRhY2hTaGFkZXIodGhpcy5zcHJvZ3JhbSx0KSx0aGlzLmdsLmxpbmtQcm9ncmFtKHRoaXMuc3Byb2dyYW0pLHRoaXMuZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcih0aGlzLnNwcm9ncmFtLHRoaXMuZ2wuTElOS19TVEFUVVMpfHxhbGVydChcIkNvdWxkIG5vdCBpbml0aWFsaXNlIHNoYWRlcnNcIiksdGhpcy5nbC51c2VQcm9ncmFtKHRoaXMuc3Byb2dyYW0pLHRoaXMuc3Byb2dyYW0udnBhPXRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5zcHJvZ3JhbSxcImFWZXJ0ZXhQb3NpdGlvblwiKSx0aGlzLnNwcm9ncmFtLnRjYT10aGlzLmdsLmdldEF0dHJpYkxvY2F0aW9uKHRoaXMuc3Byb2dyYW0sXCJhVGV4dHVyZUNvb3JkXCIpLHRoaXMuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5zcHJvZ3JhbS50Y2EpLHRoaXMuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5zcHJvZ3JhbS52cGEpLHRoaXMuc3Byb2dyYW0udE1hdFVuaWZvcm09dGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5zcHJvZ3JhbSxcInRNYXRcIiksdGhpcy5zcHJvZ3JhbS5zYW1wbGVyVW5pZm9ybT10aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNwcm9ncmFtLFwidVNhbXBsZXJcIiksdGhpcy5zcHJvZ3JhbS51c2VUZXg9dGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5zcHJvZ3JhbSxcInVzZVRleHR1cmVcIiksdGhpcy5zcHJvZ3JhbS5jb2xvcj10aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNwcm9ncmFtLFwidUNvbG9yXCIpLHRoaXMuZ2wudW5pZm9ybTFpKHRoaXMuc3Byb2dyYW0udXNlVGV4LDEpfX0se2tleTpcImluaXRCdWZmZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdDt0aGlzLnVuaXRJQnVmZmVyPXRoaXMuZ2wuY3JlYXRlQnVmZmVyKCksdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdGhpcy51bml0SUJ1ZmZlciksdGhpcy5nbC5idWZmZXJEYXRhKHRoaXMuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsbmV3IFVpbnQxNkFycmF5KFswLDMsMSwwLDIsM10pLHRoaXMuZ2wuU1RBVElDX0RSQVcpO2Zvcih2YXIgZT12b2lkIDAsaT1bXSxlPTA7ZTwxMDA7ZSsrKWkucHVzaChlKTtmb3IodD1uZXcgVWludDE2QXJyYXkoaSksdGhpcy51bml0STMzPXRoaXMuZ2wuY3JlYXRlQnVmZmVyKCksdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdGhpcy51bml0STMzKSx0aGlzLmdsLmJ1ZmZlckRhdGEodGhpcy5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUix0LHRoaXMuZ2wuU1RBVElDX0RSQVcpLGk9W10sZT0wO2U8MTAwO2UrKylpLnB1c2goZSxlKzEsZSsyKTt0PW5ldyBVaW50MTZBcnJheShpKSx0aGlzLnN0cmlwQnVmZmVyPXRoaXMuZ2wuY3JlYXRlQnVmZmVyKCksdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdGhpcy5zdHJpcEJ1ZmZlciksdGhpcy5nbC5idWZmZXJEYXRhKHRoaXMuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdCx0aGlzLmdsLlNUQVRJQ19EUkFXKX19LHtrZXk6XCJjcmVhdGVDaXJjbGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmNpcmNsZUNhbnZhc1JhZGl1cz1jKFAuaW5pdFZhbHVlKHQsMzIpKTt2YXIgZT12LmNyZWF0ZUNhbnZhcyhcImNpcmNsZV9jYW52YXNcIiwyKnRoaXMuY2lyY2xlQ2FudmFzUmFkaXVzLDIqdGhpcy5jaXJjbGVDYW52YXNSYWRpdXMpLHQ9ZS5nZXRDb250ZXh0KFwiMmRcIik7cmV0dXJuIHQuYmVnaW5QYXRoKCksdC5hcmModGhpcy5jaXJjbGVDYW52YXNSYWRpdXMsdGhpcy5jaXJjbGVDYW52YXNSYWRpdXMsdGhpcy5jaXJjbGVDYW52YXNSYWRpdXMsMCwyKk1hdGguUEksITApLHQuY2xvc2VQYXRoKCksdC5maWxsU3R5bGU9XCIjRkZGXCIsdC5maWxsKCksZS50b0RhdGFVUkwoKX19LHtrZXk6XCJkcmF3SW1nMkNhbnZhc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuYm9keS53aWR0aCxpPXQuYm9keS5oZWlnaHQsYT1jKHQuYm9keS53aWR0aCkscj1jKHQuYm9keS5oZWlnaHQpLG49dC5ib2R5LndpZHRoL2Escz10LmJvZHkuaGVpZ2h0L3I7dGhpcy50ZXh0dXJlYnVmZmVyc1t0LmRhdGEuc3JjXXx8KHRoaXMudGV4dHVyZWJ1ZmZlcnNbdC5kYXRhLnNyY109W3RoaXMuZ2wuY3JlYXRlVGV4dHVyZSgpLHRoaXMuZ2wuY3JlYXRlQnVmZmVyKCksdGhpcy5nbC5jcmVhdGVCdWZmZXIoKV0pLHQuZGF0YS50ZXh0dXJlPXRoaXMudGV4dHVyZWJ1ZmZlcnNbdC5kYXRhLnNyY11bMF0sdC5kYXRhLnZjQnVmZmVyPXRoaXMudGV4dHVyZWJ1ZmZlcnNbdC5kYXRhLnNyY11bMV0sdC5kYXRhLnRjQnVmZmVyPXRoaXMudGV4dHVyZWJ1ZmZlcnNbdC5kYXRhLnNyY11bMl0sdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLHQuZGF0YS50Y0J1ZmZlciksdGhpcy5nbC5idWZmZXJEYXRhKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLG5ldyBGbG9hdDMyQXJyYXkoWzAsMCxuLDAsMCxzLHMsc10pLHRoaXMuZ2wuU1RBVElDX0RSQVcpLHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkFSUkFZX0JVRkZFUix0LmRhdGEudmNCdWZmZXIpLHRoaXMuZ2wuYnVmZmVyRGF0YSh0aGlzLmdsLkFSUkFZX0JVRkZFUixuZXcgRmxvYXQzMkFycmF5KFswLDAsZSwwLDAsaSxlLGldKSx0aGlzLmdsLlNUQVRJQ19EUkFXKTtyPXQuZGF0YS5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLmdldEltYWdlRGF0YSgwLDAsYSxyKTt0aGlzLmdsLmJpbmRUZXh0dXJlKHRoaXMuZ2wuVEVYVFVSRV8yRCx0LmRhdGEudGV4dHVyZSksdGhpcy5nbC50ZXhJbWFnZTJEKHRoaXMuZ2wuVEVYVFVSRV8yRCwwLHRoaXMuZ2wuUkdCQSx0aGlzLmdsLlJHQkEsdGhpcy5nbC5VTlNJR05FRF9CWVRFLHIpLHRoaXMuZ2wudGV4UGFyYW1ldGVyaSh0aGlzLmdsLlRFWFRVUkVfMkQsdGhpcy5nbC5URVhUVVJFX01BR19GSUxURVIsdGhpcy5nbC5MSU5FQVIpLHRoaXMuZ2wudGV4UGFyYW1ldGVyaSh0aGlzLmdsLlRFWFRVUkVfMkQsdGhpcy5nbC5URVhUVVJFX01JTl9GSUxURVIsdGhpcy5nbC5MSU5FQVJfTUlQTUFQX05FQVJFU1QpLHRoaXMuZ2wuZ2VuZXJhdGVNaXBtYXAodGhpcy5nbC5URVhUVVJFXzJEKSx0LmRhdGEudGV4dHVyZUxvYWRlZD0hMCx0LmRhdGEudGV4dHVyZVdpZHRoPWUsdC5kYXRhLnRleHR1cmVIZWlnaHQ9aX19LHtrZXk6XCJvblByb3RvblVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIm9uUGFydGljbGVDcmVhdGVkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5kYXRhLnRleHR1cmVMb2FkZWQ9ITEsdC5kYXRhLnRtYXQ9WC5jcmVhdGUoKSx0LmRhdGEudG1hdFs4XT0xLHQuZGF0YS5pbWF0PVguY3JlYXRlKCksdC5kYXRhLmltYXRbOF09MSx0LmJvZHk/eCh0LmJvZHksdGhpcy5hZGRJbWcyQm9keSx0KTooeCh0aGlzLmNpcmNsZUNhbnZhc1VSTCx0aGlzLmFkZEltZzJCb2R5LHQpLHQuZGF0YS5vbGRTY2FsZT10LnJhZGl1cy90aGlzLmNpcmNsZUNhbnZhc1JhZGl1cyl9fSx7a2V5OlwiYWRkSW1nMkJvZHlcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UuZGVhZHx8KGUuYm9keT10LGUuZGF0YS5zcmM9dC5zcmMsZS5kYXRhLmNhbnZhcz1rKHQpLGUuZGF0YS5vbGRTY2FsZT0xLHRoaXMuZHJhd0ltZzJDYW52YXMoZSkpfX0se2tleTpcIm9uUGFydGljbGVVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmRhdGEudGV4dHVyZUxvYWRlZCYmKHRoaXMudXBkYXRlTWF0cml4KHQpLHRoaXMuZ2wudW5pZm9ybTNmKHRoaXMuc3Byb2dyYW0uY29sb3IsdC5yZ2Iuci8yNTUsdC5yZ2IuZy8yNTUsdC5yZ2IuYi8yNTUpLHRoaXMuZ2wudW5pZm9ybU1hdHJpeDNmdih0aGlzLnNwcm9ncmFtLnRNYXRVbmlmb3JtLCExLHRoaXMubXN0YWNrLnRvcCgpKSx0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5BUlJBWV9CVUZGRVIsdC5kYXRhLnZjQnVmZmVyKSx0aGlzLmdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5zcHJvZ3JhbS52cGEsMix0aGlzLmdsLkZMT0FULCExLDAsMCksdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLHQuZGF0YS50Y0J1ZmZlciksdGhpcy5nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuc3Byb2dyYW0udGNhLDIsdGhpcy5nbC5GTE9BVCwhMSwwLDApLHRoaXMuZ2wuYmluZFRleHR1cmUodGhpcy5nbC5URVhUVVJFXzJELHQuZGF0YS50ZXh0dXJlKSx0aGlzLmdsLnVuaWZvcm0xaSh0aGlzLnNwcm9ncmFtLnNhbXBsZXJVbmlmb3JtLDApLHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHRoaXMudW5pdElCdWZmZXIpLHRoaXMuZ2wuZHJhd0VsZW1lbnRzKHRoaXMuZ2wuVFJJQU5HTEVTLDYsdGhpcy5nbC5VTlNJR05FRF9TSE9SVCwwKSx0aGlzLm1zdGFjay5wb3AoKSl9fSx7a2V5Olwib25QYXJ0aWNsZURlYWRcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJ1cGRhdGVNYXRyaXhcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1kKC10LmRhdGEudGV4dHVyZVdpZHRoLzIsLXQuZGF0YS50ZXh0dXJlSGVpZ2h0LzIpLGk9ZCh0LnAueCx0LnAueSksYT10LnJvdGF0aW9uKnMuUElfMTgwLHI9eShhKSxhPXQuc2NhbGUqdC5kYXRhLm9sZFNjYWxlLGE9cChhLGEpLGE9ZihlLGEpLGE9ZihhLHIpO2E9ZihhLGkpLFguaW52ZXJzZShhLHQuZGF0YS5pbWF0KSxhWzJdPXQuYWxwaGEsdGhpcy5tc3RhY2sucHVzaChhKX19XSksQz1wZTtmdW5jdGlvbiBwZSh0KXtvKHRoaXMscGUpO3Q9aCh0aGlzLChwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihwZSkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIHQuZ2w9dC5lbGVtZW50LmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIix7YW50aWFsaWFzOiEwLHN0ZW5jaWw6ITEsZGVwdGg6ITF9KSx0LmdsfHxhbGVydChcIlNvcnJ5IHlvdXIgYnJvd3NlciBkbyBub3Qgc3VwcGVzdCBXZWJHTCFcIiksdC5pbml0VmFyKCksdC5zZXRNYXhSYWRpdXMoKSx0LmluaXRTaGFkZXJzKCksdC5pbml0QnVmZmVycygpLHQuZ2wuYmxlbmRFcXVhdGlvbih0LmdsLkZVTkNfQUREKSx0LmdsLmJsZW5kRnVuYyh0LmdsLlNSQ19BTFBIQSx0LmdsLk9ORV9NSU5VU19TUkNfQUxQSEEpLHQuZ2wuZW5hYmxlKHQuZ2wuQkxFTkQpLHQuYWRkSW1nMkJvZHk9dC5hZGRJbWcyQm9keS5iaW5kKHQpLHQubmFtZT1cIldlYkdMUmVuZGVyZXJcIix0fXIoZmUsJHQpLCR0PWZlO2Z1bmN0aW9uIGZlKHQpe28odGhpcyxmZSk7dD1oKHRoaXMsKGZlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGZlKSkuY2FsbCh0aGlzLHQpKTtyZXR1cm4gdC5uYW1lPVwiQ3VzdG9tUmVuZGVyZXJcIix0fXZhciB2ZT0ocihnZSxhdCksdChnZSxbe2tleTpcImdldFBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5kb209TWF0aC5yYW5kb20oKSx0aGlzLnZlY3Rvci54PXRoaXMueDErdGhpcy5yYW5kb20qdGhpcy5sZW5ndGgqTWF0aC5jb3ModGhpcy5ncmFkaWVudCksdGhpcy52ZWN0b3IueT10aGlzLnkxK3RoaXMucmFuZG9tKnRoaXMubGVuZ3RoKk1hdGguc2luKHRoaXMuZ3JhZGllbnQpLHRoaXMudmVjdG9yfX0se2tleTpcImdldERpcmVjdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5keSxhPS10aGlzLmR4O3JldHVybiAwPChpKnQrYSplK3RoaXMuZG90KSooMD09YT8xOmEpfX0se2tleTpcImdldERpc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4odGhpcy5keSp0Ky10aGlzLmR4KmUrdGhpcy5kb3QpL01hdGguc3FydCh0aGlzLnh4eXkpfX0se2tleTpcImdldFN5bW1ldHJpY1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0R3JhZGllbnQoKSxpPTIqKHRoaXMuZ2V0R3JhZGllbnQoKS1lKSxhPXQueCxlPXQueTtyZXR1cm4gdC54PWEqTWF0aC5jb3MoaSktZSpNYXRoLnNpbihpKSx0Lnk9YSpNYXRoLnNpbihpKStlKk1hdGguY29zKGkpLHR9fSx7a2V5OlwiZ2V0R3JhZGllbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLmF0YW4yKHRoaXMuZHksdGhpcy5keCl9fSx7a2V5OlwicmFuZ2VPdXRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZihNYXRoLmFicyh0aGlzLmdldEdyYWRpZW50KCkpPD1zLlBJLzQpe2lmKHQucC54PD10aGlzLm1heHgmJnQucC54Pj10aGlzLm1pbngpcmV0dXJuITB9ZWxzZSBpZih0LnAueTw9dGhpcy5tYXh5JiZ0LnAueT49dGhpcy5taW55KXJldHVybiEwO3JldHVybiExfX0se2tleTpcImdldExlbmd0aFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLmR4KnRoaXMuZHgrdGhpcy5keSp0aGlzLmR5KX19LHtrZXk6XCJjcm9zc2luZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe1wiZGVhZFwiPT09dGhpcy5jcm9zc1R5cGU/XCI+XCI9PT10aGlzLmRpcmVjdGlvbnx8XCJSXCI9PT10aGlzLmRpcmVjdGlvbnx8XCJyaWdodFwiPT09dGhpcy5kaXJlY3Rpb258fFwiZG93blwiPT09dGhpcy5kaXJlY3Rpb24/dGhpcy5yYW5nZU91dCh0KSYmdGhpcy5nZXREaXJlY3Rpb24odC5wLngsdC5wLnkpJiYodC5kZWFkPSEwKTp0aGlzLnJhbmdlT3V0KHQpJiYodGhpcy5nZXREaXJlY3Rpb24odC5wLngsdC5wLnkpfHwodC5kZWFkPSEwKSk6XCJib3VuZFwiPT09dGhpcy5jcm9zc1R5cGU/dGhpcy5yYW5nZU91dCh0KSYmdGhpcy5nZXREaXN0YW5jZSh0LnAueCx0LnAueSk8PXQucmFkaXVzJiYoMD09PXRoaXMuZHg/dC52LngqPS0xOjA9PT10aGlzLmR5P3Qudi55Kj0tMTp0aGlzLmdldFN5bW1ldHJpYyh0LnYpKTpcImNyb3NzXCI9PT10aGlzLmNyb3NzVHlwZSYmdGhpcy5hbGVydCYmKGNvbnNvbGUuZXJyb3IoXCJTb3JyeSwgTGluZVpvbmUgZG9lcyBub3Qgc3VwcG9ydCBjcm9zcyBtZXRob2QhXCIpLHRoaXMuYWxlcnQ9ITEpfX1dKSxnZSk7ZnVuY3Rpb24gZ2UodCxlLGksYSxyKXtvKHRoaXMsZ2UpO3ZhciBuPWgodGhpcywoZ2UuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2UpKS5jYWxsKHRoaXMpKTtyZXR1cm4gMDw9aS10PyhuLngxPXQsbi55MT1lLG4ueDI9aSxuLnkyPWEpOihuLngxPWksbi55MT1hLG4ueDI9dCxuLnkyPWUpLG4uZHg9bi54Mi1uLngxLG4uZHk9bi55Mi1uLnkxLG4ubWlueD1NYXRoLm1pbihuLngxLG4ueDIpLG4ubWlueT1NYXRoLm1pbihuLnkxLG4ueTIpLG4ubWF4eD1NYXRoLm1heChuLngxLG4ueDIpLG4ubWF4eT1NYXRoLm1heChuLnkxLG4ueTIpLG4uZG90PW4ueDIqbi55MS1uLngxKm4ueTIsbi54eHl5PW4uZHgqbi5keCtuLmR5Km4uZHksbi5ncmFkaWVudD1uLmdldEdyYWRpZW50KCksbi5sZW5ndGg9bi5nZXRMZW5ndGgoKSxuLmRpcmVjdGlvbj1QLmluaXRWYWx1ZShyLFwiPlwiKSxufXZhciBtZT0ocihiZSxhdCksdChiZSxbe2tleTpcImdldFBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hbmdsZT1zLlBJeDIqTWF0aC5yYW5kb20oKSx0aGlzLnJhbmRvbVJhZGl1cz1NYXRoLnJhbmRvbSgpKnRoaXMucmFkaXVzLHRoaXMudmVjdG9yLng9dGhpcy54K3RoaXMucmFuZG9tUmFkaXVzKk1hdGguY29zKHRoaXMuYW5nbGUpLHRoaXMudmVjdG9yLnk9dGhpcy55K3RoaXMucmFuZG9tUmFkaXVzKk1hdGguc2luKHRoaXMuYW5nbGUpLHRoaXMudmVjdG9yfX0se2tleTpcInNldENlbnRlclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5jZW50ZXIueD10LHRoaXMuY2VudGVyLnk9ZX19LHtrZXk6XCJjcm9zc2luZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQucC5kaXN0YW5jZVRvKHRoaXMuY2VudGVyKTtcImRlYWRcIj09PXRoaXMuY3Jvc3NUeXBlP2UtdC5yYWRpdXM+dGhpcy5yYWRpdXMmJih0LmRlYWQ9ITApOlwiYm91bmRcIj09PXRoaXMuY3Jvc3NUeXBlP2UrdC5yYWRpdXM+PXRoaXMucmFkaXVzJiZ0aGlzLmdldFN5bW1ldHJpYyh0KTpcImNyb3NzXCI9PT10aGlzLmNyb3NzVHlwZSYmdGhpcy5hbGVydCYmKGNvbnNvbGUuZXJyb3IoXCJTb3JyeSwgQ2lyY2xlWm9uZSBkb2VzIG5vdCBzdXBwb3J0IGNyb3NzIG1ldGhvZCFcIiksdGhpcy5hbGVydD0hMSl9fSx7a2V5OlwiZ2V0U3ltbWV0cmljXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC52LmdldEdyYWRpZW50KCksaT0yKih0aGlzLmdldEdyYWRpZW50KHQpLWUpLGE9dC52LngsZT10LnYueTt0LnYueD1hKk1hdGguY29zKGkpLWUqTWF0aC5zaW4oaSksdC52Lnk9YSpNYXRoLnNpbihpKStlKk1hdGguY29zKGkpfX0se2tleTpcImdldEdyYWRpZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuLXMuUElfMitNYXRoLmF0YW4yKHQucC55LXRoaXMuY2VudGVyLnksdC5wLngtdGhpcy5jZW50ZXIueCl9fV0pLGJlKTtmdW5jdGlvbiBiZSh0LGUsaSl7byh0aGlzLGJlKTt2YXIgYT1oKHRoaXMsKGJlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGJlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIGEueD10LGEueT1lLGEucmFkaXVzPWksYS5hbmdsZT0wLGEuY2VudGVyPXt4OnQseTplfSxhfXZhciBfZT0ocih4ZSxhdCksdCh4ZSxbe2tleTpcImdldFBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZWN0b3IueD10aGlzLngrTWF0aC5yYW5kb20oKSp0aGlzLndpZHRoLHRoaXMudmVjdG9yLnk9dGhpcy55K01hdGgucmFuZG9tKCkqdGhpcy5oZWlnaHQsdGhpcy52ZWN0b3J9fSx7a2V5OlwiY3Jvc3NpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXtcImRlYWRcIj09PXRoaXMuY3Jvc3NUeXBlPygodC5wLngrdC5yYWRpdXM8dGhpcy54fHx0LnAueC10LnJhZGl1cz50aGlzLngrdGhpcy53aWR0aCkmJih0LmRlYWQ9ITApLCh0LnAueSt0LnJhZGl1czx0aGlzLnl8fHQucC55LXQucmFkaXVzPnRoaXMueSt0aGlzLmhlaWdodCkmJih0LmRlYWQ9ITApKTpcImJvdW5kXCI9PT10aGlzLmNyb3NzVHlwZT8odC5wLngtdC5yYWRpdXM8dGhpcy54Pyh0LnAueD10aGlzLngrdC5yYWRpdXMsdC52LngqPS0xKTp0LnAueCt0LnJhZGl1cz50aGlzLngrdGhpcy53aWR0aCYmKHQucC54PXRoaXMueCt0aGlzLndpZHRoLXQucmFkaXVzLHQudi54Kj0tMSksdC5wLnktdC5yYWRpdXM8dGhpcy55Pyh0LnAueT10aGlzLnkrdC5yYWRpdXMsdC52LnkqPS0xKTp0LnAueSt0LnJhZGl1cz50aGlzLnkrdGhpcy5oZWlnaHQmJih0LnAueT10aGlzLnkrdGhpcy5oZWlnaHQtdC5yYWRpdXMsdC52LnkqPS0xKSk6XCJjcm9zc1wiPT09dGhpcy5jcm9zc1R5cGUmJih0LnAueCt0LnJhZGl1czx0aGlzLngmJnQudi54PD0wP3QucC54PXRoaXMueCt0aGlzLndpZHRoK3QucmFkaXVzOnQucC54LXQucmFkaXVzPnRoaXMueCt0aGlzLndpZHRoJiYwPD10LnYueCYmKHQucC54PXRoaXMueC10LnJhZGl1cyksdC5wLnkrdC5yYWRpdXM8dGhpcy55JiZ0LnYueTw9MD90LnAueT10aGlzLnkrdGhpcy5oZWlnaHQrdC5yYWRpdXM6dC5wLnktdC5yYWRpdXM+dGhpcy55K3RoaXMuaGVpZ2h0JiYwPD10LnYueSYmKHQucC55PXRoaXMueS10LnJhZGl1cykpfX1dKSx4ZSk7ZnVuY3Rpb24geGUodCxlLGksYSl7byh0aGlzLHhlKTt2YXIgcj1oKHRoaXMsKHhlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHhlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHIueD10LHIueT1lLHIud2lkdGg9aSxyLmhlaWdodD1hLHJ9cihrZSxhdCksdChrZSxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSl7dGhpcy5pbWFnZURhdGE9dCx0aGlzLng9UC5pbml0VmFsdWUoZSwwKSx0aGlzLnk9UC5pbml0VmFsdWUoaSwwKSx0aGlzLmQ9UC5pbml0VmFsdWUoYSwyKSx0aGlzLnZlY3RvcnM9W10sdGhpcy5zZXRWZWN0b3JzKCl9fSx7a2V5Olwic2V0VmVjdG9yc1wiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXZvaWQgMCxlPXZvaWQgMCxpPXRoaXMuaW1hZ2VEYXRhLndpZHRoLGE9dGhpcy5pbWFnZURhdGEuaGVpZ2h0LHQ9MDt0PGk7dCs9dGhpcy5kKWZvcihlPTA7ZTxhO2UrPXRoaXMuZCl7dmFyIHI9NCooKGU+PjApKmkrKHQ+PjApKTswPHRoaXMuaW1hZ2VEYXRhLmRhdGFbMytyXSYmdGhpcy52ZWN0b3JzLnB1c2goe3g6dCt0aGlzLngseTplK3RoaXMueX0pfXJldHVybiB0aGlzLnZlY3Rvcn19LHtrZXk6XCJnZXRCb3VuZFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dD00KigoZT4+MCkqdGhpcy5pbWFnZURhdGEud2lkdGgrKHQ+PjApKTtyZXR1cm4gMDx0aGlzLmltYWdlRGF0YS5kYXRhWzMrdF19fSx7a2V5OlwiZ2V0UG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PVAuZ2V0UmFuZEZyb21BcnJheSh0aGlzLnZlY3RvcnMpO3JldHVybiB0aGlzLnZlY3Rvci5jb3B5KHQpfX0se2tleTpcImdldENvbG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0LT10aGlzLng7dD00KigoKGUtPXRoaXMueSk+PjApKnRoaXMuaW1hZ2VEYXRhLndpZHRoKyh0Pj4wKSk7cmV0dXJue3I6dGhpcy5pbWFnZURhdGEuZGF0YVt0XSxnOnRoaXMuaW1hZ2VEYXRhLmRhdGFbMSt0XSxiOnRoaXMuaW1hZ2VEYXRhLmRhdGFbMit0XSxhOnRoaXMuaW1hZ2VEYXRhLmRhdGFbMyt0XX19fSx7a2V5OlwiY3Jvc3NpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXtcImRlYWRcIj09PXRoaXMuY3Jvc3NUeXBlP3RoaXMuZ2V0Qm91bmQodC5wLngtdGhpcy54LHQucC55LXRoaXMueSk/dC5kZWFkPSEwOnQuZGVhZD0hMTpcImJvdW5kXCI9PT10aGlzLmNyb3NzVHlwZSYmKHRoaXMuZ2V0Qm91bmQodC5wLngtdGhpcy54LHQucC55LXRoaXMueSl8fHQudi5uZWdhdGUoKSl9fV0pLHI9a2U7ZnVuY3Rpb24ga2UodCxlLGksYSl7byh0aGlzLGtlKTt2YXIgcj1oKHRoaXMsKGtlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGtlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHIucmVzZXQodCxlLGksYSkscn10PXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKHQsZSl7dC5hZGRFdmVudExpc3RlbmVyKFwiUFJPVE9OX1VQREFURV9BRlRFUlwiLGZ1bmN0aW9uKCl7cmV0dXJuIGUoKX0pfSxnZXRTdHlsZTpmdW5jdGlvbih0KXt0PUguaGV4VG9SZ2IoMDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT10P3Q6XCIjZmYwMDAwXCIpO3JldHVyblwicmdiYShcIit0LnIrXCIsIFwiK3QuZytcIiwgXCIrdC5iK1wiLCAwLjUpXCJ9LGRyYXdab25lOmZ1bmN0aW9uKHQsZSxpLGEpe3ZhciByPWUuZ2V0Q29udGV4dChcIjJkXCIpLG49dGhpcy5nZXRTdHlsZSgpO3RoaXMuYWRkRXZlbnRMaXN0ZW5lcih0LGZ1bmN0aW9uKCl7YSYmci5jbGVhclJlY3QoMCwwLGUud2lkdGgsZS5oZWlnaHQpLGkgaW5zdGFuY2VvZiBudD8oci5iZWdpblBhdGgoKSxyLmZpbGxTdHlsZT1uLHIuYXJjKGkueCxpLnksMTAsMCwyKk1hdGguUEksITApLHIuZmlsbCgpLHIuY2xvc2VQYXRoKCkpOmkgaW5zdGFuY2VvZiB2ZT8oci5iZWdpblBhdGgoKSxyLnN0cm9rZVN0eWxlPW4sci5tb3ZlVG8oaS54MSxpLnkxKSxyLmxpbmVUbyhpLngyLGkueTIpLHIuc3Ryb2tlKCksci5jbG9zZVBhdGgoKSk6aSBpbnN0YW5jZW9mIF9lPyhyLmJlZ2luUGF0aCgpLHIuc3Ryb2tlU3R5bGU9bixyLmRyYXdSZWN0KGkueCxpLnksaS53aWR0aCxpLmhlaWdodCksci5zdHJva2UoKSxyLmNsb3NlUGF0aCgpKTppIGluc3RhbmNlb2YgbWUmJihyLmJlZ2luUGF0aCgpLHIuc3Ryb2tlU3R5bGU9bixyLmFyYyhpLngsaS55LGkucmFkaXVzLDAsMipNYXRoLlBJLCEwKSxyLnN0cm9rZSgpLHIuY2xvc2VQYXRoKCkpfSl9LGRyYXdFbWl0dGVyOmZ1bmN0aW9uKHQsZSxpLGEpe3ZhciByPWUuZ2V0Q29udGV4dChcIjJkXCIpLG49dGhpcy5nZXRTdHlsZSgpO3RoaXMuYWRkRXZlbnRMaXN0ZW5lcih0LGZ1bmN0aW9uKCl7YSYmci5jbGVhclJlY3QoMCwwLGUud2lkdGgsZS5oZWlnaHQpLHIuYmVnaW5QYXRoKCksci5maWxsU3R5bGU9bixyLmFyYyhpLnAueCxpLnAueSwxMCwwLDIqTWF0aC5QSSwhMCksci5maWxsKCksci5jbG9zZVBhdGgoKX0pfX07cmV0dXJuIFYuUGFydGljbGU9aixWLlBvb2w9VCxWLlV0aWw9UCxWLkNvbG9yVXRpbD1ILFYuTWF0aFV0aWw9cyxWLlZlY3RvcjJEPVYuVmVjdG9yPUYsVi5Qb2xhcjJEPVYuUG9sYXI9cSxWLkFycmF5U3Bhbj1ZLFYuUmVjdGFuZ2xlPVosVi5SYXRlPUssVi5lYXNlPVUsVi5TcGFuPWwsVi5NYXQzPVgsVi5nZXRTcGFuPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gbmV3IGwodCxlLGkpfSxWLmNyZWF0ZUFycmF5U3Bhbj1ZLmNyZWF0ZUFycmF5U3BhbixWLkluaXRpYWxpemU9Vi5Jbml0PSQsVi5MaWZlPVYuTD1ldCxWLlBvc2l0aW9uPVYuUD1vdCxWLlZlbG9jaXR5PVYuVj1sdCxWLk1hc3M9Vi5NPWN0LFYuUmFkaXVzPVYuUj15dCxWLkJvZHk9Vi5CPWZ0LFYuQmVoYXZpb3VyPWd0LFYuRm9yY2U9Vi5GPWJ0LFYuQXR0cmFjdGlvbj1WLkE9eHQsVi5SYW5kb21EcmlmdD1WLlJEPVB0LFYuR3Jhdml0eT1WLkc9QXQsVi5Db2xsaXNpb249UnQsVi5Dcm9zc1pvbmU9d3QsVi5BbHBoYT1TdCxWLlNjYWxlPVYuUz1EdCxWLlJvdGF0ZT1NdCxWLkNvbG9yPUx0LFYuUmVwdWxzaW9uPU50LFYuQ3ljbG9uZT16dCxWLkdyYXZpdHlXZWxsPXF0LFYuRW1pdHRlcj1ZdCxWLkJlaGF2aW91ckVtaXR0ZXI9WnQsVi5Gb2xsb3dFbWl0dGVyPUt0LFYuWm9uZT1hdCxWLkxpbmVab25lPXZlLFYuQ2lyY2xlWm9uZT1tZSxWLlBvaW50Wm9uZT1udCxWLlJlY3Rab25lPV9lLFYuSW1hZ2Vab25lPXIsVi5DYW52YXNSZW5kZXJlcj1lZSxWLkRvbVJlbmRlcmVyPWFlLFYuRWFzZWxSZW5kZXJlcj1uZSxWLlBpeGlSZW5kZXJlcj11ZSxWLlBpeGVsUmVuZGVyZXI9b2UsVi5XZWJHTFJlbmRlcmVyPVYuV2ViR2xSZW5kZXJlcj1DLFYuQ3VzdG9tUmVuZGVyZXI9JHQsVi5EZWJ1Zz10LFAuYXNzaWduKFYsVSksVn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdG9uLm1pbi5qcy5tYXBcbiIsIi8qIVxuKiBSQUZNYW5hZ2VyIHYwLjEuMFxuKlxuKiBDb3B5cmlnaHQgMjAxOC0yMDE4LCBhamllbWF0aCA8YWppZW1hdGhAZ21haWwuY29tPlxuKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuKlxuKi9cbiFmdW5jdGlvbih0LGkpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWkoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGkpOnQuUkFGTWFuYWdlcj1pKCl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHQ9W1wibXNcIixcIm1velwiLFwid2Via2l0XCIsXCJvXCJdLGk9MDtpPHQubGVuZ3RoJiYhd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsrK2kpd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT13aW5kb3dbdFtpXStcIlJlcXVlc3RBbmltYXRpb25GcmFtZVwiXSx3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9d2luZG93W3RbaV0rXCJDYW5jZWxBbmltYXRpb25GcmFtZVwiXXx8d2luZG93W3RbaV0rXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl19KCkse3RpbWVyOjAsc3RhdGU6XCJzdG9wXCIsYW5pbWF0aW9uczpbXSxhZGQ6ZnVuY3Rpb24odCl7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjYwLG49e2NhbGxiYWNrOnQsZnBzOmksbjo2MC9pLHBhcmFtOmFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpudWxsLGk6MH07cmV0dXJuIHRoaXMuYW5pbWF0aW9ucy5wdXNoKG4pLHRoaXMuYW5pbWF0aW9ucy5sZW5ndGg+PTEmJnRoaXMuc3RhcnQoKSx0aGlzfSxnZXRJbmRleDpmdW5jdGlvbih0KXtmb3IodmFyIGk9MDtpPHRoaXMuYW5pbWF0aW9ucy5sZW5ndGg7aSsrKXtpZih0aGlzLmFuaW1hdGlvbnNbaV0uY2FsbGJhY2s9PT10KXJldHVybiBpfXJldHVybi0xfSxyZW1vdmU6ZnVuY3Rpb24odCl7aWYoISh0aGlzLmdldEluZGV4KHQpPDApKXJldHVybiB0aGlzLmRlbGV0ZU1hcCh0KSwwPT09dGhpcy5hbmltYXRpb25zLmxlbmd0aCYmdGhpcy5zdG9wKCksdGhpc30sZGVsZXRlTWFwOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZ2V0SW5kZXgodCksbj10aGlzLmFuaW1hdGlvbnNbaV07Zm9yKHZhciBlIGluIG4pZGVsZXRlIG5bZV07dGhpcy5hbmltYXRpb25zLnNwbGljZShpLDEpfSxzdGFydDpmdW5jdGlvbigpe2lmKFwic3RhcnRcIiE9PXRoaXMuc3RhdGUpcmV0dXJuIHRoaXMuc3RhdGU9XCJzdGFydFwiLHRoaXMudGljaygpLHRoaXN9LHN0b3A6ZnVuY3Rpb24oKXtpZihcInN0b3BcIiE9PXRoaXMuc3RhdGUpcmV0dXJuIHRoaXMuc3RhdGU9XCJzdG9wXCIsY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy50aW1lciksdGhpc30sdGljazpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy50aW1lcj1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXt0LnRpY2soKX0pO2Zvcih2YXIgaT0wO2k8dGhpcy5hbmltYXRpb25zLmxlbmd0aDtpKyspe3ZhciBuPXRoaXMuYW5pbWF0aW9uc1tpXSxlPW4uY2FsbGJhY2ssYT1uLnBhcmFtO24uaSsrLG4uaT49bi5uJiYoZShhKSxuLmk9MCl9fX19KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJBRk1hbmFnZXIubWluLmpzLm1hcFxuIl0sInNvdXJjZVJvb3QiOiIifQ==