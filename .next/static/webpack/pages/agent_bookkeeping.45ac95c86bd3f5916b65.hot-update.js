self["webpackHotUpdate_N_E"]("pages/agent_bookkeeping",{

/***/ "./pages/agent_bookkeeping.js":
/*!************************************!*\
  !*** ./pages/agent_bookkeeping.js ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ AgentBookkeeping; }
/* harmony export */ });
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ "./node_modules/react/jsx-dev-runtime.js");
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_hearder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/hearder */ "./pages/components/hearder.js");
/* harmony import */ var _components_footer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/footer */ "./pages/components/footer.js");
/* harmony import */ var particles_bg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! particles-bg */ "./node_modules/particles-bg/dist/index.es.js");
/* module decorator */ module = __webpack_require__.hmd(module);


var _jsxFileName = "D:\\GitHub\\agent-bookkeeping\\pages\\agent_bookkeeping.js";




function AgentBookkeeping() {
  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
    children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_hearder__WEBPACK_IMPORTED_MODULE_1__.default, {}, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 10,
      columnNumber: 9
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(particles_bg__WEBPACK_IMPORTED_MODULE_3__.default, {
      type: theme.particle,
      bg: {
        width: "100%",
        height: "100%",
        position: "absolute",
        zIndex: "0",
        top: 0,
        left: 0
      }
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 12,
      columnNumber: 11
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("section", {
      "class": "text-gray-600 body-font",
      children: /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
        "class": "container mx-auto flex px-5 py-24 md:flex-row flex-col items-center",
        children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
          "class": "lg:flex-grow md:w-1/2 lg:pr-24 md:pr-16 flex flex-col md:items-start md:text-left mb-16 md:mb-0 items-center text-center",
          children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("h1", {
            "class": "title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900",
            children: "Before they sold out readymade gluten"
          }, void 0, false, {
            fileName: _jsxFileName,
            lineNumber: 19,
            columnNumber: 15
          }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("p", {
            "class": "mb-8 leading-relaxed",
            children: "Copper mug try-hard pitchfork pour-over freegan heirloom neutra air plant cold-pressed tacos poke beard tote bag. Heirloom echo park mlkshk tote bag selvage hot chicken authentic tumeric truffaut hexagon try-hard chambray."
          }, void 0, false, {
            fileName: _jsxFileName,
            lineNumber: 22,
            columnNumber: 15
          }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
            "class": "flex justify-center",
            children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("button", {
              "class": "inline-flex text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg",
              "control-id": "ControlID-85",
              children: "Button"
            }, void 0, false, {
              fileName: _jsxFileName,
              lineNumber: 24,
              columnNumber: 17
            }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("button", {
              "class": "ml-4 inline-flex text-gray-700 bg-gray-100 border-0 py-2 px-6 focus:outline-none hover:bg-gray-200 rounded text-lg",
              children: "Button"
            }, void 0, false, {
              fileName: _jsxFileName,
              lineNumber: 25,
              columnNumber: 17
            }, this)]
          }, void 0, true, {
            fileName: _jsxFileName,
            lineNumber: 23,
            columnNumber: 15
          }, this)]
        }, void 0, true, {
          fileName: _jsxFileName,
          lineNumber: 18,
          columnNumber: 13
        }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
          "class": "lg:max-w-lg lg:w-full md:w-1/2 w-5/6",
          children: /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("img", {
            "class": "object-cover object-center rounded",
            alt: "hero",
            src: "https://dummyimage.com/720x600"
          }, void 0, false, {
            fileName: _jsxFileName,
            lineNumber: 29,
            columnNumber: 15
          }, this)
        }, void 0, false, {
          fileName: _jsxFileName,
          lineNumber: 28,
          columnNumber: 13
        }, this)]
      }, void 0, true, {
        fileName: _jsxFileName,
        lineNumber: 17,
        columnNumber: 11
      }, this)
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 16,
      columnNumber: 9
    }, this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_footer__WEBPACK_IMPORTED_MODULE_2__.default, {}, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 33,
      columnNumber: 9
    }, this)]
  }, void 0, true);
}
_c = AgentBookkeeping;

var _c;

$RefreshReg$(_c, "AgentBookkeeping");

;
    var _a, _b;
    // Legacy CSS implementations will `eval` browser code in a Node.js context
    // to extract CSS. For backwards compatibility, we need to check we're in a
    // browser context before continuing.
    if (typeof self !== 'undefined' &&
        // AMP / No-JS mode does not inject these helpers:
        '$RefreshHelpers$' in self) {
        var currentExports = module.__proto__.exports;
        var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;
        // This cannot happen in MainTemplate because the exports mismatch between
        // templating and execution.
        self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);
        // A module can be accepted automatically based on its exports, e.g. when
        // it is a Refresh Boundary.
        if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {
            // Save the previous exports on update so we can compare the boundary
            // signatures.
            module.hot.dispose(function (data) {
                data.prevExports = currentExports;
            });
            // Unconditionally accept an update to this module, we'll check if it's
            // still a Refresh Boundary later.
            module.hot.accept();
            // This field is set when the previous version of this module was a
            // Refresh Boundary, letting us know we need to check for invalidation or
            // enqueue an update.
            if (prevExports !== null) {
                // A boundary can become ineligible if its exports are incompatible
                // with the previous exports.
                //
                // For example, if you add/remove/change exports, we'll want to
                // re-execute the importing modules, and force those components to
                // re-render. Similarly, if you convert a class component to a
                // function, we want to invalidate the boundary.
                if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {
                    module.hot.invalidate();
                }
                else {
                    self.$RefreshHelpers$.scheduleUpdate();
                }
            }
        }
        else {
            // Since we just executed the code for the module, it's possible that the
            // new exports made it ineligible for being a boundary.
            // We only care about the case when we were _previously_ a boundary,
            // because we already accepted this update (accidental side effect).
            var isNoLongerABoundary = prevExports !== null;
            if (isNoLongerABoundary) {
                module.hot.invalidate();
            }
        }
    }


/***/ }),

/***/ "./node_modules/particles-bg/dist/index.es.js":
/*!****************************************************!*\
  !*** ./node_modules/particles-bg/dist/index.es.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var raf_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! raf-manager */ "./node_modules/raf-manager/build/RAFManager.min.js");
/* harmony import */ var raf_manager__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(raf_manager__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var proton_engine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! proton-engine */ "./node_modules/proton-engine/build/proton.min.js");
/* harmony import */ var proton_engine__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(proton_engine__WEBPACK_IMPORTED_MODULE_2__);




var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();

var inherits = function (subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
};

var possibleConstructorReturn = function (self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return call && (typeof call === "object" || typeof call === "function") ? call : self;
};

// Code source from here, thanks author
// https://github.com/drawcall/Proton/blob/gh-pages/source/src/utils/Rand.js
var Rand = function () {
    function Rand() {
        classCallCheck(this, Rand);

        this.list = [];
    }

    createClass(Rand, [{
        key: "set",
        value: function set$$1(probability, target) {
            this.list.push({
                probability: probability,
                target: target,
                a: 0,
                b: 1
            });

            this.calculation();
        }
    }, {
        key: "calculation",
        value: function calculation() {
            var total = 0;
            for (var i = 0; i < this.list.length; i++) {
                total += this.list[i].probability;
            }

            for (var _i = 0; _i < this.list.length; _i++) {
                var obj = this.list[_i];
                var val = obj.probability / total;

                obj.a = _i === 0 ? 0 : this.list[_i - 1].b;
                obj.b = obj.a + val;
            }
        }
    }, {
        key: "getResult",
        value: function getResult() {
            var val = Math.random();
            for (var i = 0; i < this.list.length; i++) {
                var obj = this.list[i];

                if (val <= obj.b && val > obj.a) {
                    return obj.target;
                }
            }

            return this.list[0].target;
        }
    }]);
    return Rand;
}();

var Canvas = function (_React$Component) {
  inherits(Canvas, _React$Component);

  function Canvas(props) {
    classCallCheck(this, Canvas);

    var _this = possibleConstructorReturn(this, (Canvas.__proto__ || Object.getPrototypeOf(Canvas)).call(this, props));

    _this._iid = 0;
    _this._oid = 0;
    _this.size = { width: 0, height: 0 };
    _this.canvasRef = react__WEBPACK_IMPORTED_MODULE_0___default().createRef();
    return _this;
  }

  createClass(Canvas, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this2 = this;

      this._oid = setTimeout(function () {
        _this2.initCanvas();
        _this2.resize = _this2.resize.bind(_this2);
        window.addEventListener("resize", _this2.resize);
      }, 100);

      var canvas = this.getCanvas();
      this.props.onCanvasDidMount && this.props.onCanvasDidMount(canvas);
    }
  }, {
    key: "initCanvas",
    value: function initCanvas() {
      var canvas = this.getCanvas();

      if (this.props.globalCompositeOperation) {
        var context = canvas.getContext("2d");
        context.globalCompositeOperation = this.props.globalCompositeOperation;
      }

      var _setCanvasSize = this.setCanvasSize(canvas),
          width = _setCanvasSize.width,
          height = _setCanvasSize.height;

      this.heartbeatDetectionCanvasSize(canvas);
      this.props.onCanvasInited(canvas, width, height);
    }
  }, {
    key: "getCanvas",
    value: function getCanvas() {
      var canvas = this.canvasRef.current;
      return canvas;
    }
  }, {
    key: "heartbeatDetectionCanvasSize",
    value: function heartbeatDetectionCanvasSize(canvas) {
      var _this3 = this;

      this._iid = setInterval(function () {
        if (_this3.canvasRef.current) {
          var newHeight = _this3.canvasRef.current.clientHeight;
          if (newHeight !== _this3.size.height) {
            var _setCanvasSize2 = _this3.setCanvasSize(canvas),
                width = _setCanvasSize2.width,
                height = _setCanvasSize2.height;

            _this3.props.onResize && _this3.props.onResize(width, height);
          }
        }
      }, 1000 / 10);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        window.removeEventListener("resize", this.resize);
        clearInterval(this._iid);
        clearTimeout(this._oid);
      } catch (e) {}
    }
  }, {
    key: "resize",
    value: function resize() {
      var canvas = this.getCanvas();

      var _setCanvasSize3 = this.setCanvasSize(canvas),
          width = _setCanvasSize3.width,
          height = _setCanvasSize3.height;

      this.props.onResize && this.props.onResize(width, height);
    }
  }, {
    key: "setCanvasSize",
    value: function setCanvasSize(canvas) {
      var width = this.canvasRef.current.clientWidth;
      var height = this.canvasRef.current.clientHeight;

      this.size.width = width;
      this.size.height = height;
      canvas.width = width;
      canvas.height = height;
      return { width: width, height: height };
    }
  }, {
    key: "handleWaypointEnter",
    value: function handleWaypointEnter() {
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().start();
    }
  }, {
    key: "handleWaypointLeave",
    value: function handleWaypointLeave() {
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().stop();
    }
  }, {
    key: "getStyle",
    value: function getStyle() {
      var bg = this.props.bg;

      var style = { width: "100%", height: "100%" };

      if (bg === true) {
        style = Object.assign(style, {
          position: "absolute",
          zIndex: -1,
          top: 0,
          left: 0
        });
      } else if (bg && (typeof bg === "undefined" ? "undefined" : _typeof(bg)) === "object") {
        style = Object.assign(style, bg);
      }

      return style;
    }
  }, {
    key: "handleMouseDown",
    value: function handleMouseDown(e) {
      this.props.onMouseDown && this.props.onMouseDown(e);
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement("canvas", { className: "particles-bg-canvas-self",
        ref: this.canvasRef,
        onMouseDown: this.handleMouseDown.bind(this),
        style: this.getStyle()
      });
    }
  }]);
  return Canvas;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

function hexToRgb(hex) {
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
    } : {};
}

function getColor(color, a) {
    var c = void 0;
    if (color) {
        c = hexToRgb(color);
        return "rgba(" + c.r + "," + c.g + "," + c.b + ", " + a + ")";
    } else {
        return null;
    }
}

var Ball = function (_React$Component) {
  inherits(Ball, _React$Component);

  function Ball(props) {
    classCallCheck(this, Ball);

    var _this = possibleConstructorReturn(this, (Ball.__proto__ || Object.getPrototypeOf(Ball)).call(this, props));

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Ball, [{
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      this.createMiniEmitter(canvas);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onResize",
    value: function onResize() {}
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      var _this2 = this;

      var context = canvas.getContext("2d");
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 9), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.8, 1.3));

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(1, 50));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(5, 6));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(5, 8), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(30, 70), "polar"));

      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(1, 0));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(["#36aaf3", "#fd769c", "#94ff22", "#ffa545", "#ffffff"]));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(0.7, 1));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Gravity)(3));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Collision)(emitter));
      emitter.addBehaviour(this.customDeadBehaviour(canvas));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "bound"));

      emitter.p.x = Math.min(500, Math.max(canvas.width / 2 - 400, 50));
      emitter.p.y = canvas.height / 2 + 50;
      emitter.emit();
      this.proton.addEmitter(emitter);

      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      renderer.onProtonUpdate = function () {
        context.fillStyle = getColor(_this2.props.color, 0.2) || "rgba(255, 255, 255, 0.2)";
        context.fillRect(0, 0, canvas.width, canvas.height);
      };
      this.proton.addRenderer(renderer);
    }
  }, {
    key: "customDeadBehaviour",
    value: function customDeadBehaviour(canvas) {
      var _this3 = this;

      return {
        initialize: function initialize(particle) {},
        applyBehaviour: function applyBehaviour(particle) {
          if (particle.p.y + particle.radius >= canvas.height) {
            if (particle.radius > 9) {
              _this3.miniEmitteing(particle);
              particle.dead = true;
            }
          }
        }
      };
    }
  }, {
    key: "createMiniEmitter",
    value: function createMiniEmitter(canvas) {
      var miniEmitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      miniEmitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(3, 6), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1, 2));

      miniEmitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      miniEmitter.radiusInitialize = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)();
      miniEmitter.addInitialize(miniEmitter.radiusInitialize);
      miniEmitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(0.5, 1));
      miniEmitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().V)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.5, 3), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 70, true), "polar"));

      miniEmitter.colorBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)("#ffffff");
      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(1, 0));
      miniEmitter.addBehaviour(miniEmitter.colorBehaviour);
      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Gravity)(4));
      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Collision)(miniEmitter));
      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "bound"));
      this.proton.addEmitter(miniEmitter);

      this.miniEmitter = miniEmitter;
    }
  }, {
    key: "miniEmitteing",
    value: function miniEmitteing(particle) {
      var miniEmitter = this.miniEmitter;
      miniEmitter.radiusInitialize.reset(particle.radius * 0.05, particle.radius * 0.2);
      miniEmitter.colorBehaviour.reset(particle.color);
      miniEmitter.p.x = particle.p.x;
      miniEmitter.p.y = particle.p.y;
      miniEmitter.emit("once");
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Ball;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Color = function (_React$Component) {
  inherits(Color, _React$Component);

  function Color(props) {
    classCallCheck(this, Color);

    var _this = possibleConstructorReturn(this, (Color.__proto__ || Object.getPrototypeOf(Color)).call(this, props));

    _this.colors = ["#529B88", "#CDD180", "#FFFA32", "#FB6255", "#FB4A53", "#FF4E50", "#F9D423"];
    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Color, [{
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize() {}
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();
      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(5, 8), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.1, 0.25));

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(20, 200));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(2, 4));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height)));

      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(0, 1, Infinity, (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().easeOutCubic)));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(1, 0, Infinity, (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().easeOutCubic)));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors, "random"));

      emitter.emit();
      this.proton.addEmitter(emitter);

      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      this.proton.addRenderer(renderer);
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Color;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Color$1 = function (_React$Component) {
    inherits(Color, _React$Component);

    function Color(props) {
        classCallCheck(this, Color);

        var _this = possibleConstructorReturn(this, (Color.__proto__ || Object.getPrototypeOf(Color)).call(this, props));

        _this.colors = ["#529B88", "#CDD180", "#FFFA32", "#FB6255", "#FB4A53", "#FF4E50", "#F9D423"];
        _this.renderProton = _this.renderProton.bind(_this);
        return _this;
    }

    createClass(Color, [{
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            try {
                raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
                this.proton.destroy();
            } catch (e) {}
        }
    }, {
        key: "onCanvasInited",
        value: function onCanvasInited(canvas, width, height) {
            this.createProton(canvas, width, height);
            raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
        }
    }, {
        key: "onResize",
        value: function onResize(width, height) {
            this.crossZoneBehaviour.zone.width = width;
            this.crossZoneBehaviour.zone.height = height;
            this.proton.renderers[0].resize(width, height);        }
    }, {
        key: "getProp",
        value: function getProp(key, defaultVal) {
            var config = this.props.config || {};
            var val = config[key] || defaultVal;
            if (Array.isArray(val)) {
                return new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(val[0], val[1]);
            } else {
                return val;
            }
        }
    }, {
        key: "getArrProp",
        value: function getArrProp(key, defaultVal) {
            var config = this.props.config || {};
            var val = config[key] || defaultVal;
            if (!val) return null;

            if (Array.isArray(val)) {
                return val;
            } else {
                return [val, val];
            }
        }
    }, {
        key: "createProton",
        value: function createProton(canvas, width, height) {
            var num = this.getProp("num", [5, 8]);
            var rps = this.getProp("rps", [0.1, 0.2]);
            var mass = this.getProp("mass", 1);
            var radius = this.getProp("radius", [10, 30]);
            var life = this.getProp("life", [2, 3]);
            var body = this.getProp("body");
            var position = this.getProp("position");
            var v = this.getProp("v", [2, 3]);
            var tha = this.getProp("tha", [-15, 15]);
            var alpha = this.getArrProp("alpha");
            var scale = this.getArrProp("scale");
            var color = this.getArrProp("color");
            var cross = this.getProp("cross", "dead");
            var random = this.getProp("random");
            var rotate = this.getArrProp("rotate");
            var g = this.getProp("g");
            var f = this.getArrProp("f");
            var emitterV = this.getProp("emitter");

            this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();
            var emitter = void 0;
            if (emitterV === "follow") {
                emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().FollowEmitter)();
            } else {
                emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
            }
            emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(num, rps);

            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(mass));
            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(radius));
            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(life));
            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(v, tha, "polar"));
            if (body) emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Body)(body));

            var pos = void 0;
            if (position === "all" || position === "screen") {
                pos = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height));
            } else if ((typeof position === "undefined" ? "undefined" : _typeof(position)) === "object") {
                pos = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(position.x, position.y, position.width, position.height));
            } else {
                emitter.p.x = canvas.width / 2;
                emitter.p.y = canvas.height / 2;
            }

            emitter.addInitialize(pos);

            /// behaviour
            var alphaB = alpha ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(alpha[0], alpha[1]) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(0, 1);
            var scaleB = scale ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(scale[0], scale[1]) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(1, 0.2);
            var colorB = color ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(color[0], color[1]) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors);

            emitter.addBehaviour(alphaB);
            emitter.addBehaviour(scaleB);
            if (!body) emitter.addBehaviour(colorB);

            if (rotate) {
                if (rotate[0] === true || rotate[0] === "rotate") {
                    emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rotate)());
                } else {
                    emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rotate)(rotate[0], rotate[1]));
                }
            }

            var zone = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height);
            var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(zone, cross);
            emitter.addBehaviour(crossZoneBehaviour);

            random && emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(random, random, 0.05));
            g && emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().G)(g));
            f && emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().F)(f[0], f[1]));

            emitter.emit();
            this.proton.addEmitter(emitter);

            var renderer = this.createRenderer(canvas);
            this.proton.addRenderer(renderer);

            this.emitter = emitter;
            this.crossZoneBehaviour = crossZoneBehaviour;
        }
    }, {
        key: "createRenderer",
        value: function createRenderer(canvas) {
            var width = canvas.width;
            var height = canvas.height;
            var context = canvas.getContext("2d");
            var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);

            var onUpdate = this.getProp("onUpdate");
            if (onUpdate) {
                renderer.onProtonUpdate = function () {
                    onUpdate(context, width, height);
                };
            }

            var onParticleCreated = this.getProp("onParticleCreated");
            if (onParticleCreated) {
                renderer.onParticleCreated = function (particle) {
                    onParticleCreated(context, particle);
                };
            }

            var onParticleUpdate = this.getProp("onParticleUpdate");
            if (onParticleUpdate) {
                renderer.onParticleUpdate = function (particle) {
                    onParticleUpdate(context, particle);
                };
            }

            return renderer;
        }
    }, {
        key: "renderProton",
        value: function renderProton() {
            this.proton && this.proton.update();
        }
    }, {
        key: "handleMouseDown",
        value: function handleMouseDown(e) {
            var onMouseDown = this.getProp("onMouseDown");
            if (onMouseDown) {
                onMouseDown(e);
            }
        }
    }, {
        key: "render",
        value: function render() {
            var globalCompositeOperation = this.props.globalCompositeOperation || this.props.operation || "source-over";

            return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, {
                bg: this.props.bg,
                onMouseDown: this.handleMouseDown.bind(this),
                globalCompositeOperation: globalCompositeOperation,
                onCanvasInited: this.onCanvasInited.bind(this),
                onResize: this.onResize.bind(this)
            });
        }
    }]);
    return Color;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Lines = function (_React$Component) {
  inherits(Lines, _React$Component);

  function Lines(props) {
    classCallCheck(this, Lines);

    var _this = possibleConstructorReturn(this, (Lines.__proto__ || Object.getPrototypeOf(Lines)).call(this, props));

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Lines, [{
    key: "onCanvasDidMount",
    value: function onCanvasDidMount(canvas) {
      if (this.props.color) {
        canvas.style.backgroundColor = this.props.color;
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      this.crossZoneBehaviour.zone.width = width;
      this.crossZoneBehaviour.zone.height = height;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.damping = 0.008;
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 250);
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(4));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));
      var mouseObj = {
        x: width / 2,
        y: height / 2
      };

      var attractionBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Attraction)(mouseObj, 0, 0);
      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "cross");
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)("random"));
      emitter.addBehaviour(attractionBehaviour, crossZoneBehaviour);
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(10, 10, 0.05));
      emitter.p.x = canvas.width / 2;
      emitter.p.y = canvas.height / 2;
      emitter.emit("once");

      this.proton.addEmitter(emitter);
      this.proton.addRenderer(this.createRenderer(canvas));
      this.crossZoneBehaviour = crossZoneBehaviour;
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas) {
      var _this2 = this;

      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      renderer.onProtonUpdate = function () {
        context.fillStyle = getColor(_this2.props.color, 0.02) || "rgba(0, 0, 0, 0.02)";
        context.fillRect(0, 0, canvas.width, canvas.height);
      };

      renderer.onParticleUpdate = function (particle) {
        context.beginPath();
        context.strokeStyle = particle.color;
        context.lineWidth = 1;
        context.moveTo(particle.old.p.x, particle.old.p.y);
        context.lineTo(particle.p.x, particle.p.y);
        context.closePath();
        context.stroke();
      };

      return renderer;
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasDidMount: this.onCanvasDidMount.bind(this),
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Lines;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Thick = function (_React$Component) {
  inherits(Thick, _React$Component);

  function Thick(props) {
    classCallCheck(this, Thick);

    var _this = possibleConstructorReturn(this, (Thick.__proto__ || Object.getPrototypeOf(Thick)).call(this, props));

    _this.hue = 0;
    _this.index = 0;
    _this.colorTemplate = "hsla(hue,80%,50%, 0.75)";
    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Thick, [{
    key: "onCanvasDidMount",
    value: function onCanvasDidMount(canvas) {
      if (this.props.color) {
        canvas.style.backgroundColor = this.props.color;
      }
    }
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.canvas = canvas;
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      this.crossZoneBehaviour.zone.width = width;
      this.crossZoneBehaviour.zone.height = height;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.damping = 0.008;
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 150);

      // Initialize
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(8));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().V)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.1, 0.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CircleZone)(canvas.width / 2, canvas.height / 2, 100)));

      // Behaviour
      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "cross");
      emitter.addBehaviour(crossZoneBehaviour);
      this.repulsion = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Repulsion)({
        x: canvas.width / 2,
        y: canvas.height / 2 - 100
      }, 3, 300);

      this.attraction = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Attraction)({
        x: canvas.width / 2,
        y: canvas.height / 2
      }, 3, 200);
      emitter.addBehaviour(this.attraction, this.repulsion);
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)("random"));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(20, 15, 0.15));

      emitter.emit("once");
      this.proton.addEmitter(emitter);
      this.proton.addRenderer(this.createRenderer(canvas));
      this.crossZoneBehaviour = crossZoneBehaviour;
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas) {
      var _this2 = this;

      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);

      renderer.onProtonUpdate = function () {
        _this2.hue += 1;
        context.fillStyle = getColor(_this2.props.color, 0.02) || "rgba(0, 0, 0, 0.02)";
        context.fillRect(0, 0, canvas.width, canvas.height);
      };

      renderer.onParticleCreated = function (particle) {
        particle.data.begin = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(1, 120);
        particle.data.tha = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(0, Math.PI * 2);
      };

      renderer.onParticleUpdate = function (particle) {
        var hue = particle.data.begin + _this2.hue;
        particle.color = _this2.colorTemplate.replace("hue", hue % 360);

        var ratio = 3 / 4;
        var radius = particle.radius * (1 - ratio) * Math.cos(particle.data.tha += 0.01) + particle.radius * ratio;

        context.beginPath();
        context.fillStyle = particle.color;
        context.arc(particle.p.x, particle.p.y, radius, 0, Math.PI * 2, true);
        context.closePath();
        context.fill();
      };

      return renderer;
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      var canvas = this.canvas;
      this.proton.update();
      if (this.index % 200 === 0) {
        this.attraction.targetPosition.x = Math.random() * canvas.width;
        this.attraction.targetPosition.y = Math.random() * canvas.height;

        this.repulsion.targetPosition.x = Math.random() * canvas.width;
        this.repulsion.targetPosition.y = Math.random() * canvas.height;
      }

      this.index++;
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        onCanvasDidMount: this.onCanvasDidMount.bind(this),
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Thick;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Square = function (_React$Component) {
  inherits(Square, _React$Component);

  function Square(props) {
    classCallCheck(this, Square);

    var _this = possibleConstructorReturn(this, (Square.__proto__ || Object.getPrototypeOf(Square)).call(this, props));

    _this.colors = ["#fad390", "#81ecec", "#ffffff", "#badc58", "#f9ca24", "#FEA47F"];
    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Square, [{
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onCanvasDidMount",
    value: function onCanvasDidMount(canvas) {}
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      var dis = 150;
      this.crossZoneBehaviour.zone.width = width + 2 * dis;
      this.crossZoneBehaviour.zone.height = height + 2 * dis;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();
      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 50);
      emitter.damping = 0;

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(4, 70));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(2, 10), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0), "polar"));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().LineZone)(0, canvas.height, canvas.width, canvas.height)));

      var dis = 150;
      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0 - dis, 0 - dis, canvas.width + 2 * dis, canvas.height + 2 * dis), "cross");
      emitter.addBehaviour(crossZoneBehaviour);
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().getSpan(0.1, 0.55)));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors));

      emitter.emit("once");
      this.proton.addEmitter(emitter);
      var renderer = this.createRenderer(canvas);
      this.proton.addRenderer(renderer);

      this.crossZoneBehaviour = crossZoneBehaviour;
      emitter.preEmit(2);
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas) {
      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CustomRenderer)();

      renderer.onProtonUpdate = function () {
        context.clearRect(0, 0, canvas.width, canvas.height);
      };

      renderer.onParticleCreated = function (particle) {
        var w = particle.radius || 60;
        var h = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(100, 200, "int");
        particle.data.w = w;
        particle.data.h = h;
      };

      renderer.onParticleUpdate = function (particle) {
        var w = particle.data.w;
        var h = particle.data.h;
        context.save();
        context.globalAlpha = particle.alpha;
        context.fillStyle = particle.color;

        context.translate(particle.p.x, particle.p.y);
        context.rotate(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.degreeTransform(particle.rotation));
        context.translate(-particle.p.x, -particle.p.y);

        context.beginPath();
        context.rect(particle.p.x - w / 2, particle.p.y - h / 2, w, h);

        context.closePath();
        context.fill();
        context.globalAlpha = 1;
        context.restore();
      };

      return renderer;
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "lighter",
        onCanvasDidMount: this.onCanvasDidMount.bind(this),
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Square;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Cobweb = function (_React$Component) {
  inherits(Cobweb, _React$Component);

  function Cobweb(props) {
    classCallCheck(this, Cobweb);

    var _this = possibleConstructorReturn(this, (Cobweb.__proto__ || Object.getPrototypeOf(Cobweb)).call(this, props));

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Cobweb, [{
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      this.crossZoneBehaviour.zone.width = width;
      this.crossZoneBehaviour.zone.height = height;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(100), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.05, 0.2));

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(1, 4));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(Infinity));

      var pointZone = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height));
      emitter.addInitialize(pointZone);
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.3, 0.6), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));

      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().getSpan(0.2, 0.9)));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.props.color || "#333"));
      this.crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height), "cross");
      emitter.addBehaviour(this.crossZoneBehaviour);

      emitter.emit("once");
      emitter.damping = 0;
      this.proton.addEmitter(emitter);
      this.proton.addRenderer(this.createRenderer(canvas, emitter));
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas, emitter) {
      var _this2 = this;

      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      var R = 140;

      renderer.onProtonUpdateAfter = function () {
        var particles = emitter.particles;

        for (var i = 0; i < particles.length; i++) {
          for (var j = i + 1; j < particles.length; j++) {
            var pA = particles[i];
            var pB = particles[j];
            var dis = pA.p.distanceTo(pB.p);

            if (dis < R) {
              var alpha = (1 - dis / R) * 0.5;
              context.strokeStyle = getColor(_this2.props.color, alpha) || "rgba(3, 3, 3, " + alpha + ")";
              context.beginPath();
              context.moveTo(pA.p.x, pA.p.y);
              context.lineTo(pB.p.x, pB.p.y);
              context.closePath();
              context.stroke();
            }
          }
        }
      };

      return renderer;
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Cobweb;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Circle = function (_React$Component) {
  inherits(Circle, _React$Component);

  function Circle(props) {
    classCallCheck(this, Circle);

    var _this = possibleConstructorReturn(this, (Circle.__proto__ || Object.getPrototypeOf(Circle)).call(this, props));

    _this.colors = ["#74b9ff", "#e84393", "#6c5ce7", "#00b894", "#fdcb6e", "#006266", "#1B1464"];

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Circle, [{
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      this.crossZoneBehaviour.zone.width = width;
      this.crossZoneBehaviour.zone.height = height;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num || 20);
      emitter.damping = 0.008;

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(30, 600));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height)));

      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "cross");
      emitter.addBehaviour(crossZoneBehaviour);
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().getSpan(0.35, 0.55)));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.getColor()));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(50, 50, 0.5));

      emitter.emit("once");
      this.proton.addEmitter(emitter);

      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      this.proton.addRenderer(renderer);

      this.crossZoneBehaviour = crossZoneBehaviour;
    }
  }, {
    key: "getColor",
    value: function getColor() {
      var c = this.colors;
      if (this.props.color) {
        if (Array.isArray(this.props.color)) {
          c = this.props.color;
        } else {
          c = [this.props.color];
        }
      }

      return c;
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darken",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Circle;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Tadpole = function (_React$Component) {
  inherits(Tadpole, _React$Component);

  function Tadpole(props) {
    classCallCheck(this, Tadpole);

    var _this = possibleConstructorReturn(this, (Tadpole.__proto__ || Object.getPrototypeOf(Tadpole)).call(this, props));

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Tadpole, [{
    key: "onCanvasDidMount",
    value: function onCanvasDidMount(canvas) {}
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      this.renderProton();
    }
  }, {
    key: "onResize",
    value: function onResize(width, height) {
      this.crossZoneBehaviour.zone.width = width;
      this.crossZoneBehaviour.zone.height = height;
      this.proton.renderers[0].resize(width, height);
    }
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();

      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.damping = 0.008;
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 50);
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(5, 9));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height)));

      var mouseInfo = {
        x: width / 2,
        y: height / 2
      };

      var attractionBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Attraction)(mouseInfo, 0, 0);
      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), "bound");
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.props.color || "#bbb"));
      //emitter.addBehaviour(new Proton.Alpha(new Proton.Span(0.5, 1)));
      emitter.addBehaviour(attractionBehaviour, crossZoneBehaviour);
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(15, 15, 0.05));
      emitter.emit("once");

      this.proton.addEmitter(emitter);
      this.proton.addRenderer(this.createRenderer(canvas));
      this.crossZoneBehaviour = crossZoneBehaviour;
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas) {
      var jointCount = 10;
      var delayTime = 8;
      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);

      renderer.onProtonUpdate = function () {
        context.clearRect(0, 0, canvas.width, canvas.height);
      };

      renderer.onParticleCreated = function (particle) {
        particle.data.points = [];
        particle.data.index = 0;
      };

      renderer.onParticleUpdate = function (particle) {
        drawTadpoleTail(particle);
        if (particle.data.index % delayTime === 0) fillPointsData(particle);
        drawTadpoleHead(particle);
        particle.data.index++;
      };

      var fillPointsData = function fillPointsData(particle) {
        particle.data.points.unshift(particle.p.y);
        particle.data.points.unshift(particle.p.x);

        if (particle.data.points.length > jointCount) {
          particle.data.points.pop();
          particle.data.points.pop();
        }
      };

      var drawTadpoleHead = function drawTadpoleHead(particle) {
        context.fillStyle = particle.color;
        context.beginPath();
        context.arc(particle.p.x, particle.p.y, particle.radius, 0, Math.PI * 2, true);
        context.closePath();
        context.fill();
      };

      var drawTadpoleTail = function drawTadpoleTail(particle) {
        context.beginPath();
        context.strokeStyle = particle.color;

        context.moveTo(particle.p.x, particle.p.y);

        var l = particle.data.points.length;
        for (var i = 0; i < l; i += 2) {
          var x = particle.data.points[i];
          var y = particle.data.points[i + 1];

          context.lineWidth = linearEvaluation(i, l);
          context.lineTo(x, y);
          context.stroke();
        }
      };

      var linearEvaluation = function linearEvaluation(i, l) {
        if (l <= 2) return 1;

        var max = 6;
        var A = (max - 1) / (2 / l - 1);
        var B = 1 - A;
        var X = (i + 2) / l;
        var val = A * X + B;
        val = val >> 0;

        return val;
      };

      return renderer;
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      var _this2 = this;

      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(function () {
        _this2.proton.update();
        //this.proton.stats.update();
      });
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasDidMount: this.onCanvasDidMount.bind(this),
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Tadpole;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var COLOR = ["#f6b93b", "#18dcff", "#cd84f1", "#ED4C67", "#ffffff", "#b71540", "#32ff7e", "#ff3838"];

var Polygon = function (_React$Component) {
  inherits(Polygon, _React$Component);

  function Polygon(props) {
    classCallCheck(this, Polygon);

    var _this = possibleConstructorReturn(this, (Polygon.__proto__ || Object.getPrototypeOf(Polygon)).call(this, props));

    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Polygon, [{
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas);
      this.createEmitter({
        canvas: canvas,
        x: width / 2,
        y: height / 2,
        mainEmitter: true,
        zone: "bound"
      });

      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onResize",
    value: function onResize() {}
  }, {
    key: "createProton",
    value: function createProton(canvas) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();
      var renderer = this.createRenderer(canvas);
      this.proton.addRenderer(renderer);
    }
  }, {
    key: "createRenderer",
    value: function createRenderer(canvas) {
      var context = canvas.getContext("2d");
      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CustomRenderer)();

      renderer.onProtonUpdate = function () {
        context.clearRect(0, 0, canvas.width, canvas.height);
      };

      renderer.onParticleCreated = function (particle) {
        particle.data.count = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(3, 10, true);
      };

      renderer.onParticleUpdate = function (particle) {
        context.save();
        context.globalAlpha = particle.alpha;
        context.fillStyle = particle.color;

        context.translate(particle.p.x, particle.p.y);
        context.rotate(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.degreeTransform(particle.rotation));
        context.translate(-particle.p.x, -particle.p.y);

        context.beginPath();
        drawPolygon(particle, particle.data.count);

        context.closePath();
        context.fill();
        context.globalAlpha = 1;
        context.restore();
      };

      renderer.onParticleDead = function (particle) {};

      var drawPolygon = function drawPolygon(particle, count) {
        if (count >= 7) {
          context.arc(particle.p.x, particle.p.y, particle.radius, 0, Math.PI * 2, true);
        } else {
          var radius = particle.radius;

          for (var i = 0; i <= count; i++) {
            var x = particle.p.x + radius * Math.cos(Math.PI / 180 * 360 / count * i);
            var y = particle.p.y + radius * Math.sin(Math.PI / 180 * 360 / count * i);

            if (i === 0) context.moveTo(x, y);else context.lineTo(x, y);
          }
        }
      };

      return renderer;
    }
  }, {
    key: "createEmitter",
    value: function createEmitter(_ref) {
      var mainEmitter = _ref.mainEmitter,
          canvas = _ref.canvas,
          x = _ref.x,
          y = _ref.y,
          radius = _ref.radius,
          _ref$color = _ref.color,
          color = _ref$color === undefined ? COLOR : _ref$color,
          _ref$zone = _ref.zone,
          zone = _ref$zone === undefined ? "dead" : _ref$zone,
          _ref$once = _ref.once,
          once = _ref$once === undefined ? "all" : _ref$once,
          _ref$alpha = _ref.alpha,
          alpha = _ref$alpha === undefined ? 0.85 : _ref$alpha,
          _ref$gravity = _ref.gravity,
          gravity = _ref$gravity === undefined ? 3.5 : _ref$gravity;

      var emitter = this.proton.pool.get((proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter));

      if (!emitter.completed) {
        emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 9), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.6, 2.2));

        var radiusInit = mainEmitter ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(10, 110) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(3, radius);
        emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
        emitter.addInitialize(radiusInit);
        emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(3, 6));
        emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 6), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(-90, 90), "polar"));

        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(alpha, 0.2));
        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(color));
        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(1, 0.3));
        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rotate)());
        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Gravity)(gravity));

        emitter.addBehaviour(this.customDeadBehaviour(canvas));
        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), zone));
      }

      emitter.p.x = x;
      emitter.p.y = y;
      if (once === "once") emitter.emit("once");else emitter.emit();

      this.proton.addEmitter(emitter);
      //this.expireEmitter(emitter);
    }
  }, {
    key: "expireEmitter",
    value: function expireEmitter(emitter) {
      var _this2 = this;

      setTimeout(function () {
        emitter.completed = true;
        _this2.proton.pool.expire(emitter);
        _this2.proton.removeEmitter(emitter);
      }, 500);
    }
  }, {
    key: "customDeadBehaviour",
    value: function customDeadBehaviour(canvas) {
      var _this3 = this;

      return {
        initialize: function initialize(particle) {
          particle.data = particle.data || {};
          particle.data.oldRadius = particle.radius;
          particle.data.emitterCount = 0;
        },
        applyBehaviour: function applyBehaviour(particle) {
          if (particle.radius < 5) return;
          if (particle.data.emitterCount >= 2) return;

          if (particle.radius <= 1 / 3 * particle.data.oldRadius) {
            particle.data.emitterCount++;
            _this3.createEmitter({
              canvas: canvas,
              x: particle.p.x,
              y: particle.p.y,
              radius: particle.radius * (1 / 2),
              alpha: 0.5,
              gravity: 5,
              color: particle.color,
              once: "once"
            });
          }
        }
      };
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "darker",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Polygon;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var Fountain = function (_React$Component) {
  inherits(Fountain, _React$Component);

  function Fountain(props) {
    classCallCheck(this, Fountain);

    var _this = possibleConstructorReturn(this, (Fountain.__proto__ || Object.getPrototypeOf(Fountain)).call(this, props));

    _this.colors = ["#529B88", "#CDD180", "#FFFA32", "#FB6255", "#FB4A53", "#FF4E50", "#F9D423"];
    _this.renderProton = _this.renderProton.bind(_this);
    return _this;
  }

  createClass(Fountain, [{
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      try {
        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);
        this.proton.destroy();
      } catch (e) {}
    }
  }, {
    key: "onCanvasInited",
    value: function onCanvasInited(canvas, width, height) {
      this.createProton(canvas, width, height);
      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);
    }
  }, {
    key: "onResize",
    value: function onResize() {}
  }, {
    key: "createProton",
    value: function createProton(canvas, width, height) {
      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();
      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();
      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 8), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.1, 0.25));

      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(20, 200));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(2, 4));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 7), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), "polar"));
      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CircleZone)(width / 2, height / 2, 100)));

      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(1, 0));
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(0.2, 1));
      emitter.addBehaviour(this.createCustomBehaviour());
      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors, "random"));
      emitter.emit();
      this.proton.addEmitter(emitter);

      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);
      this.proton.addRenderer(renderer);
    }
  }, {
    key: "createCustomBehaviour",
    value: function createCustomBehaviour() {
      var f = 10 * 100;
      return {
        initialize: function initialize(particle) {
          particle.f = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Vector2D)(0, 0);
        },
        applyBehaviour: function applyBehaviour(particle) {
          var length = particle.v.length() / 1000;
          var gradient = particle.v.getGradient();
          gradient += 3.14 / 2;

          particle.f.x = f * length * Math.cos(gradient);
          particle.f.y = f * length * Math.sin(gradient);
          particle.a.add(particle.f);
        }
      };
    }
  }, {
    key: "renderProton",
    value: function renderProton() {
      this.proton && this.proton.update();
    }
  }, {
    key: "render",
    value: function render() {
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,
        globalCompositeOperation: "xor",
        onCanvasInited: this.onCanvasInited.bind(this),
        onResize: this.onResize.bind(this)
      });
    }
  }]);
  return Fountain;
}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));

var ParticlesBg = function (_Component) {
  inherits(ParticlesBg, _Component);

  function ParticlesBg(props) {
    classCallCheck(this, ParticlesBg);
    return possibleConstructorReturn(this, (ParticlesBg.__proto__ || Object.getPrototypeOf(ParticlesBg)).call(this, props));
  }

  createClass(ParticlesBg, [{
    key: "getRandom",
    value: function getRandom() {
      var _props = this.props,
          num = _props.num,
          bg = _props.bg,
          color = _props.color;

      // Code source from here, thanks author
      // https://github.com/drawcall/Proton/blob/gh-pages/source/src/utils/Rand.js

      if (!this.random) {
        this.random = new Rand();
        this.random.set(0.25, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color, { num: num, bg: bg, color: color }));
        this.random.set(0.2, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Ball, { num: num, bg: bg, color: color }));
        this.random.set(0.2, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Lines, { num: num, bg: bg, color: color }));
        this.random.set(0.16, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Thick, { num: num, bg: bg, color: color }));
        this.random.set(0.18, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Circle, { num: num, bg: bg, color: color }));
        this.random.set(0.04, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Cobweb, { num: num, bg: bg, color: color }));
        this.random.set(0.1, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Polygon, { num: num, bg: bg, color: color }));
        this.random.set(0.08, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Square, { num: num, bg: bg, color: color }));
        this.random.set(0.18, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Tadpole, { num: num, bg: bg, color: color }));
        this.random.set(0.15, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Fountain, { num: num, bg: bg, color: color }));
      }
      return this.random.getResult();
    }
  }, {
    key: "getBgParticles",
    value: function getBgParticles() {
      var _props2 = this.props,
          type = _props2.type,
          num = _props2.num,
          bg = _props2.bg,
          color = _props2.color,
          config = _props2.config;


      var particles = void 0;
      switch (String(type).toLowerCase()) {
        case "color":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color, { num: num, bg: bg, color: color });
          break;
        case "ball":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Ball, { num: num, bg: bg, color: color });
          break;
        case "lines":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Lines, { num: num, bg: bg, color: color });
          break;
        case "thick":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Thick, { num: num, bg: bg, color: color });
          break;
        case "circle":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Circle, { num: num, bg: bg, color: color });
          break;
        case "cobweb":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Cobweb, { num: num, bg: bg, color: color });
          break;
        case "polygon":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Polygon, { num: num, bg: bg, color: color });
          break;
        case "square":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Square, { num: num, bg: bg, color: color });
          break;
        case "tadpole":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Tadpole, { num: num, bg: bg, color: color });
          break;
        case "fountain":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Fountain, { num: num, bg: bg, color: color });
          break;
        case "custom":
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color$1, { bg: bg, config: config });
          break;
        case "random":
          particles = this.getRandom(num);
          break;

        default:
          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color, { num: num, bg: bg, color: color });
          break;
      }

      return particles;
    }
  }, {
    key: "render",
    value: function render() {
      var particles = this.getBgParticles();
      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(
        (react__WEBPACK_IMPORTED_MODULE_0___default().Fragment),
        null,
        particles
      );
    }
  }]);
  return ParticlesBg;
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);

/* harmony default export */ __webpack_exports__["default"] = (ParticlesBg);
//# sourceMappingURL=index.es.js.map


/***/ }),

/***/ "./node_modules/proton-engine/build/proton.min.js":
/*!********************************************************!*\
  !*** ./node_modules/proton-engine/build/proton.min.js ***!
  \********************************************************/
/***/ (function(module) {

/*!
* Proton v4.2.1
* https://github.com/drawcall/Proton
*
* Copyright 2013-2020, A-JIE
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/
!function(t,e){ true?module.exports=e():0}(this,function(){"use strict";var e=3.1415926,s={PI:e,PIx2:2*e,PI_2:e/2,PI_180:e/180,N180_PI:180/e,Infinity:-999,isInfinity:function(t){return t===this.Infinity||t===1/0},randomAToB:function(t,e,i){return 2<arguments.length&&void 0!==i&&i?Math.floor(Math.random()*(e-t))+t:t+Math.random()*(e-t)},randomFloating:function(t,e,i){return this.randomAToB(t-e,t+e,i)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},randomZone:function(){},floor:function(t,e){e=1<arguments.length&&void 0!==e?e:4,e=Math.pow(10,e);return Math.floor(t*e)/e},degreeTransform:function(t){return t*e/180},toColor16:function(t){return"#"+t.toString(16)}},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t};function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0!==a){if("value"in a)return a.value;a=a.get;return void 0!==a?a.call(i):void 0}if(null!==(t=Object.getPrototypeOf(t)))return n(t,e,i)}var r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},l=(t(u,[{key:"getValue",value:function(t){t=0<arguments.length&&void 0!==t&&t;return this.isArray?P.getRandFromArray(this.a):this.center?s.randomFloating(this.a,this.b,t):s.randomAToB(this.a,this.b,t)}}],[{key:"setSpanValue",value:function(t,e,i){return t instanceof u?t:void 0===e?new u(t):void 0===i?new u(t,e):new u(t,e,i)}},{key:"getSpanValue",value:function(t){return t instanceof u?t.getValue():t}}]),u);function u(t,e,i){o(this,u),P.isArray(t)?(this.isArray=!0,this.a=t):(this.isArray=!1,this.a=P.initValue(t,1),this.b=P.initValue(e,this.a),this.center=P.initValue(i,!1))}var c=function(t){--t;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},d=function(t,e){return[1,0,0,0,1,0,t,e,1]},y=function(t){var e=Math.cos(t),t=Math.sin(t);return[e,-t,0,t,e,0,0,0,1]},p=function(t,e){return[t,0,0,0,e,0,0,0,1]},f=function(t,e){var i=t[0],a=t[1],r=t[2],n=t[3],s=t[4],o=t[5],h=t[6],l=t[7],u=t[8],c=e[0],d=e[1],y=e[2],p=e[3],f=e[4],v=e[5],g=e[6],t=e[7],e=e[8];return[i*c+a*p+r*g,i*d+a*f+r*t,i*y+a*v+r*e,n*c+s*p+o*g,n*d+s*f+o*t,n*y+s*v+o*e,h*c+l*p+u*g,h*d+l*f+u*t,h*y+l*v+u*e]},v={createCanvas:function(t,e,i,a){var r=3<arguments.length&&void 0!==a?a:"absolute",a=document.createElement("canvas");return a.id=t,a.width=e,a.height=i,a.style.opacity=0,a.style.position=r,this.transform(a,-500,-500,0,0),a},createDiv:function(t,e,i){var a=document.createElement("div");return a.id=t,a.style.position="absolute",this.resize(a,e,i),a},resize:function(t,e,i){t.style.width=e+"px",t.style.height=i+"px",t.style.marginLeft=-e/2+"px",t.style.marginTop=-i/2+"px"},transform:function(t,e,i,a,r){t.style.willChange="transform";var n="translate("+e+"px, "+i+"px) scale("+a+") rotate("+r+"deg)";this.css3(t,"transform",n)},transform3d:function(t,e,i,a,r){t.style.willChange="transform";r="translate3d("+e+"px, "+i+"px, 0) scale("+a+") rotate("+r+"deg)";this.css3(t,"backfaceVisibility","hidden"),this.css3(t,"transform",r)},css3:function(t,e,i){var a=e.charAt(0).toUpperCase()+e.substr(1);t.style["Webkit"+a]=i,t.style["Moz"+a]=i,t.style["O"+a]=i,t.style["ms"+a]=i,t.style[""+e]=i}},g={},m={},b=0,_=function(t,e,i){t.drawImage(e,i.x,i.y);e=t.getImageData(i.x,i.y,i.width,i.height);return t.clearRect(i.x,i.y,i.width,i.height),e},x=function(t,e,i){var a="string"==typeof t?t:t.src;g[a]?e(g[a],i):((t=new Image).onload=function(t){g[a]=t.target,e(g[a],i)},t.src=a)},k=function(t,e,i){var a,r,n=t.src;return m[n]||(a=c(t.width),r=c(t.height),(r=v.createCanvas("proton_canvas_cache_"+ ++b,a,r)).getContext("2d").drawImage(t,0,0,t.width,t.height),m[n]=r),e&&e(m[n],i),m[n]},P={initValue:function(t,e){return t=null!=t?t:e},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyArray:function(t){t&&(t.length=0)},toArray:function(t){return this.isArray(t)?t:[t]},getRandFromArray:function(t){return t?t[Math.floor(t.length*Math.random())]:null},emptyObject:function(t,e){var i,a=1<arguments.length&&void 0!==e?e:null;for(i in t)a&&-1<a.indexOf(i)||delete t[i]},classApply:function(t,e){e=1<arguments.length&&void 0!==e?e:null;return new(e?t.bind.apply(t,[null].concat(e)):t)},setVectorVal:function(t,e){e=1<arguments.length&&void 0!==e?e:null;e&&(this.hasProp(e,"x")&&(t.p.x=e.x),this.hasProp(e,"y")&&(t.p.y=e.y),this.hasProp(e,"vx")&&(t.v.x=e.vx),this.hasProp(e,"vy")&&(t.v.y=e.vy),this.hasProp(e,"ax")&&(t.a.x=e.ax),this.hasProp(e,"ay")&&(t.a.y=e.ay),this.hasProp(e,"p")&&t.p.copy(e.p),this.hasProp(e,"v")&&t.v.copy(e.v),this.hasProp(e,"a")&&t.a.copy(e.a),this.hasProp(e,"position")&&t.p.copy(e.position),this.hasProp(e,"velocity")&&t.v.copy(e.velocity),this.hasProp(e,"accelerate")&&t.a.copy(e.accelerate))},hasProp:function(t,e){return!!t&&void 0!==t[e]},setProp:function(t,e){for(var i in e)t.hasOwnProperty(i)&&(t[i]=l.getSpanValue(e[i]));return t},getImageData:function(t,e,i){return _(t,e,i)},destroyAll:function(t,e){for(var i=1<arguments.length&&void 0!==e?e:null,a=t.length;a--;){try{t[a].destroy(i)}catch(t){}delete t[a]}t.length=0},assign:function(t,e){if("function"==typeof Object.assign)return Object.assign(t,e);for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}},E={},A={_index:0,_cache:{},id:function(t){return void 0!==E[t]&&null!==E[t]||(E[t]=0),t+"_"+E[t]++},getId:function(t){var e=this.getIdFromCache(t);return e||(e="PUID_"+this._index++,this._cache[e]=t,e)},getIdFromCache:function(t){var e,i=void 0;for(i in this._cache){if((e=this._cache[i])===t)return i;if(this.isBody(e,t)&&e.src===t.src)return i}return null},isBody:function(t,e){return"object"===(void 0===t?"undefined":i(t))&&"object"===(void 0===e?"undefined":i(e))&&t.isInner&&e.isInner},getTarget:function(t){return this._cache[t]}},T=(t(R,[{key:"get",value:function(t,e,i){var a=void 0;return i=i||t.__puid||A.getId(t),(a=this.cache[i]&&0<this.cache[i].length?this.cache[i].pop():this.createOrClone(t,e)).__puid=t.__puid||i,a}},{key:"expire",value:function(t){return this.getCache(t.__puid).push(t)}},{key:"createOrClone",value:function(t,e){return this.total++,this.create?this.create(t,e):"function"==typeof t?P.classApply(t,e):t.clone()}},{key:"getCount",value:function(){var t,e=0;for(t in this.cache)e+=this.cache[t].length;return e++}},{key:"destroy",value:function(){for(var t in this.cache)this.cache[t].length=0,delete this.cache[t]}},{key:"getCache",value:function(t){t=0<arguments.length&&void 0!==t?t:"default";return this.cache[t]||(this.cache[t]=[]),this.cache[t]}}]),R);function R(t){o(this,R),this.total=0,this.cache={}}var O=(t(w,[{key:"update",value:function(t,e){this.add(t,e);var i=this.getEmitter(),t=this.getRenderer(),e="";switch(this.type){case 2:e+="emitter:"+this.proton.emitters.length+"<br>",i&&(e+="em speed:"+i.emitSpeed+"<br>"),i&&(e+="pos:"+this.getEmitterPos(i));break;case 3:i&&(e+="initializes:"+i.initializes.length+"<br>"),i&&(e+='<span style="display:inline-block;">'+this.concatArr(i.initializes)+"</span><br>"),i&&(e+="behaviours:"+i.behaviours.length+"<br>"),i&&(e+='<span style="display:inline-block;">'+this.concatArr(i.behaviours)+"</span><br>");break;case 4:t&&(e+=t.name+"<br>"),t&&(e+="body:"+this.getCreatedNumber(t)+"<br>");break;default:e+="particles:"+this.proton.getCount()+"<br>",e+="pool:"+this.proton.pool.getCount()+"<br>",e+="total:"+this.proton.pool.total}this.container.innerHTML=e}},{key:"add",value:function(t,e){var i=this;if(!this.container){this.type=1,this.container=document.createElement("div"),this.container.style.cssText=["position:absolute;bottom:0px;left:0;cursor:pointer;","opacity:0.9;z-index:10000;padding:10px;font-size:12px;font-family:Helvetica,Arial,sans-serif;","width:120px;height:50px;background-color:#002;color:#0ff;"].join(""),this.container.addEventListener("click",function(t){i.type++,4<i.type&&(i.type=1)},!1);var a=void 0,r=void 0;switch(t){case 2:a="#201",r="#f08";break;case 3:a="#020",r="#0f0";break;default:a="#002",r="#0ff"}this.container.style["background-color"]=a,this.container.style.color=r}this.container.parentNode||(e=e||this.body||document.body).appendChild(this.container)}},{key:"getEmitter",value:function(){return this.proton.emitters[this.emitterIndex]}},{key:"getRenderer",value:function(){return this.proton.renderers[this.rendererIndex]}},{key:"concatArr",value:function(t){var e="";if(!t||!t.length)return e;for(var i=0;i<t.length;i++)e+=(t[i].name||"").substr(0,1)+".";return e}},{key:"getCreatedNumber",value:function(t){return t.pool.total||t.cpool&&t.cpool.total||0}},{key:"getEmitterPos",value:function(t){return Math.round(t.p.x)+","+Math.round(t.p.y)}}]),w);function w(t){o(this,w),this.proton=t,this.container=null,this.type=1,this.emitterIndex=0,this.rendererIndex=0}var C=(t(S,[{key:"addEventListener",value:function(t,e){return this._listeners?this.removeEventListener(t,e):this._listeners={},this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),e}},{key:"removeEventListener",value:function(t,e){if(this._listeners&&this._listeners[t])for(var i=this._listeners[t],a=i.length,r=0;r<a;r++)if(i[r]===e){1===a?delete this._listeners[t]:i.splice(r,1);break}}},{key:"removeAllEventListeners",value:function(t){t?this._listeners&&delete this._listeners[t]:this._listeners=null}},{key:"dispatchEvent",value:function(t,e){var i=!1,a=this._listeners;if(t&&a){var r=a[t];if(!r)return i;for(var n=void 0,s=r.length;s--;)n=r[s],i=i||n(e)}return!!i}},{key:"hasEventListener",value:function(t){var e=this._listeners;return!(!e||!e[t])}}],[{key:"bind",value:function(t){t.prototype.dispatchEvent=S.prototype.dispatchEvent,t.prototype.hasEventListener=S.prototype.hasEventListener,t.prototype.addEventListener=S.prototype.addEventListener,t.prototype.removeEventListener=S.prototype.removeEventListener,t.prototype.removeAllEventListeners=S.prototype.removeAllEventListeners}}]),S);function S(){o(this,S),this._listeners=null}var I=(t(D,[{key:"calculate",value:function(t,e,i){this.eulerIntegrate(t,e,i)}},{key:"eulerIntegrate",value:function(t,e,i){t.sleep||(t.old.p.copy(t.p),t.old.v.copy(t.v),t.a.multiplyScalar(1/t.mass),t.v.add(t.a.multiplyScalar(e)),t.p.add(t.old.v.multiplyScalar(e)),i&&t.v.multiplyScalar(i),t.a.clear())}}]),D);function D(t){o(this,D),this.type=t}var V=(t(M,[{key:"addRenderer",value:function(t){t.init(this),this.renderers.push(t)}},{key:"removeRenderer",value:function(t){var e=this.renderers.indexOf(t);this.renderers.splice(e,1),t.remove(this)}},{key:"addEmitter",value:function(t){this.emitters.push(t),(t.parent=this).dispatchEvent(M.EMITTER_ADDED,t)}},{key:"removeEmitter",value:function(t){var e=this.emitters.indexOf(t);this.emitters.splice(e,1),t.parent=null,this.dispatchEvent(M.EMITTER_REMOVED,t)}},{key:"update",value:function(){"auto"===this._fps?(this.dispatchEvent(M.PROTON_UPDATE),M.USE_CLOCK?(this.then||(this.then=(new Date).getTime()),this.now=(new Date).getTime(),this.elapsed=.001*(this.now-this.then),this.amendChangeTabsBug(),0<this.elapsed&&this.emittersUpdate(this.elapsed),this.then=this.now):this.emittersUpdate(M.DEFAULT_INTERVAL),this.dispatchEvent(M.PROTON_UPDATE_AFTER)):(this.then||(this.then=(new Date).getTime()),this.now=(new Date).getTime(),this.elapsed=.001*(this.now-this.then),this.elapsed>this._interval&&(this.dispatchEvent(M.PROTON_UPDATE),this.emittersUpdate(this._interval),this.then=this.now-this.elapsed%this._interval*1e3,this.dispatchEvent(M.PROTON_UPDATE_AFTER)))}},{key:"emittersUpdate",value:function(t){for(var e=this.emitters.length;e--;)this.emitters[e].update(t)}},{key:"amendChangeTabsBug",value:function(){M.amendChangeTabsBug&&.5<this.elapsed&&(this.then=(new Date).getTime(),this.elapsed=0)}},{key:"getCount",value:function(){for(var t=0,e=this.emitters.length;e--;)t+=this.emitters[e].particles.length;return t}},{key:"getAllParticles",value:function(){for(var t=[],e=this.emitters.length;e--;)t=t.concat(this.emitters[e].particles);return t}},{key:"destroyAllEmitters",value:function(){P.destroyAll(this.emitters)}},{key:"destroy",value:function(t){function e(){i.time=0,i.then=0,i.pool.destroy(),P.destroyAll(i.emitters),P.destroyAll(i.renderers,i.getAllParticles())}var i=this;0<arguments.length&&void 0!==t&&t?setTimeout(e,200):e()}},{key:"fps",set:function(t){this._fps=t,this._interval="auto"===t?M.DEFAULT_INTERVAL:s.floor(1/t,7)},get:function(){return this._fps}}]),M);function M(t){o(this,M),this.emitters=[],this.renderers=[],this.time=0,this.now=0,this.then=0,this.elapsed=0,this.stats=new O(this),this.pool=new T(80),this.integrationType=P.initValue(t,M.EULER),this.integrator=new I(this.integrationType),this._fps="auto",this._interval=M.DEFAULT_INTERVAL}V.USE_CLOCK=!1,V.MEASURE=100,V.EULER="euler",V.RK2="runge-kutta2",V.PARTICLE_CREATED="PARTICLE_CREATED",V.PARTICLE_UPDATE="PARTICLE_UPDATE",V.PARTICLE_SLEEP="PARTICLE_SLEEP",V.PARTICLE_DEAD="PARTICLE_DEAD",V.EMITTER_ADDED="EMITTER_ADDED",V.EMITTER_REMOVED="EMITTER_REMOVED",V.PROTON_UPDATE="PROTON_UPDATE",V.PROTON_UPDATE_AFTER="PROTON_UPDATE_AFTER",V.DEFAULT_INTERVAL=.0167,V.amendChangeTabsBug=!0,C.bind(V);var B=(t(L,[{key:"reset",value:function(){this.r=255,this.g=255,this.b=255}}]),L);function L(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:255;o(this,L),this.r=t,this.g=e,this.b=i}var U={easeLinear:function(t){return t},easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInSine:function(t){return 1-Math.cos(t*s.PI_2)},easeOutSine:function(t){return Math.sin(t*s.PI_2)},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInBack:function(t){return t*t*(2.70158*t-1.70158)},easeOutBack:function(t){return--t*t*(2.70158*t+1.70158)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},getEasing:function(t){return"function"==typeof t?t:this[t]||this.easeLinear}},F=(t(z,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"getGradient",value:function(){return 0!==this.x?Math.atan2(this.y,this.x):0<this.y?s.PI_2:this.y<0?-s.PI_2:void 0}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)}},{key:"addXY",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"sub",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"divideScalar",value:function(t){return 0!==t?(this.x/=t,this.y/=t):this.set(0,0),this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"negate",value:function(){return this.multiplyScalar(-1)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"rotate",value:function(t){var e=this.x,i=this.y;return this.x=e*Math.cos(t)+i*Math.sin(t),this.y=-e*Math.sin(t)+i*Math.cos(t),this}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,t=this.y-t.y;return e*e+t*t}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"clear",value:function(){return this.x=0,this.y=0,this}},{key:"clone",value:function(){return new z(this.x,this.y)}}]),z);function z(t,e){o(this,z),this.x=t||0,this.y=e||0}var j=(t(N,[{key:"getDirection",value:function(){return Math.atan2(this.v.x,-this.v.y)*s.N180_PI}},{key:"reset",value:function(){return this.life=1/0,this.age=0,this.dead=!1,this.sleep=!1,this.body=null,this.sprite=null,this.parent=null,this.energy=1,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.rotation=0,this.color=null,this.p.set(0,0),this.v.set(0,0),this.a.set(0,0),this.old.p.set(0,0),this.old.v.set(0,0),this.old.a.set(0,0),this.easing=U.easeLinear,this.rgb.reset(),P.emptyObject(this.data),this.removeAllBehaviours(),this}},{key:"update",value:function(t,e){this.sleep||(this.age+=t,this.applyBehaviours(t,e)),this.age<this.life?(e=this.easing(this.age/this.life),this.energy=Math.max(1-e,0)):this.destroy()}},{key:"applyBehaviours",value:function(t,e){for(var i=this.behaviours.length,a=void 0,a=0;a<i;a++)this.behaviours[a]&&this.behaviours[a].applyBehaviour(this,t,e)}},{key:"addBehaviour",value:function(t){this.behaviours.push(t),t.hasOwnProperty("parents")&&t.parents.push(this),t.initialize(this)}},{key:"addBehaviours",value:function(t){for(var e=t.length,i=void 0,i=0;i<e;i++)this.addBehaviour(t[i])}},{key:"removeBehaviour",value:function(t){t=this.behaviours.indexOf(t);-1<t&&(this.behaviours.splice(t,1).parents=null)}},{key:"removeAllBehaviours",value:function(){P.emptyArray(this.behaviours)}},{key:"destroy",value:function(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}}]),N);function N(t){o(this,N),this.id="",this.old={},this.data={},this.behaviours=[],this.p=[],this.v=[],this.a=[],this.rgb={},this.name="Particle",this.id=A.id(this.name),this.old={},this.data={},this.behaviours=[],this.p=new F,this.v=new F,this.a=new F,this.old.p=new F,this.old.v=new F,this.old.a=new F,this.rgb=new B,this.reset(),t&&P.setProp(this,t)}var H={hexToRgb:function(t){t="#"===t.charAt(0)?t.substring(1,7):t;return{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16)}},rgbToHex:function(t){return"rgb("+t.r+", "+t.g+", "+t.b+")"},getHex16FromParticle:function(t){return 65536*Number(t.rgb.r)+256*Number(t.rgb.g)+Number(t.rgb.b)}},q=(t(G,[{key:"set",value:function(t,e){return this.r=t,this.tha=e,this}},{key:"setR",value:function(t){return this.r=t,this}},{key:"setTha",value:function(t){return this.tha=t,this}},{key:"copy",value:function(t){return this.r=t.r,this.tha=t.tha,this}},{key:"toVector",value:function(){return new F(this.getX(),this.getY())}},{key:"getX",value:function(){return this.r*Math.sin(this.tha)}},{key:"getY",value:function(){return-this.r*Math.cos(this.tha)}},{key:"normalize",value:function(){return this.r=1,this}},{key:"equals",value:function(t){return t.r===this.r&&t.tha===this.tha}},{key:"clear",value:function(){return this.r=0,this.tha=0,this}},{key:"clone",value:function(){return new G(this.r,this.tha)}}]),G);function G(t,e){o(this,G),this.r=Math.abs(t)||0,this.tha=e||0}var X={create:function(t){var e=new Float32Array(9);return t&&this.set(t,e),e},set:function(t,e){for(var i=0;i<9;i++)e[i]=t[i];return e},multiply:function(t,e,i){var a=t[0],r=t[1],n=t[2],s=t[3],o=t[4],h=t[6],l=t[7],u=e[0],c=e[1],d=e[2],y=e[3],p=e[4],t=e[6],e=e[7];return i[0]=u*a+c*s,i[1]=u*r+c*o,i[2]=n*d,i[3]=y*a+p*s,i[4]=y*r+p*o,i[6]=t*a+e*s+h,i[7]=t*r+e*o+l,i},inverse:function(t,e){var i=t[0],a=t[1],r=t[3],n=t[4],s=t[6],o=t[7],h=-r,t=o*r-n*s,r=1/(i*n+a*h);return e[0]=n*r,e[1]=-a*r,e[3]=h*r,e[4]=i*r,e[6]=t*r,e[7]=(-o*i+a*s)*r,e},multiplyVec2:function(t,e,i){var a=e[0],e=e[1];return i[0]=a*t[0]+e*t[3]+t[6],i[1]=a*t[1]+e*t[4]+t[7],i}},Y=(r(W,l),t(W,[{key:"getValue",value:function(){var t=P.getRandFromArray(this._arr);return"random"===t||"Random"===t?s.randomColor():t}}],[{key:"createArraySpan",value:function(t){return t?t instanceof W?t:new W(t):null}}]),W);function W(t){o(this,W);var e=h(this,(W.__proto__||Object.getPrototypeOf(W)).call(this));return e._arr=P.toArray(t),e}var Z=(t(Q,[{key:"contains",value:function(t,e){return t<=this.right&&t>=this.x&&e<=this.bottom&&e>=this.y}}]),Q);function Q(t,e,i,a){o(this,Q),this.x=t,this.y=e,this.width=i,this.height=a,this.bottom=this.y+this.height,this.right=this.x+this.width}var K=(t(J,[{key:"init",value:function(){this.startTime=0,this.nextTime=this.timePan.getValue()}},{key:"getValue",value:function(t){return this.startTime+=t,this.startTime>=this.nextTime?(this.startTime=0,this.nextTime=this.timePan.getValue(),1===this.numPan.b?.5<this.numPan.getValue(!1)?1:0:this.numPan.getValue(!0)):0}}]),J);function J(t,e){o(this,J),this.numPan=l.setSpanValue(P.initValue(t,1)),this.timePan=l.setSpanValue(P.initValue(e,1)),this.startTime=0,this.nextTime=0,this.init()}var $=(t(tt,[{key:"reset",value:function(){}},{key:"init",value:function(t,e){e?this.initialize(e):this.initialize(t)}},{key:"initialize",value:function(){}}]),tt);function tt(){o(this,tt)}var et=(r(it,$),t(it,[{key:"initialize",value:function(t){this.lifePan.a===1/0?t.life=1/0:t.life=this.lifePan.getValue()}}]),it);function it(t,e,i){o(this,it);var a=h(this,(it.__proto__||Object.getPrototypeOf(it)).call(this));return a.lifePan=l.setSpanValue(t,e,i),a.name="Life",a}var at=(t(rt,[{key:"getPosition",value:function(){}},{key:"crossing",value:function(){}}]),rt);function rt(){o(this,rt),this.vector=new F(0,0),this.random=0,this.crossType="dead",this.alert=!0}var nt=(r(st,at),t(st,[{key:"getPosition",value:function(){return this.vector.x=this.x,this.vector.y=this.y,this.vector}},{key:"crossing",value:function(){this.alert&&(console.error("Sorry, PointZone does not support crossing method!"),this.alert=!1)}}]),st);function st(t,e){o(this,st);var i=h(this,(st.__proto__||Object.getPrototypeOf(st)).call(this));return i.x=t,i.y=e,i}var ot=(r(ht,$),t(ht,[{key:"reset",value:function(t){this.zone=P.initValue(t,new nt)}},{key:"initialize",value:function(t){this.zone.getPosition(),t.p.x=this.zone.vector.x,t.p.y=this.zone.vector.y}}]),ht);function ht(t){o(this,ht);var e=h(this,(ht.__proto__||Object.getPrototypeOf(ht)).call(this));return e.zone=P.initValue(t,new nt),e.name="Position",e}var lt=(r(ut,$),t(ut,[{key:"reset",value:function(t,e,i){this.rPan=l.setSpanValue(t),this.thaPan=l.setSpanValue(e),this.type=P.initValue(i,"vector")}},{key:"normalizeVelocity",value:function(t){return t*V.MEASURE}},{key:"initialize",value:function(t){var e;"p"===this.type||"P"===this.type||"polar"===this.type?(e=new q(this.normalizeVelocity(this.rPan.getValue()),this.thaPan.getValue()*s.PI_180),t.v.x=e.getX(),t.v.y=e.getY()):(t.v.x=this.normalizeVelocity(this.rPan.getValue()),t.v.y=this.normalizeVelocity(this.thaPan.getValue()))}}]),ut);function ut(t,e,i){o(this,ut);var a=h(this,(ut.__proto__||Object.getPrototypeOf(ut)).call(this));return a.rPan=l.setSpanValue(t),a.thaPan=l.setSpanValue(e),a.type=P.initValue(i,"vector"),a.name="Velocity",a}var ct=(r(dt,$),t(dt,[{key:"initialize",value:function(t){t.mass=this.massPan.getValue()}}]),dt);function dt(t,e,i){o(this,dt);var a=h(this,(dt.__proto__||Object.getPrototypeOf(dt)).call(this));return a.massPan=l.setSpanValue(t,e,i),a.name="Mass",a}var yt=(r(pt,$),t(pt,[{key:"reset",value:function(t,e,i){this.radius=l.setSpanValue(t,e,i)}},{key:"initialize",value:function(t){t.radius=this.radius.getValue(),t.data.oldRadius=t.radius}}]),pt);function pt(t,e,i){o(this,pt);var a=h(this,(pt.__proto__||Object.getPrototypeOf(pt)).call(this));return a.radius=l.setSpanValue(t,e,i),a.name="Radius",a}var ft=(r(vt,$),t(vt,[{key:"initialize",value:function(t){var e=this.image.getValue();t.body="string"==typeof e?{width:this.w,height:this.h,src:e,isInner:!0,inner:!0}:e}},{key:"setSpanValue",value:function(t){return t instanceof Y?t:new Y(t)}}]),vt);function vt(t,e,i){o(this,vt);var a=h(this,(vt.__proto__||Object.getPrototypeOf(vt)).call(this));return a.image=a.setSpanValue(t),a.w=P.initValue(e,20),a.h=P.initValue(i,a.w),a.name="Body",a}var gt=(t(mt,[{key:"reset",value:function(t,e){this.life=P.initValue(t,1/0),this.easing=U.getEasing(e)}},{key:"normalizeForce",value:function(t){return t.multiplyScalar(V.MEASURE)}},{key:"normalizeValue",value:function(t){return t*V.MEASURE}},{key:"initialize",value:function(){}},{key:"calculate",value:function(t,e){this.age+=e,this.age>=this.life||this.dead?(this.energy=0,this.dead=!0,this.destroy()):(t=this.easing(t.age/t.life),this.energy=Math.max(1-t,0))}},{key:"destroy",value:function(){for(var t=this.parents.length;t--;)this.parents[t].removeBehaviour(this);this.parents.length=0}}]),mt);function mt(t,e){o(this,mt),this.life=P.initValue(t,1/0),this.easing=U.getEasing(e),this.age=0,this.energy=1,this.dead=!1,this.parents=[],this.id="Behaviour_"+mt.id++,this.name="Behaviour"}gt.id=0;var bt=(r(_t,gt),t(_t,[{key:"reset",value:function(t,e,i,a){this.force=this.normalizeForce(new F(t,e)),i&&n(_t.prototype.__proto__||Object.getPrototypeOf(_t.prototype),"reset",this).call(this,i,a)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.a.add(this.force)}}]),_t);function _t(t,e,i,a){o(this,_t);a=h(this,(_t.__proto__||Object.getPrototypeOf(_t)).call(this,i,a));return a.force=a.normalizeForce(new F(t,e)),a.name="Force",a}var xt=(r(kt,gt),t(kt,[{key:"reset",value:function(t,e,i,a,r){this.targetPosition=P.initValue(t,new F),this.radius=P.initValue(i,1e3),this.force=P.initValue(this.normalizeValue(e),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new F,this.lengthSq=0,a&&n(kt.prototype.__proto__||Object.getPrototypeOf(kt.prototype),"reset",this).call(this,a,r)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(t.p),this.lengthSq=this.attractionForce.lengthSq(),4e-5<this.lengthSq&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.multiplyScalar(1-this.lengthSq/this.radiusSq),this.attractionForce.multiplyScalar(this.force),t.a.add(this.attractionForce))}}]),kt);function kt(t,e,i,a,r){o(this,kt);r=h(this,(kt.__proto__||Object.getPrototypeOf(kt)).call(this,a,r));return r.targetPosition=P.initValue(t,new F),r.radius=P.initValue(i,1e3),r.force=P.initValue(r.normalizeValue(e),100),r.radiusSq=r.radius*r.radius,r.attractionForce=new F,r.lengthSq=0,r.name="Attraction",r}var Pt=(r(Et,gt),t(Et,[{key:"reset",value:function(t,e,i,a,r){this.panFoce=new F(t,e),this.panFoce=this.normalizeForce(this.panFoce),this.delay=i,a&&n(Et.prototype.__proto__||Object.getPrototypeOf(Et.prototype),"reset",this).call(this,a,r)}},{key:"initialize",value:function(t){t.data.time=0}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.data.time+=e,t.data.time>=this.delay&&(t.a.addXY(s.randomAToB(-this.panFoce.x,this.panFoce.x),s.randomAToB(-this.panFoce.y,this.panFoce.y)),t.data.time=0)}}]),Et);function Et(t,e,i,a,r){o(this,Et);r=h(this,(Et.__proto__||Object.getPrototypeOf(Et)).call(this,a,r));return r.reset(t,e,i),r.time=0,r.name="RandomDrift",r}var At=(r(Tt,bt),t(Tt,[{key:"reset",value:function(t,e,i){n(Tt.prototype.__proto__||Object.getPrototypeOf(Tt.prototype),"reset",this).call(this,0,t,e,i)}}]),Tt);function Tt(t,e,i){o(this,Tt);i=h(this,(Tt.__proto__||Object.getPrototypeOf(Tt)).call(this,0,t,e,i));return i.name="Gravity",i}var Rt=(r(Ot,gt),t(Ot,[{key:"reset",value:function(t,e,i,a,r){this.emitter=P.initValue(t,null),this.mass=P.initValue(e,!0),this.callback=P.initValue(i,null),this.collisionPool=[],this.delta=new F,a&&n(Ot.prototype.__proto__||Object.getPrototypeOf(Ot.prototype),"reset",this).call(this,a,r)}},{key:"applyBehaviour",value:function(t,e,i){for(var a,r,n,s,o,h,l=(this.emitter?this.emitter.particles:this.pool).slice(i),u=l.length,c=void 0,d=void 0,d=0;d<u;d++){(c=l[d])!==t&&(this.delta.copy(c.p),this.delta.sub(t.p),(a=this.delta.lengthSq())<=(h=t.radius+c.radius)*h&&(r=h-Math.sqrt(a),r+=.5,n=t.mass+c.mass,s=this.mass?c.mass/n:.5,o=this.mass?t.mass/n:.5,t.p.add(this.delta.clone().normalize().multiplyScalar(r*-s)),c.p.add(this.delta.normalize().multiplyScalar(r*o)),this.callback&&this.callback(t,c)))}}}]),Ot);function Ot(t,e,i,a,r){o(this,Ot);r=h(this,(Ot.__proto__||Object.getPrototypeOf(Ot)).call(this,a,r));return r.reset(t,e,i),r.name="Collision",r}var wt=(r(Ct,gt),t(Ct,[{key:"reset",value:function(t,e,i,a){this.zone=t,this.zone.crossType=P.initValue(e,"dead"),i&&n(Ct.prototype.__proto__||Object.getPrototypeOf(Ct.prototype),"reset",this).call(this,i,a)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.zone.crossing(t)}}]),Ct);function Ct(t,e,i,a){o(this,Ct);a=h(this,(Ct.__proto__||Object.getPrototypeOf(Ct)).call(this,i,a));return a.reset(t,e),a.name="CrossZone",a}var St=(r(It,gt),t(It,[{key:"reset",value:function(t,e,i,a){this.same=null==e,this.a=l.setSpanValue(P.initValue(t,1)),this.b=l.setSpanValue(e),i&&n(It.prototype.__proto__||Object.getPrototypeOf(It.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(t){t.data.alphaA=this.a.getValue(),this.same?t.data.alphaB=t.data.alphaA:t.data.alphaB=this.b.getValue()}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.alpha=t.data.alphaB+(t.data.alphaA-t.data.alphaB)*this.energy,t.alpha<.001&&(t.alpha=0)}}]),It);function It(t,e,i,a){o(this,It);a=h(this,(It.__proto__||Object.getPrototypeOf(It)).call(this,i,a));return a.reset(t,e),a.name="Alpha",a}var Dt=(r(Vt,gt),t(Vt,[{key:"reset",value:function(t,e,i,a){this.same=null==e,this.a=l.setSpanValue(P.initValue(t,1)),this.b=l.setSpanValue(e),i&&n(Vt.prototype.__proto__||Object.getPrototypeOf(Vt.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(t){t.data.scaleA=this.a.getValue(),t.data.oldRadius=t.radius,t.data.scaleB=this.same?t.data.scaleA:this.b.getValue()}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.scale=t.data.scaleB+(t.data.scaleA-t.data.scaleB)*this.energy,t.scale<1e-4&&(t.scale=0),t.radius=t.data.oldRadius*t.scale}}]),Vt);function Vt(t,e,i,a){o(this,Vt);a=h(this,(Vt.__proto__||Object.getPrototypeOf(Vt)).call(this,i,a));return a.reset(t,e),a.name="Scale",a}var Mt=(r(Bt,gt),t(Bt,[{key:"reset",value:function(t,e,i,a,r){this.same=null==e,this.a=l.setSpanValue(P.initValue(t,"Velocity")),this.b=l.setSpanValue(P.initValue(e,0)),this.style=P.initValue(i,"to"),a&&n(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"reset",this).call(this,a,r)}},{key:"initialize",value:function(t){t.rotation=this.a.getValue(),t.data.rotationA=this.a.getValue(),this.same||(t.data.rotationB=this.b.getValue())}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.same?"V"!==this.a.a&&"Velocity"!==this.a.a&&"v"!==this.a.a||(t.rotation=t.getDirection()):"to"===this.style||"TO"===this.style||"_"===this.style?t.rotation+=t.data.rotationB+(t.data.rotationA-t.data.rotationB)*this.energy:t.rotation+=t.data.rotationB}}]),Bt);function Bt(t,e,i,a,r){o(this,Bt);r=h(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).call(this,a,r));return r.reset(t,e,i),r.name="Rotate",r}var Lt=(r(Ut,gt),t(Ut,[{key:"reset",value:function(t,e,i,a){this.a=Y.createArraySpan(t),this.b=Y.createArraySpan(e),i&&n(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(t){t.color=this.a.getValue(),t.data.colorA=H.hexToRgb(t.color),this.b&&(t.data.colorB=H.hexToRgb(this.b.getValue()))}},{key:"applyBehaviour",value:function(t,e,i){this.b?(this.calculate(t,e,i),t.rgb.r=t.data.colorB.r+(t.data.colorA.r-t.data.colorB.r)*this.energy,t.rgb.g=t.data.colorB.g+(t.data.colorA.g-t.data.colorB.g)*this.energy,t.rgb.b=t.data.colorB.b+(t.data.colorA.b-t.data.colorB.b)*this.energy,t.rgb.r=Math.floor(t.rgb.r),t.rgb.g=Math.floor(t.rgb.g),t.rgb.b=Math.floor(t.rgb.b)):(t.rgb.r=t.data.colorA.r,t.rgb.g=t.data.colorA.g,t.rgb.b=t.data.colorA.b)}}]),Ut);function Ut(t,e,i,a){o(this,Ut);a=h(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).call(this,i,a));return a.reset(t,e),a.name="Color",a}var Ft="changing",zt=(r(jt,gt),t(jt,[{key:"setAngleAndForce",value:function(t,e){this.force=Ft,this.angle=s.PI/2,"right"===t?this.angle=s.PI/2:"left"===t?this.angle=-s.PI/2:"random"===t?this.angle="random":t instanceof l?(this.angle="span",this.span=t):t&&(this.angle=t),"changing"===String(e).toLowerCase()||"chang"===String(e).toLowerCase()||"auto"===String(e).toLowerCase()?this.force=Ft:e&&(this.force=e)}},{key:"reset",value:function(t,e,i,a){this.angle=s.PI/2,this.setAngleAndForce(t,e),i&&n(jt.prototype.__proto__||Object.getPrototypeOf(jt.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(t){"random"===this.angle?t.data.cangle=s.randomAToB(-s.PI,s.PI):"span"===this.angle&&(t.data.cangle=this.span.getValue()),t.data.cyclone=new F(0,0)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i);e=void 0,i=t.v.getGradient();"random"===this.angle||"span"===this.angle?i+=t.data.cangle:i+=this.angle,e=this.force===Ft?t.v.length()/100:this.force,t.data.cyclone.x=e*Math.cos(i),t.data.cyclone.y=e*Math.sin(i),t.data.cyclone=this.normalizeForce(t.data.cyclone),t.a.add(t.data.cyclone)}}]),jt);function jt(t,e,i,a){o(this,jt);a=h(this,(jt.__proto__||Object.getPrototypeOf(jt)).call(this,i,a));return a.setAngleAndForce(t,e),a.name="Cyclone",a}var Nt=(r(Ht,xt),t(Ht,[{key:"reset",value:function(t,e,i,a,r){n(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"reset",this).call(this,t,e,i,a,r),this.force*=-1}}]),Ht);function Ht(t,e,i,a,r){o(this,Ht);r=h(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).call(this,t,e,i,a,r));return r.force*=-1,r.name="Repulsion",r}var qt=(r(Gt,gt),t(Gt,[{key:"reset",value:function(t,e,i,a){this.distanceVec=new F,this.centerPoint=P.initValue(t,new F),this.force=P.initValue(this.normalizeValue(e),100),i&&n(Gt.prototype.__proto__||Object.getPrototypeOf(Gt.prototype),"reset",this).call(this,i,a)}},{key:"initialize",value:function(){}},{key:"applyBehaviour",value:function(t,e){this.distanceVec.set(this.centerPoint.x-t.p.x,this.centerPoint.y-t.p.y);var i,a=this.distanceVec.lengthSq();0!==a&&(i=this.distanceVec.length(),i=this.force*e/(a*i),t.v.x+=i*this.distanceVec.x,t.v.y+=i*this.distanceVec.y)}}]),Gt);function Gt(t,e,i,a){o(this,Gt);a=h(this,(Gt.__proto__||Object.getPrototypeOf(Gt)).call(this,i,a));return a.distanceVec=new F,a.centerPoint=P.initValue(t,new F),a.force=P.initValue(a.normalizeValue(e),100),a.name="GravityWell",a}var Xt={initialize:function(t,e,i){for(var a=i.length,r=void 0,r=0;r<a;r++)i[r]instanceof $?i[r].init(t,e):this.init(t,e,i[r]);this.bindEmitter(t,e)},init:function(t,e,i){P.setProp(e,i),P.setVectorVal(e,i)},bindEmitter:function(t,e){t.bindEmitter&&(e.p.add(t.p),e.v.add(t.v),e.a.add(t.a),e.v.rotate(s.degreeTransform(t.rotation)))}},Yt=(r(Wt,j),t(Wt,[{key:"emit",value:function(t,e){this.stoped=!1,this.emitTime=0,this.totalTime=P.initValue(t,1/0),!0===e||"life"===e||"destroy"===e?this.life="once"===t?1:this.totalTime:isNaN(e)||(this.life=e),this.rate.init()}},{key:"stop",value:function(){this.totalTime=-1,this.emitTime=0,this.stoped=!0}},{key:"preEmit",value:function(t){var e=this.stoped,i=this.emitTime,a=this.totalTime;this.stoped=!1,this.emitTime=0,this.totalTime=t,this.rate.init();for(;.0167<t;)t-=.0167,this.update(.0167);this.stoped=e,this.emitTime=i+Math.max(t,0),this.totalTime=a}},{key:"removeAllParticles",value:function(){for(var t=this.particles.length;t--;)this.particles[t].dead=!0}},{key:"addSelfInitialize",value:function(t){t.init?t.init(this):this.initAll()}},{key:"addInitialize",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=e.length;a--;)this.initializes.push(e[a])}},{key:"removeInitialize",value:function(t){t=this.initializes.indexOf(t);-1<t&&this.initializes.splice(t,1)}},{key:"removeAllInitializers",value:function(){P.emptyArray(this.initializes)}},{key:"addBehaviour",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=arguments.length;a--;){var r=e[a];this.behaviours.push(r),r.parents&&r.parents.push(this)}}},{key:"removeBehaviour",value:function(t){var e=this.behaviours.indexOf(t);return this.behaviours.splice(e,1),t.parents&&(e=t.parents.indexOf(t),t.parents.splice(e,1)),e}},{key:"removeAllBehaviours",value:function(){P.emptyArray(this.behaviours)}},{key:"update",value:function(t){this.age+=t,(this.age>=this.life||this.dead)&&this.destroy(),this.emitting(t),this.integrate(t)}},{key:"integrate",value:function(t){if(this.parent){var e=1-this.damping;this.parent.integrator.calculate(this,t,e);for(var i=void 0,a=void 0,i=this.particles.length-1;0<=i;i--)(a=this.particles[i]).update(t,i),this.parent.integrator.calculate(a,t,e),this.dispatch("PARTICLE_UPDATE",a),a.dead&&(this.dispatch("PARTICLE_DEAD",a),this.parent.pool.expire(a),this.particles.splice(i,1))}}},{key:"dispatch",value:function(t,e){this.parent&&this.parent.dispatchEvent(t,e),this.bindEvent&&this.dispatchEvent(t,e)}},{key:"emitting",value:function(t){if("once"===this.totalTime){var e=void 0,i=this.rate.getValue(99999);for(0<i&&(this.emitSpeed=i),e=0;e<i;e++)this.createParticle();this.totalTime="none"}else if(this.emitTime+=t,this.emitTime<this.totalTime){var a=this.rate.getValue(t),r=void 0;for(0<a&&(this.emitSpeed=a),r=0;r<a;r++)this.createParticle()}}},{key:"createParticle",value:function(t,e){var i=this.parent.pool.get(j);return this.setupParticle(i,t,e),this.dispatch("PARTICLE_CREATED",i),i}},{key:"setupParticle",value:function(t,e,i){var a=this.initializes,r=this.behaviours;e&&(a=P.toArray(e)),i&&(r=P.toArray(i)),t.reset(),Xt.initialize(this,t,a),t.addBehaviours(r),(t.parent=this).particles.push(t)}},{key:"remove",value:function(){this.stop(),P.destroyAll(this.particles)}},{key:"destroy",value:function(){this.dead=!0,this.remove(),this.removeAllInitializers(),this.removeAllBehaviours(),this.parent&&this.parent.removeEmitter(this)}}]),Wt);function Wt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,Wt);t=h(this,(Wt.__proto__||Object.getPrototypeOf(Wt)).call(this,t));return t.particles=[],t.behaviours=[],t.initializes=[],t.emitTime=0,t.emitSpeed=0,t.totalTime=-1,t.damping=.006,t.bindEmitter=!0,t.rate=new K(1,.1),t.name="Emitter",t.id=A.id(t.name),t}C.bind(Yt);var Zt=(r(Qt,Yt),t(Qt,[{key:"addSelfBehaviour",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var a=void 0,r=e.length,a=0;a<r;a++){var n=e[a];this.selfBehaviours.push(n),n.initialize(this)}}},{key:"removeSelfBehaviour",value:function(t){t=this.selfBehaviours.indexOf(t);-1<t&&this.selfBehaviours.splice(t,1)}},{key:"update",value:function(t){if(n(Qt.prototype.__proto__||Object.getPrototypeOf(Qt.prototype),"update",this).call(this,t),!this.sleep)for(var e=this.selfBehaviours.length,i=void 0,i=0;i<e;i++)this.selfBehaviours[i].applyBehaviour(this,t,i)}}]),Qt);function Qt(t){o(this,Qt);t=h(this,(Qt.__proto__||Object.getPrototypeOf(Qt)).call(this,t));return t.selfBehaviours=[],t}var Kt=(r(Jt,Yt),t(Jt,[{key:"initEventHandler",value:function(){var e=this;this.mousemoveHandler=function(t){return e.mousemove.call(e,t)},this.mousedownHandler=function(t){return e.mousedown.call(e,t)},this.mouseupHandler=function(t){return e.mouseup.call(e,t)},this.mouseTarget.addEventListener("mousemove",this.mousemoveHandler,!1)}},{key:"emit",value:function(){this._allowEmitting=!0}},{key:"stop",value:function(){this._allowEmitting=!1}},{key:"mousemove",value:function(t){t.layerX||0===t.layerX?(this.p.x+=(t.layerX-this.p.x)*this.ease,this.p.y+=(t.layerY-this.p.y)*this.ease):!t.offsetX&&0!==t.offsetX||(this.p.x+=(t.offsetX-this.p.x)*this.ease,this.p.y+=(t.offsetY-this.p.y)*this.ease),this._allowEmitting&&n(Jt.prototype.__proto__||Object.getPrototypeOf(Jt.prototype),"emit",this).call(this,"once")}},{key:"destroy",value:function(){n(Jt.prototype.__proto__||Object.getPrototypeOf(Jt.prototype),"destroy",this).call(this),this.mouseTarget.removeEventListener("mousemove",this.mousemoveHandler,!1)}}]),Jt);function Jt(t,e,i){o(this,Jt);i=h(this,(Jt.__proto__||Object.getPrototypeOf(Jt)).call(this,i));return i.mouseTarget=P.initValue(t,window),i.ease=P.initValue(e,.7),i._allowEmitting=!1,i.initEventHandler(),i}var $t=(t(te,[{key:"setStroke",value:function(t,e){t=0<arguments.length&&void 0!==t?t:"#000000",e=1<arguments.length&&void 0!==e?e:1;this.stroke={color:t,thinkness:e}}},{key:"initHandler",value:function(){var e=this;this._protonUpdateHandler=function(){e.onProtonUpdate.call(e)},this._protonUpdateAfterHandler=function(){e.onProtonUpdateAfter.call(e)},this._emitterAddedHandler=function(t){e.onEmitterAdded.call(e,t)},this._emitterRemovedHandler=function(t){e.onEmitterRemoved.call(e,t)},this._particleCreatedHandler=function(t){e.onParticleCreated.call(e,t)},this._particleUpdateHandler=function(t){e.onParticleUpdate.call(e,t)},this._particleDeadHandler=function(t){e.onParticleDead.call(e,t)}}},{key:"init",value:function(t){(this.parent=t).addEventListener("PROTON_UPDATE",this._protonUpdateHandler),t.addEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),t.addEventListener("EMITTER_ADDED",this._emitterAddedHandler),t.addEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),t.addEventListener("PARTICLE_CREATED",this._particleCreatedHandler),t.addEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),t.addEventListener("PARTICLE_DEAD",this._particleDeadHandler)}},{key:"resize",value:function(){}},{key:"destroy",value:function(){this.remove()}},{key:"remove",value:function(){this.parent.removeEventListener("PROTON_UPDATE",this._protonUpdateHandler),this.parent.removeEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),this.parent.removeEventListener("EMITTER_ADDED",this._emitterAddedHandler),this.parent.removeEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),this.parent.removeEventListener("PARTICLE_CREATED",this._particleCreatedHandler),this.parent.removeEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),this.parent.removeEventListener("PARTICLE_DEAD",this._particleDeadHandler),this.parent=null}},{key:"onProtonUpdate",value:function(){}},{key:"onProtonUpdateAfter",value:function(){}},{key:"onEmitterAdded",value:function(){}},{key:"onEmitterRemoved",value:function(){}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(){}},{key:"onParticleDead",value:function(){}}]),te);function te(t,e){o(this,te),this.pool=new T,this.element=t,this.stroke=e,this.circleConf={isCircle:!0},this.initHandler(),this.name="BaseRenderer"}var ee=(r(ie,$t),t(ie,[{key:"resize",value:function(t,e){this.element.width=t,this.element.height=e}},{key:"onProtonUpdate",value:function(){this.context.clearRect(0,0,this.element.width,this.element.height)}},{key:"onParticleCreated",value:function(t){t.body?x(t.body,this.addImg2Body,t):t.color=t.color||"#ff0000"}},{key:"onParticleUpdate",value:function(t){t.body?t.body instanceof Image&&this.drawImage(t):this.drawCircle(t)}},{key:"onParticleDead",value:function(t){t.body=null}},{key:"addImg2Body",value:function(t,e){e.body=t}},{key:"drawImage",value:function(t){var e,i=t.body.width*t.scale|0,a=t.body.height*t.scale|0,r=t.p.x-i/2,n=t.p.y-a/2;t.color?(t.data.buffer||(t.data.buffer=this.createBuffer(t.body)),(e=t.data.buffer.getContext("2d")).clearRect(0,0,t.data.buffer.width,t.data.buffer.height),e.globalAlpha=t.alpha,e.drawImage(t.body,0,0),e.globalCompositeOperation="source-atop",e.fillStyle=H.rgbToHex(t.rgb),e.fillRect(0,0,t.data.buffer.width,t.data.buffer.height),e.globalCompositeOperation="source-over",e.globalAlpha=1,this.context.drawImage(t.data.buffer,0,0,t.data.buffer.width,t.data.buffer.height,r,n,i,a)):(this.context.save(),this.context.globalAlpha=t.alpha,this.context.translate(t.p.x,t.p.y),this.context.rotate(s.degreeTransform(t.rotation)),this.context.translate(-t.p.x,-t.p.y),this.context.drawImage(t.body,0,0,t.body.width,t.body.height,r,n,i,a),this.context.globalAlpha=1,this.context.restore())}},{key:"drawCircle",value:function(t){t.rgb?this.context.fillStyle="rgba("+t.rgb.r+","+t.rgb.g+","+t.rgb.b+","+t.alpha+")":this.context.fillStyle=t.color,this.context.beginPath(),this.context.arc(t.p.x,t.p.y,t.radius,0,2*Math.PI,!0),this.stroke&&(this.context.strokeStyle=this.stroke.color,this.context.lineWidth=this.stroke.thinkness,this.context.stroke()),this.context.closePath(),this.context.fill()}},{key:"createBuffer",value:function(t){if(t instanceof Image){var e=t.width+"_"+t.height,i=this.bufferCache[e];return i||((i=document.createElement("canvas")).width=t.width,i.height=t.height,this.bufferCache[e]=i),i}}}]),ie);function ie(t){o(this,ie);t=h(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this,t));return t.stroke=null,t.context=t.element.getContext("2d"),t.bufferCache={},t.name="CanvasRenderer",t}var ae=(r(re,$t),t(re,[{key:"onParticleCreated",value:function(t){t.body?x(t.body,this.addImg2Body,t):(t.body=this.pool.get(this.circleConf,t),this.element.appendChild(t.body))}},{key:"onParticleUpdate",value:function(t){this.bodyReady(t)&&(this.transform3d?v.transform3d(t.body,t.p.x,t.p.y,t.scale,t.rotation):v.transform(t.body,t.p.x,t.p.y,t.scale,t.rotation),t.body.style.opacity=t.alpha,t.body.isCircle&&(t.body.style.backgroundColor=t.color||"#ff0000"))}},{key:"onParticleDead",value:function(t){this.bodyReady(t)&&(this.element.removeChild(t.body),this.pool.expire(t.body),t.body=null)}},{key:"bodyReady",value:function(t){return"object"===i(t.body)&&t.body&&!t.body.isInner}},{key:"addImg2Body",value:function(t,e){e.dead||(e.body=this.pool.get(t,e),v.resize(e.body,t.width,t.height),this.element.appendChild(e.body))}},{key:"createBody",value:function(t,e){return t.isCircle?this.createCircle(e):this.createSprite(t,e)}},{key:"createCircle",value:function(t){var e=v.createDiv(t.id+"_dom",2*t.radius,2*t.radius);return e.style.borderRadius=t.radius+"px",this.stroke&&(e.style.borderColor=this.stroke.color,e.style.borderWidth=this.stroke.thinkness+"px"),e.isCircle=!0,e}},{key:"createSprite",value:function(t,e){var i="string"==typeof t?t:t.src,t=v.createDiv(e.id+"_dom",t.width,t.height);return t.style.backgroundImage="url("+i+")",t}}]),re);function re(t){o(this,re);var i=h(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,t));return i.stroke=null,i.pool.create=function(t,e){return i.createBody(t,e)},i.addImg2Body=i.addImg2Body.bind(i),i.transform3d=!1,i.name="DomRenderer",i}var ne=(r(se,$t),t(se,[{key:"onParticleCreated",value:function(t){t.body?this.createSprite(t):this.createCircle(t),this.element.addChild(t.body)}},{key:"onParticleUpdate",value:function(t){t.body&&(t.body.x=t.p.x,t.body.y=t.p.y,t.body.alpha=t.alpha,t.body.scaleX=t.body.scaleY=t.scale,t.body.rotation=t.rotation)}},{key:"onParticleDead",value:function(t){t.body&&(t.body.parent&&t.body.parent.removeChild(t.body),this.pool.expire(t.body),t.body=null),t.graphics&&this.pool.expire(t.graphics)}},{key:"createSprite",value:function(t){t.body=this.pool.get(t.body),t.body.parent||t.body.image&&(t.body.regX=t.body.image.width/2,t.body.regY=t.body.image.height/2)}},{key:"createCircle",value:function(t){var e=this.pool.get(createjs.Graphics);this.stroke&&(this.stroke instanceof String?e.beginStroke(this.stroke):e.beginStroke("#000000")),e.beginFill(t.color||"#ff0000").drawCircle(0,0,t.radius);var i=this.pool.get(createjs.Shape,[e]);t.body=i,t.graphics=e}}]),se);function se(t,e){o(this,se);t=h(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,t));return t.stroke=e,t.name="EaselRenderer",t}var oe=(r(he,$t),t(he,[{key:"resize",value:function(t,e){this.element.width=t,this.element.height=e}},{key:"createImageData",value:function(t){this.rectangle=t||new Z(0,0,this.element.width,this.element.height),this.imageData=this.context.createImageData(this.rectangle.width,this.rectangle.height),this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onProtonUpdate",value:function(){this.context.clearRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),this.imageData=this.context.getImageData(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height)}},{key:"onProtonUpdateAfter",value:function(){this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onParticleCreated",value:function(){}},{key:"onParticleUpdate",value:function(t){this.imageData&&this.setPixel(this.imageData,Math.floor(t.p.x-this.rectangle.x),Math.floor(t.p.y-this.rectangle.y),t)}},{key:"setPixel",value:function(t,e,i,a){var r=a.rgb;e<0||e>this.element.width||i<0||i>this.elementwidth||(e=4*((i>>0)*t.width+(e>>0)),t.data[e]=r.r,t.data[1+e]=r.g,t.data[2+e]=r.b,t.data[3+e]=255*a.alpha)}},{key:"onParticleDead",value:function(){}}]),he);function he(t,e){o(this,he);t=h(this,(he.__proto__||Object.getPrototypeOf(he)).call(this,t));return t.context=t.element.getContext("2d"),t.imageData=null,t.rectangle=null,t.rectangle=e,t.createImageData(e),t.name="PixelRenderer",t}var le=void 0,ue=(r(ce,$t),t(ce,[{key:"setPIXI",value:function(t){try{le=t||{Sprite:{}},this.createFromImage=le.Sprite.from||le.Sprite.fromImage}catch(t){}}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(t){t.body?t.body=this.pool.get(t.body,t):t.body=this.pool.get(this.circleConf,t),this.blendMode&&(t.body.blendMode=this.blendMode),this.element.addChild(t.body)}},{key:"onParticleUpdate",value:function(t){this.transform(t,t.body),!0!==this.setColor&&!0!==this.color||(t.body.tint=H.getHex16FromParticle(t))}},{key:"onParticleDead",value:function(t){this.element.removeChild(t.body),this.pool.expire(t.body),t.body=null}},{key:"destroy",value:function(t){n(ce.prototype.__proto__||Object.getPrototypeOf(ce.prototype),"destroy",this).call(this),this.pool.destroy();for(var e=t.length;e--;){var i=t[e];i.body&&this.element.removeChild(i.body)}}},{key:"transform",value:function(t,e){e.x=t.p.x,e.y=t.p.y,e.alpha=t.alpha,e.scale.x=t.scale,e.scale.y=t.scale,e.rotation=t.rotation*s.PI_180}},{key:"createBody",value:function(t,e){return t.isCircle?this.createCircle(e):this.createSprite(t)}},{key:"createSprite",value:function(t){t=t.isInner?this.createFromImage(t.src):new le.Sprite(t);return t.anchor.x=.5,t.anchor.y=.5,t}},{key:"createCircle",value:function(t){var e,i=new le.Graphics;return this.stroke&&(e=this.stroke instanceof String?this.stroke:0,i.beginStroke(e)),i.beginFill(t.color||36077),i.drawCircle(0,0,t.radius),i.endFill(),i}}]),ce);function ce(t,e){o(this,ce);var i=h(this,(ce.__proto__||Object.getPrototypeOf(ce)).call(this,t));return i.stroke=e,i.color=!1,i.setColor=!1,i.blendMode=null,i.pool.create=function(t,e){return i.createBody(t,e)},i.setPIXI(window.PIXI),i.name="PixiRenderer",i}var de=(t(ye,[{key:"set",value:function(t,e){0===e?X.set(t,this.mats[0]):X.multiply(this.mats[e-1],t,this.mats[e]),this.size=Math.max(this.size,e+1)}},{key:"push",value:function(t){0===this.size?X.set(t,this.mats[0]):X.multiply(this.mats[this.size-1],t,this.mats[this.size]),this.size++}},{key:"pop",value:function(){0<this.size&&this.size--}},{key:"top",value:function(){return this.mats[this.size-1]}}]),ye);function ye(){o(this,ye),this.mats=[];for(var t=this.size=0;t<20;t++)this.mats.push(X.create([0,0,0,0,0,0,0,0,0]))}r(pe,$t),t(pe,[{key:"init",value:function(t){n(pe.prototype.__proto__||Object.getPrototypeOf(pe.prototype),"init",this).call(this,t),this.resize(this.element.width,this.element.height)}},{key:"resize",value:function(t,e){this.umat[4]=-2,this.umat[7]=1,this.smat[0]=1/t,this.smat[4]=1/e,this.mstack.set(this.umat,0),this.mstack.set(this.smat,1),this.gl.viewport(0,0,t,e),this.element.width=t,this.element.height=e}},{key:"setMaxRadius",value:function(t){this.circleCanvasURL=this.createCircle(t)}},{key:"getVertexShader",value:function(){return["uniform vec2 viewport;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 tMat;","varying vec2 vTextureCoord;","varying float alpha;","void main() {","vec3 v = tMat * vec3(aVertexPosition, 1.0);","gl_Position = vec4(v.x, v.y, 0, 1);","vTextureCoord = aTextureCoord;","alpha = tMat[0][2];","}"].join("\n")}},{key:"getFragmentShader",value:function(){return["precision mediump float;","varying vec2 vTextureCoord;","varying float alpha;","uniform sampler2D uSampler;","uniform vec4 color;","uniform bool useTexture;","uniform vec3 uColor;","void main() {","vec4 textureColor = texture2D(uSampler, vTextureCoord);","gl_FragColor = textureColor * vec4(uColor, 1.0);","gl_FragColor.w *= alpha;","}"].join("\n")}},{key:"initVar",value:function(){this.mstack=new de,this.umat=X.create([2,0,1,0,-2,0,-1,1,1]),this.smat=X.create([.01,0,1,0,.01,0,0,0,1]),this.texturebuffers={}}},{key:"blendEquation",value:function(t){this.gl.blendEquation(this.gl[t])}},{key:"blendFunc",value:function(t,e){this.gl.blendFunc(this.gl[t],this.gl[e])}},{key:"getShader",value:function(t,e,i){i=i?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);return t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(alert(t.getShaderInfoLog(i)),null)}},{key:"initShaders",value:function(){var t=this.getShader(this.gl,this.getFragmentShader(),!0),e=this.getShader(this.gl,this.getVertexShader(),!1);this.sprogram=this.gl.createProgram(),this.gl.attachShader(this.sprogram,e),this.gl.attachShader(this.sprogram,t),this.gl.linkProgram(this.sprogram),this.gl.getProgramParameter(this.sprogram,this.gl.LINK_STATUS)||alert("Could not initialise shaders"),this.gl.useProgram(this.sprogram),this.sprogram.vpa=this.gl.getAttribLocation(this.sprogram,"aVertexPosition"),this.sprogram.tca=this.gl.getAttribLocation(this.sprogram,"aTextureCoord"),this.gl.enableVertexAttribArray(this.sprogram.tca),this.gl.enableVertexAttribArray(this.sprogram.vpa),this.sprogram.tMatUniform=this.gl.getUniformLocation(this.sprogram,"tMat"),this.sprogram.samplerUniform=this.gl.getUniformLocation(this.sprogram,"uSampler"),this.sprogram.useTex=this.gl.getUniformLocation(this.sprogram,"useTexture"),this.sprogram.color=this.gl.getUniformLocation(this.sprogram,"uColor"),this.gl.uniform1i(this.sprogram.useTex,1)}},{key:"initBuffers",value:function(){var t;this.unitIBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,3,1,0,2,3]),this.gl.STATIC_DRAW);for(var e=void 0,i=[],e=0;e<100;e++)i.push(e);for(t=new Uint16Array(i),this.unitI33=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitI33),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),i=[],e=0;e<100;e++)i.push(e,e+1,e+2);t=new Uint16Array(i),this.stripBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.stripBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"createCircle",value:function(t){this.circleCanvasRadius=c(P.initValue(t,32));var e=v.createCanvas("circle_canvas",2*this.circleCanvasRadius,2*this.circleCanvasRadius),t=e.getContext("2d");return t.beginPath(),t.arc(this.circleCanvasRadius,this.circleCanvasRadius,this.circleCanvasRadius,0,2*Math.PI,!0),t.closePath(),t.fillStyle="#FFF",t.fill(),e.toDataURL()}},{key:"drawImg2Canvas",value:function(t){var e=t.body.width,i=t.body.height,a=c(t.body.width),r=c(t.body.height),n=t.body.width/a,s=t.body.height/r;this.texturebuffers[t.data.src]||(this.texturebuffers[t.data.src]=[this.gl.createTexture(),this.gl.createBuffer(),this.gl.createBuffer()]),t.data.texture=this.texturebuffers[t.data.src][0],t.data.vcBuffer=this.texturebuffers[t.data.src][1],t.data.tcBuffer=this.texturebuffers[t.data.src][2],this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.tcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,n,0,0,s,s,s]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.vcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,e,0,0,i,e,i]),this.gl.STATIC_DRAW);r=t.data.canvas.getContext("2d").getImageData(0,0,a,r);this.gl.bindTexture(this.gl.TEXTURE_2D,t.data.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_NEAREST),this.gl.generateMipmap(this.gl.TEXTURE_2D),t.data.textureLoaded=!0,t.data.textureWidth=e,t.data.textureHeight=i}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(t){t.data.textureLoaded=!1,t.data.tmat=X.create(),t.data.tmat[8]=1,t.data.imat=X.create(),t.data.imat[8]=1,t.body?x(t.body,this.addImg2Body,t):(x(this.circleCanvasURL,this.addImg2Body,t),t.data.oldScale=t.radius/this.circleCanvasRadius)}},{key:"addImg2Body",value:function(t,e){e.dead||(e.body=t,e.data.src=t.src,e.data.canvas=k(t),e.data.oldScale=1,this.drawImg2Canvas(e))}},{key:"onParticleUpdate",value:function(t){t.data.textureLoaded&&(this.updateMatrix(t),this.gl.uniform3f(this.sprogram.color,t.rgb.r/255,t.rgb.g/255,t.rgb.b/255),this.gl.uniformMatrix3fv(this.sprogram.tMatUniform,!1,this.mstack.top()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.vcBuffer),this.gl.vertexAttribPointer(this.sprogram.vpa,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.data.tcBuffer),this.gl.vertexAttribPointer(this.sprogram.tca,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,t.data.texture),this.gl.uniform1i(this.sprogram.samplerUniform,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0),this.mstack.pop())}},{key:"onParticleDead",value:function(){}},{key:"updateMatrix",value:function(t){var e=d(-t.data.textureWidth/2,-t.data.textureHeight/2),i=d(t.p.x,t.p.y),a=t.rotation*s.PI_180,r=y(a),a=t.scale*t.data.oldScale,a=p(a,a),a=f(e,a),a=f(a,r);a=f(a,i),X.inverse(a,t.data.imat),a[2]=t.alpha,this.mstack.push(a)}}]),C=pe;function pe(t){o(this,pe);t=h(this,(pe.__proto__||Object.getPrototypeOf(pe)).call(this,t));return t.gl=t.element.getContext("experimental-webgl",{antialias:!0,stencil:!1,depth:!1}),t.gl||alert("Sorry your browser do not suppest WebGL!"),t.initVar(),t.setMaxRadius(),t.initShaders(),t.initBuffers(),t.gl.blendEquation(t.gl.FUNC_ADD),t.gl.blendFunc(t.gl.SRC_ALPHA,t.gl.ONE_MINUS_SRC_ALPHA),t.gl.enable(t.gl.BLEND),t.addImg2Body=t.addImg2Body.bind(t),t.name="WebGLRenderer",t}r(fe,$t),$t=fe;function fe(t){o(this,fe);t=h(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this,t));return t.name="CustomRenderer",t}var ve=(r(ge,at),t(ge,[{key:"getPosition",value:function(){return this.random=Math.random(),this.vector.x=this.x1+this.random*this.length*Math.cos(this.gradient),this.vector.y=this.y1+this.random*this.length*Math.sin(this.gradient),this.vector}},{key:"getDirection",value:function(t,e){var i=this.dy,a=-this.dx;return 0<(i*t+a*e+this.dot)*(0==a?1:a)}},{key:"getDistance",value:function(t,e){return(this.dy*t+-this.dx*e+this.dot)/Math.sqrt(this.xxyy)}},{key:"getSymmetric",value:function(t){var e=t.getGradient(),i=2*(this.getGradient()-e),a=t.x,e=t.y;return t.x=a*Math.cos(i)-e*Math.sin(i),t.y=a*Math.sin(i)+e*Math.cos(i),t}},{key:"getGradient",value:function(){return Math.atan2(this.dy,this.dx)}},{key:"rangeOut",value:function(t){if(Math.abs(this.getGradient())<=s.PI/4){if(t.p.x<=this.maxx&&t.p.x>=this.minx)return!0}else if(t.p.y<=this.maxy&&t.p.y>=this.miny)return!0;return!1}},{key:"getLength",value:function(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)}},{key:"crossing",value:function(t){"dead"===this.crossType?">"===this.direction||"R"===this.direction||"right"===this.direction||"down"===this.direction?this.rangeOut(t)&&this.getDirection(t.p.x,t.p.y)&&(t.dead=!0):this.rangeOut(t)&&(this.getDirection(t.p.x,t.p.y)||(t.dead=!0)):"bound"===this.crossType?this.rangeOut(t)&&this.getDistance(t.p.x,t.p.y)<=t.radius&&(0===this.dx?t.v.x*=-1:0===this.dy?t.v.y*=-1:this.getSymmetric(t.v)):"cross"===this.crossType&&this.alert&&(console.error("Sorry, LineZone does not support cross method!"),this.alert=!1)}}]),ge);function ge(t,e,i,a,r){o(this,ge);var n=h(this,(ge.__proto__||Object.getPrototypeOf(ge)).call(this));return 0<=i-t?(n.x1=t,n.y1=e,n.x2=i,n.y2=a):(n.x1=i,n.y1=a,n.x2=t,n.y2=e),n.dx=n.x2-n.x1,n.dy=n.y2-n.y1,n.minx=Math.min(n.x1,n.x2),n.miny=Math.min(n.y1,n.y2),n.maxx=Math.max(n.x1,n.x2),n.maxy=Math.max(n.y1,n.y2),n.dot=n.x2*n.y1-n.x1*n.y2,n.xxyy=n.dx*n.dx+n.dy*n.dy,n.gradient=n.getGradient(),n.length=n.getLength(),n.direction=P.initValue(r,">"),n}var me=(r(be,at),t(be,[{key:"getPosition",value:function(){return this.angle=s.PIx2*Math.random(),this.randomRadius=Math.random()*this.radius,this.vector.x=this.x+this.randomRadius*Math.cos(this.angle),this.vector.y=this.y+this.randomRadius*Math.sin(this.angle),this.vector}},{key:"setCenter",value:function(t,e){this.center.x=t,this.center.y=e}},{key:"crossing",value:function(t){var e=t.p.distanceTo(this.center);"dead"===this.crossType?e-t.radius>this.radius&&(t.dead=!0):"bound"===this.crossType?e+t.radius>=this.radius&&this.getSymmetric(t):"cross"===this.crossType&&this.alert&&(console.error("Sorry, CircleZone does not support cross method!"),this.alert=!1)}},{key:"getSymmetric",value:function(t){var e=t.v.getGradient(),i=2*(this.getGradient(t)-e),a=t.v.x,e=t.v.y;t.v.x=a*Math.cos(i)-e*Math.sin(i),t.v.y=a*Math.sin(i)+e*Math.cos(i)}},{key:"getGradient",value:function(t){return-s.PI_2+Math.atan2(t.p.y-this.center.y,t.p.x-this.center.x)}}]),be);function be(t,e,i){o(this,be);var a=h(this,(be.__proto__||Object.getPrototypeOf(be)).call(this));return a.x=t,a.y=e,a.radius=i,a.angle=0,a.center={x:t,y:e},a}var _e=(r(xe,at),t(xe,[{key:"getPosition",value:function(){return this.vector.x=this.x+Math.random()*this.width,this.vector.y=this.y+Math.random()*this.height,this.vector}},{key:"crossing",value:function(t){"dead"===this.crossType?((t.p.x+t.radius<this.x||t.p.x-t.radius>this.x+this.width)&&(t.dead=!0),(t.p.y+t.radius<this.y||t.p.y-t.radius>this.y+this.height)&&(t.dead=!0)):"bound"===this.crossType?(t.p.x-t.radius<this.x?(t.p.x=this.x+t.radius,t.v.x*=-1):t.p.x+t.radius>this.x+this.width&&(t.p.x=this.x+this.width-t.radius,t.v.x*=-1),t.p.y-t.radius<this.y?(t.p.y=this.y+t.radius,t.v.y*=-1):t.p.y+t.radius>this.y+this.height&&(t.p.y=this.y+this.height-t.radius,t.v.y*=-1)):"cross"===this.crossType&&(t.p.x+t.radius<this.x&&t.v.x<=0?t.p.x=this.x+this.width+t.radius:t.p.x-t.radius>this.x+this.width&&0<=t.v.x&&(t.p.x=this.x-t.radius),t.p.y+t.radius<this.y&&t.v.y<=0?t.p.y=this.y+this.height+t.radius:t.p.y-t.radius>this.y+this.height&&0<=t.v.y&&(t.p.y=this.y-t.radius))}}]),xe);function xe(t,e,i,a){o(this,xe);var r=h(this,(xe.__proto__||Object.getPrototypeOf(xe)).call(this));return r.x=t,r.y=e,r.width=i,r.height=a,r}r(ke,at),t(ke,[{key:"reset",value:function(t,e,i,a){this.imageData=t,this.x=P.initValue(e,0),this.y=P.initValue(i,0),this.d=P.initValue(a,2),this.vectors=[],this.setVectors()}},{key:"setVectors",value:function(){for(var t=void 0,e=void 0,i=this.imageData.width,a=this.imageData.height,t=0;t<i;t+=this.d)for(e=0;e<a;e+=this.d){var r=4*((e>>0)*i+(t>>0));0<this.imageData.data[3+r]&&this.vectors.push({x:t+this.x,y:e+this.y})}return this.vector}},{key:"getBound",value:function(t,e){t=4*((e>>0)*this.imageData.width+(t>>0));return 0<this.imageData.data[3+t]}},{key:"getPosition",value:function(){var t=P.getRandFromArray(this.vectors);return this.vector.copy(t)}},{key:"getColor",value:function(t,e){t-=this.x;t=4*(((e-=this.y)>>0)*this.imageData.width+(t>>0));return{r:this.imageData.data[t],g:this.imageData.data[1+t],b:this.imageData.data[2+t],a:this.imageData.data[3+t]}}},{key:"crossing",value:function(t){"dead"===this.crossType?this.getBound(t.p.x-this.x,t.p.y-this.y)?t.dead=!0:t.dead=!1:"bound"===this.crossType&&(this.getBound(t.p.x-this.x,t.p.y-this.y)||t.v.negate())}}]),r=ke;function ke(t,e,i,a){o(this,ke);var r=h(this,(ke.__proto__||Object.getPrototypeOf(ke)).call(this));return r.reset(t,e,i,a),r}t={addEventListener:function(t,e){t.addEventListener("PROTON_UPDATE_AFTER",function(){return e()})},getStyle:function(t){t=H.hexToRgb(0<arguments.length&&void 0!==t?t:"#ff0000");return"rgba("+t.r+", "+t.g+", "+t.b+", 0.5)"},drawZone:function(t,e,i,a){var r=e.getContext("2d"),n=this.getStyle();this.addEventListener(t,function(){a&&r.clearRect(0,0,e.width,e.height),i instanceof nt?(r.beginPath(),r.fillStyle=n,r.arc(i.x,i.y,10,0,2*Math.PI,!0),r.fill(),r.closePath()):i instanceof ve?(r.beginPath(),r.strokeStyle=n,r.moveTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.stroke(),r.closePath()):i instanceof _e?(r.beginPath(),r.strokeStyle=n,r.drawRect(i.x,i.y,i.width,i.height),r.stroke(),r.closePath()):i instanceof me&&(r.beginPath(),r.strokeStyle=n,r.arc(i.x,i.y,i.radius,0,2*Math.PI,!0),r.stroke(),r.closePath())})},drawEmitter:function(t,e,i,a){var r=e.getContext("2d"),n=this.getStyle();this.addEventListener(t,function(){a&&r.clearRect(0,0,e.width,e.height),r.beginPath(),r.fillStyle=n,r.arc(i.p.x,i.p.y,10,0,2*Math.PI,!0),r.fill(),r.closePath()})}};return V.Particle=j,V.Pool=T,V.Util=P,V.ColorUtil=H,V.MathUtil=s,V.Vector2D=V.Vector=F,V.Polar2D=V.Polar=q,V.ArraySpan=Y,V.Rectangle=Z,V.Rate=K,V.ease=U,V.Span=l,V.Mat3=X,V.getSpan=function(t,e,i){return new l(t,e,i)},V.createArraySpan=Y.createArraySpan,V.Initialize=V.Init=$,V.Life=V.L=et,V.Position=V.P=ot,V.Velocity=V.V=lt,V.Mass=V.M=ct,V.Radius=V.R=yt,V.Body=V.B=ft,V.Behaviour=gt,V.Force=V.F=bt,V.Attraction=V.A=xt,V.RandomDrift=V.RD=Pt,V.Gravity=V.G=At,V.Collision=Rt,V.CrossZone=wt,V.Alpha=St,V.Scale=V.S=Dt,V.Rotate=Mt,V.Color=Lt,V.Repulsion=Nt,V.Cyclone=zt,V.GravityWell=qt,V.Emitter=Yt,V.BehaviourEmitter=Zt,V.FollowEmitter=Kt,V.Zone=at,V.LineZone=ve,V.CircleZone=me,V.PointZone=nt,V.RectZone=_e,V.ImageZone=r,V.CanvasRenderer=ee,V.DomRenderer=ae,V.EaselRenderer=ne,V.PixiRenderer=ue,V.PixelRenderer=oe,V.WebGLRenderer=V.WebGlRenderer=C,V.CustomRenderer=$t,V.Debug=t,P.assign(V,U),V});
//# sourceMappingURL=proton.min.js.map


/***/ }),

/***/ "./node_modules/raf-manager/build/RAFManager.min.js":
/*!**********************************************************!*\
  !*** ./node_modules/raf-manager/build/RAFManager.min.js ***!
  \**********************************************************/
/***/ (function(module) {

/*!
* RAFManager v0.1.0
*
* Copyright 2018-2018, ajiemath <ajiemath@gmail.com>
* Licensed under the MIT license
* http://www.opensource.org/licenses/mit-license
*
*/
!function(t,i){ true?module.exports=i():0}(this,function(){"use strict";return function(){for(var t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"]}(),{timer:0,state:"stop",animations:[],add:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n={callback:t,fps:i,n:60/i,param:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i:0};return this.animations.push(n),this.animations.length>=1&&this.start(),this},getIndex:function(t){for(var i=0;i<this.animations.length;i++){if(this.animations[i].callback===t)return i}return-1},remove:function(t){if(!(this.getIndex(t)<0))return this.deleteMap(t),0===this.animations.length&&this.stop(),this},deleteMap:function(t){var i=this.getIndex(t),n=this.animations[i];for(var e in n)delete n[e];this.animations.splice(i,1)},start:function(){if("start"!==this.state)return this.state="start",this.tick(),this},stop:function(){if("stop"!==this.state)return this.state="stop",cancelAnimationFrame(this.timer),this},tick:function(){var t=this;this.timer=requestAnimationFrame(function(){t.tick()});for(var i=0;i<this.animations.length;i++){var n=this.animations[i],e=n.callback,a=n.param;n.i++,n.i>=n.n&&(e(a),n.i=0)}}}});
//# sourceMappingURL=RAFManager.min.js.map


/***/ })

});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vcGFnZXMvYWdlbnRfYm9va2tlZXBpbmcuanMiLCJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9wYXJ0aWNsZXMtYmcvZGlzdC9pbmRleC5lcy5qcyIsIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3Byb3Rvbi1lbmdpbmUvYnVpbGQvcHJvdG9uLm1pbi5qcyIsIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3JhZi1tYW5hZ2VyL2J1aWxkL1JBRk1hbmFnZXIubWluLmpzIl0sIm5hbWVzIjpbIkFnZW50Qm9va2tlZXBpbmciLCJ0aGVtZSIsInBhcnRpY2xlIiwid2lkdGgiLCJoZWlnaHQiLCJwb3NpdGlvbiIsInpJbmRleCIsInRvcCIsImxlZnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVlLFNBQVNBLGdCQUFULEdBQTRCO0FBQ3ZDLHNCQUNJO0FBQUEsNEJBQ0EsOERBQUMsd0RBQUQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxZQURBLGVBR0UsOERBQUMsaURBQUQ7QUFDRSxVQUFJLEVBQUVDLEtBQUssQ0FBQ0MsUUFEZDtBQUVFLFFBQUUsRUFBRTtBQUFFQyxhQUFLLEVBQUUsTUFBVDtBQUFpQkMsY0FBTSxFQUFFLE1BQXpCO0FBQWlDQyxnQkFBUSxFQUFFLFVBQTNDO0FBQXVEQyxjQUFNLEVBQUUsR0FBL0Q7QUFBb0VDLFdBQUcsRUFBRSxDQUF6RTtBQUE0RUMsWUFBSSxFQUFFO0FBQWxGO0FBRk47QUFBQTtBQUFBO0FBQUE7QUFBQSxZQUhGLGVBT0E7QUFBUyxlQUFNLHlCQUFmO0FBQUEsNkJBQ0U7QUFBSyxpQkFBTSxxRUFBWDtBQUFBLGdDQUNFO0FBQUssbUJBQU0sMEhBQVg7QUFBQSxrQ0FDRTtBQUFJLHFCQUFNLGdFQUFWO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGtCQURGLGVBSUU7QUFBRyxxQkFBTSxzQkFBVDtBQUFB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QWtMLElBQUksbURBQW1ELG1FQUFtRSwrRkFBK0YsNEVBQTRFLHNCQUFzQixZQUFZLHlCQUF5QixLQUFLLDRDQUE0QyxTQUFTLG9CQUFvQiwrRkFBK0YsdUJBQXVCLDRDQUE0QywyQkFBMkIsNEJBQTRCLGtCQUFrQixtRUFBbUUsaUJBQWlCLHNGQUFzRixpQkFBaUIsV0FBVyw0Q0FBNEMsU0FBUyxFQUFFLFlBQVkseUJBQXlCLEtBQUssZ0RBQWdELGdDQUFnQztBQUM1OUMiLCJmaWxlIjoic3RhdGljL3dlYnBhY2svcGFnZXMvYWdlbnRfYm9va2tlZXBpbmcuNDVhYzk1Yzg2YmQzZjU5MTZiNjUuaG90LXVwZGF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzdHlsZXMgZnJvbSAnLi4vc3R5bGVzL0hvbWUubW9kdWxlLmNzcydcclxuaW1wb3J0IEhlYWRlciBmcm9tICcuL2NvbXBvbmVudHMvaGVhcmRlcidcclxuaW1wb3J0IEZvb3RlciBmcm9tICcuL2NvbXBvbmVudHMvZm9vdGVyJ1xyXG5cclxuaW1wb3J0IFBhcnRpY2xlc0JnIGZyb20gJ3BhcnRpY2xlcy1iZydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFnZW50Qm9va2tlZXBpbmcoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDw+XHJcbiAgICAgICAgPEhlYWRlci8+XHJcbiAgICAgICAgXHJcbiAgICAgICAgICA8UGFydGljbGVzQmdcclxuICAgICAgICAgICAgdHlwZT17dGhlbWUucGFydGljbGV9XHJcbiAgICAgICAgICAgIGJnPXt7IHdpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMCVcIiwgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgekluZGV4OiBcIjBcIiwgdG9wOiAwLCBsZWZ0OiAwIH19XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDxzZWN0aW9uIGNsYXNzPVwidGV4dC1ncmF5LTYwMCBib2R5LWZvbnRcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXIgbXgtYXV0byBmbGV4IHB4LTUgcHktMjQgbWQ6ZmxleC1yb3cgZmxleC1jb2wgaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZzpmbGV4LWdyb3cgbWQ6dy0xLzIgbGc6cHItMjQgbWQ6cHItMTYgZmxleCBmbGV4LWNvbCBtZDppdGVtcy1zdGFydCBtZDp0ZXh0LWxlZnQgbWItMTYgbWQ6bWItMCBpdGVtcy1jZW50ZXIgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJ0aXRsZS1mb250IHNtOnRleHQtNHhsIHRleHQtM3hsIG1iLTQgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPkJlZm9yZSB0aGV5IHNvbGQgb3V0XHJcbiAgICAgICAgICAgICAgICByZWFkeW1hZGUgZ2x1dGVuXHJcbiAgICAgICAgICAgICAgPC9oMT5cclxuICAgICAgICAgICAgICA8cCBjbGFzcz1cIm1iLTggbGVhZGluZy1yZWxheGVkXCI+Q29wcGVyIG11ZyB0cnktaGFyZCBwaXRjaGZvcmsgcG91ci1vdmVyIGZyZWVnYW4gaGVpcmxvb20gbmV1dHJhIGFpciBwbGFudCBjb2xkLXByZXNzZWQgdGFjb3MgcG9rZSBiZWFyZCB0b3RlIGJhZy4gSGVpcmxvb20gZWNobyBwYXJrIG1sa3NoayB0b3RlIGJhZyBzZWx2YWdlIGhvdCBjaGlja2VuIGF1dGhlbnRpYyB0dW1lcmljIHRydWZmYXV0IGhleGFnb24gdHJ5LWhhcmQgY2hhbWJyYXkuPC9wPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGp1c3RpZnktY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiaW5saW5lLWZsZXggdGV4dC13aGl0ZSBiZy1pbmRpZ28tNTAwIGJvcmRlci0wIHB5LTIgcHgtNiBmb2N1czpvdXRsaW5lLW5vbmUgaG92ZXI6YmctaW5kaWdvLTYwMCByb3VuZGVkIHRleHQtbGdcIiBjb250cm9sLWlkPVwiQ29udHJvbElELTg1XCI+QnV0dG9uPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibWwtNCBpbmxpbmUtZmxleCB0ZXh0LWdyYXktNzAwIGJnLWdyYXktMTAwIGJvcmRlci0wIHB5LTIgcHgtNiBmb2N1czpvdXRsaW5lLW5vbmUgaG92ZXI6YmctZ3JheS0yMDAgcm91bmRlZCB0ZXh0LWxnXCI+QnV0dG9uPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGc6bWF4LXctbGcgbGc6dy1mdWxsIG1kOnctMS8yIHctNS82XCI+XHJcbiAgICAgICAgICAgICAgPGltZyBjbGFzcz1cIm9iamVjdC1jb3ZlciBvYmplY3QtY2VudGVyIHJvdW5kZWRcIiBhbHQ9XCJoZXJvXCIgc3JjPVwiaHR0cHM6Ly9kdW1teWltYWdlLmNvbS83MjB4NjAwXCIvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgICA8Rm9vdGVyLz5cclxuICAgICAgICA8Lz5cclxuICAgIFxyXG4gICAgKVxyXG59IiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSQUZNYW5hZ2VyIGZyb20gJ3JhZi1tYW5hZ2VyJztcbmltcG9ydCBQcm90b24gZnJvbSAncHJvdG9uLWVuZ2luZSc7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqO1xufSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG59O1xuXG52YXIgY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufTtcblxudmFyIGNyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9O1xufSgpO1xuXG52YXIgaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpO1xuICB9XG5cbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgIHZhbHVlOiBzdWJDbGFzcyxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG59O1xuXG52YXIgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiA9IGZ1bmN0aW9uIChzZWxmLCBjYWxsKSB7XG4gIGlmICghc2VsZikge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgfVxuXG4gIHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xufTtcblxuLy8gQ29kZSBzb3VyY2UgZnJvbSBoZXJlLCB0aGFua3MgYXV0aG9yXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZHJhd2NhbGwvUHJvdG9uL2Jsb2IvZ2gtcGFnZXMvc291cmNlL3NyYy91dGlscy9SYW5kLmpzXG52YXIgUmFuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSYW5kKCkge1xuICAgICAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBSYW5kKTtcblxuICAgICAgICB0aGlzLmxpc3QgPSBbXTtcbiAgICB9XG5cbiAgICBjcmVhdGVDbGFzcyhSYW5kLCBbe1xuICAgICAgICBrZXk6IFwic2V0XCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQkJDEocHJvYmFiaWxpdHksIHRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5saXN0LnB1c2goe1xuICAgICAgICAgICAgICAgIHByb2JhYmlsaXR5OiBwcm9iYWJpbGl0eSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgICAgICAgICBhOiAwLFxuICAgICAgICAgICAgICAgIGI6IDFcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJjYWxjdWxhdGlvblwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY3VsYXRpb24oKSB7XG4gICAgICAgICAgICB2YXIgdG90YWwgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0b3RhbCArPSB0aGlzLmxpc3RbaV0ucHJvYmFiaWxpdHk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCB0aGlzLmxpc3QubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IHRoaXMubGlzdFtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IG9iai5wcm9iYWJpbGl0eSAvIHRvdGFsO1xuXG4gICAgICAgICAgICAgICAgb2JqLmEgPSBfaSA9PT0gMCA/IDAgOiB0aGlzLmxpc3RbX2kgLSAxXS5iO1xuICAgICAgICAgICAgICAgIG9iai5iID0gb2JqLmEgKyB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJnZXRSZXN1bHRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlc3VsdCgpIHtcbiAgICAgICAgICAgIHZhciB2YWwgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0gdGhpcy5saXN0W2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZhbCA8PSBvYmouYiAmJiB2YWwgPiBvYmouYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnRhcmdldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RbMF0udGFyZ2V0O1xuICAgICAgICB9XG4gICAgfV0pO1xuICAgIHJldHVybiBSYW5kO1xufSgpO1xuXG52YXIgQ2FudmFzID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoQ2FudmFzLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDYW52YXMocHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDYW52YXMpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2FudmFzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2FudmFzKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuX2lpZCA9IDA7XG4gICAgX3RoaXMuX29pZCA9IDA7XG4gICAgX3RoaXMuc2l6ZSA9IHsgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xuICAgIF90aGlzLmNhbnZhc1JlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKENhbnZhcywgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdGhpcy5fb2lkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMi5pbml0Q2FudmFzKCk7XG4gICAgICAgIF90aGlzMi5yZXNpemUgPSBfdGhpczIucmVzaXplLmJpbmQoX3RoaXMyKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgX3RoaXMyLnJlc2l6ZSk7XG4gICAgICB9LCAxMDApO1xuXG4gICAgICB2YXIgY2FudmFzID0gdGhpcy5nZXRDYW52YXMoKTtcbiAgICAgIHRoaXMucHJvcHMub25DYW52YXNEaWRNb3VudCAmJiB0aGlzLnByb3BzLm9uQ2FudmFzRGlkTW91bnQoY2FudmFzKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdENhbnZhc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0Q2FudmFzKCkge1xuICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuZ2V0Q2FudmFzKCk7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbikge1xuICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gdGhpcy5wcm9wcy5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBfc2V0Q2FudmFzU2l6ZSA9IHRoaXMuc2V0Q2FudmFzU2l6ZShjYW52YXMpLFxuICAgICAgICAgIHdpZHRoID0gX3NldENhbnZhc1NpemUud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0ID0gX3NldENhbnZhc1NpemUuaGVpZ2h0O1xuXG4gICAgICB0aGlzLmhlYXJ0YmVhdERldGVjdGlvbkNhbnZhc1NpemUoY2FudmFzKTtcbiAgICAgIHRoaXMucHJvcHMub25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0Q2FudmFzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldENhbnZhcygpIHtcbiAgICAgIHZhciBjYW52YXMgPSB0aGlzLmNhbnZhc1JlZi5jdXJyZW50O1xuICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGVhcnRiZWF0RGV0ZWN0aW9uQ2FudmFzU2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoZWFydGJlYXREZXRlY3Rpb25DYW52YXNTaXplKGNhbnZhcykge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuX2lpZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzMy5jYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgICAgIHZhciBuZXdIZWlnaHQgPSBfdGhpczMuY2FudmFzUmVmLmN1cnJlbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgIGlmIChuZXdIZWlnaHQgIT09IF90aGlzMy5zaXplLmhlaWdodCkge1xuICAgICAgICAgICAgdmFyIF9zZXRDYW52YXNTaXplMiA9IF90aGlzMy5zZXRDYW52YXNTaXplKGNhbnZhcyksXG4gICAgICAgICAgICAgICAgd2lkdGggPSBfc2V0Q2FudmFzU2l6ZTIud2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gX3NldENhbnZhc1NpemUyLmhlaWdodDtcblxuICAgICAgICAgICAgX3RoaXMzLnByb3BzLm9uUmVzaXplICYmIF90aGlzMy5wcm9wcy5vblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMDAgLyAxMCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZXNpemUpO1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2lpZCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9vaWQpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2l6ZSgpIHtcbiAgICAgIHZhciBjYW52YXMgPSB0aGlzLmdldENhbnZhcygpO1xuXG4gICAgICB2YXIgX3NldENhbnZhc1NpemUzID0gdGhpcy5zZXRDYW52YXNTaXplKGNhbnZhcyksXG4gICAgICAgICAgd2lkdGggPSBfc2V0Q2FudmFzU2l6ZTMud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0ID0gX3NldENhbnZhc1NpemUzLmhlaWdodDtcblxuICAgICAgdGhpcy5wcm9wcy5vblJlc2l6ZSAmJiB0aGlzLnByb3BzLm9uUmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXRDYW52YXNTaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldENhbnZhc1NpemUoY2FudmFzKSB7XG4gICAgICB2YXIgd2lkdGggPSB0aGlzLmNhbnZhc1JlZi5jdXJyZW50LmNsaWVudFdpZHRoO1xuICAgICAgdmFyIGhlaWdodCA9IHRoaXMuY2FudmFzUmVmLmN1cnJlbnQuY2xpZW50SGVpZ2h0O1xuXG4gICAgICB0aGlzLnNpemUud2lkdGggPSB3aWR0aDtcbiAgICAgIHRoaXMuc2l6ZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICByZXR1cm4geyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhbmRsZVdheXBvaW50RW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlV2F5cG9pbnRFbnRlcigpIHtcbiAgICAgIFJBRk1hbmFnZXIuc3RhcnQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGFuZGxlV2F5cG9pbnRMZWF2ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVXYXlwb2ludExlYXZlKCkge1xuICAgICAgUkFGTWFuYWdlci5zdG9wKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFN0eWxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0eWxlKCkge1xuICAgICAgdmFyIGJnID0gdGhpcy5wcm9wcy5iZztcblxuICAgICAgdmFyIHN0eWxlID0geyB3aWR0aDogXCIxMDAlXCIsIGhlaWdodDogXCIxMDAlXCIgfTtcblxuICAgICAgaWYgKGJnID09PSB0cnVlKSB7XG4gICAgICAgIHN0eWxlID0gT2JqZWN0LmFzc2lnbihzdHlsZSwge1xuICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgekluZGV4OiAtMSxcbiAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgbGVmdDogMFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoYmcgJiYgKHR5cGVvZiBiZyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGJnKSkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgc3R5bGUgPSBPYmplY3QuYXNzaWduKHN0eWxlLCBiZyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGFuZGxlTW91c2VEb3duXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uTW91c2VEb3duICYmIHRoaXMucHJvcHMub25Nb3VzZURvd24oZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiLCB7IGNsYXNzTmFtZTogXCJwYXJ0aWNsZXMtYmctY2FudmFzLXNlbGZcIixcbiAgICAgICAgcmVmOiB0aGlzLmNhbnZhc1JlZixcbiAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlTW91c2VEb3duLmJpbmQodGhpcyksXG4gICAgICAgIHN0eWxlOiB0aGlzLmdldFN0eWxlKClcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ2FudmFzO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5mdW5jdGlvbiBoZXhUb1JnYihoZXgpIHtcbiAgICB2YXIgcmVzdWx0ID0gL14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKGhleCk7XG4gICAgcmV0dXJuIHJlc3VsdCA/IHtcbiAgICAgICAgcjogcGFyc2VJbnQocmVzdWx0WzFdLCAxNiksXG4gICAgICAgIGc6IHBhcnNlSW50KHJlc3VsdFsyXSwgMTYpLFxuICAgICAgICBiOiBwYXJzZUludChyZXN1bHRbM10sIDE2KVxuICAgIH0gOiB7fTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29sb3IoY29sb3IsIGEpIHtcbiAgICB2YXIgYyA9IHZvaWQgMDtcbiAgICBpZiAoY29sb3IpIHtcbiAgICAgICAgYyA9IGhleFRvUmdiKGNvbG9yKTtcbiAgICAgICAgcmV0dXJuIFwicmdiYShcIiArIGMuciArIFwiLFwiICsgYy5nICsgXCIsXCIgKyBjLmIgKyBcIiwgXCIgKyBhICsgXCIpXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG52YXIgQmFsbCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKEJhbGwsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEJhbGwocHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBCYWxsKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJhbGwuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihCYWxsKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMucmVuZGVyUHJvdG9uID0gX3RoaXMucmVuZGVyUHJvdG9uLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKEJhbGwsIFt7XG4gICAga2V5OiBcIm9uQ2FudmFzSW5pdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIHRoaXMuY3JlYXRlTWluaUVtaXR0ZXIoY2FudmFzKTtcbiAgICAgIFJBRk1hbmFnZXIuYWRkKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgICAgIHRoaXMucHJvdG9uLmRlc3Ryb3koKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKCkge31cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIHRoaXMucHJvdG9uID0gbmV3IFByb3RvbigpO1xuXG4gICAgICB2YXIgZW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpO1xuICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKHRoaXMucHJvcHMubnVtID8gbmV3IFByb3Rvbi5TcGFuKHRoaXMucHJvcHMubnVtKSA6IG5ldyBQcm90b24uU3Bhbig0LCA5KSwgbmV3IFByb3Rvbi5TcGFuKDAuOCwgMS4zKSk7XG5cbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUmFkaXVzKDEsIDUwKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5MaWZlKDUsIDYpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlZlbG9jaXR5KG5ldyBQcm90b24uU3Bhbig1LCA4KSwgbmV3IFByb3Rvbi5TcGFuKDMwLCA3MCksIFwicG9sYXJcIikpO1xuXG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkFscGhhKDEsIDApKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sb3IoW1wiIzM2YWFmM1wiLCBcIiNmZDc2OWNcIiwgXCIjOTRmZjIyXCIsIFwiI2ZmYTU0NVwiLCBcIiNmZmZmZmZcIl0pKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uU2NhbGUoMC43LCAxKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkdyYXZpdHkoMykpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xsaXNpb24oZW1pdHRlcikpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIodGhpcy5jdXN0b21EZWFkQmVoYXZpb3VyKGNhbnZhcykpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Dcm9zc1pvbmUobmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpLCBcImJvdW5kXCIpKTtcblxuICAgICAgZW1pdHRlci5wLnggPSBNYXRoLm1pbig1MDAsIE1hdGgubWF4KGNhbnZhcy53aWR0aCAvIDIgLSA0MDAsIDUwKSk7XG4gICAgICBlbWl0dGVyLnAueSA9IGNhbnZhcy5oZWlnaHQgLyAyICsgNTA7XG4gICAgICBlbWl0dGVyLmVtaXQoKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG5cbiAgICAgIHZhciByZW5kZXJlciA9IG5ldyBQcm90b24uQ2FudmFzUmVuZGVyZXIoY2FudmFzKTtcbiAgICAgIHJlbmRlcmVyLm9uUHJvdG9uVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGdldENvbG9yKF90aGlzMi5wcm9wcy5jb2xvciwgMC4yKSB8fCBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKVwiO1xuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9O1xuICAgICAgdGhpcy5wcm90b24uYWRkUmVuZGVyZXIocmVuZGVyZXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjdXN0b21EZWFkQmVoYXZpb3VyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGN1c3RvbURlYWRCZWhhdmlvdXIoY2FudmFzKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShwYXJ0aWNsZSkge30sXG4gICAgICAgIGFwcGx5QmVoYXZpb3VyOiBmdW5jdGlvbiBhcHBseUJlaGF2aW91cihwYXJ0aWNsZSkge1xuICAgICAgICAgIGlmIChwYXJ0aWNsZS5wLnkgKyBwYXJ0aWNsZS5yYWRpdXMgPj0gY2FudmFzLmhlaWdodCkge1xuICAgICAgICAgICAgaWYgKHBhcnRpY2xlLnJhZGl1cyA+IDkpIHtcbiAgICAgICAgICAgICAgX3RoaXMzLm1pbmlFbWl0dGVpbmcocGFydGljbGUpO1xuICAgICAgICAgICAgICBwYXJ0aWNsZS5kZWFkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZU1pbmlFbWl0dGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZU1pbmlFbWl0dGVyKGNhbnZhcykge1xuICAgICAgdmFyIG1pbmlFbWl0dGVyID0gbmV3IFByb3Rvbi5FbWl0dGVyKCk7XG4gICAgICBtaW5pRW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKG5ldyBQcm90b24uU3BhbigzLCA2KSwgbmV3IFByb3Rvbi5TcGFuKDEsIDIpKTtcblxuICAgICAgbWluaUVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpO1xuICAgICAgbWluaUVtaXR0ZXIucmFkaXVzSW5pdGlhbGl6ZSA9IG5ldyBQcm90b24uUmFkaXVzKCk7XG4gICAgICBtaW5pRW1pdHRlci5hZGRJbml0aWFsaXplKG1pbmlFbWl0dGVyLnJhZGl1c0luaXRpYWxpemUpO1xuICAgICAgbWluaUVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLkxpZmUoMC41LCAxKSk7XG4gICAgICBtaW5pRW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uVihuZXcgUHJvdG9uLlNwYW4oMS41LCAzKSwgbmV3IFByb3Rvbi5TcGFuKDAsIDcwLCB0cnVlKSwgXCJwb2xhclwiKSk7XG5cbiAgICAgIG1pbmlFbWl0dGVyLmNvbG9yQmVoYXZpb3VyID0gbmV3IFByb3Rvbi5Db2xvcihcIiNmZmZmZmZcIik7XG4gICAgICBtaW5pRW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5BbHBoYSgxLCAwKSk7XG4gICAgICBtaW5pRW1pdHRlci5hZGRCZWhhdmlvdXIobWluaUVtaXR0ZXIuY29sb3JCZWhhdmlvdXIpO1xuICAgICAgbWluaUVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uR3Jhdml0eSg0KSk7XG4gICAgICBtaW5pRW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xsaXNpb24obWluaUVtaXR0ZXIpKTtcbiAgICAgIG1pbmlFbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNyb3NzWm9uZShuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCksIFwiYm91bmRcIikpO1xuICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihtaW5pRW1pdHRlcik7XG5cbiAgICAgIHRoaXMubWluaUVtaXR0ZXIgPSBtaW5pRW1pdHRlcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibWluaUVtaXR0ZWluZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtaW5pRW1pdHRlaW5nKHBhcnRpY2xlKSB7XG4gICAgICB2YXIgbWluaUVtaXR0ZXIgPSB0aGlzLm1pbmlFbWl0dGVyO1xuICAgICAgbWluaUVtaXR0ZXIucmFkaXVzSW5pdGlhbGl6ZS5yZXNldChwYXJ0aWNsZS5yYWRpdXMgKiAwLjA1LCBwYXJ0aWNsZS5yYWRpdXMgKiAwLjIpO1xuICAgICAgbWluaUVtaXR0ZXIuY29sb3JCZWhhdmlvdXIucmVzZXQocGFydGljbGUuY29sb3IpO1xuICAgICAgbWluaUVtaXR0ZXIucC54ID0gcGFydGljbGUucC54O1xuICAgICAgbWluaUVtaXR0ZXIucC55ID0gcGFydGljbGUucC55O1xuICAgICAgbWluaUVtaXR0ZXIuZW1pdChcIm9uY2VcIik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcm90b24oKSB7XG4gICAgICB0aGlzLnByb3RvbiAmJiB0aGlzLnByb3Rvbi51cGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywgeyBiZzogdGhpcy5wcm9wcy5iZyxcbiAgICAgICAgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uOiBcImRhcmtlclwiLFxuICAgICAgICBvbkNhbnZhc0luaXRlZDogdGhpcy5vbkNhbnZhc0luaXRlZC5iaW5kKHRoaXMpLFxuICAgICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEJhbGw7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBDb2xvciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKENvbG9yLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDb2xvcihwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIENvbG9yKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENvbG9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ29sb3IpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5jb2xvcnMgPSBbXCIjNTI5Qjg4XCIsIFwiI0NERDE4MFwiLCBcIiNGRkZBMzJcIiwgXCIjRkI2MjU1XCIsIFwiI0ZCNEE1M1wiLCBcIiNGRjRFNTBcIiwgXCIjRjlENDIzXCJdO1xuICAgIF90aGlzLnJlbmRlclByb3RvbiA9IF90aGlzLnJlbmRlclByb3Rvbi5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhDb2xvciwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgICAgIHRoaXMucHJvdG9uLmRlc3Ryb3koKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2FudmFzSW5pdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIFJBRk1hbmFnZXIuYWRkKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNpemUoKSB7fVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTtcbiAgICAgIHZhciBlbWl0dGVyID0gbmV3IFByb3Rvbi5FbWl0dGVyKCk7XG4gICAgICBlbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUodGhpcy5wcm9wcy5udW0gPyBuZXcgUHJvdG9uLlNwYW4odGhpcy5wcm9wcy5udW0pIDogbmV3IFByb3Rvbi5TcGFuKDUsIDgpLCBuZXcgUHJvdG9uLlNwYW4oMC4xLCAwLjI1KSk7XG5cbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUmFkaXVzKDIwLCAyMDApKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLkxpZmUoMiwgNCkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUG9zaXRpb24obmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCB3aWR0aCwgaGVpZ2h0KSkpO1xuXG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkFscGhhKDAsIDEsIEluZmluaXR5LCBQcm90b24uZWFzZU91dEN1YmljKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlNjYWxlKDEsIDAsIEluZmluaXR5LCBQcm90b24uZWFzZU91dEN1YmljKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbG9yKHRoaXMuY29sb3JzLCBcInJhbmRvbVwiKSk7XG5cbiAgICAgIGVtaXR0ZXIuZW1pdCgpO1xuICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihlbWl0dGVyKTtcblxuICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DYW52YXNSZW5kZXJlcihjYW52YXMpO1xuICAgICAgdGhpcy5wcm90b24uYWRkUmVuZGVyZXIocmVuZGVyZXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUHJvdG9uKCkge1xuICAgICAgdGhpcy5wcm90b24gJiYgdGhpcy5wcm90b24udXBkYXRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXMsIHsgYmc6IHRoaXMucHJvcHMuYmcsXG4gICAgICAgIGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjogXCJkYXJrZXJcIixcbiAgICAgICAgb25DYW52YXNJbml0ZWQ6IHRoaXMub25DYW52YXNJbml0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgb25SZXNpemU6IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBDb2xvcjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxudmFyIENvbG9yJDEgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICAgIGluaGVyaXRzKENvbG9yLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIENvbG9yKHByb3BzKSB7XG4gICAgICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIENvbG9yKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDb2xvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbG9yKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLmNvbG9ycyA9IFtcIiM1MjlCODhcIiwgXCIjQ0REMTgwXCIsIFwiI0ZGRkEzMlwiLCBcIiNGQjYyNTVcIiwgXCIjRkI0QTUzXCIsIFwiI0ZGNEU1MFwiLCBcIiNGOUQ0MjNcIl07XG4gICAgICAgIF90aGlzLnJlbmRlclByb3RvbiA9IF90aGlzLnJlbmRlclByb3Rvbi5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIGNyZWF0ZUNsYXNzKENvbG9yLCBbe1xuICAgICAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm90b24uZGVzdHJveSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIm9uQ2FudmFzSW5pdGVkXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJvblJlc2l6ZVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNpemUod2lkdGgsIGhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnByb3Rvbi5yZW5kZXJlcnNbMF0ucmVzaXplKHdpZHRoLCBoZWlnaHQpOyAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldFByb3BcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFByb3Aoa2V5LCBkZWZhdWx0VmFsKSB7XG4gICAgICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5wcm9wcy5jb25maWcgfHwge307XG4gICAgICAgICAgICB2YXIgdmFsID0gY29uZmlnW2tleV0gfHwgZGVmYXVsdFZhbDtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3Rvbi5TcGFuKHZhbFswXSwgdmFsWzFdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldEFyclByb3BcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFyclByb3Aoa2V5LCBkZWZhdWx0VmFsKSB7XG4gICAgICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5wcm9wcy5jb25maWcgfHwge307XG4gICAgICAgICAgICB2YXIgdmFsID0gY29uZmlnW2tleV0gfHwgZGVmYXVsdFZhbDtcbiAgICAgICAgICAgIGlmICghdmFsKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBbdmFsLCB2YWxdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY3JlYXRlUHJvdG9uXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgbnVtID0gdGhpcy5nZXRQcm9wKFwibnVtXCIsIFs1LCA4XSk7XG4gICAgICAgICAgICB2YXIgcnBzID0gdGhpcy5nZXRQcm9wKFwicnBzXCIsIFswLjEsIDAuMl0pO1xuICAgICAgICAgICAgdmFyIG1hc3MgPSB0aGlzLmdldFByb3AoXCJtYXNzXCIsIDEpO1xuICAgICAgICAgICAgdmFyIHJhZGl1cyA9IHRoaXMuZ2V0UHJvcChcInJhZGl1c1wiLCBbMTAsIDMwXSk7XG4gICAgICAgICAgICB2YXIgbGlmZSA9IHRoaXMuZ2V0UHJvcChcImxpZmVcIiwgWzIsIDNdKTtcbiAgICAgICAgICAgIHZhciBib2R5ID0gdGhpcy5nZXRQcm9wKFwiYm9keVwiKTtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuZ2V0UHJvcChcInBvc2l0aW9uXCIpO1xuICAgICAgICAgICAgdmFyIHYgPSB0aGlzLmdldFByb3AoXCJ2XCIsIFsyLCAzXSk7XG4gICAgICAgICAgICB2YXIgdGhhID0gdGhpcy5nZXRQcm9wKFwidGhhXCIsIFstMTUsIDE1XSk7XG4gICAgICAgICAgICB2YXIgYWxwaGEgPSB0aGlzLmdldEFyclByb3AoXCJhbHBoYVwiKTtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IHRoaXMuZ2V0QXJyUHJvcChcInNjYWxlXCIpO1xuICAgICAgICAgICAgdmFyIGNvbG9yID0gdGhpcy5nZXRBcnJQcm9wKFwiY29sb3JcIik7XG4gICAgICAgICAgICB2YXIgY3Jvc3MgPSB0aGlzLmdldFByb3AoXCJjcm9zc1wiLCBcImRlYWRcIik7XG4gICAgICAgICAgICB2YXIgcmFuZG9tID0gdGhpcy5nZXRQcm9wKFwicmFuZG9tXCIpO1xuICAgICAgICAgICAgdmFyIHJvdGF0ZSA9IHRoaXMuZ2V0QXJyUHJvcChcInJvdGF0ZVwiKTtcbiAgICAgICAgICAgIHZhciBnID0gdGhpcy5nZXRQcm9wKFwiZ1wiKTtcbiAgICAgICAgICAgIHZhciBmID0gdGhpcy5nZXRBcnJQcm9wKFwiZlwiKTtcbiAgICAgICAgICAgIHZhciBlbWl0dGVyViA9IHRoaXMuZ2V0UHJvcChcImVtaXR0ZXJcIik7XG5cbiAgICAgICAgICAgIHRoaXMucHJvdG9uID0gbmV3IFByb3RvbigpO1xuICAgICAgICAgICAgdmFyIGVtaXR0ZXIgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAoZW1pdHRlclYgPT09IFwiZm9sbG93XCIpIHtcbiAgICAgICAgICAgICAgICBlbWl0dGVyID0gbmV3IFByb3Rvbi5Gb2xsb3dFbWl0dGVyKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVtaXR0ZXIgPSBuZXcgUHJvdG9uLkVtaXR0ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZShudW0sIHJwcyk7XG5cbiAgICAgICAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MobWFzcykpO1xuICAgICAgICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUmFkaXVzKHJhZGl1cykpO1xuICAgICAgICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTGlmZShsaWZlKSk7XG4gICAgICAgICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WZWxvY2l0eSh2LCB0aGEsIFwicG9sYXJcIikpO1xuICAgICAgICAgICAgaWYgKGJvZHkpIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLkJvZHkoYm9keSkpO1xuXG4gICAgICAgICAgICB2YXIgcG9zID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSBcImFsbFwiIHx8IHBvc2l0aW9uID09PSBcInNjcmVlblwiKSB7XG4gICAgICAgICAgICAgICAgcG9zID0gbmV3IFByb3Rvbi5Qb3NpdGlvbihuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgodHlwZW9mIHBvc2l0aW9uID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YocG9zaXRpb24pKSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIHBvcyA9IG5ldyBQcm90b24uUG9zaXRpb24obmV3IFByb3Rvbi5SZWN0Wm9uZShwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi53aWR0aCwgcG9zaXRpb24uaGVpZ2h0KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVtaXR0ZXIucC54ID0gY2FudmFzLndpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICBlbWl0dGVyLnAueSA9IGNhbnZhcy5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUocG9zKTtcblxuICAgICAgICAgICAgLy8vIGJlaGF2aW91clxuICAgICAgICAgICAgdmFyIGFscGhhQiA9IGFscGhhID8gbmV3IFByb3Rvbi5BbHBoYShhbHBoYVswXSwgYWxwaGFbMV0pIDogbmV3IFByb3Rvbi5BbHBoYSgwLCAxKTtcbiAgICAgICAgICAgIHZhciBzY2FsZUIgPSBzY2FsZSA/IG5ldyBQcm90b24uU2NhbGUoc2NhbGVbMF0sIHNjYWxlWzFdKSA6IG5ldyBQcm90b24uU2NhbGUoMSwgMC4yKTtcbiAgICAgICAgICAgIHZhciBjb2xvckIgPSBjb2xvciA/IG5ldyBQcm90b24uQ29sb3IoY29sb3JbMF0sIGNvbG9yWzFdKSA6IG5ldyBQcm90b24uQ29sb3IodGhpcy5jb2xvcnMpO1xuXG4gICAgICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihhbHBoYUIpO1xuICAgICAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIoc2NhbGVCKTtcbiAgICAgICAgICAgIGlmICghYm9keSkgZW1pdHRlci5hZGRCZWhhdmlvdXIoY29sb3JCKTtcblxuICAgICAgICAgICAgaWYgKHJvdGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmIChyb3RhdGVbMF0gPT09IHRydWUgfHwgcm90YXRlWzBdID09PSBcInJvdGF0ZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uUm90YXRlKCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uUm90YXRlKHJvdGF0ZVswXSwgcm90YXRlWzFdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgem9uZSA9IG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIHZhciBjcm9zc1pvbmVCZWhhdmlvdXIgPSBuZXcgUHJvdG9uLkNyb3NzWm9uZSh6b25lLCBjcm9zcyk7XG4gICAgICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihjcm9zc1pvbmVCZWhhdmlvdXIpO1xuXG4gICAgICAgICAgICByYW5kb20gJiYgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5SYW5kb21EcmlmdChyYW5kb20sIHJhbmRvbSwgMC4wNSkpO1xuICAgICAgICAgICAgZyAmJiBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkcoZykpO1xuICAgICAgICAgICAgZiAmJiBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkYoZlswXSwgZlsxXSkpO1xuXG4gICAgICAgICAgICBlbWl0dGVyLmVtaXQoKTtcbiAgICAgICAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG5cbiAgICAgICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMuY3JlYXRlUmVuZGVyZXIoY2FudmFzKTtcbiAgICAgICAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHJlbmRlcmVyKTtcblxuICAgICAgICAgICAgdGhpcy5lbWl0dGVyID0gZW1pdHRlcjtcbiAgICAgICAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyID0gY3Jvc3Nab25lQmVoYXZpb3VyO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY3JlYXRlUmVuZGVyZXJcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyKGNhbnZhcykge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gY2FudmFzLndpZHRoO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgUHJvdG9uLkNhbnZhc1JlbmRlcmVyKGNhbnZhcyk7XG5cbiAgICAgICAgICAgIHZhciBvblVwZGF0ZSA9IHRoaXMuZ2V0UHJvcChcIm9uVXBkYXRlXCIpO1xuICAgICAgICAgICAgaWYgKG9uVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIub25Qcm90b25VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlKGNvbnRleHQsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBvblBhcnRpY2xlQ3JlYXRlZCA9IHRoaXMuZ2V0UHJvcChcIm9uUGFydGljbGVDcmVhdGVkXCIpO1xuICAgICAgICAgICAgaWYgKG9uUGFydGljbGVDcmVhdGVkKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZUNyZWF0ZWQgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgb25QYXJ0aWNsZUNyZWF0ZWQoY29udGV4dCwgcGFydGljbGUpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBvblBhcnRpY2xlVXBkYXRlID0gdGhpcy5nZXRQcm9wKFwib25QYXJ0aWNsZVVwZGF0ZVwiKTtcbiAgICAgICAgICAgIGlmIChvblBhcnRpY2xlVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZVVwZGF0ZSA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICBvblBhcnRpY2xlVXBkYXRlKGNvbnRleHQsIHBhcnRpY2xlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyZXI7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJyZW5kZXJQcm90b25cIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclByb3RvbigpIHtcbiAgICAgICAgICAgIHRoaXMucHJvdG9uICYmIHRoaXMucHJvdG9uLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiaGFuZGxlTW91c2VEb3duXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZSkge1xuICAgICAgICAgICAgdmFyIG9uTW91c2VEb3duID0gdGhpcy5nZXRQcm9wKFwib25Nb3VzZURvd25cIik7XG4gICAgICAgICAgICBpZiAob25Nb3VzZURvd24pIHtcbiAgICAgICAgICAgICAgICBvbk1vdXNlRG93bihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInJlbmRlclwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IHRoaXMucHJvcHMuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uIHx8IHRoaXMucHJvcHMub3BlcmF0aW9uIHx8IFwic291cmNlLW92ZXJcIjtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7XG4gICAgICAgICAgICAgICAgYmc6IHRoaXMucHJvcHMuYmcsXG4gICAgICAgICAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlTW91c2VEb3duLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uOiBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24sXG4gICAgICAgICAgICAgICAgb25DYW52YXNJbml0ZWQ6IHRoaXMub25DYW52YXNJbml0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcbiAgICByZXR1cm4gQ29sb3I7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBMaW5lcyA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKExpbmVzLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBMaW5lcyhwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIExpbmVzKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKExpbmVzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTGluZXMpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5yZW5kZXJQcm90b24gPSBfdGhpcy5yZW5kZXJQcm90b24uYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoTGluZXMsIFt7XG4gICAga2V5OiBcIm9uQ2FudmFzRGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNEaWRNb3VudChjYW52YXMpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmNvbG9yKSB7XG4gICAgICAgIGNhbnZhcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLnByb3BzLmNvbG9yO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICAgICAgdGhpcy5wcm90b24uZGVzdHJveSgpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DYW52YXNJbml0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXJQcm90b24pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLndpZHRoID0gd2lkdGg7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIHRoaXMucHJvdG9uLnJlbmRlcmVyc1swXS5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTtcblxuICAgICAgdmFyIGVtaXR0ZXIgPSBuZXcgUHJvdG9uLkVtaXR0ZXIoKTtcbiAgICAgIGVtaXR0ZXIuZGFtcGluZyA9IDAuMDA4O1xuICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKHRoaXMucHJvcHMubnVtID8gdGhpcy5wcm9wcy5udW0gOiAyNTApO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcygxKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5SYWRpdXMoNCkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uVmVsb2NpdHkobmV3IFByb3Rvbi5TcGFuKDEuNSksIG5ldyBQcm90b24uU3BhbigwLCAzNjApLCBcInBvbGFyXCIpKTtcbiAgICAgIHZhciBtb3VzZU9iaiA9IHtcbiAgICAgICAgeDogd2lkdGggLyAyLFxuICAgICAgICB5OiBoZWlnaHQgLyAyXG4gICAgICB9O1xuXG4gICAgICB2YXIgYXR0cmFjdGlvbkJlaGF2aW91ciA9IG5ldyBQcm90b24uQXR0cmFjdGlvbihtb3VzZU9iaiwgMCwgMCk7XG4gICAgICB2YXIgY3Jvc3Nab25lQmVoYXZpb3VyID0gbmV3IFByb3Rvbi5Dcm9zc1pvbmUobmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpLCBcImNyb3NzXCIpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xvcihcInJhbmRvbVwiKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihhdHRyYWN0aW9uQmVoYXZpb3VyLCBjcm9zc1pvbmVCZWhhdmlvdXIpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5SYW5kb21EcmlmdCgxMCwgMTAsIDAuMDUpKTtcbiAgICAgIGVtaXR0ZXIucC54ID0gY2FudmFzLndpZHRoIC8gMjtcbiAgICAgIGVtaXR0ZXIucC55ID0gY2FudmFzLmhlaWdodCAvIDI7XG4gICAgICBlbWl0dGVyLmVtaXQoXCJvbmNlXCIpO1xuXG4gICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xuICAgICAgdGhpcy5wcm90b24uYWRkUmVuZGVyZXIodGhpcy5jcmVhdGVSZW5kZXJlcihjYW52YXMpKTtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyID0gY3Jvc3Nab25lQmVoYXZpb3VyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVSZW5kZXJlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVSZW5kZXJlcihjYW52YXMpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgUHJvdG9uLkNhbnZhc1JlbmRlcmVyKGNhbnZhcyk7XG4gICAgICByZW5kZXJlci5vblByb3RvblVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBnZXRDb2xvcihfdGhpczIucHJvcHMuY29sb3IsIDAuMDIpIHx8IFwicmdiYSgwLCAwLCAwLCAwLjAyKVwiO1xuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJlci5vblBhcnRpY2xlVXBkYXRlID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBwYXJ0aWNsZS5jb2xvcjtcbiAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSAxO1xuICAgICAgICBjb250ZXh0Lm1vdmVUbyhwYXJ0aWNsZS5vbGQucC54LCBwYXJ0aWNsZS5vbGQucC55KTtcbiAgICAgICAgY29udGV4dC5saW5lVG8ocGFydGljbGUucC54LCBwYXJ0aWNsZS5wLnkpO1xuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHJlbmRlcmVyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUHJvdG9uKCkge1xuICAgICAgdGhpcy5wcm90b24gJiYgdGhpcy5wcm90b24udXBkYXRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXMsIHsgYmc6IHRoaXMucHJvcHMuYmcsXG4gICAgICAgIGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjogXCJkYXJrZXJcIixcbiAgICAgICAgb25DYW52YXNEaWRNb3VudDogdGhpcy5vbkNhbnZhc0RpZE1vdW50LmJpbmQodGhpcyksXG4gICAgICAgIG9uQ2FudmFzSW5pdGVkOiB0aGlzLm9uQ2FudmFzSW5pdGVkLmJpbmQodGhpcyksXG4gICAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gTGluZXM7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBUaGljayA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKFRoaWNrLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBUaGljayhwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFRoaWNrKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFRoaWNrLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGhpY2spKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5odWUgPSAwO1xuICAgIF90aGlzLmluZGV4ID0gMDtcbiAgICBfdGhpcy5jb2xvclRlbXBsYXRlID0gXCJoc2xhKGh1ZSw4MCUsNTAlLCAwLjc1KVwiO1xuICAgIF90aGlzLnJlbmRlclByb3RvbiA9IF90aGlzLnJlbmRlclByb3Rvbi5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhUaGljaywgW3tcbiAgICBrZXk6IFwib25DYW52YXNEaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0RpZE1vdW50KGNhbnZhcykge1xuICAgICAgaWYgKHRoaXMucHJvcHMuY29sb3IpIHtcbiAgICAgICAgY2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMucHJvcHMuY29sb3I7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2FudmFzSW5pdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgICB0aGlzLmNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXJQcm90b24pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLndpZHRoID0gd2lkdGg7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIHRoaXMucHJvdG9uLnJlbmRlcmVyc1swXS5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTtcblxuICAgICAgdmFyIGVtaXR0ZXIgPSBuZXcgUHJvdG9uLkVtaXR0ZXIoKTtcbiAgICAgIGVtaXR0ZXIuZGFtcGluZyA9IDAuMDA4O1xuICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKHRoaXMucHJvcHMubnVtID8gdGhpcy5wcm9wcy5udW0gOiAxNTApO1xuXG4gICAgICAvLyBJbml0aWFsaXplXG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKDEpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlJhZGl1cyg4KSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WKG5ldyBQcm90b24uU3BhbigwLjEsIDAuNSksIG5ldyBQcm90b24uU3BhbigwLCAzNjApLCBcInBvbGFyXCIpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlBvc2l0aW9uKG5ldyBQcm90b24uQ2lyY2xlWm9uZShjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiwgMTAwKSkpO1xuXG4gICAgICAvLyBCZWhhdmlvdXJcbiAgICAgIHZhciBjcm9zc1pvbmVCZWhhdmlvdXIgPSBuZXcgUHJvdG9uLkNyb3NzWm9uZShuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCksIFwiY3Jvc3NcIik7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihjcm9zc1pvbmVCZWhhdmlvdXIpO1xuICAgICAgdGhpcy5yZXB1bHNpb24gPSBuZXcgUHJvdG9uLlJlcHVsc2lvbih7XG4gICAgICAgIHg6IGNhbnZhcy53aWR0aCAvIDIsXG4gICAgICAgIHk6IGNhbnZhcy5oZWlnaHQgLyAyIC0gMTAwXG4gICAgICB9LCAzLCAzMDApO1xuXG4gICAgICB0aGlzLmF0dHJhY3Rpb24gPSBuZXcgUHJvdG9uLkF0dHJhY3Rpb24oe1xuICAgICAgICB4OiBjYW52YXMud2lkdGggLyAyLFxuICAgICAgICB5OiBjYW52YXMuaGVpZ2h0IC8gMlxuICAgICAgfSwgMywgMjAwKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKHRoaXMuYXR0cmFjdGlvbiwgdGhpcy5yZXB1bHNpb24pO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xvcihcInJhbmRvbVwiKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlJhbmRvbURyaWZ0KDIwLCAxNSwgMC4xNSkpO1xuXG4gICAgICBlbWl0dGVyLmVtaXQoXCJvbmNlXCIpO1xuICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihlbWl0dGVyKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHRoaXMuY3JlYXRlUmVuZGVyZXIoY2FudmFzKSk7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ciA9IGNyb3NzWm9uZUJlaGF2aW91cjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUmVuZGVyZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIoY2FudmFzKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DYW52YXNSZW5kZXJlcihjYW52YXMpO1xuXG4gICAgICByZW5kZXJlci5vblByb3RvblVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMyLmh1ZSArPSAxO1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGdldENvbG9yKF90aGlzMi5wcm9wcy5jb2xvciwgMC4wMikgfHwgXCJyZ2JhKDAsIDAsIDAsIDAuMDIpXCI7XG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVDcmVhdGVkID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgIHBhcnRpY2xlLmRhdGEuYmVnaW4gPSBQcm90b24uTWF0aFV0aWwucmFuZG9tQVRvQigxLCAxMjApO1xuICAgICAgICBwYXJ0aWNsZS5kYXRhLnRoYSA9IFByb3Rvbi5NYXRoVXRpbC5yYW5kb21BVG9CKDAsIE1hdGguUEkgKiAyKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVVcGRhdGUgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgdmFyIGh1ZSA9IHBhcnRpY2xlLmRhdGEuYmVnaW4gKyBfdGhpczIuaHVlO1xuICAgICAgICBwYXJ0aWNsZS5jb2xvciA9IF90aGlzMi5jb2xvclRlbXBsYXRlLnJlcGxhY2UoXCJodWVcIiwgaHVlICUgMzYwKTtcblxuICAgICAgICB2YXIgcmF0aW8gPSAzIC8gNDtcbiAgICAgICAgdmFyIHJhZGl1cyA9IHBhcnRpY2xlLnJhZGl1cyAqICgxIC0gcmF0aW8pICogTWF0aC5jb3MocGFydGljbGUuZGF0YS50aGEgKz0gMC4wMSkgKyBwYXJ0aWNsZS5yYWRpdXMgKiByYXRpbztcblxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHBhcnRpY2xlLmNvbG9yO1xuICAgICAgICBjb250ZXh0LmFyYyhwYXJ0aWNsZS5wLngsIHBhcnRpY2xlLnAueSwgcmFkaXVzLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSk7XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHJlbmRlcmVyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICAgICAgdGhpcy5wcm90b24uZGVzdHJveSgpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclByb3RvbigpIHtcbiAgICAgIHZhciBjYW52YXMgPSB0aGlzLmNhbnZhcztcbiAgICAgIHRoaXMucHJvdG9uLnVwZGF0ZSgpO1xuICAgICAgaWYgKHRoaXMuaW5kZXggJSAyMDAgPT09IDApIHtcbiAgICAgICAgdGhpcy5hdHRyYWN0aW9uLnRhcmdldFBvc2l0aW9uLnggPSBNYXRoLnJhbmRvbSgpICogY2FudmFzLndpZHRoO1xuICAgICAgICB0aGlzLmF0dHJhY3Rpb24udGFyZ2V0UG9zaXRpb24ueSA9IE1hdGgucmFuZG9tKCkgKiBjYW52YXMuaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMucmVwdWxzaW9uLnRhcmdldFBvc2l0aW9uLnggPSBNYXRoLnJhbmRvbSgpICogY2FudmFzLndpZHRoO1xuICAgICAgICB0aGlzLnJlcHVsc2lvbi50YXJnZXRQb3NpdGlvbi55ID0gTWF0aC5yYW5kb20oKSAqIGNhbnZhcy5oZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywgeyBiZzogdGhpcy5wcm9wcy5iZyxcbiAgICAgICAgb25DYW52YXNEaWRNb3VudDogdGhpcy5vbkNhbnZhc0RpZE1vdW50LmJpbmQodGhpcyksXG4gICAgICAgIG9uQ2FudmFzSW5pdGVkOiB0aGlzLm9uQ2FudmFzSW5pdGVkLmJpbmQodGhpcyksXG4gICAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gVGhpY2s7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBTcXVhcmUgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBpbmhlcml0cyhTcXVhcmUsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFNxdWFyZShwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFNxdWFyZSk7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChTcXVhcmUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTcXVhcmUpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5jb2xvcnMgPSBbXCIjZmFkMzkwXCIsIFwiIzgxZWNlY1wiLCBcIiNmZmZmZmZcIiwgXCIjYmFkYzU4XCIsIFwiI2Y5Y2EyNFwiLCBcIiNGRUE0N0ZcIl07XG4gICAgX3RoaXMucmVuZGVyUHJvdG9uID0gX3RoaXMucmVuZGVyUHJvdG9uLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKFNxdWFyZSwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgICAgIHRoaXMucHJvdG9uLmRlc3Ryb3koKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2FudmFzRGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNEaWRNb3VudChjYW52YXMpIHt9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DYW52YXNJbml0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXJQcm90b24pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB2YXIgZGlzID0gMTUwO1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS53aWR0aCA9IHdpZHRoICsgMiAqIGRpcztcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUuaGVpZ2h0ID0gaGVpZ2h0ICsgMiAqIGRpcztcbiAgICAgIHRoaXMucHJvdG9uLnJlbmRlcmVyc1swXS5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTtcbiAgICAgIHZhciBlbWl0dGVyID0gbmV3IFByb3Rvbi5FbWl0dGVyKCk7XG4gICAgICBlbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUodGhpcy5wcm9wcy5udW0gPyB0aGlzLnByb3BzLm51bSA6IDUwKTtcbiAgICAgIGVtaXR0ZXIuZGFtcGluZyA9IDA7XG5cbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUmFkaXVzKDQsIDcwKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WZWxvY2l0eShuZXcgUHJvdG9uLlNwYW4oMiwgMTApLCBuZXcgUHJvdG9uLlNwYW4oMCksIFwicG9sYXJcIikpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUG9zaXRpb24obmV3IFByb3Rvbi5MaW5lWm9uZSgwLCBjYW52YXMuaGVpZ2h0LCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpKSk7XG5cbiAgICAgIHZhciBkaXMgPSAxNTA7XG4gICAgICB2YXIgY3Jvc3Nab25lQmVoYXZpb3VyID0gbmV3IFByb3Rvbi5Dcm9zc1pvbmUobmV3IFByb3Rvbi5SZWN0Wm9uZSgwIC0gZGlzLCAwIC0gZGlzLCBjYW52YXMud2lkdGggKyAyICogZGlzLCBjYW52YXMuaGVpZ2h0ICsgMiAqIGRpcyksIFwiY3Jvc3NcIik7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihjcm9zc1pvbmVCZWhhdmlvdXIpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5BbHBoYShQcm90b24uZ2V0U3BhbigwLjEsIDAuNTUpKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbG9yKHRoaXMuY29sb3JzKSk7XG5cbiAgICAgIGVtaXR0ZXIuZW1pdChcIm9uY2VcIik7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xuICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5jcmVhdGVSZW5kZXJlcihjYW52YXMpO1xuICAgICAgdGhpcy5wcm90b24uYWRkUmVuZGVyZXIocmVuZGVyZXIpO1xuXG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ciA9IGNyb3NzWm9uZUJlaGF2aW91cjtcbiAgICAgIGVtaXR0ZXIucHJlRW1pdCgyKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUmVuZGVyZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIoY2FudmFzKSB7XG4gICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgUHJvdG9uLkN1c3RvbVJlbmRlcmVyKCk7XG5cbiAgICAgIHJlbmRlcmVyLm9uUHJvdG9uVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZUNyZWF0ZWQgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgdmFyIHcgPSBwYXJ0aWNsZS5yYWRpdXMgfHwgNjA7XG4gICAgICAgIHZhciBoID0gUHJvdG9uLk1hdGhVdGlsLnJhbmRvbUFUb0IoMTAwLCAyMDAsIFwiaW50XCIpO1xuICAgICAgICBwYXJ0aWNsZS5kYXRhLncgPSB3O1xuICAgICAgICBwYXJ0aWNsZS5kYXRhLmggPSBoO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZVVwZGF0ZSA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge1xuICAgICAgICB2YXIgdyA9IHBhcnRpY2xlLmRhdGEudztcbiAgICAgICAgdmFyIGggPSBwYXJ0aWNsZS5kYXRhLmg7XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0Lmdsb2JhbEFscGhhID0gcGFydGljbGUuYWxwaGE7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gcGFydGljbGUuY29sb3I7XG5cbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUocGFydGljbGUucC54LCBwYXJ0aWNsZS5wLnkpO1xuICAgICAgICBjb250ZXh0LnJvdGF0ZShQcm90b24uTWF0aFV0aWwuZGVncmVlVHJhbnNmb3JtKHBhcnRpY2xlLnJvdGF0aW9uKSk7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKC1wYXJ0aWNsZS5wLngsIC1wYXJ0aWNsZS5wLnkpO1xuXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQucmVjdChwYXJ0aWNsZS5wLnggLSB3IC8gMiwgcGFydGljbGUucC55IC0gaCAvIDIsIHcsIGgpO1xuXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xuICAgICAgICBjb250ZXh0Lmdsb2JhbEFscGhhID0gMTtcbiAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gcmVuZGVyZXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcm90b24oKSB7XG4gICAgICB0aGlzLnByb3RvbiAmJiB0aGlzLnByb3Rvbi51cGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywgeyBiZzogdGhpcy5wcm9wcy5iZyxcbiAgICAgICAgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uOiBcImxpZ2h0ZXJcIixcbiAgICAgICAgb25DYW52YXNEaWRNb3VudDogdGhpcy5vbkNhbnZhc0RpZE1vdW50LmJpbmQodGhpcyksXG4gICAgICAgIG9uQ2FudmFzSW5pdGVkOiB0aGlzLm9uQ2FudmFzSW5pdGVkLmJpbmQodGhpcyksXG4gICAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gU3F1YXJlO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG52YXIgQ29id2ViID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoQ29id2ViLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDb2J3ZWIocHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDb2J3ZWIpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ29id2ViLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ29id2ViKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMucmVuZGVyUHJvdG9uID0gX3RoaXMucmVuZGVyUHJvdG9uLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKENvYndlYiwgW3tcbiAgICBrZXk6IFwib25DYW52YXNJbml0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXJQcm90b24pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICAgICAgdGhpcy5wcm90b24uZGVzdHJveSgpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNpemUod2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS53aWR0aCA9IHdpZHRoO1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICB0aGlzLnByb3Rvbi5yZW5kZXJlcnNbMF0ucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5wcm90b24gPSBuZXcgUHJvdG9uKCk7XG5cbiAgICAgIHZhciBlbWl0dGVyID0gbmV3IFByb3Rvbi5FbWl0dGVyKCk7XG4gICAgICBlbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUodGhpcy5wcm9wcy5udW0gPyBuZXcgUHJvdG9uLlNwYW4odGhpcy5wcm9wcy5udW0pIDogbmV3IFByb3Rvbi5TcGFuKDEwMCksIG5ldyBQcm90b24uU3BhbigwLjA1LCAwLjIpKTtcblxuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcygxKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5SYWRpdXMoMSwgNCkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTGlmZShJbmZpbml0eSkpO1xuXG4gICAgICB2YXIgcG9pbnRab25lID0gbmV3IFByb3Rvbi5Qb3NpdGlvbihuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIHdpZHRoLCBoZWlnaHQpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShwb2ludFpvbmUpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uVmVsb2NpdHkobmV3IFByb3Rvbi5TcGFuKDAuMywgMC42KSwgbmV3IFByb3Rvbi5TcGFuKDAsIDM2MCksIFwicG9sYXJcIikpO1xuXG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkFscGhhKFByb3Rvbi5nZXRTcGFuKDAuMiwgMC45KSkpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xvcih0aGlzLnByb3BzLmNvbG9yIHx8IFwiIzMzM1wiKSk7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ciA9IG5ldyBQcm90b24uQ3Jvc3Nab25lKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgd2lkdGgsIGhlaWdodCksIFwiY3Jvc3NcIik7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cih0aGlzLmNyb3NzWm9uZUJlaGF2aW91cik7XG5cbiAgICAgIGVtaXR0ZXIuZW1pdChcIm9uY2VcIik7XG4gICAgICBlbWl0dGVyLmRhbXBpbmcgPSAwO1xuICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihlbWl0dGVyKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHRoaXMuY3JlYXRlUmVuZGVyZXIoY2FudmFzLCBlbWl0dGVyKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVJlbmRlcmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyKGNhbnZhcywgZW1pdHRlcikge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIHZhciByZW5kZXJlciA9IG5ldyBQcm90b24uQ2FudmFzUmVuZGVyZXIoY2FudmFzKTtcbiAgICAgIHZhciBSID0gMTQwO1xuXG4gICAgICByZW5kZXJlci5vblByb3RvblVwZGF0ZUFmdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGFydGljbGVzID0gZW1pdHRlci5wYXJ0aWNsZXM7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0aWNsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gaSArIDE7IGogPCBwYXJ0aWNsZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBwQSA9IHBhcnRpY2xlc1tpXTtcbiAgICAgICAgICAgIHZhciBwQiA9IHBhcnRpY2xlc1tqXTtcbiAgICAgICAgICAgIHZhciBkaXMgPSBwQS5wLmRpc3RhbmNlVG8ocEIucCk7XG5cbiAgICAgICAgICAgIGlmIChkaXMgPCBSKSB7XG4gICAgICAgICAgICAgIHZhciBhbHBoYSA9ICgxIC0gZGlzIC8gUikgKiAwLjU7XG4gICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBnZXRDb2xvcihfdGhpczIucHJvcHMuY29sb3IsIGFscGhhKSB8fCBcInJnYmEoMywgMywgMywgXCIgKyBhbHBoYSArIFwiKVwiO1xuICAgICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhwQS5wLngsIHBBLnAueSk7XG4gICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHBCLnAueCwgcEIucC55KTtcbiAgICAgICAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiByZW5kZXJlcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclByb3RvbigpIHtcbiAgICAgIHRoaXMucHJvdG9uICYmIHRoaXMucHJvdG9uLnVwZGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7IGJnOiB0aGlzLnByb3BzLmJnLFxuICAgICAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb246IFwiZGFya2VyXCIsXG4gICAgICAgIG9uQ2FudmFzSW5pdGVkOiB0aGlzLm9uQ2FudmFzSW5pdGVkLmJpbmQodGhpcyksXG4gICAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ29id2ViO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG52YXIgQ2lyY2xlID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoQ2lyY2xlLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDaXJjbGUocHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDaXJjbGUpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2lyY2xlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2lyY2xlKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuY29sb3JzID0gW1wiIzc0YjlmZlwiLCBcIiNlODQzOTNcIiwgXCIjNmM1Y2U3XCIsIFwiIzAwYjg5NFwiLCBcIiNmZGNiNmVcIiwgXCIjMDA2MjY2XCIsIFwiIzFCMTQ2NFwiXTtcblxuICAgIF90aGlzLnJlbmRlclByb3RvbiA9IF90aGlzLnJlbmRlclByb3Rvbi5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhDaXJjbGUsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgUkFGTWFuYWdlci5yZW1vdmUodGhpcy5yZW5kZXJQcm90b24pO1xuICAgICAgICB0aGlzLnByb3Rvbi5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNhbnZhc0luaXRlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUud2lkdGggPSB3aWR0aDtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgdGhpcy5wcm90b24ucmVuZGVyZXJzWzBdLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMucHJvdG9uID0gbmV3IFByb3RvbigpO1xuXG4gICAgICB2YXIgZW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpO1xuICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKHRoaXMucHJvcHMubnVtIHx8IDIwKTtcbiAgICAgIGVtaXR0ZXIuZGFtcGluZyA9IDAuMDA4O1xuXG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKDEpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlJhZGl1cygzMCwgNjAwKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WZWxvY2l0eShuZXcgUHJvdG9uLlNwYW4oMC41KSwgbmV3IFByb3Rvbi5TcGFuKDAsIDM2MCksIFwicG9sYXJcIikpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUG9zaXRpb24obmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpKSk7XG5cbiAgICAgIHZhciBjcm9zc1pvbmVCZWhhdmlvdXIgPSBuZXcgUHJvdG9uLkNyb3NzWm9uZShuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCksIFwiY3Jvc3NcIik7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihjcm9zc1pvbmVCZWhhdmlvdXIpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5BbHBoYShQcm90b24uZ2V0U3BhbigwLjM1LCAwLjU1KSkpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xvcih0aGlzLmdldENvbG9yKCkpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uUmFuZG9tRHJpZnQoNTAsIDUwLCAwLjUpKTtcblxuICAgICAgZW1pdHRlci5lbWl0KFwib25jZVwiKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG5cbiAgICAgIHZhciByZW5kZXJlciA9IG5ldyBQcm90b24uQ2FudmFzUmVuZGVyZXIoY2FudmFzKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHJlbmRlcmVyKTtcblxuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIgPSBjcm9zc1pvbmVCZWhhdmlvdXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldENvbG9yXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbG9yKCkge1xuICAgICAgdmFyIGMgPSB0aGlzLmNvbG9ycztcbiAgICAgIGlmICh0aGlzLnByb3BzLmNvbG9yKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMucHJvcHMuY29sb3IpKSB7XG4gICAgICAgICAgYyA9IHRoaXMucHJvcHMuY29sb3I7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYyA9IFt0aGlzLnByb3BzLmNvbG9yXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclByb3RvbigpIHtcbiAgICAgIHRoaXMucHJvdG9uICYmIHRoaXMucHJvdG9uLnVwZGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7IGJnOiB0aGlzLnByb3BzLmJnLFxuICAgICAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb246IFwiZGFya2VuXCIsXG4gICAgICAgIG9uQ2FudmFzSW5pdGVkOiB0aGlzLm9uQ2FudmFzSW5pdGVkLmJpbmQodGhpcyksXG4gICAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ2lyY2xlO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG52YXIgVGFkcG9sZSA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKFRhZHBvbGUsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFRhZHBvbGUocHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBUYWRwb2xlKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFRhZHBvbGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUYWRwb2xlKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMucmVuZGVyUHJvdG9uID0gX3RoaXMucmVuZGVyUHJvdG9uLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKFRhZHBvbGUsIFt7XG4gICAga2V5OiBcIm9uQ2FudmFzRGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNEaWRNb3VudChjYW52YXMpIHt9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DYW52YXNJbml0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgdGhpcy5yZW5kZXJQcm90b24oKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNpemUod2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS53aWR0aCA9IHdpZHRoO1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICB0aGlzLnByb3Rvbi5yZW5kZXJlcnNbMF0ucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5wcm90b24gPSBuZXcgUHJvdG9uKCk7XG5cbiAgICAgIHZhciBlbWl0dGVyID0gbmV3IFByb3Rvbi5FbWl0dGVyKCk7XG4gICAgICBlbWl0dGVyLmRhbXBpbmcgPSAwLjAwODtcbiAgICAgIGVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZSh0aGlzLnByb3BzLm51bSA/IHRoaXMucHJvcHMubnVtIDogNTApO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcygxKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5SYWRpdXMoNSwgOSkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uVmVsb2NpdHkobmV3IFByb3Rvbi5TcGFuKDEuNSksIG5ldyBQcm90b24uU3BhbigwLCAzNjApLCBcInBvbGFyXCIpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlBvc2l0aW9uKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgd2lkdGgsIGhlaWdodCkpKTtcblxuICAgICAgdmFyIG1vdXNlSW5mbyA9IHtcbiAgICAgICAgeDogd2lkdGggLyAyLFxuICAgICAgICB5OiBoZWlnaHQgLyAyXG4gICAgICB9O1xuXG4gICAgICB2YXIgYXR0cmFjdGlvbkJlaGF2aW91ciA9IG5ldyBQcm90b24uQXR0cmFjdGlvbihtb3VzZUluZm8sIDAsIDApO1xuICAgICAgdmFyIGNyb3NzWm9uZUJlaGF2aW91ciA9IG5ldyBQcm90b24uQ3Jvc3Nab25lKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSwgXCJib3VuZFwiKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sb3IodGhpcy5wcm9wcy5jb2xvciB8fCBcIiNiYmJcIikpO1xuICAgICAgLy9lbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkFscGhhKG5ldyBQcm90b24uU3BhbigwLjUsIDEpKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihhdHRyYWN0aW9uQmVoYXZpb3VyLCBjcm9zc1pvbmVCZWhhdmlvdXIpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5SYW5kb21EcmlmdCgxNSwgMTUsIDAuMDUpKTtcbiAgICAgIGVtaXR0ZXIuZW1pdChcIm9uY2VcIik7XG5cbiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRSZW5kZXJlcih0aGlzLmNyZWF0ZVJlbmRlcmVyKGNhbnZhcykpO1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIgPSBjcm9zc1pvbmVCZWhhdmlvdXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVJlbmRlcmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyKGNhbnZhcykge1xuICAgICAgdmFyIGpvaW50Q291bnQgPSAxMDtcbiAgICAgIHZhciBkZWxheVRpbWUgPSA4O1xuICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DYW52YXNSZW5kZXJlcihjYW52YXMpO1xuXG4gICAgICByZW5kZXJlci5vblByb3RvblVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVDcmVhdGVkID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgIHBhcnRpY2xlLmRhdGEucG9pbnRzID0gW107XG4gICAgICAgIHBhcnRpY2xlLmRhdGEuaW5kZXggPSAwO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZVVwZGF0ZSA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge1xuICAgICAgICBkcmF3VGFkcG9sZVRhaWwocGFydGljbGUpO1xuICAgICAgICBpZiAocGFydGljbGUuZGF0YS5pbmRleCAlIGRlbGF5VGltZSA9PT0gMCkgZmlsbFBvaW50c0RhdGEocGFydGljbGUpO1xuICAgICAgICBkcmF3VGFkcG9sZUhlYWQocGFydGljbGUpO1xuICAgICAgICBwYXJ0aWNsZS5kYXRhLmluZGV4Kys7XG4gICAgICB9O1xuXG4gICAgICB2YXIgZmlsbFBvaW50c0RhdGEgPSBmdW5jdGlvbiBmaWxsUG9pbnRzRGF0YShwYXJ0aWNsZSkge1xuICAgICAgICBwYXJ0aWNsZS5kYXRhLnBvaW50cy51bnNoaWZ0KHBhcnRpY2xlLnAueSk7XG4gICAgICAgIHBhcnRpY2xlLmRhdGEucG9pbnRzLnVuc2hpZnQocGFydGljbGUucC54KTtcblxuICAgICAgICBpZiAocGFydGljbGUuZGF0YS5wb2ludHMubGVuZ3RoID4gam9pbnRDb3VudCkge1xuICAgICAgICAgIHBhcnRpY2xlLmRhdGEucG9pbnRzLnBvcCgpO1xuICAgICAgICAgIHBhcnRpY2xlLmRhdGEucG9pbnRzLnBvcCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgZHJhd1RhZHBvbGVIZWFkID0gZnVuY3Rpb24gZHJhd1RhZHBvbGVIZWFkKHBhcnRpY2xlKSB7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gcGFydGljbGUuY29sb3I7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQuYXJjKHBhcnRpY2xlLnAueCwgcGFydGljbGUucC55LCBwYXJ0aWNsZS5yYWRpdXMsIDAsIE1hdGguUEkgKiAyLCB0cnVlKTtcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY29udGV4dC5maWxsKCk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgZHJhd1RhZHBvbGVUYWlsID0gZnVuY3Rpb24gZHJhd1RhZHBvbGVUYWlsKHBhcnRpY2xlKSB7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBwYXJ0aWNsZS5jb2xvcjtcblxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhwYXJ0aWNsZS5wLngsIHBhcnRpY2xlLnAueSk7XG5cbiAgICAgICAgdmFyIGwgPSBwYXJ0aWNsZS5kYXRhLnBvaW50cy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSArPSAyKSB7XG4gICAgICAgICAgdmFyIHggPSBwYXJ0aWNsZS5kYXRhLnBvaW50c1tpXTtcbiAgICAgICAgICB2YXIgeSA9IHBhcnRpY2xlLmRhdGEucG9pbnRzW2kgKyAxXTtcblxuICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gbGluZWFyRXZhbHVhdGlvbihpLCBsKTtcbiAgICAgICAgICBjb250ZXh0LmxpbmVUbyh4LCB5KTtcbiAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgbGluZWFyRXZhbHVhdGlvbiA9IGZ1bmN0aW9uIGxpbmVhckV2YWx1YXRpb24oaSwgbCkge1xuICAgICAgICBpZiAobCA8PSAyKSByZXR1cm4gMTtcblxuICAgICAgICB2YXIgbWF4ID0gNjtcbiAgICAgICAgdmFyIEEgPSAobWF4IC0gMSkgLyAoMiAvIGwgLSAxKTtcbiAgICAgICAgdmFyIEIgPSAxIC0gQTtcbiAgICAgICAgdmFyIFggPSAoaSArIDIpIC8gbDtcbiAgICAgICAgdmFyIHZhbCA9IEEgKiBYICsgQjtcbiAgICAgICAgdmFsID0gdmFsID4+IDA7XG5cbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiByZW5kZXJlcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclByb3RvbigpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBSQUZNYW5hZ2VyLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMi5wcm90b24udXBkYXRlKCk7XG4gICAgICAgIC8vdGhpcy5wcm90b24uc3RhdHMudXBkYXRlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywgeyBiZzogdGhpcy5wcm9wcy5iZyxcbiAgICAgICAgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uOiBcImRhcmtlclwiLFxuICAgICAgICBvbkNhbnZhc0RpZE1vdW50OiB0aGlzLm9uQ2FudmFzRGlkTW91bnQuYmluZCh0aGlzKSxcbiAgICAgICAgb25DYW52YXNJbml0ZWQ6IHRoaXMub25DYW52YXNJbml0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgb25SZXNpemU6IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBUYWRwb2xlO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG52YXIgQ09MT1IgPSBbXCIjZjZiOTNiXCIsIFwiIzE4ZGNmZlwiLCBcIiNjZDg0ZjFcIiwgXCIjRUQ0QzY3XCIsIFwiI2ZmZmZmZlwiLCBcIiNiNzE1NDBcIiwgXCIjMzJmZjdlXCIsIFwiI2ZmMzgzOFwiXTtcblxudmFyIFBvbHlnb24gPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBpbmhlcml0cyhQb2x5Z29uLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBQb2x5Z29uKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9seWdvbik7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQb2x5Z29uLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUG9seWdvbikpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLnJlbmRlclByb3RvbiA9IF90aGlzLnJlbmRlclByb3Rvbi5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhQb2x5Z29uLCBbe1xuICAgIGtleTogXCJvbkNhbnZhc0luaXRlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3JlYXRlUHJvdG9uKGNhbnZhcyk7XG4gICAgICB0aGlzLmNyZWF0ZUVtaXR0ZXIoe1xuICAgICAgICBjYW52YXM6IGNhbnZhcyxcbiAgICAgICAgeDogd2lkdGggLyAyLFxuICAgICAgICB5OiBoZWlnaHQgLyAyLFxuICAgICAgICBtYWluRW1pdHRlcjogdHJ1ZSxcbiAgICAgICAgem9uZTogXCJib3VuZFwiXG4gICAgICB9KTtcblxuICAgICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXJQcm90b24pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICAgICAgdGhpcy5wcm90b24uZGVzdHJveSgpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNpemUoKSB7fVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm90b24oY2FudmFzKSB7XG4gICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTtcbiAgICAgIHZhciByZW5kZXJlciA9IHRoaXMuY3JlYXRlUmVuZGVyZXIoY2FudmFzKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHJlbmRlcmVyKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUmVuZGVyZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIoY2FudmFzKSB7XG4gICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgUHJvdG9uLkN1c3RvbVJlbmRlcmVyKCk7XG5cbiAgICAgIHJlbmRlcmVyLm9uUHJvdG9uVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZUNyZWF0ZWQgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgcGFydGljbGUuZGF0YS5jb3VudCA9IFByb3Rvbi5NYXRoVXRpbC5yYW5kb21BVG9CKDMsIDEwLCB0cnVlKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVVcGRhdGUgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBwYXJ0aWNsZS5hbHBoYTtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBwYXJ0aWNsZS5jb2xvcjtcblxuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZShwYXJ0aWNsZS5wLngsIHBhcnRpY2xlLnAueSk7XG4gICAgICAgIGNvbnRleHQucm90YXRlKFByb3Rvbi5NYXRoVXRpbC5kZWdyZWVUcmFuc2Zvcm0ocGFydGljbGUucm90YXRpb24pKTtcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoLXBhcnRpY2xlLnAueCwgLXBhcnRpY2xlLnAueSk7XG5cbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgZHJhd1BvbHlnb24ocGFydGljbGUsIHBhcnRpY2xlLmRhdGEuY291bnQpO1xuXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xuICAgICAgICBjb250ZXh0Lmdsb2JhbEFscGhhID0gMTtcbiAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJlci5vblBhcnRpY2xlRGVhZCA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge307XG5cbiAgICAgIHZhciBkcmF3UG9seWdvbiA9IGZ1bmN0aW9uIGRyYXdQb2x5Z29uKHBhcnRpY2xlLCBjb3VudCkge1xuICAgICAgICBpZiAoY291bnQgPj0gNykge1xuICAgICAgICAgIGNvbnRleHQuYXJjKHBhcnRpY2xlLnAueCwgcGFydGljbGUucC55LCBwYXJ0aWNsZS5yYWRpdXMsIDAsIE1hdGguUEkgKiAyLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcmFkaXVzID0gcGFydGljbGUucmFkaXVzO1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gY291bnQ7IGkrKykge1xuICAgICAgICAgICAgdmFyIHggPSBwYXJ0aWNsZS5wLnggKyByYWRpdXMgKiBNYXRoLmNvcyhNYXRoLlBJIC8gMTgwICogMzYwIC8gY291bnQgKiBpKTtcbiAgICAgICAgICAgIHZhciB5ID0gcGFydGljbGUucC55ICsgcmFkaXVzICogTWF0aC5zaW4oTWF0aC5QSSAvIDE4MCAqIDM2MCAvIGNvdW50ICogaSk7XG5cbiAgICAgICAgICAgIGlmIChpID09PSAwKSBjb250ZXh0Lm1vdmVUbyh4LCB5KTtlbHNlIGNvbnRleHQubGluZVRvKHgsIHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHJlbmRlcmVyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVFbWl0dGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVtaXR0ZXIoX3JlZikge1xuICAgICAgdmFyIG1haW5FbWl0dGVyID0gX3JlZi5tYWluRW1pdHRlcixcbiAgICAgICAgICBjYW52YXMgPSBfcmVmLmNhbnZhcyxcbiAgICAgICAgICB4ID0gX3JlZi54LFxuICAgICAgICAgIHkgPSBfcmVmLnksXG4gICAgICAgICAgcmFkaXVzID0gX3JlZi5yYWRpdXMsXG4gICAgICAgICAgX3JlZiRjb2xvciA9IF9yZWYuY29sb3IsXG4gICAgICAgICAgY29sb3IgPSBfcmVmJGNvbG9yID09PSB1bmRlZmluZWQgPyBDT0xPUiA6IF9yZWYkY29sb3IsXG4gICAgICAgICAgX3JlZiR6b25lID0gX3JlZi56b25lLFxuICAgICAgICAgIHpvbmUgPSBfcmVmJHpvbmUgPT09IHVuZGVmaW5lZCA/IFwiZGVhZFwiIDogX3JlZiR6b25lLFxuICAgICAgICAgIF9yZWYkb25jZSA9IF9yZWYub25jZSxcbiAgICAgICAgICBvbmNlID0gX3JlZiRvbmNlID09PSB1bmRlZmluZWQgPyBcImFsbFwiIDogX3JlZiRvbmNlLFxuICAgICAgICAgIF9yZWYkYWxwaGEgPSBfcmVmLmFscGhhLFxuICAgICAgICAgIGFscGhhID0gX3JlZiRhbHBoYSA9PT0gdW5kZWZpbmVkID8gMC44NSA6IF9yZWYkYWxwaGEsXG4gICAgICAgICAgX3JlZiRncmF2aXR5ID0gX3JlZi5ncmF2aXR5LFxuICAgICAgICAgIGdyYXZpdHkgPSBfcmVmJGdyYXZpdHkgPT09IHVuZGVmaW5lZCA/IDMuNSA6IF9yZWYkZ3Jhdml0eTtcblxuICAgICAgdmFyIGVtaXR0ZXIgPSB0aGlzLnByb3Rvbi5wb29sLmdldChQcm90b24uRW1pdHRlcik7XG5cbiAgICAgIGlmICghZW1pdHRlci5jb21wbGV0ZWQpIHtcbiAgICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKHRoaXMucHJvcHMubnVtID8gbmV3IFByb3Rvbi5TcGFuKHRoaXMucHJvcHMubnVtKSA6IG5ldyBQcm90b24uU3Bhbig0LCA5KSwgbmV3IFByb3Rvbi5TcGFuKDEuNiwgMi4yKSk7XG5cbiAgICAgICAgdmFyIHJhZGl1c0luaXQgPSBtYWluRW1pdHRlciA/IG5ldyBQcm90b24uUmFkaXVzKDEwLCAxMTApIDogbmV3IFByb3Rvbi5SYWRpdXMoMywgcmFkaXVzKTtcbiAgICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcygxKSk7XG4gICAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShyYWRpdXNJbml0KTtcbiAgICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTGlmZSgzLCA2KSk7XG4gICAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlZlbG9jaXR5KG5ldyBQcm90b24uU3Bhbig0LCA2KSwgbmV3IFByb3Rvbi5TcGFuKC05MCwgOTApLCBcInBvbGFyXCIpKTtcblxuICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkFscGhhKGFscGhhLCAwLjIpKTtcbiAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xvcihjb2xvcikpO1xuICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlNjYWxlKDEsIDAuMykpO1xuICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlJvdGF0ZSgpKTtcbiAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5HcmF2aXR5KGdyYXZpdHkpKTtcblxuICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cih0aGlzLmN1c3RvbURlYWRCZWhhdmlvdXIoY2FudmFzKSk7XG4gICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ3Jvc3Nab25lKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSwgem9uZSkpO1xuICAgICAgfVxuXG4gICAgICBlbWl0dGVyLnAueCA9IHg7XG4gICAgICBlbWl0dGVyLnAueSA9IHk7XG4gICAgICBpZiAob25jZSA9PT0gXCJvbmNlXCIpIGVtaXR0ZXIuZW1pdChcIm9uY2VcIik7ZWxzZSBlbWl0dGVyLmVtaXQoKTtcblxuICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihlbWl0dGVyKTtcbiAgICAgIC8vdGhpcy5leHBpcmVFbWl0dGVyKGVtaXR0ZXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJleHBpcmVFbWl0dGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGV4cGlyZUVtaXR0ZXIoZW1pdHRlcikge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBlbWl0dGVyLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIF90aGlzMi5wcm90b24ucG9vbC5leHBpcmUoZW1pdHRlcik7XG4gICAgICAgIF90aGlzMi5wcm90b24ucmVtb3ZlRW1pdHRlcihlbWl0dGVyKTtcbiAgICAgIH0sIDUwMCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImN1c3RvbURlYWRCZWhhdmlvdXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3VzdG9tRGVhZEJlaGF2aW91cihjYW52YXMpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKHBhcnRpY2xlKSB7XG4gICAgICAgICAgcGFydGljbGUuZGF0YSA9IHBhcnRpY2xlLmRhdGEgfHwge307XG4gICAgICAgICAgcGFydGljbGUuZGF0YS5vbGRSYWRpdXMgPSBwYXJ0aWNsZS5yYWRpdXM7XG4gICAgICAgICAgcGFydGljbGUuZGF0YS5lbWl0dGVyQ291bnQgPSAwO1xuICAgICAgICB9LFxuICAgICAgICBhcHBseUJlaGF2aW91cjogZnVuY3Rpb24gYXBwbHlCZWhhdmlvdXIocGFydGljbGUpIHtcbiAgICAgICAgICBpZiAocGFydGljbGUucmFkaXVzIDwgNSkgcmV0dXJuO1xuICAgICAgICAgIGlmIChwYXJ0aWNsZS5kYXRhLmVtaXR0ZXJDb3VudCA+PSAyKSByZXR1cm47XG5cbiAgICAgICAgICBpZiAocGFydGljbGUucmFkaXVzIDw9IDEgLyAzICogcGFydGljbGUuZGF0YS5vbGRSYWRpdXMpIHtcbiAgICAgICAgICAgIHBhcnRpY2xlLmRhdGEuZW1pdHRlckNvdW50Kys7XG4gICAgICAgICAgICBfdGhpczMuY3JlYXRlRW1pdHRlcih7XG4gICAgICAgICAgICAgIGNhbnZhczogY2FudmFzLFxuICAgICAgICAgICAgICB4OiBwYXJ0aWNsZS5wLngsXG4gICAgICAgICAgICAgIHk6IHBhcnRpY2xlLnAueSxcbiAgICAgICAgICAgICAgcmFkaXVzOiBwYXJ0aWNsZS5yYWRpdXMgKiAoMSAvIDIpLFxuICAgICAgICAgICAgICBhbHBoYTogMC41LFxuICAgICAgICAgICAgICBncmF2aXR5OiA1LFxuICAgICAgICAgICAgICBjb2xvcjogcGFydGljbGUuY29sb3IsXG4gICAgICAgICAgICAgIG9uY2U6IFwib25jZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcm90b24oKSB7XG4gICAgICB0aGlzLnByb3RvbiAmJiB0aGlzLnByb3Rvbi51cGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywgeyBiZzogdGhpcy5wcm9wcy5iZyxcbiAgICAgICAgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uOiBcImRhcmtlclwiLFxuICAgICAgICBvbkNhbnZhc0luaXRlZDogdGhpcy5vbkNhbnZhc0luaXRlZC5iaW5kKHRoaXMpLFxuICAgICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFBvbHlnb247XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBGb3VudGFpbiA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKEZvdW50YWluLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBGb3VudGFpbihwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEZvdW50YWluKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEZvdW50YWluLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRm91bnRhaW4pKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5jb2xvcnMgPSBbXCIjNTI5Qjg4XCIsIFwiI0NERDE4MFwiLCBcIiNGRkZBMzJcIiwgXCIjRkI2MjU1XCIsIFwiI0ZCNEE1M1wiLCBcIiNGRjRFNTBcIiwgXCIjRjlENDIzXCJdO1xuICAgIF90aGlzLnJlbmRlclByb3RvbiA9IF90aGlzLnJlbmRlclByb3Rvbi5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhGb3VudGFpbiwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgICAgIHRoaXMucHJvdG9uLmRlc3Ryb3koKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2FudmFzSW5pdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIFJBRk1hbmFnZXIuYWRkKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNpemUoKSB7fVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTtcbiAgICAgIHZhciBlbWl0dGVyID0gbmV3IFByb3Rvbi5FbWl0dGVyKCk7XG4gICAgICBlbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUodGhpcy5wcm9wcy5udW0gPyBuZXcgUHJvdG9uLlNwYW4odGhpcy5wcm9wcy5udW0pIDogbmV3IFByb3Rvbi5TcGFuKDQsIDgpLCBuZXcgUHJvdG9uLlNwYW4oMC4xLCAwLjI1KSk7XG5cbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUmFkaXVzKDIwLCAyMDApKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLkxpZmUoMiwgNCkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uVmVsb2NpdHkobmV3IFByb3Rvbi5TcGFuKDQsIDcpLCBuZXcgUHJvdG9uLlNwYW4oMCwgMzYwKSwgXCJwb2xhclwiKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5Qb3NpdGlvbihuZXcgUHJvdG9uLkNpcmNsZVpvbmUod2lkdGggLyAyLCBoZWlnaHQgLyAyLCAxMDApKSk7XG5cbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQWxwaGEoMSwgMCkpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5TY2FsZSgwLjIsIDEpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKHRoaXMuY3JlYXRlQ3VzdG9tQmVoYXZpb3VyKCkpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xvcih0aGlzLmNvbG9ycywgXCJyYW5kb21cIikpO1xuICAgICAgZW1pdHRlci5lbWl0KCk7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xuXG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgUHJvdG9uLkNhbnZhc1JlbmRlcmVyKGNhbnZhcyk7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRSZW5kZXJlcihyZW5kZXJlcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZUN1c3RvbUJlaGF2aW91clwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVDdXN0b21CZWhhdmlvdXIoKSB7XG4gICAgICB2YXIgZiA9IDEwICogMTAwO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShwYXJ0aWNsZSkge1xuICAgICAgICAgIHBhcnRpY2xlLmYgPSBuZXcgUHJvdG9uLlZlY3RvcjJEKDAsIDApO1xuICAgICAgICB9LFxuICAgICAgICBhcHBseUJlaGF2aW91cjogZnVuY3Rpb24gYXBwbHlCZWhhdmlvdXIocGFydGljbGUpIHtcbiAgICAgICAgICB2YXIgbGVuZ3RoID0gcGFydGljbGUudi5sZW5ndGgoKSAvIDEwMDA7XG4gICAgICAgICAgdmFyIGdyYWRpZW50ID0gcGFydGljbGUudi5nZXRHcmFkaWVudCgpO1xuICAgICAgICAgIGdyYWRpZW50ICs9IDMuMTQgLyAyO1xuXG4gICAgICAgICAgcGFydGljbGUuZi54ID0gZiAqIGxlbmd0aCAqIE1hdGguY29zKGdyYWRpZW50KTtcbiAgICAgICAgICBwYXJ0aWNsZS5mLnkgPSBmICogbGVuZ3RoICogTWF0aC5zaW4oZ3JhZGllbnQpO1xuICAgICAgICAgIHBhcnRpY2xlLmEuYWRkKHBhcnRpY2xlLmYpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUHJvdG9uKCkge1xuICAgICAgdGhpcy5wcm90b24gJiYgdGhpcy5wcm90b24udXBkYXRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXMsIHsgYmc6IHRoaXMucHJvcHMuYmcsXG4gICAgICAgIGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjogXCJ4b3JcIixcbiAgICAgICAgb25DYW52YXNJbml0ZWQ6IHRoaXMub25DYW52YXNJbml0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgb25SZXNpemU6IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBGb3VudGFpbjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxudmFyIFBhcnRpY2xlc0JnID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgaW5oZXJpdHMoUGFydGljbGVzQmcsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFBhcnRpY2xlc0JnKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFydGljbGVzQmcpO1xuICAgIHJldHVybiBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQYXJ0aWNsZXNCZy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFBhcnRpY2xlc0JnKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoUGFydGljbGVzQmcsIFt7XG4gICAga2V5OiBcImdldFJhbmRvbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSYW5kb20oKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBudW0gPSBfcHJvcHMubnVtLFxuICAgICAgICAgIGJnID0gX3Byb3BzLmJnLFxuICAgICAgICAgIGNvbG9yID0gX3Byb3BzLmNvbG9yO1xuXG4gICAgICAvLyBDb2RlIHNvdXJjZSBmcm9tIGhlcmUsIHRoYW5rcyBhdXRob3JcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kcmF3Y2FsbC9Qcm90b24vYmxvYi9naC1wYWdlcy9zb3VyY2Uvc3JjL3V0aWxzL1JhbmQuanNcblxuICAgICAgaWYgKCF0aGlzLnJhbmRvbSkge1xuICAgICAgICB0aGlzLnJhbmRvbSA9IG5ldyBSYW5kKCk7XG4gICAgICAgIHRoaXMucmFuZG9tLnNldCgwLjI1LCBSZWFjdC5jcmVhdGVFbGVtZW50KENvbG9yLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KSk7XG4gICAgICAgIHRoaXMucmFuZG9tLnNldCgwLjIsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQmFsbCwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSkpO1xuICAgICAgICB0aGlzLnJhbmRvbS5zZXQoMC4yLCBSZWFjdC5jcmVhdGVFbGVtZW50KExpbmVzLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KSk7XG4gICAgICAgIHRoaXMucmFuZG9tLnNldCgwLjE2LCBSZWFjdC5jcmVhdGVFbGVtZW50KFRoaWNrLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KSk7XG4gICAgICAgIHRoaXMucmFuZG9tLnNldCgwLjE4LCBSZWFjdC5jcmVhdGVFbGVtZW50KENpcmNsZSwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSkpO1xuICAgICAgICB0aGlzLnJhbmRvbS5zZXQoMC4wNCwgUmVhY3QuY3JlYXRlRWxlbWVudChDb2J3ZWIsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pKTtcbiAgICAgICAgdGhpcy5yYW5kb20uc2V0KDAuMSwgUmVhY3QuY3JlYXRlRWxlbWVudChQb2x5Z29uLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KSk7XG4gICAgICAgIHRoaXMucmFuZG9tLnNldCgwLjA4LCBSZWFjdC5jcmVhdGVFbGVtZW50KFNxdWFyZSwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSkpO1xuICAgICAgICB0aGlzLnJhbmRvbS5zZXQoMC4xOCwgUmVhY3QuY3JlYXRlRWxlbWVudChUYWRwb2xlLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KSk7XG4gICAgICAgIHRoaXMucmFuZG9tLnNldCgwLjE1LCBSZWFjdC5jcmVhdGVFbGVtZW50KEZvdW50YWluLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5yYW5kb20uZ2V0UmVzdWx0KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEJnUGFydGljbGVzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEJnUGFydGljbGVzKCkge1xuICAgICAgdmFyIF9wcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHR5cGUgPSBfcHJvcHMyLnR5cGUsXG4gICAgICAgICAgbnVtID0gX3Byb3BzMi5udW0sXG4gICAgICAgICAgYmcgPSBfcHJvcHMyLmJnLFxuICAgICAgICAgIGNvbG9yID0gX3Byb3BzMi5jb2xvcixcbiAgICAgICAgICBjb25maWcgPSBfcHJvcHMyLmNvbmZpZztcblxuXG4gICAgICB2YXIgcGFydGljbGVzID0gdm9pZCAwO1xuICAgICAgc3dpdGNoIChTdHJpbmcodHlwZSkudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICBjYXNlIFwiY29sb3JcIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KENvbG9yLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImJhbGxcIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KEJhbGwsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibGluZXNcIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KExpbmVzLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInRoaWNrXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChUaGljaywgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJjaXJjbGVcIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KENpcmNsZSwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJjb2J3ZWJcIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KENvYndlYiwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJwb2x5Z29uXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChQb2x5Z29uLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNxdWFyZVwiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3F1YXJlLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInRhZHBvbGVcIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFRhZHBvbGUsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZm91bnRhaW5cIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KEZvdW50YWluLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImN1c3RvbVwiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29sb3IkMSwgeyBiZzogYmcsIGNvbmZpZzogY29uZmlnIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicmFuZG9tXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gdGhpcy5nZXRSYW5kb20obnVtKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29sb3IsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFydGljbGVzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIHBhcnRpY2xlcyA9IHRoaXMuZ2V0QmdQYXJ0aWNsZXMoKTtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBSZWFjdC5GcmFnbWVudCxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgcGFydGljbGVzXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gUGFydGljbGVzQmc7XG59KENvbXBvbmVudCk7XG5cbmV4cG9ydCBkZWZhdWx0IFBhcnRpY2xlc0JnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iLCIvKiFcbiogUHJvdG9uIHY0LjIuMVxuKiBodHRwczovL2dpdGh1Yi5jb20vZHJhd2NhbGwvUHJvdG9uXG4qXG4qIENvcHlyaWdodCAyMDEzLTIwMjAsIEEtSklFXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4qXG4qL1xuIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6dC5Qcm90b249ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9My4xNDE1OTI2LHM9e1BJOmUsUEl4MjoyKmUsUElfMjplLzIsUElfMTgwOmUvMTgwLE4xODBfUEk6MTgwL2UsSW5maW5pdHk6LTk5OSxpc0luZmluaXR5OmZ1bmN0aW9uKHQpe3JldHVybiB0PT09dGhpcy5JbmZpbml0eXx8dD09PTEvMH0scmFuZG9tQVRvQjpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIDI8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09aSYmaT9NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGUtdCkpK3Q6dCtNYXRoLnJhbmRvbSgpKihlLXQpfSxyYW5kb21GbG9hdGluZzpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMucmFuZG9tQVRvQih0LWUsdCtlLGkpfSxyYW5kb21Db2xvcjpmdW5jdGlvbigpe3JldHVyblwiI1wiKyhcIjAwMDAwXCIrKDE2Nzc3MjE2Kk1hdGgucmFuZG9tKCk8PDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTYpfSxyYW5kb21ab25lOmZ1bmN0aW9uKCl7fSxmbG9vcjpmdW5jdGlvbih0LGUpe2U9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lP2U6NCxlPU1hdGgucG93KDEwLGUpO3JldHVybiBNYXRoLmZsb29yKHQqZSkvZX0sZGVncmVlVHJhbnNmb3JtOmZ1bmN0aW9uKHQpe3JldHVybiB0KmUvMTgwfSx0b0NvbG9yMTY6ZnVuY3Rpb24odCl7cmV0dXJuXCIjXCIrdC50b1N0cmluZygxNil9fSxpPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LG89ZnVuY3Rpb24odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSx0PWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gZSYmYSh0LnByb3RvdHlwZSxlKSxpJiZhKHQsaSksdH07ZnVuY3Rpb24gYSh0LGUpe2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgYT1lW2ldO2EuZW51bWVyYWJsZT1hLmVudW1lcmFibGV8fCExLGEuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGEmJihhLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxhLmtleSxhKX19ZnVuY3Rpb24gbih0LGUsaSl7bnVsbD09PXQmJih0PUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIGE9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpO2lmKHZvaWQgMCE9PWEpe2lmKFwidmFsdWVcImluIGEpcmV0dXJuIGEudmFsdWU7YT1hLmdldDtyZXR1cm4gdm9pZCAwIT09YT9hLmNhbGwoaSk6dm9pZCAwfWlmKG51bGwhPT0odD1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpKXJldHVybiBuKHQsZSxpKX12YXIgcj1mdW5jdGlvbih0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfSxoPWZ1bmN0aW9uKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9LGw9KHQodSxbe2tleTpcImdldFZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dD0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PXQmJnQ7cmV0dXJuIHRoaXMuaXNBcnJheT9QLmdldFJhbmRGcm9tQXJyYXkodGhpcy5hKTp0aGlzLmNlbnRlcj9zLnJhbmRvbUZsb2F0aW5nKHRoaXMuYSx0aGlzLmIsdCk6cy5yYW5kb21BVG9CKHRoaXMuYSx0aGlzLmIsdCl9fV0sW3trZXk6XCJzZXRTcGFuVmFsdWVcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHQgaW5zdGFuY2VvZiB1P3Q6dm9pZCAwPT09ZT9uZXcgdSh0KTp2b2lkIDA9PT1pP25ldyB1KHQsZSk6bmV3IHUodCxlLGkpfX0se2tleTpcImdldFNwYW5WYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgdT90LmdldFZhbHVlKCk6dH19XSksdSk7ZnVuY3Rpb24gdSh0LGUsaSl7byh0aGlzLHUpLFAuaXNBcnJheSh0KT8odGhpcy5pc0FycmF5PSEwLHRoaXMuYT10KToodGhpcy5pc0FycmF5PSExLHRoaXMuYT1QLmluaXRWYWx1ZSh0LDEpLHRoaXMuYj1QLmluaXRWYWx1ZShlLHRoaXMuYSksdGhpcy5jZW50ZXI9UC5pbml0VmFsdWUoaSwhMSkpfXZhciBjPWZ1bmN0aW9uKHQpey0tdDtmb3IodmFyIGU9MTtlPDMyO2U8PD0xKXR8PXQ+PmU7cmV0dXJuIHQrMX0sZD1mdW5jdGlvbih0LGUpe3JldHVyblsxLDAsMCwwLDEsMCx0LGUsMV19LHk9ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5jb3ModCksdD1NYXRoLnNpbih0KTtyZXR1cm5bZSwtdCwwLHQsZSwwLDAsMCwxXX0scD1mdW5jdGlvbih0LGUpe3JldHVyblt0LDAsMCwwLGUsMCwwLDAsMV19LGY9ZnVuY3Rpb24odCxlKXt2YXIgaT10WzBdLGE9dFsxXSxyPXRbMl0sbj10WzNdLHM9dFs0XSxvPXRbNV0saD10WzZdLGw9dFs3XSx1PXRbOF0sYz1lWzBdLGQ9ZVsxXSx5PWVbMl0scD1lWzNdLGY9ZVs0XSx2PWVbNV0sZz1lWzZdLHQ9ZVs3XSxlPWVbOF07cmV0dXJuW2kqYythKnArcipnLGkqZCthKmYrcip0LGkqeSthKnYrciplLG4qYytzKnArbypnLG4qZCtzKmYrbyp0LG4qeStzKnYrbyplLGgqYytsKnArdSpnLGgqZCtsKmYrdSp0LGgqeStsKnYrdSplXX0sdj17Y3JlYXRlQ2FudmFzOmZ1bmN0aW9uKHQsZSxpLGEpe3ZhciByPTM8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YT9hOlwiYWJzb2x1dGVcIixhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7cmV0dXJuIGEuaWQ9dCxhLndpZHRoPWUsYS5oZWlnaHQ9aSxhLnN0eWxlLm9wYWNpdHk9MCxhLnN0eWxlLnBvc2l0aW9uPXIsdGhpcy50cmFuc2Zvcm0oYSwtNTAwLC01MDAsMCwwKSxhfSxjcmVhdGVEaXY6ZnVuY3Rpb24odCxlLGkpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIGEuaWQ9dCxhLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0aGlzLnJlc2l6ZShhLGUsaSksYX0scmVzaXplOmZ1bmN0aW9uKHQsZSxpKXt0LnN0eWxlLndpZHRoPWUrXCJweFwiLHQuc3R5bGUuaGVpZ2h0PWkrXCJweFwiLHQuc3R5bGUubWFyZ2luTGVmdD0tZS8yK1wicHhcIix0LnN0eWxlLm1hcmdpblRvcD0taS8yK1wicHhcIn0sdHJhbnNmb3JtOmZ1bmN0aW9uKHQsZSxpLGEscil7dC5zdHlsZS53aWxsQ2hhbmdlPVwidHJhbnNmb3JtXCI7dmFyIG49XCJ0cmFuc2xhdGUoXCIrZStcInB4LCBcIitpK1wicHgpIHNjYWxlKFwiK2ErXCIpIHJvdGF0ZShcIityK1wiZGVnKVwiO3RoaXMuY3NzMyh0LFwidHJhbnNmb3JtXCIsbil9LHRyYW5zZm9ybTNkOmZ1bmN0aW9uKHQsZSxpLGEscil7dC5zdHlsZS53aWxsQ2hhbmdlPVwidHJhbnNmb3JtXCI7cj1cInRyYW5zbGF0ZTNkKFwiK2UrXCJweCwgXCIraStcInB4LCAwKSBzY2FsZShcIithK1wiKSByb3RhdGUoXCIrcitcImRlZylcIjt0aGlzLmNzczModCxcImJhY2tmYWNlVmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpLHRoaXMuY3NzMyh0LFwidHJhbnNmb3JtXCIscil9LGNzczM6ZnVuY3Rpb24odCxlLGkpe3ZhciBhPWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zdWJzdHIoMSk7dC5zdHlsZVtcIldlYmtpdFwiK2FdPWksdC5zdHlsZVtcIk1velwiK2FdPWksdC5zdHlsZVtcIk9cIithXT1pLHQuc3R5bGVbXCJtc1wiK2FdPWksdC5zdHlsZVtcIlwiK2VdPWl9fSxnPXt9LG09e30sYj0wLF89ZnVuY3Rpb24odCxlLGkpe3QuZHJhd0ltYWdlKGUsaS54LGkueSk7ZT10LmdldEltYWdlRGF0YShpLngsaS55LGkud2lkdGgsaS5oZWlnaHQpO3JldHVybiB0LmNsZWFyUmVjdChpLngsaS55LGkud2lkdGgsaS5oZWlnaHQpLGV9LHg9ZnVuY3Rpb24odCxlLGkpe3ZhciBhPVwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6dC5zcmM7Z1thXT9lKGdbYV0saSk6KCh0PW5ldyBJbWFnZSkub25sb2FkPWZ1bmN0aW9uKHQpe2dbYV09dC50YXJnZXQsZShnW2FdLGkpfSx0LnNyYz1hKX0saz1mdW5jdGlvbih0LGUsaSl7dmFyIGEscixuPXQuc3JjO3JldHVybiBtW25dfHwoYT1jKHQud2lkdGgpLHI9Yyh0LmhlaWdodCksKHI9di5jcmVhdGVDYW52YXMoXCJwcm90b25fY2FudmFzX2NhY2hlX1wiKyArK2IsYSxyKSkuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZSh0LDAsMCx0LndpZHRoLHQuaGVpZ2h0KSxtW25dPXIpLGUmJmUobVtuXSxpKSxtW25dfSxQPXtpbml0VmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD1udWxsIT10P3Q6ZX0saXNBcnJheTpmdW5jdGlvbih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9LGVtcHR5QXJyYXk6ZnVuY3Rpb24odCl7dCYmKHQubGVuZ3RoPTApfSx0b0FycmF5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzQXJyYXkodCk/dDpbdF19LGdldFJhbmRGcm9tQXJyYXk6ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dFtNYXRoLmZsb29yKHQubGVuZ3RoKk1hdGgucmFuZG9tKCkpXTpudWxsfSxlbXB0eU9iamVjdDpmdW5jdGlvbih0LGUpe3ZhciBpLGE9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lP2U6bnVsbDtmb3IoaSBpbiB0KWEmJi0xPGEuaW5kZXhPZihpKXx8ZGVsZXRlIHRbaV19LGNsYXNzQXBwbHk6ZnVuY3Rpb24odCxlKXtlPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZT9lOm51bGw7cmV0dXJuIG5ldyhlP3QuYmluZC5hcHBseSh0LFtudWxsXS5jb25jYXQoZSkpOnQpfSxzZXRWZWN0b3JWYWw6ZnVuY3Rpb24odCxlKXtlPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZT9lOm51bGw7ZSYmKHRoaXMuaGFzUHJvcChlLFwieFwiKSYmKHQucC54PWUueCksdGhpcy5oYXNQcm9wKGUsXCJ5XCIpJiYodC5wLnk9ZS55KSx0aGlzLmhhc1Byb3AoZSxcInZ4XCIpJiYodC52Lng9ZS52eCksdGhpcy5oYXNQcm9wKGUsXCJ2eVwiKSYmKHQudi55PWUudnkpLHRoaXMuaGFzUHJvcChlLFwiYXhcIikmJih0LmEueD1lLmF4KSx0aGlzLmhhc1Byb3AoZSxcImF5XCIpJiYodC5hLnk9ZS5heSksdGhpcy5oYXNQcm9wKGUsXCJwXCIpJiZ0LnAuY29weShlLnApLHRoaXMuaGFzUHJvcChlLFwidlwiKSYmdC52LmNvcHkoZS52KSx0aGlzLmhhc1Byb3AoZSxcImFcIikmJnQuYS5jb3B5KGUuYSksdGhpcy5oYXNQcm9wKGUsXCJwb3NpdGlvblwiKSYmdC5wLmNvcHkoZS5wb3NpdGlvbiksdGhpcy5oYXNQcm9wKGUsXCJ2ZWxvY2l0eVwiKSYmdC52LmNvcHkoZS52ZWxvY2l0eSksdGhpcy5oYXNQcm9wKGUsXCJhY2NlbGVyYXRlXCIpJiZ0LmEuY29weShlLmFjY2VsZXJhdGUpKX0saGFzUHJvcDpmdW5jdGlvbih0LGUpe3JldHVybiEhdCYmdm9pZCAwIT09dFtlXX0sc2V0UHJvcDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKXQuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWwuZ2V0U3BhblZhbHVlKGVbaV0pKTtyZXR1cm4gdH0sZ2V0SW1hZ2VEYXRhOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gXyh0LGUsaSl9LGRlc3Ryb3lBbGw6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lP2U6bnVsbCxhPXQubGVuZ3RoO2EtLTspe3RyeXt0W2FdLmRlc3Ryb3koaSl9Y2F0Y2godCl7fWRlbGV0ZSB0W2FdfXQubGVuZ3RoPTB9LGFzc2lnbjpmdW5jdGlvbih0LGUpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5hc3NpZ24pcmV0dXJuIE9iamVjdC5hc3NpZ24odCxlKTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmKHRbaV09ZVtpXSk7cmV0dXJuIHR9fSxFPXt9LEE9e19pbmRleDowLF9jYWNoZTp7fSxpZDpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09RVt0XSYmbnVsbCE9PUVbdF18fChFW3RdPTApLHQrXCJfXCIrRVt0XSsrfSxnZXRJZDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldElkRnJvbUNhY2hlKHQpO3JldHVybiBlfHwoZT1cIlBVSURfXCIrdGhpcy5faW5kZXgrKyx0aGlzLl9jYWNoZVtlXT10LGUpfSxnZXRJZEZyb21DYWNoZTpmdW5jdGlvbih0KXt2YXIgZSxpPXZvaWQgMDtmb3IoaSBpbiB0aGlzLl9jYWNoZSl7aWYoKGU9dGhpcy5fY2FjaGVbaV0pPT09dClyZXR1cm4gaTtpZih0aGlzLmlzQm9keShlLHQpJiZlLnNyYz09PXQuc3JjKXJldHVybiBpfXJldHVybiBudWxsfSxpc0JvZHk6ZnVuY3Rpb24odCxlKXtyZXR1cm5cIm9iamVjdFwiPT09KHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjppKHQpKSYmXCJvYmplY3RcIj09PSh2b2lkIDA9PT1lP1widW5kZWZpbmVkXCI6aShlKSkmJnQuaXNJbm5lciYmZS5pc0lubmVyfSxnZXRUYXJnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NhY2hlW3RdfX0sVD0odChSLFt7a2V5OlwiZ2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3ZhciBhPXZvaWQgMDtyZXR1cm4gaT1pfHx0Ll9fcHVpZHx8QS5nZXRJZCh0KSwoYT10aGlzLmNhY2hlW2ldJiYwPHRoaXMuY2FjaGVbaV0ubGVuZ3RoP3RoaXMuY2FjaGVbaV0ucG9wKCk6dGhpcy5jcmVhdGVPckNsb25lKHQsZSkpLl9fcHVpZD10Ll9fcHVpZHx8aSxhfX0se2tleTpcImV4cGlyZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldENhY2hlKHQuX19wdWlkKS5wdXNoKHQpfX0se2tleTpcImNyZWF0ZU9yQ2xvbmVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnRvdGFsKyssdGhpcy5jcmVhdGU/dGhpcy5jcmVhdGUodCxlKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P1AuY2xhc3NBcHBseSh0LGUpOnQuY2xvbmUoKX19LHtrZXk6XCJnZXRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQsZT0wO2Zvcih0IGluIHRoaXMuY2FjaGUpZSs9dGhpcy5jYWNoZVt0XS5sZW5ndGg7cmV0dXJuIGUrK319LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5jYWNoZSl0aGlzLmNhY2hlW3RdLmxlbmd0aD0wLGRlbGV0ZSB0aGlzLmNhY2hlW3RdfX0se2tleTpcImdldENhY2hlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dD0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PXQ/dDpcImRlZmF1bHRcIjtyZXR1cm4gdGhpcy5jYWNoZVt0XXx8KHRoaXMuY2FjaGVbdF09W10pLHRoaXMuY2FjaGVbdF19fV0pLFIpO2Z1bmN0aW9uIFIodCl7byh0aGlzLFIpLHRoaXMudG90YWw9MCx0aGlzLmNhY2hlPXt9fXZhciBPPSh0KHcsW3trZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuYWRkKHQsZSk7dmFyIGk9dGhpcy5nZXRFbWl0dGVyKCksdD10aGlzLmdldFJlbmRlcmVyKCksZT1cIlwiO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgMjplKz1cImVtaXR0ZXI6XCIrdGhpcy5wcm90b24uZW1pdHRlcnMubGVuZ3RoK1wiPGJyPlwiLGkmJihlKz1cImVtIHNwZWVkOlwiK2kuZW1pdFNwZWVkK1wiPGJyPlwiKSxpJiYoZSs9XCJwb3M6XCIrdGhpcy5nZXRFbWl0dGVyUG9zKGkpKTticmVhaztjYXNlIDM6aSYmKGUrPVwiaW5pdGlhbGl6ZXM6XCIraS5pbml0aWFsaXplcy5sZW5ndGgrXCI8YnI+XCIpLGkmJihlKz0nPHNwYW4gc3R5bGU9XCJkaXNwbGF5OmlubGluZS1ibG9jaztcIj4nK3RoaXMuY29uY2F0QXJyKGkuaW5pdGlhbGl6ZXMpK1wiPC9zcGFuPjxicj5cIiksaSYmKGUrPVwiYmVoYXZpb3VyczpcIitpLmJlaGF2aW91cnMubGVuZ3RoK1wiPGJyPlwiKSxpJiYoZSs9JzxzcGFuIHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7XCI+Jyt0aGlzLmNvbmNhdEFycihpLmJlaGF2aW91cnMpK1wiPC9zcGFuPjxicj5cIik7YnJlYWs7Y2FzZSA0OnQmJihlKz10Lm5hbWUrXCI8YnI+XCIpLHQmJihlKz1cImJvZHk6XCIrdGhpcy5nZXRDcmVhdGVkTnVtYmVyKHQpK1wiPGJyPlwiKTticmVhaztkZWZhdWx0OmUrPVwicGFydGljbGVzOlwiK3RoaXMucHJvdG9uLmdldENvdW50KCkrXCI8YnI+XCIsZSs9XCJwb29sOlwiK3RoaXMucHJvdG9uLnBvb2wuZ2V0Q291bnQoKStcIjxicj5cIixlKz1cInRvdGFsOlwiK3RoaXMucHJvdG9uLnBvb2wudG90YWx9dGhpcy5jb250YWluZXIuaW5uZXJIVE1MPWV9fSx7a2V5OlwiYWRkXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzO2lmKCF0aGlzLmNvbnRhaW5lcil7dGhpcy50eXBlPTEsdGhpcy5jb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLmNvbnRhaW5lci5zdHlsZS5jc3NUZXh0PVtcInBvc2l0aW9uOmFic29sdXRlO2JvdHRvbTowcHg7bGVmdDowO2N1cnNvcjpwb2ludGVyO1wiLFwib3BhY2l0eTowLjk7ei1pbmRleDoxMDAwMDtwYWRkaW5nOjEwcHg7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7XCIsXCJ3aWR0aDoxMjBweDtoZWlnaHQ6NTBweDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDI7Y29sb3I6IzBmZjtcIl0uam9pbihcIlwiKSx0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbih0KXtpLnR5cGUrKyw0PGkudHlwZSYmKGkudHlwZT0xKX0sITEpO3ZhciBhPXZvaWQgMCxyPXZvaWQgMDtzd2l0Y2godCl7Y2FzZSAyOmE9XCIjMjAxXCIscj1cIiNmMDhcIjticmVhaztjYXNlIDM6YT1cIiMwMjBcIixyPVwiIzBmMFwiO2JyZWFrO2RlZmF1bHQ6YT1cIiMwMDJcIixyPVwiIzBmZlwifXRoaXMuY29udGFpbmVyLnN0eWxlW1wiYmFja2dyb3VuZC1jb2xvclwiXT1hLHRoaXMuY29udGFpbmVyLnN0eWxlLmNvbG9yPXJ9dGhpcy5jb250YWluZXIucGFyZW50Tm9kZXx8KGU9ZXx8dGhpcy5ib2R5fHxkb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcil9fSx7a2V5OlwiZ2V0RW1pdHRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvdG9uLmVtaXR0ZXJzW3RoaXMuZW1pdHRlckluZGV4XX19LHtrZXk6XCJnZXRSZW5kZXJlclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvdG9uLnJlbmRlcmVyc1t0aGlzLnJlbmRlcmVySW5kZXhdfX0se2tleTpcImNvbmNhdEFyclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPVwiXCI7aWYoIXR8fCF0Lmxlbmd0aClyZXR1cm4gZTtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyllKz0odFtpXS5uYW1lfHxcIlwiKS5zdWJzdHIoMCwxKStcIi5cIjtyZXR1cm4gZX19LHtrZXk6XCJnZXRDcmVhdGVkTnVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9vbC50b3RhbHx8dC5jcG9vbCYmdC5jcG9vbC50b3RhbHx8MH19LHtrZXk6XCJnZXRFbWl0dGVyUG9zXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucm91bmQodC5wLngpK1wiLFwiK01hdGgucm91bmQodC5wLnkpfX1dKSx3KTtmdW5jdGlvbiB3KHQpe28odGhpcyx3KSx0aGlzLnByb3Rvbj10LHRoaXMuY29udGFpbmVyPW51bGwsdGhpcy50eXBlPTEsdGhpcy5lbWl0dGVySW5kZXg9MCx0aGlzLnJlbmRlcmVySW5kZXg9MH12YXIgQz0odChTLFt7a2V5OlwiYWRkRXZlbnRMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2xpc3RlbmVycz90aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxlKTp0aGlzLl9saXN0ZW5lcnM9e30sdGhpcy5fbGlzdGVuZXJzW3RdfHwodGhpcy5fbGlzdGVuZXJzW3RdPVtdKSx0aGlzLl9saXN0ZW5lcnNbdF0ucHVzaChlKSxlfX0se2tleTpcInJlbW92ZUV2ZW50TGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKHRoaXMuX2xpc3RlbmVycyYmdGhpcy5fbGlzdGVuZXJzW3RdKWZvcih2YXIgaT10aGlzLl9saXN0ZW5lcnNbdF0sYT1pLmxlbmd0aCxyPTA7cjxhO3IrKylpZihpW3JdPT09ZSl7MT09PWE/ZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1t0XTppLnNwbGljZShyLDEpO2JyZWFrfX19LHtrZXk6XCJyZW1vdmVBbGxFdmVudExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q/dGhpcy5fbGlzdGVuZXJzJiZkZWxldGUgdGhpcy5fbGlzdGVuZXJzW3RdOnRoaXMuX2xpc3RlbmVycz1udWxsfX0se2tleTpcImRpc3BhdGNoRXZlbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBpPSExLGE9dGhpcy5fbGlzdGVuZXJzO2lmKHQmJmEpe3ZhciByPWFbdF07aWYoIXIpcmV0dXJuIGk7Zm9yKHZhciBuPXZvaWQgMCxzPXIubGVuZ3RoO3MtLTspbj1yW3NdLGk9aXx8bihlKX1yZXR1cm4hIWl9fSx7a2V5OlwiaGFzRXZlbnRMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2xpc3RlbmVycztyZXR1cm4hKCFlfHwhZVt0XSl9fV0sW3trZXk6XCJiaW5kXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudD1TLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50LHQucHJvdG90eXBlLmhhc0V2ZW50TGlzdGVuZXI9Uy5wcm90b3R5cGUuaGFzRXZlbnRMaXN0ZW5lcix0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPVMucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIsdC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1TLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyLHQucHJvdG90eXBlLnJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzPVMucHJvdG90eXBlLnJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzfX1dKSxTKTtmdW5jdGlvbiBTKCl7byh0aGlzLFMpLHRoaXMuX2xpc3RlbmVycz1udWxsfXZhciBJPSh0KEQsW3trZXk6XCJjYWxjdWxhdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5ldWxlckludGVncmF0ZSh0LGUsaSl9fSx7a2V5OlwiZXVsZXJJbnRlZ3JhdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dC5zbGVlcHx8KHQub2xkLnAuY29weSh0LnApLHQub2xkLnYuY29weSh0LnYpLHQuYS5tdWx0aXBseVNjYWxhcigxL3QubWFzcyksdC52LmFkZCh0LmEubXVsdGlwbHlTY2FsYXIoZSkpLHQucC5hZGQodC5vbGQudi5tdWx0aXBseVNjYWxhcihlKSksaSYmdC52Lm11bHRpcGx5U2NhbGFyKGkpLHQuYS5jbGVhcigpKX19XSksRCk7ZnVuY3Rpb24gRCh0KXtvKHRoaXMsRCksdGhpcy50eXBlPXR9dmFyIFY9KHQoTSxbe2tleTpcImFkZFJlbmRlcmVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5pbml0KHRoaXMpLHRoaXMucmVuZGVyZXJzLnB1c2godCl9fSx7a2V5OlwicmVtb3ZlUmVuZGVyZXJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnJlbmRlcmVycy5pbmRleE9mKHQpO3RoaXMucmVuZGVyZXJzLnNwbGljZShlLDEpLHQucmVtb3ZlKHRoaXMpfX0se2tleTpcImFkZEVtaXR0ZXJcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmVtaXR0ZXJzLnB1c2godCksKHQucGFyZW50PXRoaXMpLmRpc3BhdGNoRXZlbnQoTS5FTUlUVEVSX0FEREVELHQpfX0se2tleTpcInJlbW92ZUVtaXR0ZXJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmVtaXR0ZXJzLmluZGV4T2YodCk7dGhpcy5lbWl0dGVycy5zcGxpY2UoZSwxKSx0LnBhcmVudD1udWxsLHRoaXMuZGlzcGF0Y2hFdmVudChNLkVNSVRURVJfUkVNT1ZFRCx0KX19LHtrZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe1wiYXV0b1wiPT09dGhpcy5fZnBzPyh0aGlzLmRpc3BhdGNoRXZlbnQoTS5QUk9UT05fVVBEQVRFKSxNLlVTRV9DTE9DSz8odGhpcy50aGVufHwodGhpcy50aGVuPShuZXcgRGF0ZSkuZ2V0VGltZSgpKSx0aGlzLm5vdz0obmV3IERhdGUpLmdldFRpbWUoKSx0aGlzLmVsYXBzZWQ9LjAwMSoodGhpcy5ub3ctdGhpcy50aGVuKSx0aGlzLmFtZW5kQ2hhbmdlVGFic0J1ZygpLDA8dGhpcy5lbGFwc2VkJiZ0aGlzLmVtaXR0ZXJzVXBkYXRlKHRoaXMuZWxhcHNlZCksdGhpcy50aGVuPXRoaXMubm93KTp0aGlzLmVtaXR0ZXJzVXBkYXRlKE0uREVGQVVMVF9JTlRFUlZBTCksdGhpcy5kaXNwYXRjaEV2ZW50KE0uUFJPVE9OX1VQREFURV9BRlRFUikpOih0aGlzLnRoZW58fCh0aGlzLnRoZW49KG5ldyBEYXRlKS5nZXRUaW1lKCkpLHRoaXMubm93PShuZXcgRGF0ZSkuZ2V0VGltZSgpLHRoaXMuZWxhcHNlZD0uMDAxKih0aGlzLm5vdy10aGlzLnRoZW4pLHRoaXMuZWxhcHNlZD50aGlzLl9pbnRlcnZhbCYmKHRoaXMuZGlzcGF0Y2hFdmVudChNLlBST1RPTl9VUERBVEUpLHRoaXMuZW1pdHRlcnNVcGRhdGUodGhpcy5faW50ZXJ2YWwpLHRoaXMudGhlbj10aGlzLm5vdy10aGlzLmVsYXBzZWQldGhpcy5faW50ZXJ2YWwqMWUzLHRoaXMuZGlzcGF0Y2hFdmVudChNLlBST1RPTl9VUERBVEVfQUZURVIpKSl9fSx7a2V5OlwiZW1pdHRlcnNVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5lbWl0dGVycy5sZW5ndGg7ZS0tOyl0aGlzLmVtaXR0ZXJzW2VdLnVwZGF0ZSh0KX19LHtrZXk6XCJhbWVuZENoYW5nZVRhYnNCdWdcIix2YWx1ZTpmdW5jdGlvbigpe00uYW1lbmRDaGFuZ2VUYWJzQnVnJiYuNTx0aGlzLmVsYXBzZWQmJih0aGlzLnRoZW49KG5ldyBEYXRlKS5nZXRUaW1lKCksdGhpcy5lbGFwc2VkPTApfX0se2tleTpcImdldENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMuZW1pdHRlcnMubGVuZ3RoO2UtLTspdCs9dGhpcy5lbWl0dGVyc1tlXS5wYXJ0aWNsZXMubGVuZ3RoO3JldHVybiB0fX0se2tleTpcImdldEFsbFBhcnRpY2xlc1wiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9dGhpcy5lbWl0dGVycy5sZW5ndGg7ZS0tOyl0PXQuY29uY2F0KHRoaXMuZW1pdHRlcnNbZV0ucGFydGljbGVzKTtyZXR1cm4gdH19LHtrZXk6XCJkZXN0cm95QWxsRW1pdHRlcnNcIix2YWx1ZTpmdW5jdGlvbigpe1AuZGVzdHJveUFsbCh0aGlzLmVtaXR0ZXJzKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe2kudGltZT0wLGkudGhlbj0wLGkucG9vbC5kZXN0cm95KCksUC5kZXN0cm95QWxsKGkuZW1pdHRlcnMpLFAuZGVzdHJveUFsbChpLnJlbmRlcmVycyxpLmdldEFsbFBhcnRpY2xlcygpKX12YXIgaT10aGlzOzA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09dCYmdD9zZXRUaW1lb3V0KGUsMjAwKTplKCl9fSx7a2V5OlwiZnBzXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Zwcz10LHRoaXMuX2ludGVydmFsPVwiYXV0b1wiPT09dD9NLkRFRkFVTFRfSU5URVJWQUw6cy5mbG9vcigxL3QsNyl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mcHN9fV0pLE0pO2Z1bmN0aW9uIE0odCl7byh0aGlzLE0pLHRoaXMuZW1pdHRlcnM9W10sdGhpcy5yZW5kZXJlcnM9W10sdGhpcy50aW1lPTAsdGhpcy5ub3c9MCx0aGlzLnRoZW49MCx0aGlzLmVsYXBzZWQ9MCx0aGlzLnN0YXRzPW5ldyBPKHRoaXMpLHRoaXMucG9vbD1uZXcgVCg4MCksdGhpcy5pbnRlZ3JhdGlvblR5cGU9UC5pbml0VmFsdWUodCxNLkVVTEVSKSx0aGlzLmludGVncmF0b3I9bmV3IEkodGhpcy5pbnRlZ3JhdGlvblR5cGUpLHRoaXMuX2Zwcz1cImF1dG9cIix0aGlzLl9pbnRlcnZhbD1NLkRFRkFVTFRfSU5URVJWQUx9Vi5VU0VfQ0xPQ0s9ITEsVi5NRUFTVVJFPTEwMCxWLkVVTEVSPVwiZXVsZXJcIixWLlJLMj1cInJ1bmdlLWt1dHRhMlwiLFYuUEFSVElDTEVfQ1JFQVRFRD1cIlBBUlRJQ0xFX0NSRUFURURcIixWLlBBUlRJQ0xFX1VQREFURT1cIlBBUlRJQ0xFX1VQREFURVwiLFYuUEFSVElDTEVfU0xFRVA9XCJQQVJUSUNMRV9TTEVFUFwiLFYuUEFSVElDTEVfREVBRD1cIlBBUlRJQ0xFX0RFQURcIixWLkVNSVRURVJfQURERUQ9XCJFTUlUVEVSX0FEREVEXCIsVi5FTUlUVEVSX1JFTU9WRUQ9XCJFTUlUVEVSX1JFTU9WRURcIixWLlBST1RPTl9VUERBVEU9XCJQUk9UT05fVVBEQVRFXCIsVi5QUk9UT05fVVBEQVRFX0FGVEVSPVwiUFJPVE9OX1VQREFURV9BRlRFUlwiLFYuREVGQVVMVF9JTlRFUlZBTD0uMDE2NyxWLmFtZW5kQ2hhbmdlVGFic0J1Zz0hMCxDLmJpbmQoVik7dmFyIEI9KHQoTCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnI9MjU1LHRoaXMuZz0yNTUsdGhpcy5iPTI1NX19XSksTCk7ZnVuY3Rpb24gTCgpe3ZhciB0PTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXToyNTUsZT0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MjU1LGk9Mjxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjI1NTtvKHRoaXMsTCksdGhpcy5yPXQsdGhpcy5nPWUsdGhpcy5iPWl9dmFyIFU9e2Vhc2VMaW5lYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGVhc2VJblF1YWQ6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KHQsMil9LGVhc2VPdXRRdWFkOmZ1bmN0aW9uKHQpe3JldHVybi0oTWF0aC5wb3codC0xLDIpLTEpfSxlYXNlSW5PdXRRdWFkOmZ1bmN0aW9uKHQpe3JldHVybih0Lz0uNSk8MT8uNSpNYXRoLnBvdyh0LDIpOi0uNSooKHQtPTIpKnQtMil9LGVhc2VJbkN1YmljOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnBvdyh0LDMpfSxlYXNlT3V0Q3ViaWM6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KHQtMSwzKSsxfSxlYXNlSW5PdXRDdWJpYzpmdW5jdGlvbih0KXtyZXR1cm4odC89LjUpPDE/LjUqTWF0aC5wb3codCwzKTouNSooTWF0aC5wb3codC0yLDMpKzIpfSxlYXNlSW5RdWFydDpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3codCw0KX0sZWFzZU91dFF1YXJ0OmZ1bmN0aW9uKHQpe3JldHVybi0oTWF0aC5wb3codC0xLDQpLTEpfSxlYXNlSW5PdXRRdWFydDpmdW5jdGlvbih0KXtyZXR1cm4odC89LjUpPDE/LjUqTWF0aC5wb3codCw0KTotLjUqKCh0LT0yKSpNYXRoLnBvdyh0LDMpLTIpfSxlYXNlSW5TaW5lOmZ1bmN0aW9uKHQpe3JldHVybiAxLU1hdGguY29zKHQqcy5QSV8yKX0sZWFzZU91dFNpbmU6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguc2luKHQqcy5QSV8yKX0sZWFzZUluT3V0U2luZTpmdW5jdGlvbih0KXtyZXR1cm4tLjUqKE1hdGguY29zKE1hdGguUEkqdCktMSl9LGVhc2VJbkV4cG86ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10PzA6TWF0aC5wb3coMiwxMCoodC0xKSl9LGVhc2VPdXRFeHBvOmZ1bmN0aW9uKHQpe3JldHVybiAxPT09dD8xOjEtTWF0aC5wb3coMiwtMTAqdCl9LGVhc2VJbk91dEV4cG86ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10PzA6MT09PXQ/MToodC89LjUpPDE/LjUqTWF0aC5wb3coMiwxMCoodC0xKSk6LjUqKDItTWF0aC5wb3coMiwtMTAqLS10KSl9LGVhc2VJbkNpcmM6ZnVuY3Rpb24odCl7cmV0dXJuLShNYXRoLnNxcnQoMS10KnQpLTEpfSxlYXNlT3V0Q2lyYzpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zcXJ0KDEtTWF0aC5wb3codC0xLDIpKX0sZWFzZUluT3V0Q2lyYzpmdW5jdGlvbih0KXtyZXR1cm4odC89LjUpPDE/LS41KihNYXRoLnNxcnQoMS10KnQpLTEpOi41KihNYXRoLnNxcnQoMS0odC09MikqdCkrMSl9LGVhc2VJbkJhY2s6ZnVuY3Rpb24odCl7cmV0dXJuIHQqdCooMi43MDE1OCp0LTEuNzAxNTgpfSxlYXNlT3V0QmFjazpmdW5jdGlvbih0KXtyZXR1cm4tLXQqdCooMi43MDE1OCp0KzEuNzAxNTgpKzF9LGVhc2VJbk91dEJhY2s6ZnVuY3Rpb24odCl7dmFyIGU9MS43MDE1ODtyZXR1cm4odC89LjUpPDE/dCp0KigoMSsoZSo9MS41MjUpKSp0LWUpKi41Oi41KigodC09MikqdCooKDErKGUqPTEuNTI1KSkqdCtlKSsyKX0sZ2V0RWFzaW5nOmZ1bmN0aW9uKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDp0aGlzW3RdfHx0aGlzLmVhc2VMaW5lYXJ9fSxGPSh0KHosW3trZXk6XCJzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLng9dCx0aGlzLnk9ZSx0aGlzfX0se2tleTpcInNldFhcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PXQsdGhpc319LHtrZXk6XCJzZXRZXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueT10LHRoaXN9fSx7a2V5OlwiZ2V0R3JhZGllbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy54P01hdGguYXRhbjIodGhpcy55LHRoaXMueCk6MDx0aGlzLnk/cy5QSV8yOnRoaXMueTwwPy1zLlBJXzI6dm9pZCAwfX0se2tleTpcImNvcHlcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PXQueCx0aGlzLnk9dC55LHRoaXN9fSx7a2V5OlwiYWRkXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwIT09ZT90aGlzLmFkZFZlY3RvcnModCxlKToodGhpcy54Kz10LngsdGhpcy55Kz10LnksdGhpcyl9fSx7a2V5OlwiYWRkWFlcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLngrPXQsdGhpcy55Kz1lLHRoaXN9fSx7a2V5OlwiYWRkVmVjdG9yc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueD10LngrZS54LHRoaXMueT10LnkrZS55LHRoaXN9fSx7a2V5Olwic3ViXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwIT09ZT90aGlzLnN1YlZlY3RvcnModCxlKToodGhpcy54LT10LngsdGhpcy55LT10LnksdGhpcyl9fSx7a2V5Olwic3ViVmVjdG9yc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueD10LngtZS54LHRoaXMueT10LnktZS55LHRoaXN9fSx7a2V5OlwiZGl2aWRlU2NhbGFyXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIDAhPT10Pyh0aGlzLngvPXQsdGhpcy55Lz10KTp0aGlzLnNldCgwLDApLHRoaXN9fSx7a2V5OlwibXVsdGlwbHlTY2FsYXJcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54Kj10LHRoaXMueSo9dCx0aGlzfX0se2tleTpcIm5lZ2F0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoLTEpfX0se2tleTpcImRvdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngqdC54K3RoaXMueSp0Lnl9fSx7a2V5OlwibGVuZ3RoU3FcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnl9fSx7a2V5OlwibGVuZ3RoXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSl9fSx7a2V5Olwibm9ybWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKSl9fSx7a2V5OlwiZGlzdGFuY2VUb1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZCh0KSl9fSx7a2V5Olwicm90YXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy54LGk9dGhpcy55O3JldHVybiB0aGlzLng9ZSpNYXRoLmNvcyh0KStpKk1hdGguc2luKHQpLHRoaXMueT0tZSpNYXRoLnNpbih0KStpKk1hdGguY29zKHQpLHRoaXN9fSx7a2V5OlwiZGlzdGFuY2VUb1NxdWFyZWRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLngtdC54LHQ9dGhpcy55LXQueTtyZXR1cm4gZSplK3QqdH19LHtrZXk6XCJsZXJwXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy54Kz0odC54LXRoaXMueCkqZSx0aGlzLnkrPSh0LnktdGhpcy55KSplLHRoaXN9fSx7a2V5OlwiZXF1YWxzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQueD09PXRoaXMueCYmdC55PT09dGhpcy55fX0se2tleTpcImNsZWFyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54PTAsdGhpcy55PTAsdGhpc319LHtrZXk6XCJjbG9uZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB6KHRoaXMueCx0aGlzLnkpfX1dKSx6KTtmdW5jdGlvbiB6KHQsZSl7byh0aGlzLHopLHRoaXMueD10fHwwLHRoaXMueT1lfHwwfXZhciBqPSh0KE4sW3trZXk6XCJnZXREaXJlY3Rpb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLmF0YW4yKHRoaXMudi54LC10aGlzLnYueSkqcy5OMTgwX1BJfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saWZlPTEvMCx0aGlzLmFnZT0wLHRoaXMuZGVhZD0hMSx0aGlzLnNsZWVwPSExLHRoaXMuYm9keT1udWxsLHRoaXMuc3ByaXRlPW51bGwsdGhpcy5wYXJlbnQ9bnVsbCx0aGlzLmVuZXJneT0xLHRoaXMubWFzcz0xLHRoaXMucmFkaXVzPTEwLHRoaXMuYWxwaGE9MSx0aGlzLnNjYWxlPTEsdGhpcy5yb3RhdGlvbj0wLHRoaXMuY29sb3I9bnVsbCx0aGlzLnAuc2V0KDAsMCksdGhpcy52LnNldCgwLDApLHRoaXMuYS5zZXQoMCwwKSx0aGlzLm9sZC5wLnNldCgwLDApLHRoaXMub2xkLnYuc2V0KDAsMCksdGhpcy5vbGQuYS5zZXQoMCwwKSx0aGlzLmVhc2luZz1VLmVhc2VMaW5lYXIsdGhpcy5yZ2IucmVzZXQoKSxQLmVtcHR5T2JqZWN0KHRoaXMuZGF0YSksdGhpcy5yZW1vdmVBbGxCZWhhdmlvdXJzKCksdGhpc319LHtrZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuc2xlZXB8fCh0aGlzLmFnZSs9dCx0aGlzLmFwcGx5QmVoYXZpb3Vycyh0LGUpKSx0aGlzLmFnZTx0aGlzLmxpZmU/KGU9dGhpcy5lYXNpbmcodGhpcy5hZ2UvdGhpcy5saWZlKSx0aGlzLmVuZXJneT1NYXRoLm1heCgxLWUsMCkpOnRoaXMuZGVzdHJveSgpfX0se2tleTpcImFwcGx5QmVoYXZpb3Vyc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXRoaXMuYmVoYXZpb3Vycy5sZW5ndGgsYT12b2lkIDAsYT0wO2E8aTthKyspdGhpcy5iZWhhdmlvdXJzW2FdJiZ0aGlzLmJlaGF2aW91cnNbYV0uYXBwbHlCZWhhdmlvdXIodGhpcyx0LGUpfX0se2tleTpcImFkZEJlaGF2aW91clwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuYmVoYXZpb3Vycy5wdXNoKHQpLHQuaGFzT3duUHJvcGVydHkoXCJwYXJlbnRzXCIpJiZ0LnBhcmVudHMucHVzaCh0aGlzKSx0LmluaXRpYWxpemUodGhpcyl9fSx7a2V5OlwiYWRkQmVoYXZpb3Vyc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aCxpPXZvaWQgMCxpPTA7aTxlO2krKyl0aGlzLmFkZEJlaGF2aW91cih0W2ldKX19LHtrZXk6XCJyZW1vdmVCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbih0KXt0PXRoaXMuYmVoYXZpb3Vycy5pbmRleE9mKHQpOy0xPHQmJih0aGlzLmJlaGF2aW91cnMuc3BsaWNlKHQsMSkucGFyZW50cz1udWxsKX19LHtrZXk6XCJyZW1vdmVBbGxCZWhhdmlvdXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXtQLmVtcHR5QXJyYXkodGhpcy5iZWhhdmlvdXJzKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUFsbEJlaGF2aW91cnMoKSx0aGlzLmVuZXJneT0wLHRoaXMuZGVhZD0hMCx0aGlzLnBhcmVudD1udWxsfX1dKSxOKTtmdW5jdGlvbiBOKHQpe28odGhpcyxOKSx0aGlzLmlkPVwiXCIsdGhpcy5vbGQ9e30sdGhpcy5kYXRhPXt9LHRoaXMuYmVoYXZpb3Vycz1bXSx0aGlzLnA9W10sdGhpcy52PVtdLHRoaXMuYT1bXSx0aGlzLnJnYj17fSx0aGlzLm5hbWU9XCJQYXJ0aWNsZVwiLHRoaXMuaWQ9QS5pZCh0aGlzLm5hbWUpLHRoaXMub2xkPXt9LHRoaXMuZGF0YT17fSx0aGlzLmJlaGF2aW91cnM9W10sdGhpcy5wPW5ldyBGLHRoaXMudj1uZXcgRix0aGlzLmE9bmV3IEYsdGhpcy5vbGQucD1uZXcgRix0aGlzLm9sZC52PW5ldyBGLHRoaXMub2xkLmE9bmV3IEYsdGhpcy5yZ2I9bmV3IEIsdGhpcy5yZXNldCgpLHQmJlAuc2V0UHJvcCh0aGlzLHQpfXZhciBIPXtoZXhUb1JnYjpmdW5jdGlvbih0KXt0PVwiI1wiPT09dC5jaGFyQXQoMCk/dC5zdWJzdHJpbmcoMSw3KTp0O3JldHVybntyOnBhcnNlSW50KHQuc3Vic3RyaW5nKDAsMiksMTYpLGc6cGFyc2VJbnQodC5zdWJzdHJpbmcoMiw0KSwxNiksYjpwYXJzZUludCh0LnN1YnN0cmluZyg0LDYpLDE2KX19LHJnYlRvSGV4OmZ1bmN0aW9uKHQpe3JldHVyblwicmdiKFwiK3QucitcIiwgXCIrdC5nK1wiLCBcIit0LmIrXCIpXCJ9LGdldEhleDE2RnJvbVBhcnRpY2xlOmZ1bmN0aW9uKHQpe3JldHVybiA2NTUzNipOdW1iZXIodC5yZ2IucikrMjU2Kk51bWJlcih0LnJnYi5nKStOdW1iZXIodC5yZ2IuYil9fSxxPSh0KEcsW3trZXk6XCJzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnI9dCx0aGlzLnRoYT1lLHRoaXN9fSx7a2V5Olwic2V0UlwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnI9dCx0aGlzfX0se2tleTpcInNldFRoYVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoYT10LHRoaXN9fSx7a2V5OlwiY29weVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnI9dC5yLHRoaXMudGhhPXQudGhhLHRoaXN9fSx7a2V5OlwidG9WZWN0b3JcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgRih0aGlzLmdldFgoKSx0aGlzLmdldFkoKSl9fSx7a2V5OlwiZ2V0WFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucipNYXRoLnNpbih0aGlzLnRoYSl9fSx7a2V5OlwiZ2V0WVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuLXRoaXMucipNYXRoLmNvcyh0aGlzLnRoYSl9fSx7a2V5Olwibm9ybWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yPTEsdGhpc319LHtrZXk6XCJlcXVhbHNcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5yPT09dGhpcy5yJiZ0LnRoYT09PXRoaXMudGhhfX0se2tleTpcImNsZWFyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yPTAsdGhpcy50aGE9MCx0aGlzfX0se2tleTpcImNsb25lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEcodGhpcy5yLHRoaXMudGhhKX19XSksRyk7ZnVuY3Rpb24gRyh0LGUpe28odGhpcyxHKSx0aGlzLnI9TWF0aC5hYnModCl8fDAsdGhpcy50aGE9ZXx8MH12YXIgWD17Y3JlYXRlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBGbG9hdDMyQXJyYXkoOSk7cmV0dXJuIHQmJnRoaXMuc2V0KHQsZSksZX0sc2V0OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPTA7aTw5O2krKyllW2ldPXRbaV07cmV0dXJuIGV9LG11bHRpcGx5OmZ1bmN0aW9uKHQsZSxpKXt2YXIgYT10WzBdLHI9dFsxXSxuPXRbMl0scz10WzNdLG89dFs0XSxoPXRbNl0sbD10WzddLHU9ZVswXSxjPWVbMV0sZD1lWzJdLHk9ZVszXSxwPWVbNF0sdD1lWzZdLGU9ZVs3XTtyZXR1cm4gaVswXT11KmErYypzLGlbMV09dSpyK2MqbyxpWzJdPW4qZCxpWzNdPXkqYStwKnMsaVs0XT15KnIrcCpvLGlbNl09dCphK2UqcytoLGlbN109dCpyK2UqbytsLGl9LGludmVyc2U6ZnVuY3Rpb24odCxlKXt2YXIgaT10WzBdLGE9dFsxXSxyPXRbM10sbj10WzRdLHM9dFs2XSxvPXRbN10saD0tcix0PW8qci1uKnMscj0xLyhpKm4rYSpoKTtyZXR1cm4gZVswXT1uKnIsZVsxXT0tYSpyLGVbM109aCpyLGVbNF09aSpyLGVbNl09dCpyLGVbN109KC1vKmkrYSpzKSpyLGV9LG11bHRpcGx5VmVjMjpmdW5jdGlvbih0LGUsaSl7dmFyIGE9ZVswXSxlPWVbMV07cmV0dXJuIGlbMF09YSp0WzBdK2UqdFszXSt0WzZdLGlbMV09YSp0WzFdK2UqdFs0XSt0WzddLGl9fSxZPShyKFcsbCksdChXLFt7a2V5OlwiZ2V0VmFsdWVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PVAuZ2V0UmFuZEZyb21BcnJheSh0aGlzLl9hcnIpO3JldHVyblwicmFuZG9tXCI9PT10fHxcIlJhbmRvbVwiPT09dD9zLnJhbmRvbUNvbG9yKCk6dH19XSxbe2tleTpcImNyZWF0ZUFycmF5U3BhblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0P3QgaW5zdGFuY2VvZiBXP3Q6bmV3IFcodCk6bnVsbH19XSksVyk7ZnVuY3Rpb24gVyh0KXtvKHRoaXMsVyk7dmFyIGU9aCh0aGlzLChXLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKFcpKS5jYWxsKHRoaXMpKTtyZXR1cm4gZS5fYXJyPVAudG9BcnJheSh0KSxlfXZhciBaPSh0KFEsW3trZXk6XCJjb250YWluc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ8PXRoaXMucmlnaHQmJnQ+PXRoaXMueCYmZTw9dGhpcy5ib3R0b20mJmU+PXRoaXMueX19XSksUSk7ZnVuY3Rpb24gUSh0LGUsaSxhKXtvKHRoaXMsUSksdGhpcy54PXQsdGhpcy55PWUsdGhpcy53aWR0aD1pLHRoaXMuaGVpZ2h0PWEsdGhpcy5ib3R0b209dGhpcy55K3RoaXMuaGVpZ2h0LHRoaXMucmlnaHQ9dGhpcy54K3RoaXMud2lkdGh9dmFyIEs9KHQoSixbe2tleTpcImluaXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc3RhcnRUaW1lPTAsdGhpcy5uZXh0VGltZT10aGlzLnRpbWVQYW4uZ2V0VmFsdWUoKX19LHtrZXk6XCJnZXRWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0YXJ0VGltZSs9dCx0aGlzLnN0YXJ0VGltZT49dGhpcy5uZXh0VGltZT8odGhpcy5zdGFydFRpbWU9MCx0aGlzLm5leHRUaW1lPXRoaXMudGltZVBhbi5nZXRWYWx1ZSgpLDE9PT10aGlzLm51bVBhbi5iPy41PHRoaXMubnVtUGFuLmdldFZhbHVlKCExKT8xOjA6dGhpcy5udW1QYW4uZ2V0VmFsdWUoITApKTowfX1dKSxKKTtmdW5jdGlvbiBKKHQsZSl7byh0aGlzLEopLHRoaXMubnVtUGFuPWwuc2V0U3BhblZhbHVlKFAuaW5pdFZhbHVlKHQsMSkpLHRoaXMudGltZVBhbj1sLnNldFNwYW5WYWx1ZShQLmluaXRWYWx1ZShlLDEpKSx0aGlzLnN0YXJ0VGltZT0wLHRoaXMubmV4dFRpbWU9MCx0aGlzLmluaXQoKX12YXIgJD0odCh0dCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5OlwiaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT90aGlzLmluaXRpYWxpemUoZSk6dGhpcy5pbml0aWFsaXplKHQpfX0se2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbigpe319XSksdHQpO2Z1bmN0aW9uIHR0KCl7byh0aGlzLHR0KX12YXIgZXQ9KHIoaXQsJCksdChpdCxbe2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmxpZmVQYW4uYT09PTEvMD90LmxpZmU9MS8wOnQubGlmZT10aGlzLmxpZmVQYW4uZ2V0VmFsdWUoKX19XSksaXQpO2Z1bmN0aW9uIGl0KHQsZSxpKXtvKHRoaXMsaXQpO3ZhciBhPWgodGhpcywoaXQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoaXQpKS5jYWxsKHRoaXMpKTtyZXR1cm4gYS5saWZlUGFuPWwuc2V0U3BhblZhbHVlKHQsZSxpKSxhLm5hbWU9XCJMaWZlXCIsYX12YXIgYXQ9KHQocnQsW3trZXk6XCJnZXRQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcImNyb3NzaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fV0pLHJ0KTtmdW5jdGlvbiBydCgpe28odGhpcyxydCksdGhpcy52ZWN0b3I9bmV3IEYoMCwwKSx0aGlzLnJhbmRvbT0wLHRoaXMuY3Jvc3NUeXBlPVwiZGVhZFwiLHRoaXMuYWxlcnQ9ITB9dmFyIG50PShyKHN0LGF0KSx0KHN0LFt7a2V5OlwiZ2V0UG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZlY3Rvci54PXRoaXMueCx0aGlzLnZlY3Rvci55PXRoaXMueSx0aGlzLnZlY3Rvcn19LHtrZXk6XCJjcm9zc2luZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hbGVydCYmKGNvbnNvbGUuZXJyb3IoXCJTb3JyeSwgUG9pbnRab25lIGRvZXMgbm90IHN1cHBvcnQgY3Jvc3NpbmcgbWV0aG9kIVwiKSx0aGlzLmFsZXJ0PSExKX19XSksc3QpO2Z1bmN0aW9uIHN0KHQsZSl7byh0aGlzLHN0KTt2YXIgaT1oKHRoaXMsKHN0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHN0KSkuY2FsbCh0aGlzKSk7cmV0dXJuIGkueD10LGkueT1lLGl9dmFyIG90PShyKGh0LCQpLHQoaHQsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuem9uZT1QLmluaXRWYWx1ZSh0LG5ldyBudCl9fSx7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuem9uZS5nZXRQb3NpdGlvbigpLHQucC54PXRoaXMuem9uZS52ZWN0b3IueCx0LnAueT10aGlzLnpvbmUudmVjdG9yLnl9fV0pLGh0KTtmdW5jdGlvbiBodCh0KXtvKHRoaXMsaHQpO3ZhciBlPWgodGhpcywoaHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoaHQpKS5jYWxsKHRoaXMpKTtyZXR1cm4gZS56b25lPVAuaW5pdFZhbHVlKHQsbmV3IG50KSxlLm5hbWU9XCJQb3NpdGlvblwiLGV9dmFyIGx0PShyKHV0LCQpLHQodXQsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLnJQYW49bC5zZXRTcGFuVmFsdWUodCksdGhpcy50aGFQYW49bC5zZXRTcGFuVmFsdWUoZSksdGhpcy50eXBlPVAuaW5pdFZhbHVlKGksXCJ2ZWN0b3JcIil9fSx7a2V5Olwibm9ybWFsaXplVmVsb2NpdHlcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCpWLk1FQVNVUkV9fSx7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlO1wicFwiPT09dGhpcy50eXBlfHxcIlBcIj09PXRoaXMudHlwZXx8XCJwb2xhclwiPT09dGhpcy50eXBlPyhlPW5ldyBxKHRoaXMubm9ybWFsaXplVmVsb2NpdHkodGhpcy5yUGFuLmdldFZhbHVlKCkpLHRoaXMudGhhUGFuLmdldFZhbHVlKCkqcy5QSV8xODApLHQudi54PWUuZ2V0WCgpLHQudi55PWUuZ2V0WSgpKToodC52Lng9dGhpcy5ub3JtYWxpemVWZWxvY2l0eSh0aGlzLnJQYW4uZ2V0VmFsdWUoKSksdC52Lnk9dGhpcy5ub3JtYWxpemVWZWxvY2l0eSh0aGlzLnRoYVBhbi5nZXRWYWx1ZSgpKSl9fV0pLHV0KTtmdW5jdGlvbiB1dCh0LGUsaSl7byh0aGlzLHV0KTt2YXIgYT1oKHRoaXMsKHV0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHV0KSkuY2FsbCh0aGlzKSk7cmV0dXJuIGEuclBhbj1sLnNldFNwYW5WYWx1ZSh0KSxhLnRoYVBhbj1sLnNldFNwYW5WYWx1ZShlKSxhLnR5cGU9UC5pbml0VmFsdWUoaSxcInZlY3RvclwiKSxhLm5hbWU9XCJWZWxvY2l0eVwiLGF9dmFyIGN0PShyKGR0LCQpLHQoZHQsW3trZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5tYXNzPXRoaXMubWFzc1Bhbi5nZXRWYWx1ZSgpfX1dKSxkdCk7ZnVuY3Rpb24gZHQodCxlLGkpe28odGhpcyxkdCk7dmFyIGE9aCh0aGlzLChkdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihkdCkpLmNhbGwodGhpcykpO3JldHVybiBhLm1hc3NQYW49bC5zZXRTcGFuVmFsdWUodCxlLGkpLGEubmFtZT1cIk1hc3NcIixhfXZhciB5dD0ocihwdCwkKSx0KHB0LFt7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5yYWRpdXM9bC5zZXRTcGFuVmFsdWUodCxlLGkpfX0se2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnJhZGl1cz10aGlzLnJhZGl1cy5nZXRWYWx1ZSgpLHQuZGF0YS5vbGRSYWRpdXM9dC5yYWRpdXN9fV0pLHB0KTtmdW5jdGlvbiBwdCh0LGUsaSl7byh0aGlzLHB0KTt2YXIgYT1oKHRoaXMsKHB0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHB0KSkuY2FsbCh0aGlzKSk7cmV0dXJuIGEucmFkaXVzPWwuc2V0U3BhblZhbHVlKHQsZSxpKSxhLm5hbWU9XCJSYWRpdXNcIixhfXZhciBmdD0ocih2dCwkKSx0KHZ0LFt7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaW1hZ2UuZ2V0VmFsdWUoKTt0LmJvZHk9XCJzdHJpbmdcIj09dHlwZW9mIGU/e3dpZHRoOnRoaXMudyxoZWlnaHQ6dGhpcy5oLHNyYzplLGlzSW5uZXI6ITAsaW5uZXI6ITB9OmV9fSx7a2V5Olwic2V0U3BhblZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBZP3Q6bmV3IFkodCl9fV0pLHZ0KTtmdW5jdGlvbiB2dCh0LGUsaSl7byh0aGlzLHZ0KTt2YXIgYT1oKHRoaXMsKHZ0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHZ0KSkuY2FsbCh0aGlzKSk7cmV0dXJuIGEuaW1hZ2U9YS5zZXRTcGFuVmFsdWUodCksYS53PVAuaW5pdFZhbHVlKGUsMjApLGEuaD1QLmluaXRWYWx1ZShpLGEudyksYS5uYW1lPVwiQm9keVwiLGF9dmFyIGd0PSh0KG10LFt7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMubGlmZT1QLmluaXRWYWx1ZSh0LDEvMCksdGhpcy5lYXNpbmc9VS5nZXRFYXNpbmcoZSl9fSx7a2V5Olwibm9ybWFsaXplRm9yY2VcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5tdWx0aXBseVNjYWxhcihWLk1FQVNVUkUpfX0se2tleTpcIm5vcm1hbGl6ZVZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQqVi5NRUFTVVJFfX0se2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJjYWxjdWxhdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuYWdlKz1lLHRoaXMuYWdlPj10aGlzLmxpZmV8fHRoaXMuZGVhZD8odGhpcy5lbmVyZ3k9MCx0aGlzLmRlYWQ9ITAsdGhpcy5kZXN0cm95KCkpOih0PXRoaXMuZWFzaW5nKHQuYWdlL3QubGlmZSksdGhpcy5lbmVyZ3k9TWF0aC5tYXgoMS10LDApKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5wYXJlbnRzLmxlbmd0aDt0LS07KXRoaXMucGFyZW50c1t0XS5yZW1vdmVCZWhhdmlvdXIodGhpcyk7dGhpcy5wYXJlbnRzLmxlbmd0aD0wfX1dKSxtdCk7ZnVuY3Rpb24gbXQodCxlKXtvKHRoaXMsbXQpLHRoaXMubGlmZT1QLmluaXRWYWx1ZSh0LDEvMCksdGhpcy5lYXNpbmc9VS5nZXRFYXNpbmcoZSksdGhpcy5hZ2U9MCx0aGlzLmVuZXJneT0xLHRoaXMuZGVhZD0hMSx0aGlzLnBhcmVudHM9W10sdGhpcy5pZD1cIkJlaGF2aW91cl9cIittdC5pZCsrLHRoaXMubmFtZT1cIkJlaGF2aW91clwifWd0LmlkPTA7dmFyIGJ0PShyKF90LGd0KSx0KF90LFt7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSxhKXt0aGlzLmZvcmNlPXRoaXMubm9ybWFsaXplRm9yY2UobmV3IEYodCxlKSksaSYmbihfdC5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoX3QucHJvdG90eXBlKSxcInJlc2V0XCIsdGhpcykuY2FsbCh0aGlzLGksYSl9fSx7a2V5OlwiYXBwbHlCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5jYWxjdWxhdGUodCxlLGkpLHQuYS5hZGQodGhpcy5mb3JjZSl9fV0pLF90KTtmdW5jdGlvbiBfdCh0LGUsaSxhKXtvKHRoaXMsX3QpO2E9aCh0aGlzLChfdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihfdCkpLmNhbGwodGhpcyxpLGEpKTtyZXR1cm4gYS5mb3JjZT1hLm5vcm1hbGl6ZUZvcmNlKG5ldyBGKHQsZSkpLGEubmFtZT1cIkZvcmNlXCIsYX12YXIgeHQ9KHIoa3QsZ3QpLHQoa3QsW3trZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpLGEscil7dGhpcy50YXJnZXRQb3NpdGlvbj1QLmluaXRWYWx1ZSh0LG5ldyBGKSx0aGlzLnJhZGl1cz1QLmluaXRWYWx1ZShpLDFlMyksdGhpcy5mb3JjZT1QLmluaXRWYWx1ZSh0aGlzLm5vcm1hbGl6ZVZhbHVlKGUpLDEwMCksdGhpcy5yYWRpdXNTcT10aGlzLnJhZGl1cyp0aGlzLnJhZGl1cyx0aGlzLmF0dHJhY3Rpb25Gb3JjZT1uZXcgRix0aGlzLmxlbmd0aFNxPTAsYSYmbihrdC5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2Yoa3QucHJvdG90eXBlKSxcInJlc2V0XCIsdGhpcykuY2FsbCh0aGlzLGEscil9fSx7a2V5OlwiYXBwbHlCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5jYWxjdWxhdGUodCxlLGkpLHRoaXMuYXR0cmFjdGlvbkZvcmNlLmNvcHkodGhpcy50YXJnZXRQb3NpdGlvbiksdGhpcy5hdHRyYWN0aW9uRm9yY2Uuc3ViKHQucCksdGhpcy5sZW5ndGhTcT10aGlzLmF0dHJhY3Rpb25Gb3JjZS5sZW5ndGhTcSgpLDRlLTU8dGhpcy5sZW5ndGhTcSYmdGhpcy5sZW5ndGhTcTx0aGlzLnJhZGl1c1NxJiYodGhpcy5hdHRyYWN0aW9uRm9yY2Uubm9ybWFsaXplKCksdGhpcy5hdHRyYWN0aW9uRm9yY2UubXVsdGlwbHlTY2FsYXIoMS10aGlzLmxlbmd0aFNxL3RoaXMucmFkaXVzU3EpLHRoaXMuYXR0cmFjdGlvbkZvcmNlLm11bHRpcGx5U2NhbGFyKHRoaXMuZm9yY2UpLHQuYS5hZGQodGhpcy5hdHRyYWN0aW9uRm9yY2UpKX19XSksa3QpO2Z1bmN0aW9uIGt0KHQsZSxpLGEscil7byh0aGlzLGt0KTtyPWgodGhpcywoa3QuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2Yoa3QpKS5jYWxsKHRoaXMsYSxyKSk7cmV0dXJuIHIudGFyZ2V0UG9zaXRpb249UC5pbml0VmFsdWUodCxuZXcgRiksci5yYWRpdXM9UC5pbml0VmFsdWUoaSwxZTMpLHIuZm9yY2U9UC5pbml0VmFsdWUoci5ub3JtYWxpemVWYWx1ZShlKSwxMDApLHIucmFkaXVzU3E9ci5yYWRpdXMqci5yYWRpdXMsci5hdHRyYWN0aW9uRm9yY2U9bmV3IEYsci5sZW5ndGhTcT0wLHIubmFtZT1cIkF0dHJhY3Rpb25cIixyfXZhciBQdD0ocihFdCxndCksdChFdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSxyKXt0aGlzLnBhbkZvY2U9bmV3IEYodCxlKSx0aGlzLnBhbkZvY2U9dGhpcy5ub3JtYWxpemVGb3JjZSh0aGlzLnBhbkZvY2UpLHRoaXMuZGVsYXk9aSxhJiZuKEV0LnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihFdC5wcm90b3R5cGUpLFwicmVzZXRcIix0aGlzKS5jYWxsKHRoaXMsYSxyKX19LHtrZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5kYXRhLnRpbWU9MH19LHtrZXk6XCJhcHBseUJlaGF2aW91clwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLmNhbGN1bGF0ZSh0LGUsaSksdC5kYXRhLnRpbWUrPWUsdC5kYXRhLnRpbWU+PXRoaXMuZGVsYXkmJih0LmEuYWRkWFkocy5yYW5kb21BVG9CKC10aGlzLnBhbkZvY2UueCx0aGlzLnBhbkZvY2UueCkscy5yYW5kb21BVG9CKC10aGlzLnBhbkZvY2UueSx0aGlzLnBhbkZvY2UueSkpLHQuZGF0YS50aW1lPTApfX1dKSxFdCk7ZnVuY3Rpb24gRXQodCxlLGksYSxyKXtvKHRoaXMsRXQpO3I9aCh0aGlzLChFdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihFdCkpLmNhbGwodGhpcyxhLHIpKTtyZXR1cm4gci5yZXNldCh0LGUsaSksci50aW1lPTAsci5uYW1lPVwiUmFuZG9tRHJpZnRcIixyfXZhciBBdD0ocihUdCxidCksdChUdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe24oVHQucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKFR0LnByb3RvdHlwZSksXCJyZXNldFwiLHRoaXMpLmNhbGwodGhpcywwLHQsZSxpKX19XSksVHQpO2Z1bmN0aW9uIFR0KHQsZSxpKXtvKHRoaXMsVHQpO2k9aCh0aGlzLChUdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihUdCkpLmNhbGwodGhpcywwLHQsZSxpKSk7cmV0dXJuIGkubmFtZT1cIkdyYXZpdHlcIixpfXZhciBSdD0ocihPdCxndCksdChPdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSxyKXt0aGlzLmVtaXR0ZXI9UC5pbml0VmFsdWUodCxudWxsKSx0aGlzLm1hc3M9UC5pbml0VmFsdWUoZSwhMCksdGhpcy5jYWxsYmFjaz1QLmluaXRWYWx1ZShpLG51bGwpLHRoaXMuY29sbGlzaW9uUG9vbD1bXSx0aGlzLmRlbHRhPW5ldyBGLGEmJm4oT3QucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKE90LnByb3RvdHlwZSksXCJyZXNldFwiLHRoaXMpLmNhbGwodGhpcyxhLHIpfX0se2tleTpcImFwcGx5QmVoYXZpb3VyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgYSxyLG4scyxvLGgsbD0odGhpcy5lbWl0dGVyP3RoaXMuZW1pdHRlci5wYXJ0aWNsZXM6dGhpcy5wb29sKS5zbGljZShpKSx1PWwubGVuZ3RoLGM9dm9pZCAwLGQ9dm9pZCAwLGQ9MDtkPHU7ZCsrKXsoYz1sW2RdKSE9PXQmJih0aGlzLmRlbHRhLmNvcHkoYy5wKSx0aGlzLmRlbHRhLnN1Yih0LnApLChhPXRoaXMuZGVsdGEubGVuZ3RoU3EoKSk8PShoPXQucmFkaXVzK2MucmFkaXVzKSpoJiYocj1oLU1hdGguc3FydChhKSxyKz0uNSxuPXQubWFzcytjLm1hc3Mscz10aGlzLm1hc3M/Yy5tYXNzL246LjUsbz10aGlzLm1hc3M/dC5tYXNzL246LjUsdC5wLmFkZCh0aGlzLmRlbHRhLmNsb25lKCkubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIociotcykpLGMucC5hZGQodGhpcy5kZWx0YS5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcihyKm8pKSx0aGlzLmNhbGxiYWNrJiZ0aGlzLmNhbGxiYWNrKHQsYykpKX19fV0pLE90KTtmdW5jdGlvbiBPdCh0LGUsaSxhLHIpe28odGhpcyxPdCk7cj1oKHRoaXMsKE90Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKE90KSkuY2FsbCh0aGlzLGEscikpO3JldHVybiByLnJlc2V0KHQsZSxpKSxyLm5hbWU9XCJDb2xsaXNpb25cIixyfXZhciB3dD0ocihDdCxndCksdChDdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSl7dGhpcy56b25lPXQsdGhpcy56b25lLmNyb3NzVHlwZT1QLmluaXRWYWx1ZShlLFwiZGVhZFwiKSxpJiZuKEN0LnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihDdC5wcm90b3R5cGUpLFwicmVzZXRcIix0aGlzKS5jYWxsKHRoaXMsaSxhKX19LHtrZXk6XCJhcHBseUJlaGF2aW91clwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLmNhbGN1bGF0ZSh0LGUsaSksdGhpcy56b25lLmNyb3NzaW5nKHQpfX1dKSxDdCk7ZnVuY3Rpb24gQ3QodCxlLGksYSl7byh0aGlzLEN0KTthPWgodGhpcywoQ3QuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ3QpKS5jYWxsKHRoaXMsaSxhKSk7cmV0dXJuIGEucmVzZXQodCxlKSxhLm5hbWU9XCJDcm9zc1pvbmVcIixhfXZhciBTdD0ocihJdCxndCksdChJdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSl7dGhpcy5zYW1lPW51bGw9PWUsdGhpcy5hPWwuc2V0U3BhblZhbHVlKFAuaW5pdFZhbHVlKHQsMSkpLHRoaXMuYj1sLnNldFNwYW5WYWx1ZShlKSxpJiZuKEl0LnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihJdC5wcm90b3R5cGUpLFwicmVzZXRcIix0aGlzKS5jYWxsKHRoaXMsaSxhKX19LHtrZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5kYXRhLmFscGhhQT10aGlzLmEuZ2V0VmFsdWUoKSx0aGlzLnNhbWU/dC5kYXRhLmFscGhhQj10LmRhdGEuYWxwaGFBOnQuZGF0YS5hbHBoYUI9dGhpcy5iLmdldFZhbHVlKCl9fSx7a2V5OlwiYXBwbHlCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5jYWxjdWxhdGUodCxlLGkpLHQuYWxwaGE9dC5kYXRhLmFscGhhQisodC5kYXRhLmFscGhhQS10LmRhdGEuYWxwaGFCKSp0aGlzLmVuZXJneSx0LmFscGhhPC4wMDEmJih0LmFscGhhPTApfX1dKSxJdCk7ZnVuY3Rpb24gSXQodCxlLGksYSl7byh0aGlzLEl0KTthPWgodGhpcywoSXQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoSXQpKS5jYWxsKHRoaXMsaSxhKSk7cmV0dXJuIGEucmVzZXQodCxlKSxhLm5hbWU9XCJBbHBoYVwiLGF9dmFyIER0PShyKFZ0LGd0KSx0KFZ0LFt7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSxhKXt0aGlzLnNhbWU9bnVsbD09ZSx0aGlzLmE9bC5zZXRTcGFuVmFsdWUoUC5pbml0VmFsdWUodCwxKSksdGhpcy5iPWwuc2V0U3BhblZhbHVlKGUpLGkmJm4oVnQucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKFZ0LnByb3RvdHlwZSksXCJyZXNldFwiLHRoaXMpLmNhbGwodGhpcyxpLGEpfX0se2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmRhdGEuc2NhbGVBPXRoaXMuYS5nZXRWYWx1ZSgpLHQuZGF0YS5vbGRSYWRpdXM9dC5yYWRpdXMsdC5kYXRhLnNjYWxlQj10aGlzLnNhbWU/dC5kYXRhLnNjYWxlQTp0aGlzLmIuZ2V0VmFsdWUoKX19LHtrZXk6XCJhcHBseUJlaGF2aW91clwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLmNhbGN1bGF0ZSh0LGUsaSksdC5zY2FsZT10LmRhdGEuc2NhbGVCKyh0LmRhdGEuc2NhbGVBLXQuZGF0YS5zY2FsZUIpKnRoaXMuZW5lcmd5LHQuc2NhbGU8MWUtNCYmKHQuc2NhbGU9MCksdC5yYWRpdXM9dC5kYXRhLm9sZFJhZGl1cyp0LnNjYWxlfX1dKSxWdCk7ZnVuY3Rpb24gVnQodCxlLGksYSl7byh0aGlzLFZ0KTthPWgodGhpcywoVnQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoVnQpKS5jYWxsKHRoaXMsaSxhKSk7cmV0dXJuIGEucmVzZXQodCxlKSxhLm5hbWU9XCJTY2FsZVwiLGF9dmFyIE10PShyKEJ0LGd0KSx0KEJ0LFt7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSxhLHIpe3RoaXMuc2FtZT1udWxsPT1lLHRoaXMuYT1sLnNldFNwYW5WYWx1ZShQLmluaXRWYWx1ZSh0LFwiVmVsb2NpdHlcIikpLHRoaXMuYj1sLnNldFNwYW5WYWx1ZShQLmluaXRWYWx1ZShlLDApKSx0aGlzLnN0eWxlPVAuaW5pdFZhbHVlKGksXCJ0b1wiKSxhJiZuKEJ0LnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihCdC5wcm90b3R5cGUpLFwicmVzZXRcIix0aGlzKS5jYWxsKHRoaXMsYSxyKX19LHtrZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5yb3RhdGlvbj10aGlzLmEuZ2V0VmFsdWUoKSx0LmRhdGEucm90YXRpb25BPXRoaXMuYS5nZXRWYWx1ZSgpLHRoaXMuc2FtZXx8KHQuZGF0YS5yb3RhdGlvbkI9dGhpcy5iLmdldFZhbHVlKCkpfX0se2tleTpcImFwcGx5QmVoYXZpb3VyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3RoaXMuY2FsY3VsYXRlKHQsZSxpKSx0aGlzLnNhbWU/XCJWXCIhPT10aGlzLmEuYSYmXCJWZWxvY2l0eVwiIT09dGhpcy5hLmEmJlwidlwiIT09dGhpcy5hLmF8fCh0LnJvdGF0aW9uPXQuZ2V0RGlyZWN0aW9uKCkpOlwidG9cIj09PXRoaXMuc3R5bGV8fFwiVE9cIj09PXRoaXMuc3R5bGV8fFwiX1wiPT09dGhpcy5zdHlsZT90LnJvdGF0aW9uKz10LmRhdGEucm90YXRpb25CKyh0LmRhdGEucm90YXRpb25BLXQuZGF0YS5yb3RhdGlvbkIpKnRoaXMuZW5lcmd5OnQucm90YXRpb24rPXQuZGF0YS5yb3RhdGlvbkJ9fV0pLEJ0KTtmdW5jdGlvbiBCdCh0LGUsaSxhLHIpe28odGhpcyxCdCk7cj1oKHRoaXMsKEJ0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKEJ0KSkuY2FsbCh0aGlzLGEscikpO3JldHVybiByLnJlc2V0KHQsZSxpKSxyLm5hbWU9XCJSb3RhdGVcIixyfXZhciBMdD0ocihVdCxndCksdChVdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSl7dGhpcy5hPVkuY3JlYXRlQXJyYXlTcGFuKHQpLHRoaXMuYj1ZLmNyZWF0ZUFycmF5U3BhbihlKSxpJiZuKFV0LnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihVdC5wcm90b3R5cGUpLFwicmVzZXRcIix0aGlzKS5jYWxsKHRoaXMsaSxhKX19LHtrZXk6XCJpbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5jb2xvcj10aGlzLmEuZ2V0VmFsdWUoKSx0LmRhdGEuY29sb3JBPUguaGV4VG9SZ2IodC5jb2xvciksdGhpcy5iJiYodC5kYXRhLmNvbG9yQj1ILmhleFRvUmdiKHRoaXMuYi5nZXRWYWx1ZSgpKSl9fSx7a2V5OlwiYXBwbHlCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5iPyh0aGlzLmNhbGN1bGF0ZSh0LGUsaSksdC5yZ2Iucj10LmRhdGEuY29sb3JCLnIrKHQuZGF0YS5jb2xvckEuci10LmRhdGEuY29sb3JCLnIpKnRoaXMuZW5lcmd5LHQucmdiLmc9dC5kYXRhLmNvbG9yQi5nKyh0LmRhdGEuY29sb3JBLmctdC5kYXRhLmNvbG9yQi5nKSp0aGlzLmVuZXJneSx0LnJnYi5iPXQuZGF0YS5jb2xvckIuYisodC5kYXRhLmNvbG9yQS5iLXQuZGF0YS5jb2xvckIuYikqdGhpcy5lbmVyZ3ksdC5yZ2Iucj1NYXRoLmZsb29yKHQucmdiLnIpLHQucmdiLmc9TWF0aC5mbG9vcih0LnJnYi5nKSx0LnJnYi5iPU1hdGguZmxvb3IodC5yZ2IuYikpOih0LnJnYi5yPXQuZGF0YS5jb2xvckEucix0LnJnYi5nPXQuZGF0YS5jb2xvckEuZyx0LnJnYi5iPXQuZGF0YS5jb2xvckEuYil9fV0pLFV0KTtmdW5jdGlvbiBVdCh0LGUsaSxhKXtvKHRoaXMsVXQpO2E9aCh0aGlzLChVdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihVdCkpLmNhbGwodGhpcyxpLGEpKTtyZXR1cm4gYS5yZXNldCh0LGUpLGEubmFtZT1cIkNvbG9yXCIsYX12YXIgRnQ9XCJjaGFuZ2luZ1wiLHp0PShyKGp0LGd0KSx0KGp0LFt7a2V5Olwic2V0QW5nbGVBbmRGb3JjZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5mb3JjZT1GdCx0aGlzLmFuZ2xlPXMuUEkvMixcInJpZ2h0XCI9PT10P3RoaXMuYW5nbGU9cy5QSS8yOlwibGVmdFwiPT09dD90aGlzLmFuZ2xlPS1zLlBJLzI6XCJyYW5kb21cIj09PXQ/dGhpcy5hbmdsZT1cInJhbmRvbVwiOnQgaW5zdGFuY2VvZiBsPyh0aGlzLmFuZ2xlPVwic3BhblwiLHRoaXMuc3Bhbj10KTp0JiYodGhpcy5hbmdsZT10KSxcImNoYW5naW5nXCI9PT1TdHJpbmcoZSkudG9Mb3dlckNhc2UoKXx8XCJjaGFuZ1wiPT09U3RyaW5nKGUpLnRvTG93ZXJDYXNlKCl8fFwiYXV0b1wiPT09U3RyaW5nKGUpLnRvTG93ZXJDYXNlKCk/dGhpcy5mb3JjZT1GdDplJiYodGhpcy5mb3JjZT1lKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpLGEpe3RoaXMuYW5nbGU9cy5QSS8yLHRoaXMuc2V0QW5nbGVBbmRGb3JjZSh0LGUpLGkmJm4oanQucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGp0LnByb3RvdHlwZSksXCJyZXNldFwiLHRoaXMpLmNhbGwodGhpcyxpLGEpfX0se2tleTpcImluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbih0KXtcInJhbmRvbVwiPT09dGhpcy5hbmdsZT90LmRhdGEuY2FuZ2xlPXMucmFuZG9tQVRvQigtcy5QSSxzLlBJKTpcInNwYW5cIj09PXRoaXMuYW5nbGUmJih0LmRhdGEuY2FuZ2xlPXRoaXMuc3Bhbi5nZXRWYWx1ZSgpKSx0LmRhdGEuY3ljbG9uZT1uZXcgRigwLDApfX0se2tleTpcImFwcGx5QmVoYXZpb3VyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3RoaXMuY2FsY3VsYXRlKHQsZSxpKTtlPXZvaWQgMCxpPXQudi5nZXRHcmFkaWVudCgpO1wicmFuZG9tXCI9PT10aGlzLmFuZ2xlfHxcInNwYW5cIj09PXRoaXMuYW5nbGU/aSs9dC5kYXRhLmNhbmdsZTppKz10aGlzLmFuZ2xlLGU9dGhpcy5mb3JjZT09PUZ0P3Qudi5sZW5ndGgoKS8xMDA6dGhpcy5mb3JjZSx0LmRhdGEuY3ljbG9uZS54PWUqTWF0aC5jb3MoaSksdC5kYXRhLmN5Y2xvbmUueT1lKk1hdGguc2luKGkpLHQuZGF0YS5jeWNsb25lPXRoaXMubm9ybWFsaXplRm9yY2UodC5kYXRhLmN5Y2xvbmUpLHQuYS5hZGQodC5kYXRhLmN5Y2xvbmUpfX1dKSxqdCk7ZnVuY3Rpb24ganQodCxlLGksYSl7byh0aGlzLGp0KTthPWgodGhpcywoanQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoanQpKS5jYWxsKHRoaXMsaSxhKSk7cmV0dXJuIGEuc2V0QW5nbGVBbmRGb3JjZSh0LGUpLGEubmFtZT1cIkN5Y2xvbmVcIixhfXZhciBOdD0ocihIdCx4dCksdChIdCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLGksYSxyKXtuKEh0LnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihIdC5wcm90b3R5cGUpLFwicmVzZXRcIix0aGlzKS5jYWxsKHRoaXMsdCxlLGksYSxyKSx0aGlzLmZvcmNlKj0tMX19XSksSHQpO2Z1bmN0aW9uIEh0KHQsZSxpLGEscil7byh0aGlzLEh0KTtyPWgodGhpcywoSHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoSHQpKS5jYWxsKHRoaXMsdCxlLGksYSxyKSk7cmV0dXJuIHIuZm9yY2UqPS0xLHIubmFtZT1cIlJlcHVsc2lvblwiLHJ9dmFyIHF0PShyKEd0LGd0KSx0KEd0LFt7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSxhKXt0aGlzLmRpc3RhbmNlVmVjPW5ldyBGLHRoaXMuY2VudGVyUG9pbnQ9UC5pbml0VmFsdWUodCxuZXcgRiksdGhpcy5mb3JjZT1QLmluaXRWYWx1ZSh0aGlzLm5vcm1hbGl6ZVZhbHVlKGUpLDEwMCksaSYmbihHdC5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoR3QucHJvdG90eXBlKSxcInJlc2V0XCIsdGhpcykuY2FsbCh0aGlzLGksYSl9fSx7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcImFwcGx5QmVoYXZpb3VyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLmRpc3RhbmNlVmVjLnNldCh0aGlzLmNlbnRlclBvaW50LngtdC5wLngsdGhpcy5jZW50ZXJQb2ludC55LXQucC55KTt2YXIgaSxhPXRoaXMuZGlzdGFuY2VWZWMubGVuZ3RoU3EoKTswIT09YSYmKGk9dGhpcy5kaXN0YW5jZVZlYy5sZW5ndGgoKSxpPXRoaXMuZm9yY2UqZS8oYSppKSx0LnYueCs9aSp0aGlzLmRpc3RhbmNlVmVjLngsdC52LnkrPWkqdGhpcy5kaXN0YW5jZVZlYy55KX19XSksR3QpO2Z1bmN0aW9uIEd0KHQsZSxpLGEpe28odGhpcyxHdCk7YT1oKHRoaXMsKEd0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKEd0KSkuY2FsbCh0aGlzLGksYSkpO3JldHVybiBhLmRpc3RhbmNlVmVjPW5ldyBGLGEuY2VudGVyUG9pbnQ9UC5pbml0VmFsdWUodCxuZXcgRiksYS5mb3JjZT1QLmluaXRWYWx1ZShhLm5vcm1hbGl6ZVZhbHVlKGUpLDEwMCksYS5uYW1lPVwiR3Jhdml0eVdlbGxcIixhfXZhciBYdD17aW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBhPWkubGVuZ3RoLHI9dm9pZCAwLHI9MDtyPGE7cisrKWlbcl1pbnN0YW5jZW9mICQ/aVtyXS5pbml0KHQsZSk6dGhpcy5pbml0KHQsZSxpW3JdKTt0aGlzLmJpbmRFbWl0dGVyKHQsZSl9LGluaXQ6ZnVuY3Rpb24odCxlLGkpe1Auc2V0UHJvcChlLGkpLFAuc2V0VmVjdG9yVmFsKGUsaSl9LGJpbmRFbWl0dGVyOmZ1bmN0aW9uKHQsZSl7dC5iaW5kRW1pdHRlciYmKGUucC5hZGQodC5wKSxlLnYuYWRkKHQudiksZS5hLmFkZCh0LmEpLGUudi5yb3RhdGUocy5kZWdyZWVUcmFuc2Zvcm0odC5yb3RhdGlvbikpKX19LFl0PShyKFd0LGopLHQoV3QsW3trZXk6XCJlbWl0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLnN0b3BlZD0hMSx0aGlzLmVtaXRUaW1lPTAsdGhpcy50b3RhbFRpbWU9UC5pbml0VmFsdWUodCwxLzApLCEwPT09ZXx8XCJsaWZlXCI9PT1lfHxcImRlc3Ryb3lcIj09PWU/dGhpcy5saWZlPVwib25jZVwiPT09dD8xOnRoaXMudG90YWxUaW1lOmlzTmFOKGUpfHwodGhpcy5saWZlPWUpLHRoaXMucmF0ZS5pbml0KCl9fSx7a2V5Olwic3RvcFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy50b3RhbFRpbWU9LTEsdGhpcy5lbWl0VGltZT0wLHRoaXMuc3RvcGVkPSEwfX0se2tleTpcInByZUVtaXRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnN0b3BlZCxpPXRoaXMuZW1pdFRpbWUsYT10aGlzLnRvdGFsVGltZTt0aGlzLnN0b3BlZD0hMSx0aGlzLmVtaXRUaW1lPTAsdGhpcy50b3RhbFRpbWU9dCx0aGlzLnJhdGUuaW5pdCgpO2Zvcig7LjAxNjc8dDspdC09LjAxNjcsdGhpcy51cGRhdGUoLjAxNjcpO3RoaXMuc3RvcGVkPWUsdGhpcy5lbWl0VGltZT1pK01hdGgubWF4KHQsMCksdGhpcy50b3RhbFRpbWU9YX19LHtrZXk6XCJyZW1vdmVBbGxQYXJ0aWNsZXNcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnBhcnRpY2xlcy5sZW5ndGg7dC0tOyl0aGlzLnBhcnRpY2xlc1t0XS5kZWFkPSEwfX0se2tleTpcImFkZFNlbGZJbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5pbml0P3QuaW5pdCh0aGlzKTp0aGlzLmluaXRBbGwoKX19LHtrZXk6XCJhZGRJbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpLGk9MDtpPHQ7aSsrKWVbaV09YXJndW1lbnRzW2ldO2Zvcih2YXIgYT1lLmxlbmd0aDthLS07KXRoaXMuaW5pdGlhbGl6ZXMucHVzaChlW2FdKX19LHtrZXk6XCJyZW1vdmVJbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dD10aGlzLmluaXRpYWxpemVzLmluZGV4T2YodCk7LTE8dCYmdGhpcy5pbml0aWFsaXplcy5zcGxpY2UodCwxKX19LHtrZXk6XCJyZW1vdmVBbGxJbml0aWFsaXplcnNcIix2YWx1ZTpmdW5jdGlvbigpe1AuZW1wdHlBcnJheSh0aGlzLmluaXRpYWxpemVzKX19LHtrZXk6XCJhZGRCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodCksaT0wO2k8dDtpKyspZVtpXT1hcmd1bWVudHNbaV07Zm9yKHZhciBhPWFyZ3VtZW50cy5sZW5ndGg7YS0tOyl7dmFyIHI9ZVthXTt0aGlzLmJlaGF2aW91cnMucHVzaChyKSxyLnBhcmVudHMmJnIucGFyZW50cy5wdXNoKHRoaXMpfX19LHtrZXk6XCJyZW1vdmVCZWhhdmlvdXJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmJlaGF2aW91cnMuaW5kZXhPZih0KTtyZXR1cm4gdGhpcy5iZWhhdmlvdXJzLnNwbGljZShlLDEpLHQucGFyZW50cyYmKGU9dC5wYXJlbnRzLmluZGV4T2YodCksdC5wYXJlbnRzLnNwbGljZShlLDEpKSxlfX0se2tleTpcInJlbW92ZUFsbEJlaGF2aW91cnNcIix2YWx1ZTpmdW5jdGlvbigpe1AuZW1wdHlBcnJheSh0aGlzLmJlaGF2aW91cnMpfX0se2tleTpcInVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuYWdlKz10LCh0aGlzLmFnZT49dGhpcy5saWZlfHx0aGlzLmRlYWQpJiZ0aGlzLmRlc3Ryb3koKSx0aGlzLmVtaXR0aW5nKHQpLHRoaXMuaW50ZWdyYXRlKHQpfX0se2tleTpcImludGVncmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRoaXMucGFyZW50KXt2YXIgZT0xLXRoaXMuZGFtcGluZzt0aGlzLnBhcmVudC5pbnRlZ3JhdG9yLmNhbGN1bGF0ZSh0aGlzLHQsZSk7Zm9yKHZhciBpPXZvaWQgMCxhPXZvaWQgMCxpPXRoaXMucGFydGljbGVzLmxlbmd0aC0xOzA8PWk7aS0tKShhPXRoaXMucGFydGljbGVzW2ldKS51cGRhdGUodCxpKSx0aGlzLnBhcmVudC5pbnRlZ3JhdG9yLmNhbGN1bGF0ZShhLHQsZSksdGhpcy5kaXNwYXRjaChcIlBBUlRJQ0xFX1VQREFURVwiLGEpLGEuZGVhZCYmKHRoaXMuZGlzcGF0Y2goXCJQQVJUSUNMRV9ERUFEXCIsYSksdGhpcy5wYXJlbnQucG9vbC5leHBpcmUoYSksdGhpcy5wYXJ0aWNsZXMuc3BsaWNlKGksMSkpfX19LHtrZXk6XCJkaXNwYXRjaFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LmRpc3BhdGNoRXZlbnQodCxlKSx0aGlzLmJpbmRFdmVudCYmdGhpcy5kaXNwYXRjaEV2ZW50KHQsZSl9fSx7a2V5OlwiZW1pdHRpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXtpZihcIm9uY2VcIj09PXRoaXMudG90YWxUaW1lKXt2YXIgZT12b2lkIDAsaT10aGlzLnJhdGUuZ2V0VmFsdWUoOTk5OTkpO2ZvcigwPGkmJih0aGlzLmVtaXRTcGVlZD1pKSxlPTA7ZTxpO2UrKyl0aGlzLmNyZWF0ZVBhcnRpY2xlKCk7dGhpcy50b3RhbFRpbWU9XCJub25lXCJ9ZWxzZSBpZih0aGlzLmVtaXRUaW1lKz10LHRoaXMuZW1pdFRpbWU8dGhpcy50b3RhbFRpbWUpe3ZhciBhPXRoaXMucmF0ZS5nZXRWYWx1ZSh0KSxyPXZvaWQgMDtmb3IoMDxhJiYodGhpcy5lbWl0U3BlZWQ9YSkscj0wO3I8YTtyKyspdGhpcy5jcmVhdGVQYXJ0aWNsZSgpfX19LHtrZXk6XCJjcmVhdGVQYXJ0aWNsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5wYXJlbnQucG9vbC5nZXQoaik7cmV0dXJuIHRoaXMuc2V0dXBQYXJ0aWNsZShpLHQsZSksdGhpcy5kaXNwYXRjaChcIlBBUlRJQ0xFX0NSRUFURURcIixpKSxpfX0se2tleTpcInNldHVwUGFydGljbGVcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dmFyIGE9dGhpcy5pbml0aWFsaXplcyxyPXRoaXMuYmVoYXZpb3VycztlJiYoYT1QLnRvQXJyYXkoZSkpLGkmJihyPVAudG9BcnJheShpKSksdC5yZXNldCgpLFh0LmluaXRpYWxpemUodGhpcyx0LGEpLHQuYWRkQmVoYXZpb3VycyhyKSwodC5wYXJlbnQ9dGhpcykucGFydGljbGVzLnB1c2godCl9fSx7a2V5OlwicmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnN0b3AoKSxQLmRlc3Ryb3lBbGwodGhpcy5wYXJ0aWNsZXMpfX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZGVhZD0hMCx0aGlzLnJlbW92ZSgpLHRoaXMucmVtb3ZlQWxsSW5pdGlhbGl6ZXJzKCksdGhpcy5yZW1vdmVBbGxCZWhhdmlvdXJzKCksdGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LnJlbW92ZUVtaXR0ZXIodGhpcyl9fV0pLFd0KTtmdW5jdGlvbiBXdCgpe3ZhciB0PTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtvKHRoaXMsV3QpO3Q9aCh0aGlzLChXdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihXdCkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIHQucGFydGljbGVzPVtdLHQuYmVoYXZpb3Vycz1bXSx0LmluaXRpYWxpemVzPVtdLHQuZW1pdFRpbWU9MCx0LmVtaXRTcGVlZD0wLHQudG90YWxUaW1lPS0xLHQuZGFtcGluZz0uMDA2LHQuYmluZEVtaXR0ZXI9ITAsdC5yYXRlPW5ldyBLKDEsLjEpLHQubmFtZT1cIkVtaXR0ZXJcIix0LmlkPUEuaWQodC5uYW1lKSx0fUMuYmluZChZdCk7dmFyIFp0PShyKFF0LFl0KSx0KFF0LFt7a2V5OlwiYWRkU2VsZkJlaGF2aW91clwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxpPTA7aTx0O2krKyllW2ldPWFyZ3VtZW50c1tpXTtmb3IodmFyIGE9dm9pZCAwLHI9ZS5sZW5ndGgsYT0wO2E8cjthKyspe3ZhciBuPWVbYV07dGhpcy5zZWxmQmVoYXZpb3Vycy5wdXNoKG4pLG4uaW5pdGlhbGl6ZSh0aGlzKX19fSx7a2V5OlwicmVtb3ZlU2VsZkJlaGF2aW91clwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q9dGhpcy5zZWxmQmVoYXZpb3Vycy5pbmRleE9mKHQpOy0xPHQmJnRoaXMuc2VsZkJlaGF2aW91cnMuc3BsaWNlKHQsMSl9fSx7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYobihRdC5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoUXQucHJvdG90eXBlKSxcInVwZGF0ZVwiLHRoaXMpLmNhbGwodGhpcyx0KSwhdGhpcy5zbGVlcClmb3IodmFyIGU9dGhpcy5zZWxmQmVoYXZpb3Vycy5sZW5ndGgsaT12b2lkIDAsaT0wO2k8ZTtpKyspdGhpcy5zZWxmQmVoYXZpb3Vyc1tpXS5hcHBseUJlaGF2aW91cih0aGlzLHQsaSl9fV0pLFF0KTtmdW5jdGlvbiBRdCh0KXtvKHRoaXMsUXQpO3Q9aCh0aGlzLChRdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihRdCkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIHQuc2VsZkJlaGF2aW91cnM9W10sdH12YXIgS3Q9KHIoSnQsWXQpLHQoSnQsW3trZXk6XCJpbml0RXZlbnRIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMubW91c2Vtb3ZlSGFuZGxlcj1mdW5jdGlvbih0KXtyZXR1cm4gZS5tb3VzZW1vdmUuY2FsbChlLHQpfSx0aGlzLm1vdXNlZG93bkhhbmRsZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGUubW91c2Vkb3duLmNhbGwoZSx0KX0sdGhpcy5tb3VzZXVwSGFuZGxlcj1mdW5jdGlvbih0KXtyZXR1cm4gZS5tb3VzZXVwLmNhbGwoZSx0KX0sdGhpcy5tb3VzZVRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5tb3VzZW1vdmVIYW5kbGVyLCExKX19LHtrZXk6XCJlbWl0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9hbGxvd0VtaXR0aW5nPSEwfX0se2tleTpcInN0b3BcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2FsbG93RW1pdHRpbmc9ITF9fSx7a2V5OlwibW91c2Vtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5sYXllclh8fDA9PT10LmxheWVyWD8odGhpcy5wLngrPSh0LmxheWVyWC10aGlzLnAueCkqdGhpcy5lYXNlLHRoaXMucC55Kz0odC5sYXllclktdGhpcy5wLnkpKnRoaXMuZWFzZSk6IXQub2Zmc2V0WCYmMCE9PXQub2Zmc2V0WHx8KHRoaXMucC54Kz0odC5vZmZzZXRYLXRoaXMucC54KSp0aGlzLmVhc2UsdGhpcy5wLnkrPSh0Lm9mZnNldFktdGhpcy5wLnkpKnRoaXMuZWFzZSksdGhpcy5fYWxsb3dFbWl0dGluZyYmbihKdC5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoSnQucHJvdG90eXBlKSxcImVtaXRcIix0aGlzKS5jYWxsKHRoaXMsXCJvbmNlXCIpfX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe24oSnQucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKEp0LnByb3RvdHlwZSksXCJkZXN0cm95XCIsdGhpcykuY2FsbCh0aGlzKSx0aGlzLm1vdXNlVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm1vdXNlbW92ZUhhbmRsZXIsITEpfX1dKSxKdCk7ZnVuY3Rpb24gSnQodCxlLGkpe28odGhpcyxKdCk7aT1oKHRoaXMsKEp0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKEp0KSkuY2FsbCh0aGlzLGkpKTtyZXR1cm4gaS5tb3VzZVRhcmdldD1QLmluaXRWYWx1ZSh0LHdpbmRvdyksaS5lYXNlPVAuaW5pdFZhbHVlKGUsLjcpLGkuX2FsbG93RW1pdHRpbmc9ITEsaS5pbml0RXZlbnRIYW5kbGVyKCksaX12YXIgJHQ9KHQodGUsW3trZXk6XCJzZXRTdHJva2VcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3Q9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT10P3Q6XCIjMDAwMDAwXCIsZT0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWU/ZToxO3RoaXMuc3Ryb2tlPXtjb2xvcjp0LHRoaW5rbmVzczplfX19LHtrZXk6XCJpbml0SGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9wcm90b25VcGRhdGVIYW5kbGVyPWZ1bmN0aW9uKCl7ZS5vblByb3RvblVwZGF0ZS5jYWxsKGUpfSx0aGlzLl9wcm90b25VcGRhdGVBZnRlckhhbmRsZXI9ZnVuY3Rpb24oKXtlLm9uUHJvdG9uVXBkYXRlQWZ0ZXIuY2FsbChlKX0sdGhpcy5fZW1pdHRlckFkZGVkSGFuZGxlcj1mdW5jdGlvbih0KXtlLm9uRW1pdHRlckFkZGVkLmNhbGwoZSx0KX0sdGhpcy5fZW1pdHRlclJlbW92ZWRIYW5kbGVyPWZ1bmN0aW9uKHQpe2Uub25FbWl0dGVyUmVtb3ZlZC5jYWxsKGUsdCl9LHRoaXMuX3BhcnRpY2xlQ3JlYXRlZEhhbmRsZXI9ZnVuY3Rpb24odCl7ZS5vblBhcnRpY2xlQ3JlYXRlZC5jYWxsKGUsdCl9LHRoaXMuX3BhcnRpY2xlVXBkYXRlSGFuZGxlcj1mdW5jdGlvbih0KXtlLm9uUGFydGljbGVVcGRhdGUuY2FsbChlLHQpfSx0aGlzLl9wYXJ0aWNsZURlYWRIYW5kbGVyPWZ1bmN0aW9uKHQpe2Uub25QYXJ0aWNsZURlYWQuY2FsbChlLHQpfX19LHtrZXk6XCJpbml0XCIsdmFsdWU6ZnVuY3Rpb24odCl7KHRoaXMucGFyZW50PXQpLmFkZEV2ZW50TGlzdGVuZXIoXCJQUk9UT05fVVBEQVRFXCIsdGhpcy5fcHJvdG9uVXBkYXRlSGFuZGxlciksdC5hZGRFdmVudExpc3RlbmVyKFwiUFJPVE9OX1VQREFURV9BRlRFUlwiLHRoaXMuX3Byb3RvblVwZGF0ZUFmdGVySGFuZGxlciksdC5hZGRFdmVudExpc3RlbmVyKFwiRU1JVFRFUl9BRERFRFwiLHRoaXMuX2VtaXR0ZXJBZGRlZEhhbmRsZXIpLHQuYWRkRXZlbnRMaXN0ZW5lcihcIkVNSVRURVJfUkVNT1ZFRFwiLHRoaXMuX2VtaXR0ZXJSZW1vdmVkSGFuZGxlciksdC5hZGRFdmVudExpc3RlbmVyKFwiUEFSVElDTEVfQ1JFQVRFRFwiLHRoaXMuX3BhcnRpY2xlQ3JlYXRlZEhhbmRsZXIpLHQuYWRkRXZlbnRMaXN0ZW5lcihcIlBBUlRJQ0xFX1VQREFURVwiLHRoaXMuX3BhcnRpY2xlVXBkYXRlSGFuZGxlciksdC5hZGRFdmVudExpc3RlbmVyKFwiUEFSVElDTEVfREVBRFwiLHRoaXMuX3BhcnRpY2xlRGVhZEhhbmRsZXIpfX0se2tleTpcInJlc2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVtb3ZlKCl9fSx7a2V5OlwicmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiUFJPVE9OX1VQREFURVwiLHRoaXMuX3Byb3RvblVwZGF0ZUhhbmRsZXIpLHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJQUk9UT05fVVBEQVRFX0FGVEVSXCIsdGhpcy5fcHJvdG9uVXBkYXRlQWZ0ZXJIYW5kbGVyKSx0aGlzLnBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRU1JVFRFUl9BRERFRFwiLHRoaXMuX2VtaXR0ZXJBZGRlZEhhbmRsZXIpLHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJFTUlUVEVSX1JFTU9WRURcIix0aGlzLl9lbWl0dGVyUmVtb3ZlZEhhbmRsZXIpLHRoaXMucGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJQQVJUSUNMRV9DUkVBVEVEXCIsdGhpcy5fcGFydGljbGVDcmVhdGVkSGFuZGxlciksdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIlBBUlRJQ0xFX1VQREFURVwiLHRoaXMuX3BhcnRpY2xlVXBkYXRlSGFuZGxlciksdGhpcy5wYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIlBBUlRJQ0xFX0RFQURcIix0aGlzLl9wYXJ0aWNsZURlYWRIYW5kbGVyKSx0aGlzLnBhcmVudD1udWxsfX0se2tleTpcIm9uUHJvdG9uVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5Olwib25Qcm90b25VcGRhdGVBZnRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIm9uRW1pdHRlckFkZGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5Olwib25FbWl0dGVyUmVtb3ZlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIm9uUGFydGljbGVDcmVhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5Olwib25QYXJ0aWNsZVVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIm9uUGFydGljbGVEZWFkXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fV0pLHRlKTtmdW5jdGlvbiB0ZSh0LGUpe28odGhpcyx0ZSksdGhpcy5wb29sPW5ldyBULHRoaXMuZWxlbWVudD10LHRoaXMuc3Ryb2tlPWUsdGhpcy5jaXJjbGVDb25mPXtpc0NpcmNsZTohMH0sdGhpcy5pbml0SGFuZGxlcigpLHRoaXMubmFtZT1cIkJhc2VSZW5kZXJlclwifXZhciBlZT0ocihpZSwkdCksdChpZSxbe2tleTpcInJlc2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5lbGVtZW50LndpZHRoPXQsdGhpcy5lbGVtZW50LmhlaWdodD1lfX0se2tleTpcIm9uUHJvdG9uVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsMCx0aGlzLmVsZW1lbnQud2lkdGgsdGhpcy5lbGVtZW50LmhlaWdodCl9fSx7a2V5Olwib25QYXJ0aWNsZUNyZWF0ZWRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmJvZHk/eCh0LmJvZHksdGhpcy5hZGRJbWcyQm9keSx0KTp0LmNvbG9yPXQuY29sb3J8fFwiI2ZmMDAwMFwifX0se2tleTpcIm9uUGFydGljbGVVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmJvZHk/dC5ib2R5IGluc3RhbmNlb2YgSW1hZ2UmJnRoaXMuZHJhd0ltYWdlKHQpOnRoaXMuZHJhd0NpcmNsZSh0KX19LHtrZXk6XCJvblBhcnRpY2xlRGVhZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuYm9keT1udWxsfX0se2tleTpcImFkZEltZzJCb2R5XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLmJvZHk9dH19LHtrZXk6XCJkcmF3SW1hZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZSxpPXQuYm9keS53aWR0aCp0LnNjYWxlfDAsYT10LmJvZHkuaGVpZ2h0KnQuc2NhbGV8MCxyPXQucC54LWkvMixuPXQucC55LWEvMjt0LmNvbG9yPyh0LmRhdGEuYnVmZmVyfHwodC5kYXRhLmJ1ZmZlcj10aGlzLmNyZWF0ZUJ1ZmZlcih0LmJvZHkpKSwoZT10LmRhdGEuYnVmZmVyLmdldENvbnRleHQoXCIyZFwiKSkuY2xlYXJSZWN0KDAsMCx0LmRhdGEuYnVmZmVyLndpZHRoLHQuZGF0YS5idWZmZXIuaGVpZ2h0KSxlLmdsb2JhbEFscGhhPXQuYWxwaGEsZS5kcmF3SW1hZ2UodC5ib2R5LDAsMCksZS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249XCJzb3VyY2UtYXRvcFwiLGUuZmlsbFN0eWxlPUgucmdiVG9IZXgodC5yZ2IpLGUuZmlsbFJlY3QoMCwwLHQuZGF0YS5idWZmZXIud2lkdGgsdC5kYXRhLmJ1ZmZlci5oZWlnaHQpLGUuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwic291cmNlLW92ZXJcIixlLmdsb2JhbEFscGhhPTEsdGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0LmRhdGEuYnVmZmVyLDAsMCx0LmRhdGEuYnVmZmVyLndpZHRoLHQuZGF0YS5idWZmZXIuaGVpZ2h0LHIsbixpLGEpKToodGhpcy5jb250ZXh0LnNhdmUoKSx0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGE9dC5hbHBoYSx0aGlzLmNvbnRleHQudHJhbnNsYXRlKHQucC54LHQucC55KSx0aGlzLmNvbnRleHQucm90YXRlKHMuZGVncmVlVHJhbnNmb3JtKHQucm90YXRpb24pKSx0aGlzLmNvbnRleHQudHJhbnNsYXRlKC10LnAueCwtdC5wLnkpLHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodC5ib2R5LDAsMCx0LmJvZHkud2lkdGgsdC5ib2R5LmhlaWdodCxyLG4saSxhKSx0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGE9MSx0aGlzLmNvbnRleHQucmVzdG9yZSgpKX19LHtrZXk6XCJkcmF3Q2lyY2xlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5yZ2I/dGhpcy5jb250ZXh0LmZpbGxTdHlsZT1cInJnYmEoXCIrdC5yZ2IucitcIixcIit0LnJnYi5nK1wiLFwiK3QucmdiLmIrXCIsXCIrdC5hbHBoYStcIilcIjp0aGlzLmNvbnRleHQuZmlsbFN0eWxlPXQuY29sb3IsdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpLHRoaXMuY29udGV4dC5hcmModC5wLngsdC5wLnksdC5yYWRpdXMsMCwyKk1hdGguUEksITApLHRoaXMuc3Ryb2tlJiYodGhpcy5jb250ZXh0LnN0cm9rZVN0eWxlPXRoaXMuc3Ryb2tlLmNvbG9yLHRoaXMuY29udGV4dC5saW5lV2lkdGg9dGhpcy5zdHJva2UudGhpbmtuZXNzLHRoaXMuY29udGV4dC5zdHJva2UoKSksdGhpcy5jb250ZXh0LmNsb3NlUGF0aCgpLHRoaXMuY29udGV4dC5maWxsKCl9fSx7a2V5OlwiY3JlYXRlQnVmZmVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEltYWdlKXt2YXIgZT10LndpZHRoK1wiX1wiK3QuaGVpZ2h0LGk9dGhpcy5idWZmZXJDYWNoZVtlXTtyZXR1cm4gaXx8KChpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikpLndpZHRoPXQud2lkdGgsaS5oZWlnaHQ9dC5oZWlnaHQsdGhpcy5idWZmZXJDYWNoZVtlXT1pKSxpfX19XSksaWUpO2Z1bmN0aW9uIGllKHQpe28odGhpcyxpZSk7dD1oKHRoaXMsKGllLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGllKSkuY2FsbCh0aGlzLHQpKTtyZXR1cm4gdC5zdHJva2U9bnVsbCx0LmNvbnRleHQ9dC5lbGVtZW50LmdldENvbnRleHQoXCIyZFwiKSx0LmJ1ZmZlckNhY2hlPXt9LHQubmFtZT1cIkNhbnZhc1JlbmRlcmVyXCIsdH12YXIgYWU9KHIocmUsJHQpLHQocmUsW3trZXk6XCJvblBhcnRpY2xlQ3JlYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuYm9keT94KHQuYm9keSx0aGlzLmFkZEltZzJCb2R5LHQpOih0LmJvZHk9dGhpcy5wb29sLmdldCh0aGlzLmNpcmNsZUNvbmYsdCksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHQuYm9keSkpfX0se2tleTpcIm9uUGFydGljbGVVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmJvZHlSZWFkeSh0KSYmKHRoaXMudHJhbnNmb3JtM2Q/di50cmFuc2Zvcm0zZCh0LmJvZHksdC5wLngsdC5wLnksdC5zY2FsZSx0LnJvdGF0aW9uKTp2LnRyYW5zZm9ybSh0LmJvZHksdC5wLngsdC5wLnksdC5zY2FsZSx0LnJvdGF0aW9uKSx0LmJvZHkuc3R5bGUub3BhY2l0eT10LmFscGhhLHQuYm9keS5pc0NpcmNsZSYmKHQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9dC5jb2xvcnx8XCIjZmYwMDAwXCIpKX19LHtrZXk6XCJvblBhcnRpY2xlRGVhZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuYm9keVJlYWR5KHQpJiYodGhpcy5lbGVtZW50LnJlbW92ZUNoaWxkKHQuYm9keSksdGhpcy5wb29sLmV4cGlyZSh0LmJvZHkpLHQuYm9keT1udWxsKX19LHtrZXk6XCJib2R5UmVhZHlcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm5cIm9iamVjdFwiPT09aSh0LmJvZHkpJiZ0LmJvZHkmJiF0LmJvZHkuaXNJbm5lcn19LHtrZXk6XCJhZGRJbWcyQm9keVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZS5kZWFkfHwoZS5ib2R5PXRoaXMucG9vbC5nZXQodCxlKSx2LnJlc2l6ZShlLmJvZHksdC53aWR0aCx0LmhlaWdodCksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGUuYm9keSkpfX0se2tleTpcImNyZWF0ZUJvZHlcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0LmlzQ2lyY2xlP3RoaXMuY3JlYXRlQ2lyY2xlKGUpOnRoaXMuY3JlYXRlU3ByaXRlKHQsZSl9fSx7a2V5OlwiY3JlYXRlQ2lyY2xlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9di5jcmVhdGVEaXYodC5pZCtcIl9kb21cIiwyKnQucmFkaXVzLDIqdC5yYWRpdXMpO3JldHVybiBlLnN0eWxlLmJvcmRlclJhZGl1cz10LnJhZGl1cytcInB4XCIsdGhpcy5zdHJva2UmJihlLnN0eWxlLmJvcmRlckNvbG9yPXRoaXMuc3Ryb2tlLmNvbG9yLGUuc3R5bGUuYm9yZGVyV2lkdGg9dGhpcy5zdHJva2UudGhpbmtuZXNzK1wicHhcIiksZS5pc0NpcmNsZT0hMCxlfX0se2tleTpcImNyZWF0ZVNwcml0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9XCJzdHJpbmdcIj09dHlwZW9mIHQ/dDp0LnNyYyx0PXYuY3JlYXRlRGl2KGUuaWQrXCJfZG9tXCIsdC53aWR0aCx0LmhlaWdodCk7cmV0dXJuIHQuc3R5bGUuYmFja2dyb3VuZEltYWdlPVwidXJsKFwiK2krXCIpXCIsdH19XSkscmUpO2Z1bmN0aW9uIHJlKHQpe28odGhpcyxyZSk7dmFyIGk9aCh0aGlzLChyZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihyZSkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIGkuc3Ryb2tlPW51bGwsaS5wb29sLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBpLmNyZWF0ZUJvZHkodCxlKX0saS5hZGRJbWcyQm9keT1pLmFkZEltZzJCb2R5LmJpbmQoaSksaS50cmFuc2Zvcm0zZD0hMSxpLm5hbWU9XCJEb21SZW5kZXJlclwiLGl9dmFyIG5lPShyKHNlLCR0KSx0KHNlLFt7a2V5Olwib25QYXJ0aWNsZUNyZWF0ZWRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmJvZHk/dGhpcy5jcmVhdGVTcHJpdGUodCk6dGhpcy5jcmVhdGVDaXJjbGUodCksdGhpcy5lbGVtZW50LmFkZENoaWxkKHQuYm9keSl9fSx7a2V5Olwib25QYXJ0aWNsZVVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuYm9keSYmKHQuYm9keS54PXQucC54LHQuYm9keS55PXQucC55LHQuYm9keS5hbHBoYT10LmFscGhhLHQuYm9keS5zY2FsZVg9dC5ib2R5LnNjYWxlWT10LnNjYWxlLHQuYm9keS5yb3RhdGlvbj10LnJvdGF0aW9uKX19LHtrZXk6XCJvblBhcnRpY2xlRGVhZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuYm9keSYmKHQuYm9keS5wYXJlbnQmJnQuYm9keS5wYXJlbnQucmVtb3ZlQ2hpbGQodC5ib2R5KSx0aGlzLnBvb2wuZXhwaXJlKHQuYm9keSksdC5ib2R5PW51bGwpLHQuZ3JhcGhpY3MmJnRoaXMucG9vbC5leHBpcmUodC5ncmFwaGljcyl9fSx7a2V5OlwiY3JlYXRlU3ByaXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5ib2R5PXRoaXMucG9vbC5nZXQodC5ib2R5KSx0LmJvZHkucGFyZW50fHx0LmJvZHkuaW1hZ2UmJih0LmJvZHkucmVnWD10LmJvZHkuaW1hZ2Uud2lkdGgvMix0LmJvZHkucmVnWT10LmJvZHkuaW1hZ2UuaGVpZ2h0LzIpfX0se2tleTpcImNyZWF0ZUNpcmNsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucG9vbC5nZXQoY3JlYXRlanMuR3JhcGhpY3MpO3RoaXMuc3Ryb2tlJiYodGhpcy5zdHJva2UgaW5zdGFuY2VvZiBTdHJpbmc/ZS5iZWdpblN0cm9rZSh0aGlzLnN0cm9rZSk6ZS5iZWdpblN0cm9rZShcIiMwMDAwMDBcIikpLGUuYmVnaW5GaWxsKHQuY29sb3J8fFwiI2ZmMDAwMFwiKS5kcmF3Q2lyY2xlKDAsMCx0LnJhZGl1cyk7dmFyIGk9dGhpcy5wb29sLmdldChjcmVhdGVqcy5TaGFwZSxbZV0pO3QuYm9keT1pLHQuZ3JhcGhpY3M9ZX19XSksc2UpO2Z1bmN0aW9uIHNlKHQsZSl7byh0aGlzLHNlKTt0PWgodGhpcywoc2UuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2Yoc2UpKS5jYWxsKHRoaXMsdCkpO3JldHVybiB0LnN0cm9rZT1lLHQubmFtZT1cIkVhc2VsUmVuZGVyZXJcIix0fXZhciBvZT0ocihoZSwkdCksdChoZSxbe2tleTpcInJlc2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5lbGVtZW50LndpZHRoPXQsdGhpcy5lbGVtZW50LmhlaWdodD1lfX0se2tleTpcImNyZWF0ZUltYWdlRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMucmVjdGFuZ2xlPXR8fG5ldyBaKDAsMCx0aGlzLmVsZW1lbnQud2lkdGgsdGhpcy5lbGVtZW50LmhlaWdodCksdGhpcy5pbWFnZURhdGE9dGhpcy5jb250ZXh0LmNyZWF0ZUltYWdlRGF0YSh0aGlzLnJlY3RhbmdsZS53aWR0aCx0aGlzLnJlY3RhbmdsZS5oZWlnaHQpLHRoaXMuY29udGV4dC5wdXRJbWFnZURhdGEodGhpcy5pbWFnZURhdGEsdGhpcy5yZWN0YW5nbGUueCx0aGlzLnJlY3RhbmdsZS55KX19LHtrZXk6XCJvblByb3RvblVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jb250ZXh0LmNsZWFyUmVjdCh0aGlzLnJlY3RhbmdsZS54LHRoaXMucmVjdGFuZ2xlLnksdGhpcy5yZWN0YW5nbGUud2lkdGgsdGhpcy5yZWN0YW5nbGUuaGVpZ2h0KSx0aGlzLmltYWdlRGF0YT10aGlzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKHRoaXMucmVjdGFuZ2xlLngsdGhpcy5yZWN0YW5nbGUueSx0aGlzLnJlY3RhbmdsZS53aWR0aCx0aGlzLnJlY3RhbmdsZS5oZWlnaHQpfX0se2tleTpcIm9uUHJvdG9uVXBkYXRlQWZ0ZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY29udGV4dC5wdXRJbWFnZURhdGEodGhpcy5pbWFnZURhdGEsdGhpcy5yZWN0YW5nbGUueCx0aGlzLnJlY3RhbmdsZS55KX19LHtrZXk6XCJvblBhcnRpY2xlQ3JlYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIm9uUGFydGljbGVVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmltYWdlRGF0YSYmdGhpcy5zZXRQaXhlbCh0aGlzLmltYWdlRGF0YSxNYXRoLmZsb29yKHQucC54LXRoaXMucmVjdGFuZ2xlLngpLE1hdGguZmxvb3IodC5wLnktdGhpcy5yZWN0YW5nbGUueSksdCl9fSx7a2V5Olwic2V0UGl4ZWxcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSxhKXt2YXIgcj1hLnJnYjtlPDB8fGU+dGhpcy5lbGVtZW50LndpZHRofHxpPDB8fGk+dGhpcy5lbGVtZW50d2lkdGh8fChlPTQqKChpPj4wKSp0LndpZHRoKyhlPj4wKSksdC5kYXRhW2VdPXIucix0LmRhdGFbMStlXT1yLmcsdC5kYXRhWzIrZV09ci5iLHQuZGF0YVszK2VdPTI1NSphLmFscGhhKX19LHtrZXk6XCJvblBhcnRpY2xlRGVhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7fX1dKSxoZSk7ZnVuY3Rpb24gaGUodCxlKXtvKHRoaXMsaGUpO3Q9aCh0aGlzLChoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihoZSkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIHQuY29udGV4dD10LmVsZW1lbnQuZ2V0Q29udGV4dChcIjJkXCIpLHQuaW1hZ2VEYXRhPW51bGwsdC5yZWN0YW5nbGU9bnVsbCx0LnJlY3RhbmdsZT1lLHQuY3JlYXRlSW1hZ2VEYXRhKGUpLHQubmFtZT1cIlBpeGVsUmVuZGVyZXJcIix0fXZhciBsZT12b2lkIDAsdWU9KHIoY2UsJHQpLHQoY2UsW3trZXk6XCJzZXRQSVhJXCIsdmFsdWU6ZnVuY3Rpb24odCl7dHJ5e2xlPXR8fHtTcHJpdGU6e319LHRoaXMuY3JlYXRlRnJvbUltYWdlPWxlLlNwcml0ZS5mcm9tfHxsZS5TcHJpdGUuZnJvbUltYWdlfWNhdGNoKHQpe319fSx7a2V5Olwib25Qcm90b25VcGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJvblBhcnRpY2xlQ3JlYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuYm9keT90LmJvZHk9dGhpcy5wb29sLmdldCh0LmJvZHksdCk6dC5ib2R5PXRoaXMucG9vbC5nZXQodGhpcy5jaXJjbGVDb25mLHQpLHRoaXMuYmxlbmRNb2RlJiYodC5ib2R5LmJsZW5kTW9kZT10aGlzLmJsZW5kTW9kZSksdGhpcy5lbGVtZW50LmFkZENoaWxkKHQuYm9keSl9fSx7a2V5Olwib25QYXJ0aWNsZVVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMudHJhbnNmb3JtKHQsdC5ib2R5KSwhMCE9PXRoaXMuc2V0Q29sb3ImJiEwIT09dGhpcy5jb2xvcnx8KHQuYm9keS50aW50PUguZ2V0SGV4MTZGcm9tUGFydGljbGUodCkpfX0se2tleTpcIm9uUGFydGljbGVEZWFkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5lbGVtZW50LnJlbW92ZUNoaWxkKHQuYm9keSksdGhpcy5wb29sLmV4cGlyZSh0LmJvZHkpLHQuYm9keT1udWxsfX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbih0KXtuKGNlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihjZS5wcm90b3R5cGUpLFwiZGVzdHJveVwiLHRoaXMpLmNhbGwodGhpcyksdGhpcy5wb29sLmRlc3Ryb3koKTtmb3IodmFyIGU9dC5sZW5ndGg7ZS0tOyl7dmFyIGk9dFtlXTtpLmJvZHkmJnRoaXMuZWxlbWVudC5yZW1vdmVDaGlsZChpLmJvZHkpfX19LHtrZXk6XCJ0cmFuc2Zvcm1cIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UueD10LnAueCxlLnk9dC5wLnksZS5hbHBoYT10LmFscGhhLGUuc2NhbGUueD10LnNjYWxlLGUuc2NhbGUueT10LnNjYWxlLGUucm90YXRpb249dC5yb3RhdGlvbipzLlBJXzE4MH19LHtrZXk6XCJjcmVhdGVCb2R5XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5pc0NpcmNsZT90aGlzLmNyZWF0ZUNpcmNsZShlKTp0aGlzLmNyZWF0ZVNwcml0ZSh0KX19LHtrZXk6XCJjcmVhdGVTcHJpdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0PXQuaXNJbm5lcj90aGlzLmNyZWF0ZUZyb21JbWFnZSh0LnNyYyk6bmV3IGxlLlNwcml0ZSh0KTtyZXR1cm4gdC5hbmNob3IueD0uNSx0LmFuY2hvci55PS41LHR9fSx7a2V5OlwiY3JlYXRlQ2lyY2xlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGUsaT1uZXcgbGUuR3JhcGhpY3M7cmV0dXJuIHRoaXMuc3Ryb2tlJiYoZT10aGlzLnN0cm9rZSBpbnN0YW5jZW9mIFN0cmluZz90aGlzLnN0cm9rZTowLGkuYmVnaW5TdHJva2UoZSkpLGkuYmVnaW5GaWxsKHQuY29sb3J8fDM2MDc3KSxpLmRyYXdDaXJjbGUoMCwwLHQucmFkaXVzKSxpLmVuZEZpbGwoKSxpfX1dKSxjZSk7ZnVuY3Rpb24gY2UodCxlKXtvKHRoaXMsY2UpO3ZhciBpPWgodGhpcywoY2UuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoY2UpKS5jYWxsKHRoaXMsdCkpO3JldHVybiBpLnN0cm9rZT1lLGkuY29sb3I9ITEsaS5zZXRDb2xvcj0hMSxpLmJsZW5kTW9kZT1udWxsLGkucG9vbC5jcmVhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gaS5jcmVhdGVCb2R5KHQsZSl9LGkuc2V0UElYSSh3aW5kb3cuUElYSSksaS5uYW1lPVwiUGl4aVJlbmRlcmVyXCIsaX12YXIgZGU9KHQoeWUsW3trZXk6XCJzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUpezA9PT1lP1guc2V0KHQsdGhpcy5tYXRzWzBdKTpYLm11bHRpcGx5KHRoaXMubWF0c1tlLTFdLHQsdGhpcy5tYXRzW2VdKSx0aGlzLnNpemU9TWF0aC5tYXgodGhpcy5zaXplLGUrMSl9fSx7a2V5OlwicHVzaFwiLHZhbHVlOmZ1bmN0aW9uKHQpezA9PT10aGlzLnNpemU/WC5zZXQodCx0aGlzLm1hdHNbMF0pOlgubXVsdGlwbHkodGhpcy5tYXRzW3RoaXMuc2l6ZS0xXSx0LHRoaXMubWF0c1t0aGlzLnNpemVdKSx0aGlzLnNpemUrK319LHtrZXk6XCJwb3BcIix2YWx1ZTpmdW5jdGlvbigpezA8dGhpcy5zaXplJiZ0aGlzLnNpemUtLX19LHtrZXk6XCJ0b3BcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hdHNbdGhpcy5zaXplLTFdfX1dKSx5ZSk7ZnVuY3Rpb24geWUoKXtvKHRoaXMseWUpLHRoaXMubWF0cz1bXTtmb3IodmFyIHQ9dGhpcy5zaXplPTA7dDwyMDt0KyspdGhpcy5tYXRzLnB1c2goWC5jcmVhdGUoWzAsMCwwLDAsMCwwLDAsMCwwXSkpfXIocGUsJHQpLHQocGUsW3trZXk6XCJpbml0XCIsdmFsdWU6ZnVuY3Rpb24odCl7bihwZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YocGUucHJvdG90eXBlKSxcImluaXRcIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5yZXNpemUodGhpcy5lbGVtZW50LndpZHRoLHRoaXMuZWxlbWVudC5oZWlnaHQpfX0se2tleTpcInJlc2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy51bWF0WzRdPS0yLHRoaXMudW1hdFs3XT0xLHRoaXMuc21hdFswXT0xL3QsdGhpcy5zbWF0WzRdPTEvZSx0aGlzLm1zdGFjay5zZXQodGhpcy51bWF0LDApLHRoaXMubXN0YWNrLnNldCh0aGlzLnNtYXQsMSksdGhpcy5nbC52aWV3cG9ydCgwLDAsdCxlKSx0aGlzLmVsZW1lbnQud2lkdGg9dCx0aGlzLmVsZW1lbnQuaGVpZ2h0PWV9fSx7a2V5Olwic2V0TWF4UmFkaXVzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5jaXJjbGVDYW52YXNVUkw9dGhpcy5jcmVhdGVDaXJjbGUodCl9fSx7a2V5OlwiZ2V0VmVydGV4U2hhZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5bXCJ1bmlmb3JtIHZlYzIgdmlld3BvcnQ7XCIsXCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XCIsXCJhdHRyaWJ1dGUgdmVjMiBhVGV4dHVyZUNvb3JkO1wiLFwidW5pZm9ybSBtYXQzIHRNYXQ7XCIsXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcInZhcnlpbmcgZmxvYXQgYWxwaGE7XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJ2ZWMzIHYgPSB0TWF0ICogdmVjMyhhVmVydGV4UG9zaXRpb24sIDEuMCk7XCIsXCJnbF9Qb3NpdGlvbiA9IHZlYzQodi54LCB2LnksIDAsIDEpO1wiLFwidlRleHR1cmVDb29yZCA9IGFUZXh0dXJlQ29vcmQ7XCIsXCJhbHBoYSA9IHRNYXRbMF1bMl07XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIil9fSx7a2V5OlwiZ2V0RnJhZ21lbnRTaGFkZXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybltcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXCJ2YXJ5aW5nIGZsb2F0IGFscGhhO1wiLFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXCJ1bmlmb3JtIHZlYzQgY29sb3I7XCIsXCJ1bmlmb3JtIGJvb2wgdXNlVGV4dHVyZTtcIixcInVuaWZvcm0gdmVjMyB1Q29sb3I7XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJ2ZWM0IHRleHR1cmVDb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleHR1cmVDb29yZCk7XCIsXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlQ29sb3IgKiB2ZWM0KHVDb2xvciwgMS4wKTtcIixcImdsX0ZyYWdDb2xvci53ICo9IGFscGhhO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpfX0se2tleTpcImluaXRWYXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMubXN0YWNrPW5ldyBkZSx0aGlzLnVtYXQ9WC5jcmVhdGUoWzIsMCwxLDAsLTIsMCwtMSwxLDFdKSx0aGlzLnNtYXQ9WC5jcmVhdGUoWy4wMSwwLDEsMCwuMDEsMCwwLDAsMV0pLHRoaXMudGV4dHVyZWJ1ZmZlcnM9e319fSx7a2V5OlwiYmxlbmRFcXVhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuZ2wuYmxlbmRFcXVhdGlvbih0aGlzLmdsW3RdKX19LHtrZXk6XCJibGVuZEZ1bmNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuZ2wuYmxlbmRGdW5jKHRoaXMuZ2xbdF0sdGhpcy5nbFtlXSl9fSx7a2V5OlwiZ2V0U2hhZGVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe2k9aT90LmNyZWF0ZVNoYWRlcih0LkZSQUdNRU5UX1NIQURFUik6dC5jcmVhdGVTaGFkZXIodC5WRVJURVhfU0hBREVSKTtyZXR1cm4gdC5zaGFkZXJTb3VyY2UoaSxlKSx0LmNvbXBpbGVTaGFkZXIoaSksdC5nZXRTaGFkZXJQYXJhbWV0ZXIoaSx0LkNPTVBJTEVfU1RBVFVTKT9pOihhbGVydCh0LmdldFNoYWRlckluZm9Mb2coaSkpLG51bGwpfX0se2tleTpcImluaXRTaGFkZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNoYWRlcih0aGlzLmdsLHRoaXMuZ2V0RnJhZ21lbnRTaGFkZXIoKSwhMCksZT10aGlzLmdldFNoYWRlcih0aGlzLmdsLHRoaXMuZ2V0VmVydGV4U2hhZGVyKCksITEpO3RoaXMuc3Byb2dyYW09dGhpcy5nbC5jcmVhdGVQcm9ncmFtKCksdGhpcy5nbC5hdHRhY2hTaGFkZXIodGhpcy5zcHJvZ3JhbSxlKSx0aGlzLmdsLmF0dGFjaFNoYWRlcih0aGlzLnNwcm9ncmFtLHQpLHRoaXMuZ2wubGlua1Byb2dyYW0odGhpcy5zcHJvZ3JhbSksdGhpcy5nbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHRoaXMuc3Byb2dyYW0sdGhpcy5nbC5MSU5LX1NUQVRVUyl8fGFsZXJ0KFwiQ291bGQgbm90IGluaXRpYWxpc2Ugc2hhZGVyc1wiKSx0aGlzLmdsLnVzZVByb2dyYW0odGhpcy5zcHJvZ3JhbSksdGhpcy5zcHJvZ3JhbS52cGE9dGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLnNwcm9ncmFtLFwiYVZlcnRleFBvc2l0aW9uXCIpLHRoaXMuc3Byb2dyYW0udGNhPXRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5zcHJvZ3JhbSxcImFUZXh0dXJlQ29vcmRcIiksdGhpcy5nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLnNwcm9ncmFtLnRjYSksdGhpcy5nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLnNwcm9ncmFtLnZwYSksdGhpcy5zcHJvZ3JhbS50TWF0VW5pZm9ybT10aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNwcm9ncmFtLFwidE1hdFwiKSx0aGlzLnNwcm9ncmFtLnNhbXBsZXJVbmlmb3JtPXRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuc3Byb2dyYW0sXCJ1U2FtcGxlclwiKSx0aGlzLnNwcm9ncmFtLnVzZVRleD10aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNwcm9ncmFtLFwidXNlVGV4dHVyZVwiKSx0aGlzLnNwcm9ncmFtLmNvbG9yPXRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuc3Byb2dyYW0sXCJ1Q29sb3JcIiksdGhpcy5nbC51bmlmb3JtMWkodGhpcy5zcHJvZ3JhbS51c2VUZXgsMSl9fSx7a2V5OlwiaW5pdEJ1ZmZlcnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0O3RoaXMudW5pdElCdWZmZXI9dGhpcy5nbC5jcmVhdGVCdWZmZXIoKSx0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUix0aGlzLnVuaXRJQnVmZmVyKSx0aGlzLmdsLmJ1ZmZlckRhdGEodGhpcy5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixuZXcgVWludDE2QXJyYXkoWzAsMywxLDAsMiwzXSksdGhpcy5nbC5TVEFUSUNfRFJBVyk7Zm9yKHZhciBlPXZvaWQgMCxpPVtdLGU9MDtlPDEwMDtlKyspaS5wdXNoKGUpO2Zvcih0PW5ldyBVaW50MTZBcnJheShpKSx0aGlzLnVuaXRJMzM9dGhpcy5nbC5jcmVhdGVCdWZmZXIoKSx0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUix0aGlzLnVuaXRJMzMpLHRoaXMuZ2wuYnVmZmVyRGF0YSh0aGlzLmdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHQsdGhpcy5nbC5TVEFUSUNfRFJBVyksaT1bXSxlPTA7ZTwxMDA7ZSsrKWkucHVzaChlLGUrMSxlKzIpO3Q9bmV3IFVpbnQxNkFycmF5KGkpLHRoaXMuc3RyaXBCdWZmZXI9dGhpcy5nbC5jcmVhdGVCdWZmZXIoKSx0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUix0aGlzLnN0cmlwQnVmZmVyKSx0aGlzLmdsLmJ1ZmZlckRhdGEodGhpcy5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUix0LHRoaXMuZ2wuU1RBVElDX0RSQVcpfX0se2tleTpcImNyZWF0ZUNpcmNsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuY2lyY2xlQ2FudmFzUmFkaXVzPWMoUC5pbml0VmFsdWUodCwzMikpO3ZhciBlPXYuY3JlYXRlQ2FudmFzKFwiY2lyY2xlX2NhbnZhc1wiLDIqdGhpcy5jaXJjbGVDYW52YXNSYWRpdXMsMip0aGlzLmNpcmNsZUNhbnZhc1JhZGl1cyksdD1lLmdldENvbnRleHQoXCIyZFwiKTtyZXR1cm4gdC5iZWdpblBhdGgoKSx0LmFyYyh0aGlzLmNpcmNsZUNhbnZhc1JhZGl1cyx0aGlzLmNpcmNsZUNhbnZhc1JhZGl1cyx0aGlzLmNpcmNsZUNhbnZhc1JhZGl1cywwLDIqTWF0aC5QSSwhMCksdC5jbG9zZVBhdGgoKSx0LmZpbGxTdHlsZT1cIiNGRkZcIix0LmZpbGwoKSxlLnRvRGF0YVVSTCgpfX0se2tleTpcImRyYXdJbWcyQ2FudmFzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5ib2R5LndpZHRoLGk9dC5ib2R5LmhlaWdodCxhPWModC5ib2R5LndpZHRoKSxyPWModC5ib2R5LmhlaWdodCksbj10LmJvZHkud2lkdGgvYSxzPXQuYm9keS5oZWlnaHQvcjt0aGlzLnRleHR1cmVidWZmZXJzW3QuZGF0YS5zcmNdfHwodGhpcy50ZXh0dXJlYnVmZmVyc1t0LmRhdGEuc3JjXT1bdGhpcy5nbC5jcmVhdGVUZXh0dXJlKCksdGhpcy5nbC5jcmVhdGVCdWZmZXIoKSx0aGlzLmdsLmNyZWF0ZUJ1ZmZlcigpXSksdC5kYXRhLnRleHR1cmU9dGhpcy50ZXh0dXJlYnVmZmVyc1t0LmRhdGEuc3JjXVswXSx0LmRhdGEudmNCdWZmZXI9dGhpcy50ZXh0dXJlYnVmZmVyc1t0LmRhdGEuc3JjXVsxXSx0LmRhdGEudGNCdWZmZXI9dGhpcy50ZXh0dXJlYnVmZmVyc1t0LmRhdGEuc3JjXVsyXSx0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5BUlJBWV9CVUZGRVIsdC5kYXRhLnRjQnVmZmVyKSx0aGlzLmdsLmJ1ZmZlckRhdGEodGhpcy5nbC5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShbMCwwLG4sMCwwLHMscyxzXSksdGhpcy5nbC5TVEFUSUNfRFJBVyksdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLHQuZGF0YS52Y0J1ZmZlciksdGhpcy5nbC5idWZmZXJEYXRhKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLG5ldyBGbG9hdDMyQXJyYXkoWzAsMCxlLDAsMCxpLGUsaV0pLHRoaXMuZ2wuU1RBVElDX0RSQVcpO3I9dC5kYXRhLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikuZ2V0SW1hZ2VEYXRhKDAsMCxhLHIpO3RoaXMuZ2wuYmluZFRleHR1cmUodGhpcy5nbC5URVhUVVJFXzJELHQuZGF0YS50ZXh0dXJlKSx0aGlzLmdsLnRleEltYWdlMkQodGhpcy5nbC5URVhUVVJFXzJELDAsdGhpcy5nbC5SR0JBLHRoaXMuZ2wuUkdCQSx0aGlzLmdsLlVOU0lHTkVEX0JZVEUsciksdGhpcy5nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuZ2wuVEVYVFVSRV8yRCx0aGlzLmdsLlRFWFRVUkVfTUFHX0ZJTFRFUix0aGlzLmdsLkxJTkVBUiksdGhpcy5nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuZ2wuVEVYVFVSRV8yRCx0aGlzLmdsLlRFWFRVUkVfTUlOX0ZJTFRFUix0aGlzLmdsLkxJTkVBUl9NSVBNQVBfTkVBUkVTVCksdGhpcy5nbC5nZW5lcmF0ZU1pcG1hcCh0aGlzLmdsLlRFWFRVUkVfMkQpLHQuZGF0YS50ZXh0dXJlTG9hZGVkPSEwLHQuZGF0YS50ZXh0dXJlV2lkdGg9ZSx0LmRhdGEudGV4dHVyZUhlaWdodD1pfX0se2tleTpcIm9uUHJvdG9uVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5Olwib25QYXJ0aWNsZUNyZWF0ZWRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmRhdGEudGV4dHVyZUxvYWRlZD0hMSx0LmRhdGEudG1hdD1YLmNyZWF0ZSgpLHQuZGF0YS50bWF0WzhdPTEsdC5kYXRhLmltYXQ9WC5jcmVhdGUoKSx0LmRhdGEuaW1hdFs4XT0xLHQuYm9keT94KHQuYm9keSx0aGlzLmFkZEltZzJCb2R5LHQpOih4KHRoaXMuY2lyY2xlQ2FudmFzVVJMLHRoaXMuYWRkSW1nMkJvZHksdCksdC5kYXRhLm9sZFNjYWxlPXQucmFkaXVzL3RoaXMuY2lyY2xlQ2FudmFzUmFkaXVzKX19LHtrZXk6XCJhZGRJbWcyQm9keVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZS5kZWFkfHwoZS5ib2R5PXQsZS5kYXRhLnNyYz10LnNyYyxlLmRhdGEuY2FudmFzPWsodCksZS5kYXRhLm9sZFNjYWxlPTEsdGhpcy5kcmF3SW1nMkNhbnZhcyhlKSl9fSx7a2V5Olwib25QYXJ0aWNsZVVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuZGF0YS50ZXh0dXJlTG9hZGVkJiYodGhpcy51cGRhdGVNYXRyaXgodCksdGhpcy5nbC51bmlmb3JtM2YodGhpcy5zcHJvZ3JhbS5jb2xvcix0LnJnYi5yLzI1NSx0LnJnYi5nLzI1NSx0LnJnYi5iLzI1NSksdGhpcy5nbC51bmlmb3JtTWF0cml4M2Z2KHRoaXMuc3Byb2dyYW0udE1hdFVuaWZvcm0sITEsdGhpcy5tc3RhY2sudG9wKCkpLHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkFSUkFZX0JVRkZFUix0LmRhdGEudmNCdWZmZXIpLHRoaXMuZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLnNwcm9ncmFtLnZwYSwyLHRoaXMuZ2wuRkxPQVQsITEsMCwwKSx0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5BUlJBWV9CVUZGRVIsdC5kYXRhLnRjQnVmZmVyKSx0aGlzLmdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5zcHJvZ3JhbS50Y2EsMix0aGlzLmdsLkZMT0FULCExLDAsMCksdGhpcy5nbC5iaW5kVGV4dHVyZSh0aGlzLmdsLlRFWFRVUkVfMkQsdC5kYXRhLnRleHR1cmUpLHRoaXMuZ2wudW5pZm9ybTFpKHRoaXMuc3Byb2dyYW0uc2FtcGxlclVuaWZvcm0sMCksdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsdGhpcy51bml0SUJ1ZmZlciksdGhpcy5nbC5kcmF3RWxlbWVudHModGhpcy5nbC5UUklBTkdMRVMsNix0aGlzLmdsLlVOU0lHTkVEX1NIT1JULDApLHRoaXMubXN0YWNrLnBvcCgpKX19LHtrZXk6XCJvblBhcnRpY2xlRGVhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcInVwZGF0ZU1hdHJpeFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWQoLXQuZGF0YS50ZXh0dXJlV2lkdGgvMiwtdC5kYXRhLnRleHR1cmVIZWlnaHQvMiksaT1kKHQucC54LHQucC55KSxhPXQucm90YXRpb24qcy5QSV8xODAscj15KGEpLGE9dC5zY2FsZSp0LmRhdGEub2xkU2NhbGUsYT1wKGEsYSksYT1mKGUsYSksYT1mKGEscik7YT1mKGEsaSksWC5pbnZlcnNlKGEsdC5kYXRhLmltYXQpLGFbMl09dC5hbHBoYSx0aGlzLm1zdGFjay5wdXNoKGEpfX1dKSxDPXBlO2Z1bmN0aW9uIHBlKHQpe28odGhpcyxwZSk7dD1oKHRoaXMsKHBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHBlKSkuY2FsbCh0aGlzLHQpKTtyZXR1cm4gdC5nbD10LmVsZW1lbnQuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLHthbnRpYWxpYXM6ITAsc3RlbmNpbDohMSxkZXB0aDohMX0pLHQuZ2x8fGFsZXJ0KFwiU29ycnkgeW91ciBicm93c2VyIGRvIG5vdCBzdXBwZXN0IFdlYkdMIVwiKSx0LmluaXRWYXIoKSx0LnNldE1heFJhZGl1cygpLHQuaW5pdFNoYWRlcnMoKSx0LmluaXRCdWZmZXJzKCksdC5nbC5ibGVuZEVxdWF0aW9uKHQuZ2wuRlVOQ19BREQpLHQuZ2wuYmxlbmRGdW5jKHQuZ2wuU1JDX0FMUEhBLHQuZ2wuT05FX01JTlVTX1NSQ19BTFBIQSksdC5nbC5lbmFibGUodC5nbC5CTEVORCksdC5hZGRJbWcyQm9keT10LmFkZEltZzJCb2R5LmJpbmQodCksdC5uYW1lPVwiV2ViR0xSZW5kZXJlclwiLHR9cihmZSwkdCksJHQ9ZmU7ZnVuY3Rpb24gZmUodCl7byh0aGlzLGZlKTt0PWgodGhpcywoZmUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZmUpKS5jYWxsKHRoaXMsdCkpO3JldHVybiB0Lm5hbWU9XCJDdXN0b21SZW5kZXJlclwiLHR9dmFyIHZlPShyKGdlLGF0KSx0KGdlLFt7a2V5OlwiZ2V0UG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJhbmRvbT1NYXRoLnJhbmRvbSgpLHRoaXMudmVjdG9yLng9dGhpcy54MSt0aGlzLnJhbmRvbSp0aGlzLmxlbmd0aCpNYXRoLmNvcyh0aGlzLmdyYWRpZW50KSx0aGlzLnZlY3Rvci55PXRoaXMueTErdGhpcy5yYW5kb20qdGhpcy5sZW5ndGgqTWF0aC5zaW4odGhpcy5ncmFkaWVudCksdGhpcy52ZWN0b3J9fSx7a2V5OlwiZ2V0RGlyZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmR5LGE9LXRoaXMuZHg7cmV0dXJuIDA8KGkqdCthKmUrdGhpcy5kb3QpKigwPT1hPzE6YSl9fSx7a2V5OlwiZ2V0RGlzdGFuY2VcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybih0aGlzLmR5KnQrLXRoaXMuZHgqZSt0aGlzLmRvdCkvTWF0aC5zcXJ0KHRoaXMueHh5eSl9fSx7a2V5OlwiZ2V0U3ltbWV0cmljXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRHcmFkaWVudCgpLGk9MioodGhpcy5nZXRHcmFkaWVudCgpLWUpLGE9dC54LGU9dC55O3JldHVybiB0Lng9YSpNYXRoLmNvcyhpKS1lKk1hdGguc2luKGkpLHQueT1hKk1hdGguc2luKGkpK2UqTWF0aC5jb3MoaSksdH19LHtrZXk6XCJnZXRHcmFkaWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYXRhbjIodGhpcy5keSx0aGlzLmR4KX19LHtrZXk6XCJyYW5nZU91dFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKE1hdGguYWJzKHRoaXMuZ2V0R3JhZGllbnQoKSk8PXMuUEkvNCl7aWYodC5wLng8PXRoaXMubWF4eCYmdC5wLng+PXRoaXMubWlueClyZXR1cm4hMH1lbHNlIGlmKHQucC55PD10aGlzLm1heHkmJnQucC55Pj10aGlzLm1pbnkpcmV0dXJuITA7cmV0dXJuITF9fSx7a2V5OlwiZ2V0TGVuZ3RoXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZHgqdGhpcy5keCt0aGlzLmR5KnRoaXMuZHkpfX0se2tleTpcImNyb3NzaW5nXCIsdmFsdWU6ZnVuY3Rpb24odCl7XCJkZWFkXCI9PT10aGlzLmNyb3NzVHlwZT9cIj5cIj09PXRoaXMuZGlyZWN0aW9ufHxcIlJcIj09PXRoaXMuZGlyZWN0aW9ufHxcInJpZ2h0XCI9PT10aGlzLmRpcmVjdGlvbnx8XCJkb3duXCI9PT10aGlzLmRpcmVjdGlvbj90aGlzLnJhbmdlT3V0KHQpJiZ0aGlzLmdldERpcmVjdGlvbih0LnAueCx0LnAueSkmJih0LmRlYWQ9ITApOnRoaXMucmFuZ2VPdXQodCkmJih0aGlzLmdldERpcmVjdGlvbih0LnAueCx0LnAueSl8fCh0LmRlYWQ9ITApKTpcImJvdW5kXCI9PT10aGlzLmNyb3NzVHlwZT90aGlzLnJhbmdlT3V0KHQpJiZ0aGlzLmdldERpc3RhbmNlKHQucC54LHQucC55KTw9dC5yYWRpdXMmJigwPT09dGhpcy5keD90LnYueCo9LTE6MD09PXRoaXMuZHk/dC52LnkqPS0xOnRoaXMuZ2V0U3ltbWV0cmljKHQudikpOlwiY3Jvc3NcIj09PXRoaXMuY3Jvc3NUeXBlJiZ0aGlzLmFsZXJ0JiYoY29uc29sZS5lcnJvcihcIlNvcnJ5LCBMaW5lWm9uZSBkb2VzIG5vdCBzdXBwb3J0IGNyb3NzIG1ldGhvZCFcIiksdGhpcy5hbGVydD0hMSl9fV0pLGdlKTtmdW5jdGlvbiBnZSh0LGUsaSxhLHIpe28odGhpcyxnZSk7dmFyIG49aCh0aGlzLChnZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihnZSkpLmNhbGwodGhpcykpO3JldHVybiAwPD1pLXQ/KG4ueDE9dCxuLnkxPWUsbi54Mj1pLG4ueTI9YSk6KG4ueDE9aSxuLnkxPWEsbi54Mj10LG4ueTI9ZSksbi5keD1uLngyLW4ueDEsbi5keT1uLnkyLW4ueTEsbi5taW54PU1hdGgubWluKG4ueDEsbi54Miksbi5taW55PU1hdGgubWluKG4ueTEsbi55Miksbi5tYXh4PU1hdGgubWF4KG4ueDEsbi54Miksbi5tYXh5PU1hdGgubWF4KG4ueTEsbi55Miksbi5kb3Q9bi54MipuLnkxLW4ueDEqbi55MixuLnh4eXk9bi5keCpuLmR4K24uZHkqbi5keSxuLmdyYWRpZW50PW4uZ2V0R3JhZGllbnQoKSxuLmxlbmd0aD1uLmdldExlbmd0aCgpLG4uZGlyZWN0aW9uPVAuaW5pdFZhbHVlKHIsXCI+XCIpLG59dmFyIG1lPShyKGJlLGF0KSx0KGJlLFt7a2V5OlwiZ2V0UG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFuZ2xlPXMuUEl4MipNYXRoLnJhbmRvbSgpLHRoaXMucmFuZG9tUmFkaXVzPU1hdGgucmFuZG9tKCkqdGhpcy5yYWRpdXMsdGhpcy52ZWN0b3IueD10aGlzLngrdGhpcy5yYW5kb21SYWRpdXMqTWF0aC5jb3ModGhpcy5hbmdsZSksdGhpcy52ZWN0b3IueT10aGlzLnkrdGhpcy5yYW5kb21SYWRpdXMqTWF0aC5zaW4odGhpcy5hbmdsZSksdGhpcy52ZWN0b3J9fSx7a2V5Olwic2V0Q2VudGVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLmNlbnRlci54PXQsdGhpcy5jZW50ZXIueT1lfX0se2tleTpcImNyb3NzaW5nXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5wLmRpc3RhbmNlVG8odGhpcy5jZW50ZXIpO1wiZGVhZFwiPT09dGhpcy5jcm9zc1R5cGU/ZS10LnJhZGl1cz50aGlzLnJhZGl1cyYmKHQuZGVhZD0hMCk6XCJib3VuZFwiPT09dGhpcy5jcm9zc1R5cGU/ZSt0LnJhZGl1cz49dGhpcy5yYWRpdXMmJnRoaXMuZ2V0U3ltbWV0cmljKHQpOlwiY3Jvc3NcIj09PXRoaXMuY3Jvc3NUeXBlJiZ0aGlzLmFsZXJ0JiYoY29uc29sZS5lcnJvcihcIlNvcnJ5LCBDaXJjbGVab25lIGRvZXMgbm90IHN1cHBvcnQgY3Jvc3MgbWV0aG9kIVwiKSx0aGlzLmFsZXJ0PSExKX19LHtrZXk6XCJnZXRTeW1tZXRyaWNcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnYuZ2V0R3JhZGllbnQoKSxpPTIqKHRoaXMuZ2V0R3JhZGllbnQodCktZSksYT10LnYueCxlPXQudi55O3Qudi54PWEqTWF0aC5jb3MoaSktZSpNYXRoLnNpbihpKSx0LnYueT1hKk1hdGguc2luKGkpK2UqTWF0aC5jb3MoaSl9fSx7a2V5OlwiZ2V0R3JhZGllbnRcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4tcy5QSV8yK01hdGguYXRhbjIodC5wLnktdGhpcy5jZW50ZXIueSx0LnAueC10aGlzLmNlbnRlci54KX19XSksYmUpO2Z1bmN0aW9uIGJlKHQsZSxpKXtvKHRoaXMsYmUpO3ZhciBhPWgodGhpcywoYmUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoYmUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gYS54PXQsYS55PWUsYS5yYWRpdXM9aSxhLmFuZ2xlPTAsYS5jZW50ZXI9e3g6dCx5OmV9LGF9dmFyIF9lPShyKHhlLGF0KSx0KHhlLFt7a2V5OlwiZ2V0UG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZlY3Rvci54PXRoaXMueCtNYXRoLnJhbmRvbSgpKnRoaXMud2lkdGgsdGhpcy52ZWN0b3IueT10aGlzLnkrTWF0aC5yYW5kb20oKSp0aGlzLmhlaWdodCx0aGlzLnZlY3Rvcn19LHtrZXk6XCJjcm9zc2luZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe1wiZGVhZFwiPT09dGhpcy5jcm9zc1R5cGU/KCh0LnAueCt0LnJhZGl1czx0aGlzLnh8fHQucC54LXQucmFkaXVzPnRoaXMueCt0aGlzLndpZHRoKSYmKHQuZGVhZD0hMCksKHQucC55K3QucmFkaXVzPHRoaXMueXx8dC5wLnktdC5yYWRpdXM+dGhpcy55K3RoaXMuaGVpZ2h0KSYmKHQuZGVhZD0hMCkpOlwiYm91bmRcIj09PXRoaXMuY3Jvc3NUeXBlPyh0LnAueC10LnJhZGl1czx0aGlzLng/KHQucC54PXRoaXMueCt0LnJhZGl1cyx0LnYueCo9LTEpOnQucC54K3QucmFkaXVzPnRoaXMueCt0aGlzLndpZHRoJiYodC5wLng9dGhpcy54K3RoaXMud2lkdGgtdC5yYWRpdXMsdC52LngqPS0xKSx0LnAueS10LnJhZGl1czx0aGlzLnk/KHQucC55PXRoaXMueSt0LnJhZGl1cyx0LnYueSo9LTEpOnQucC55K3QucmFkaXVzPnRoaXMueSt0aGlzLmhlaWdodCYmKHQucC55PXRoaXMueSt0aGlzLmhlaWdodC10LnJhZGl1cyx0LnYueSo9LTEpKTpcImNyb3NzXCI9PT10aGlzLmNyb3NzVHlwZSYmKHQucC54K3QucmFkaXVzPHRoaXMueCYmdC52Lng8PTA/dC5wLng9dGhpcy54K3RoaXMud2lkdGgrdC5yYWRpdXM6dC5wLngtdC5yYWRpdXM+dGhpcy54K3RoaXMud2lkdGgmJjA8PXQudi54JiYodC5wLng9dGhpcy54LXQucmFkaXVzKSx0LnAueSt0LnJhZGl1czx0aGlzLnkmJnQudi55PD0wP3QucC55PXRoaXMueSt0aGlzLmhlaWdodCt0LnJhZGl1czp0LnAueS10LnJhZGl1cz50aGlzLnkrdGhpcy5oZWlnaHQmJjA8PXQudi55JiYodC5wLnk9dGhpcy55LXQucmFkaXVzKSl9fV0pLHhlKTtmdW5jdGlvbiB4ZSh0LGUsaSxhKXtvKHRoaXMseGUpO3ZhciByPWgodGhpcywoeGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoeGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gci54PXQsci55PWUsci53aWR0aD1pLHIuaGVpZ2h0PWEscn1yKGtlLGF0KSx0KGtlLFt7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSxhKXt0aGlzLmltYWdlRGF0YT10LHRoaXMueD1QLmluaXRWYWx1ZShlLDApLHRoaXMueT1QLmluaXRWYWx1ZShpLDApLHRoaXMuZD1QLmluaXRWYWx1ZShhLDIpLHRoaXMudmVjdG9ycz1bXSx0aGlzLnNldFZlY3RvcnMoKX19LHtrZXk6XCJzZXRWZWN0b3JzXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dm9pZCAwLGU9dm9pZCAwLGk9dGhpcy5pbWFnZURhdGEud2lkdGgsYT10aGlzLmltYWdlRGF0YS5oZWlnaHQsdD0wO3Q8aTt0Kz10aGlzLmQpZm9yKGU9MDtlPGE7ZSs9dGhpcy5kKXt2YXIgcj00KigoZT4+MCkqaSsodD4+MCkpOzA8dGhpcy5pbWFnZURhdGEuZGF0YVszK3JdJiZ0aGlzLnZlY3RvcnMucHVzaCh7eDp0K3RoaXMueCx5OmUrdGhpcy55fSl9cmV0dXJuIHRoaXMudmVjdG9yfX0se2tleTpcImdldEJvdW5kXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0PTQqKChlPj4wKSp0aGlzLmltYWdlRGF0YS53aWR0aCsodD4+MCkpO3JldHVybiAwPHRoaXMuaW1hZ2VEYXRhLmRhdGFbMyt0XX19LHtrZXk6XCJnZXRQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9UC5nZXRSYW5kRnJvbUFycmF5KHRoaXMudmVjdG9ycyk7cmV0dXJuIHRoaXMudmVjdG9yLmNvcHkodCl9fSx7a2V5OlwiZ2V0Q29sb3JcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3QtPXRoaXMueDt0PTQqKCgoZS09dGhpcy55KT4+MCkqdGhpcy5pbWFnZURhdGEud2lkdGgrKHQ+PjApKTtyZXR1cm57cjp0aGlzLmltYWdlRGF0YS5kYXRhW3RdLGc6dGhpcy5pbWFnZURhdGEuZGF0YVsxK3RdLGI6dGhpcy5pbWFnZURhdGEuZGF0YVsyK3RdLGE6dGhpcy5pbWFnZURhdGEuZGF0YVszK3RdfX19LHtrZXk6XCJjcm9zc2luZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe1wiZGVhZFwiPT09dGhpcy5jcm9zc1R5cGU/dGhpcy5nZXRCb3VuZCh0LnAueC10aGlzLngsdC5wLnktdGhpcy55KT90LmRlYWQ9ITA6dC5kZWFkPSExOlwiYm91bmRcIj09PXRoaXMuY3Jvc3NUeXBlJiYodGhpcy5nZXRCb3VuZCh0LnAueC10aGlzLngsdC5wLnktdGhpcy55KXx8dC52Lm5lZ2F0ZSgpKX19XSkscj1rZTtmdW5jdGlvbiBrZSh0LGUsaSxhKXtvKHRoaXMsa2UpO3ZhciByPWgodGhpcywoa2UuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2Yoa2UpKS5jYWxsKHRoaXMpKTtyZXR1cm4gci5yZXNldCh0LGUsaSxhKSxyfXQ9e2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24odCxlKXt0LmFkZEV2ZW50TGlzdGVuZXIoXCJQUk9UT05fVVBEQVRFX0FGVEVSXCIsZnVuY3Rpb24oKXtyZXR1cm4gZSgpfSl9LGdldFN0eWxlOmZ1bmN0aW9uKHQpe3Q9SC5oZXhUb1JnYigwPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PXQ/dDpcIiNmZjAwMDBcIik7cmV0dXJuXCJyZ2JhKFwiK3QucitcIiwgXCIrdC5nK1wiLCBcIit0LmIrXCIsIDAuNSlcIn0sZHJhd1pvbmU6ZnVuY3Rpb24odCxlLGksYSl7dmFyIHI9ZS5nZXRDb250ZXh0KFwiMmRcIiksbj10aGlzLmdldFN0eWxlKCk7dGhpcy5hZGRFdmVudExpc3RlbmVyKHQsZnVuY3Rpb24oKXthJiZyLmNsZWFyUmVjdCgwLDAsZS53aWR0aCxlLmhlaWdodCksaSBpbnN0YW5jZW9mIG50PyhyLmJlZ2luUGF0aCgpLHIuZmlsbFN0eWxlPW4sci5hcmMoaS54LGkueSwxMCwwLDIqTWF0aC5QSSwhMCksci5maWxsKCksci5jbG9zZVBhdGgoKSk6aSBpbnN0YW5jZW9mIHZlPyhyLmJlZ2luUGF0aCgpLHIuc3Ryb2tlU3R5bGU9bixyLm1vdmVUbyhpLngxLGkueTEpLHIubGluZVRvKGkueDIsaS55Miksci5zdHJva2UoKSxyLmNsb3NlUGF0aCgpKTppIGluc3RhbmNlb2YgX2U/KHIuYmVnaW5QYXRoKCksci5zdHJva2VTdHlsZT1uLHIuZHJhd1JlY3QoaS54LGkueSxpLndpZHRoLGkuaGVpZ2h0KSxyLnN0cm9rZSgpLHIuY2xvc2VQYXRoKCkpOmkgaW5zdGFuY2VvZiBtZSYmKHIuYmVnaW5QYXRoKCksci5zdHJva2VTdHlsZT1uLHIuYXJjKGkueCxpLnksaS5yYWRpdXMsMCwyKk1hdGguUEksITApLHIuc3Ryb2tlKCksci5jbG9zZVBhdGgoKSl9KX0sZHJhd0VtaXR0ZXI6ZnVuY3Rpb24odCxlLGksYSl7dmFyIHI9ZS5nZXRDb250ZXh0KFwiMmRcIiksbj10aGlzLmdldFN0eWxlKCk7dGhpcy5hZGRFdmVudExpc3RlbmVyKHQsZnVuY3Rpb24oKXthJiZyLmNsZWFyUmVjdCgwLDAsZS53aWR0aCxlLmhlaWdodCksci5iZWdpblBhdGgoKSxyLmZpbGxTdHlsZT1uLHIuYXJjKGkucC54LGkucC55LDEwLDAsMipNYXRoLlBJLCEwKSxyLmZpbGwoKSxyLmNsb3NlUGF0aCgpfSl9fTtyZXR1cm4gVi5QYXJ0aWNsZT1qLFYuUG9vbD1ULFYuVXRpbD1QLFYuQ29sb3JVdGlsPUgsVi5NYXRoVXRpbD1zLFYuVmVjdG9yMkQ9Vi5WZWN0b3I9RixWLlBvbGFyMkQ9Vi5Qb2xhcj1xLFYuQXJyYXlTcGFuPVksVi5SZWN0YW5nbGU9WixWLlJhdGU9SyxWLmVhc2U9VSxWLlNwYW49bCxWLk1hdDM9WCxWLmdldFNwYW49ZnVuY3Rpb24odCxlLGkpe3JldHVybiBuZXcgbCh0LGUsaSl9LFYuY3JlYXRlQXJyYXlTcGFuPVkuY3JlYXRlQXJyYXlTcGFuLFYuSW5pdGlhbGl6ZT1WLkluaXQ9JCxWLkxpZmU9Vi5MPWV0LFYuUG9zaXRpb249Vi5QPW90LFYuVmVsb2NpdHk9Vi5WPWx0LFYuTWFzcz1WLk09Y3QsVi5SYWRpdXM9Vi5SPXl0LFYuQm9keT1WLkI9ZnQsVi5CZWhhdmlvdXI9Z3QsVi5Gb3JjZT1WLkY9YnQsVi5BdHRyYWN0aW9uPVYuQT14dCxWLlJhbmRvbURyaWZ0PVYuUkQ9UHQsVi5HcmF2aXR5PVYuRz1BdCxWLkNvbGxpc2lvbj1SdCxWLkNyb3NzWm9uZT13dCxWLkFscGhhPVN0LFYuU2NhbGU9Vi5TPUR0LFYuUm90YXRlPU10LFYuQ29sb3I9THQsVi5SZXB1bHNpb249TnQsVi5DeWNsb25lPXp0LFYuR3Jhdml0eVdlbGw9cXQsVi5FbWl0dGVyPVl0LFYuQmVoYXZpb3VyRW1pdHRlcj1adCxWLkZvbGxvd0VtaXR0ZXI9S3QsVi5ab25lPWF0LFYuTGluZVpvbmU9dmUsVi5DaXJjbGVab25lPW1lLFYuUG9pbnRab25lPW50LFYuUmVjdFpvbmU9X2UsVi5JbWFnZVpvbmU9cixWLkNhbnZhc1JlbmRlcmVyPWVlLFYuRG9tUmVuZGVyZXI9YWUsVi5FYXNlbFJlbmRlcmVyPW5lLFYuUGl4aVJlbmRlcmVyPXVlLFYuUGl4ZWxSZW5kZXJlcj1vZSxWLldlYkdMUmVuZGVyZXI9Vi5XZWJHbFJlbmRlcmVyPUMsVi5DdXN0b21SZW5kZXJlcj0kdCxWLkRlYnVnPXQsUC5hc3NpZ24oVixVKSxWfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm90b24ubWluLmpzLm1hcFxuIiwiLyohXG4qIFJBRk1hbmFnZXIgdjAuMS4wXG4qXG4qIENvcHlyaWdodCAyMDE4LTIwMTgsIGFqaWVtYXRoIDxhamllbWF0aEBnbWFpbC5jb20+XG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4qXG4qL1xuIWZ1bmN0aW9uKHQsaSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9aSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoaSk6dC5SQUZNYW5hZ2VyPWkoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgdD1bXCJtc1wiLFwibW96XCIsXCJ3ZWJraXRcIixcIm9cIl0saT0wO2k8dC5sZW5ndGgmJiF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOysraSl3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPXdpbmRvd1t0W2ldK1wiUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdLHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZT13aW5kb3dbdFtpXStcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdfHx3aW5kb3dbdFtpXStcIkNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZVwiXX0oKSx7dGltZXI6MCxzdGF0ZTpcInN0b3BcIixhbmltYXRpb25zOltdLGFkZDpmdW5jdGlvbih0KXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06NjAsbj17Y2FsbGJhY2s6dCxmcHM6aSxuOjYwL2kscGFyYW06YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOm51bGwsaTowfTtyZXR1cm4gdGhpcy5hbmltYXRpb25zLnB1c2gobiksdGhpcy5hbmltYXRpb25zLmxlbmd0aD49MSYmdGhpcy5zdGFydCgpLHRoaXN9LGdldEluZGV4OmZ1bmN0aW9uKHQpe2Zvcih2YXIgaT0wO2k8dGhpcy5hbmltYXRpb25zLmxlbmd0aDtpKyspe2lmKHRoaXMuYW5pbWF0aW9uc1tpXS5jYWxsYmFjaz09PXQpcmV0dXJuIGl9cmV0dXJuLTF9LHJlbW92ZTpmdW5jdGlvbih0KXtpZighKHRoaXMuZ2V0SW5kZXgodCk8MCkpcmV0dXJuIHRoaXMuZGVsZXRlTWFwKHQpLDA9PT10aGlzLmFuaW1hdGlvbnMubGVuZ3RoJiZ0aGlzLnN0b3AoKSx0aGlzfSxkZWxldGVNYXA6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5nZXRJbmRleCh0KSxuPXRoaXMuYW5pbWF0aW9uc1tpXTtmb3IodmFyIGUgaW4gbilkZWxldGUgbltlXTt0aGlzLmFuaW1hdGlvbnMuc3BsaWNlKGksMSl9LHN0YXJ0OmZ1bmN0aW9uKCl7aWYoXCJzdGFydFwiIT09dGhpcy5zdGF0ZSlyZXR1cm4gdGhpcy5zdGF0ZT1cInN0YXJ0XCIsdGhpcy50aWNrKCksdGhpc30sc3RvcDpmdW5jdGlvbigpe2lmKFwic3RvcFwiIT09dGhpcy5zdGF0ZSlyZXR1cm4gdGhpcy5zdGF0ZT1cInN0b3BcIixjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnRpbWVyKSx0aGlzfSx0aWNrOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnRpbWVyPXJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe3QudGljaygpfSk7Zm9yKHZhciBpPTA7aTx0aGlzLmFuaW1hdGlvbnMubGVuZ3RoO2krKyl7dmFyIG49dGhpcy5hbmltYXRpb25zW2ldLGU9bi5jYWxsYmFjayxhPW4ucGFyYW07bi5pKyssbi5pPj1uLm4mJihlKGEpLG4uaT0wKX19fX0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UkFGTWFuYWdlci5taW4uanMubWFwXG4iXSwic291cmNlUm9vdCI6IiJ9